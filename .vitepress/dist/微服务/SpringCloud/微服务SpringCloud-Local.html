<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸€ã€å¾®æœåŠ¡-æœåŠ¡æ‹†åˆ† | å°é¹çš„Notes</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.CkrmVRLN.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CxwkthDp.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BdJ2k644.js">
    <link rel="modulepreload" href="/assets/chunks/framework.Db__vQwl.js">
    <link rel="modulepreload" href="/assets/å¾®æœåŠ¡_SpringCloud_å¾®æœåŠ¡SpringCloud-Local.md.BKZhJSPB.lean.js">
    <link rel="icon" href="/blog-logo.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/blog-logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>å°é¹çš„Notes</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5><svg t="1744292309892" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19890" width="16" height="16"><path d="M1010.992 474.558h-55.764v-16.32h47.604v-35.476L648.576 147.766H386.446l-93.214 72.362a8.16 8.16 0 0 1-13.164-6.444V16.32H126.772v329.03c0 2.536-1.18 4.93-3.192 6.474l-102.41 78.564v27.85h48.926v16.32H13.008a8.162 8.162 0 0 1-8.16-8.16v-40.034c0-2.536 1.18-4.93 3.192-6.474l102.41-78.564V8.16A8.16 8.16 0 0 1 118.61 0h169.616a8.162 8.162 0 0 1 8.16 8.16v188.86l82.26-63.858a8.16 8.16 0 0 1 5.004-1.714h267.718a8.16 8.16 0 0 1 5.004 1.714l359.62 279.158a8.154 8.154 0 0 1 3.156 6.446v47.632a8.156 8.156 0 0 1-8.156 8.16z" fill="#4A555F" p-id="19891"></path><path d="M261.03 231.658V35.358H145.812v285.834z" fill="#F58E6F" p-id="19892"></path><path d="M926.318 1024H636.784a8.162 8.162 0 0 1-8.16-8.16V682.63H397.14V1015.84a8.16 8.16 0 0 1-8.16 8.16H104.38a8.162 8.162 0 0 1-8.16-8.16V412.348c0-2.524 1.168-4.904 3.16-6.45L394.462 177.304a8.168 8.168 0 0 1 4.998-1.71h231.78c1.812 0 3.564 0.602 4.998 1.71l295.076 228.594a8.168 8.168 0 0 1 3.16 6.45V1015.84a8.154 8.154 0 0 1-8.156 8.16z m-281.376-16.32H918.16V416.348L628.454 191.914H402.25L112.54 416.348V1007.68h268.28V674.47a8.16 8.16 0 0 1 8.16-8.16h247.802a8.162 8.162 0 0 1 8.16 8.16V1007.68z" fill="#4A555F" p-id="19893"></path><path d="M621.914 210.946H408.784L131.572 425.708v562.91h230.212V647.272h302.18v341.346h235.162V425.708L621.914 210.946z m-106.564 328.998c-58.968 0-106.782-47.816-106.782-106.782 0-58.968 47.816-106.786 106.782-106.786s106.784 47.816 106.784 106.786c-0.002 58.966-47.818 106.782-106.784 106.782z" fill="#71CCE0" p-id="19894"></path><path d="M515.35 548.098c-63.376 0-114.932-51.558-114.932-114.932 0-63.372 51.556-114.932 114.932-114.932s114.936 51.558 114.936 114.932c0 63.372-51.56 114.932-114.936 114.932z m0-213.546c-54.376 0-98.612 44.236-98.612 98.612s44.236 98.614 98.612 98.614 98.618-44.238 98.618-98.614-44.242-98.612-98.618-98.612z" fill="#4A555F" p-id="19895"></path><path d="M515.352 512.738c-43.874 0-79.572-35.698-79.572-79.574s35.698-79.572 79.572-79.572 79.572 35.696 79.572 79.572-35.698 79.574-79.572 79.574z" fill="#FFD452" p-id="19896"></path><path d="M507.19 326.392h16.32v213.544h-16.32z" fill="#4A555F" p-id="19897"></path><path d="M408.578 425.004h213.544v16.32H408.578zM13.008 1007.672H104.38v16.32H13.008zM926.318 1007.672h91.376v16.32h-91.376z" fill="#4A555F" p-id="19898"></path></svg>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/self-introduction.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5><svg t="1744291383879" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14002" width="16" height="16"><path d="M879.567281 77.507554v66.841866H211.18062a66.745875 66.745875 0 0 0-66.841866 66.841865V935.274169H77.507554A66.916526 66.916526 0 0 1 10.665688 868.421638V77.507554A66.895194 66.895194 0 0 1 77.507554 10.665688H812.725416a66.895194 66.895194 0 0 1 66.841865 66.841866z" fill="#02C9ED" p-id="14003"></path><path d="M912.982881 133.673066h-22.749912V77.507554C890.232969 34.770142 855.462827 0 812.725416 0H77.507554C34.770142 0 0 34.770142 0 77.507554v790.914084c0 42.737411 34.770142 77.507554 77.507554 77.507553h56.176178v0.479956c0 42.737411 34.770142 77.507554 77.507553 77.507554h261.213362a10.665688 10.665688 0 1 0 0-21.331376H211.18062a56.240172 56.240172 0 0 1-56.176178-56.176178V211.18062a56.240172 56.240172 0 0 1 56.176178-56.176178h701.802261a56.240172 56.240172 0 0 1 56.176178 56.176178v120.127642a10.665688 10.665688 0 1 0 21.331376 0V211.18062c-0.010666-42.737411-34.780808-77.507554-77.507554-77.507554z m-701.802261 0c-42.737411 0-77.507554 34.770142-77.507554 77.507554v713.417196H77.507554A56.250838 56.250838 0 0 1 21.331376 868.421638V77.507554A56.240172 56.240172 0 0 1 77.507554 21.331376H812.725416a56.240172 56.240172 0 0 1 56.176178 56.176178v56.176178H211.18062zM979.814082 489.203105a10.665688 10.665688 0 0 1-10.665688-10.665687v-62.4796a10.665688 10.665688 0 1 1 21.331376 0v62.4796a10.665688 10.665688 0 0 1-10.665688 10.665687z" fill="#333333" p-id="14004"></path><path d="M628.923616 641.029172H391.270759a10.665688 10.665688 0 1 1 0-21.331376h237.652857a10.665688 10.665688 0 1 1 0 21.331376zM320.717234 641.029172h-71.577431a10.665688 10.665688 0 1 1 0-21.331376h71.577431a10.665688 10.665688 0 1 1 0 21.331376zM523.098661 821.908573H249.139803a10.665688 10.665688 0 1 1 0-21.331376h273.958858a10.665688 10.665688 0 1 1 0 21.331376z" fill="#333333" p-id="14005"></path><path d="M716.243603 958.909333L577.26969 1013.240347l21.064734-147.719777 154.428494-194.979439 117.90918 93.388763zM884.281515 746.74747l-117.909179-93.388763L809.525709 598.878374a33.596917 33.596917 0 0 1 47.195669-5.482164l65.231347 51.664592a33.596917 33.596917 0 0 1 5.482164 47.195669l-43.153374 54.490999z" fill="#02C9ED" p-id="14006"></path><path d="M971.238869 636.688237l-65.220682-51.664592a44.305267 44.305267 0 0 0-62.191626 7.220671l-43.153373 54.480334-168.048578 212.161863a10.804342 10.804342 0 0 0-2.197132 5.108864l-21.064733 147.730443a10.697685 10.697685 0 0 0 14.452007 11.454949l138.973913-54.34168a10.623025 10.623025 0 0 0 4.479589-3.317029l168.037912-212.161863 43.153373-54.480334a44.326599 44.326599 0 0 0-7.22067-62.191626zM752.336291 950.01415l-119.274388 46.630387 18.078341-126.772366 159.622685-201.538838 99.638856 78.915425 1.546525 1.226554-159.612019 201.538838z m209.39945-264.381071l-36.529981 46.118434-101.185381-80.141978 36.529981-46.118435a22.963226 22.963226 0 0 1 32.221043-3.743656l65.220681 51.664592c4.79956 3.796985 7.839281 9.247151 8.543216 15.337259a22.781909 22.781909 0 0 1-4.799559 16.883784zM1013.240347 1012.760391H818.30357a10.665688 10.665688 0 1 1 0-21.331375H1013.240347a10.665688 10.665688 0 1 1 0 21.331375zM1013.240347 894.595236h-83.544333a10.665688 10.665688 0 1 1 0-21.331376H1013.240347a10.665688 10.665688 0 1 1 0 21.331376zM250.387688 482.419728a10.665688 10.665688 0 0 1-6.538066-19.091581l172.453507-133.673066a10.623025 10.623025 0 0 1 15.273265 2.32512l72.42002 103.457172 286.779016-162.321104a10.665688 10.665688 0 0 1 14.601327 4.138287l61.263711 111.392444a10.655022 10.655022 0 1 1-18.686285 10.271058l-56.069522-101.931979-285.819103 161.766488a10.665688 10.665688 0 0 1-13.993383-3.16771l-71.556099-102.219952-163.600987 126.815028a10.591028 10.591028 0 0 1-6.527401 2.239795z" fill="#333333" p-id="14007"></path><path d="M988.879916 70.212223a8.009932 8.009932 0 0 1-0.181316-15.998532l21.107396-0.479956h0.181317a8.009932 8.009932 0 0 1 0.181316 15.998532l-21.107396 0.479956h-0.181317zM919.510282 71.769414a7.999266 7.999266 0 0 1-0.181316-15.998532l21.107396-0.46929h0.181317a7.999266 7.999266 0 0 1 0.181316 15.998531l-21.107396 0.469291h-0.181317zM964.188849 46.619722a8.009932 8.009932 0 0 1-7.999266-7.81795l-0.479956-21.09673a8.009932 8.009932 0 0 1 7.817949-8.180583h0.181317c4.330269 0 7.892609 3.466349 7.999266 7.817949l0.479956 21.107397a8.009932 8.009932 0 0 1-7.817949 8.180582l-0.181317-0.010665zM965.767371 115.989356a8.009932 8.009932 0 0 1-7.999266-7.81795l-0.479956-21.107396a8.009932 8.009932 0 0 1 7.817949-8.180583h0.181317c4.330269 0 7.892609 3.466349 7.999266 7.81795l0.479956 21.107396a8.009932 8.009932 0 0 1-7.81795 8.180583h-0.181316z" fill="#FD5308" p-id="14008"></path><path d="M257.725682 911.436357a7.999266 7.999266 0 0 1-5.652815-13.662746l14.931963-14.921298a7.999266 7.999266 0 1 1 11.316295 11.316295l-14.931963 14.921297a7.977935 7.977935 0 0 1-5.66348 2.346452zM208.663517 960.509187a7.999266 7.999266 0 0 1-5.652814-13.662747l14.921297-14.921297a7.999266 7.999266 0 1 1 11.316295 11.316295l-14.921297 14.921297a8.020597 8.020597 0 0 1-5.663481 2.346452zM223.59548 911.436357a7.935272 7.935272 0 0 1-5.652814-2.346452l-14.921297-14.921297a7.999266 7.999266 0 1 1 11.316294-11.316295l14.921298 14.921298a7.999266 7.999266 0 0 1-5.663481 13.662746zM272.657645 960.509187a7.935272 7.935272 0 0 1-5.652815-2.346452l-14.931963-14.921297a7.999266 7.999266 0 1 1 11.316295-11.316295l14.931963 14.921297a7.999266 7.999266 0 0 1-5.66348 13.662747z" fill="#FEB908" p-id="14009"></path></svg> ç¬”è®°æ±‡æ€»</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f><svg t="1744291776214" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15357" width="16" height="16"><path d="M19.398 511.991a476.817 476.817 0 1 0 953.634 0 476.817 476.817 0 1 0-953.634 0z" fill="#FFDB6C" p-id="15358"></path><path d="M598.392 918.425c-263.338 0-476.815-213.477-476.815-476.814 0-140.691 60.946-267.132 157.865-354.408C125.075 166.129 19.398 326.723 19.398 512c0 263.338 213.477 476.815 476.815 476.815 122.647 0 234.463-46.322 318.95-122.403-65.037 33.25-138.711 52.012-216.771 52.012z" fill="#FFB04C" p-id="15359"></path><path d="M291.304 518.837c-35.41 0-64.119 28.706-64.119 64.114h128.233c0.004-35.41-28.702-64.114-64.114-64.114z m559.263 0c-35.41 0-64.118 28.706-64.118 64.114H914.68c0-35.41-28.706-64.114-64.114-64.114z" fill="#F9A880" p-id="15360"></path><path d="M221.761 253.95c124.501-28.575 225.288-18.74 336.93 7.278 16.556 3.856 34.044 8.158 52.517 8.722 30.76 0.942 65.338-6.714 95.15-14.205 117.7-29.566 209.645-14.188 298.248 4.745l-6.546 52.36c-13.832 0.306-18.182 6.756-22.134 19.346-20.68 65.89-3.068 179.261-155.957 165.93-100.58-8.77-129.385-36.327-177.321-157.492-4.078-10.306-6.73-27.338-30.022-26.708-13.152 0.354-24.915 2.68-29.017 25.53-7.646 42.576-65.786 158.259-183.83 158.13-104.265-0.111-144.04-54.231-148.788-173.486-0.59-14.806-13.492-17.618-21.234-17.792l-7.996-52.359z" fill="#56586F" p-id="15361"></path><path d="M402.564 237.47l-72.812 248.31c19.162 7.885 42.292 11.777 70.028 11.805 0.488 0 0.97-0.018 1.458-0.02l74.08-252.636c-24.227-3.664-48.35-6.228-72.754-7.46z m452.795 2.011c-24.232-0.776-49.386 0-75.806 2.95L714.55 464.107c17.776 14.928 38.762 23.598 66.469 28.894l74.34-253.52z" fill="#737891" p-id="15362"></path><path d="M595.54 861.317c-106.593 0-193.006-86.412-193.006-193.005h386.01c0.003 106.593-86.41 193.005-193.005 193.005z" fill="#7F184C" p-id="15363"></path><path d="M449.627 668.308v30.128c0 12.704 10.298 23 23 23H718.45c12.704 0 23-10.298 23-23v-30.128H449.627z" fill="#F2F2F2" p-id="15364"></path><path d="M599.592 781.243c-52.173-24.24-110.067-20.717-157.015 4.422 35.278 45.98 90.754 75.65 153.186 75.65a192.281 192.281 0 0 0 77.345-16.17c-17.376-26.886-42.292-49.394-73.516-63.902z" fill="#FC4C59" p-id="15365"></path><path d="M1008.658 241.52c-92.633-19.79-185.813-35.035-307.03-4.587-30.182 7.584-61.994 14.474-89.83 13.63-15.553-0.476-31.053-4.096-46.043-7.602l-2.664-0.624c-97.266-22.67-206.465-39.242-345.672-7.294a19.398 19.398 0 0 0-14.836 21.835l8 52.36a19.396 19.396 0 0 0 18.74 16.462c0.95 0.02 1.73 0.116 2.328 0.23 2.75 66.008 15.936 111.137 41.477 141.965 27.314 32.968 68.734 49.026 126.628 49.086h0.218c71.189 0 119.585-37.84 147.655-69.604 31.478-35.619 50.343-78.149 55.075-104.499 1.238-6.892 2.956-8.602 2.964-8.61 0.282-0.184 1.66-0.8 7.49-0.956 6.04-0.158 6.262-0.162 9.702 9.646 0.592 1.688 1.164 3.308 1.758 4.806 23.394 59.132 43.932 101.2 73.998 128.193 31.794 28.546 70.837 37.23 119.673 41.488 8.802 0.768 17.228 1.154 25.284 1.154 48.494 0 83.572-13.95 106.79-42.338 0.59-0.722 1.123-1.47 1.689-2.2a463.86 463.86 0 0 1 1.578 37.938c0 252.221-205.198 457.417-457.417 457.417S38.794 764.222 38.794 512 243.99 54.584 496.21 54.584c101.06 0 196.847 32.29 277.004 93.38 8.52 6.495 20.694 4.85 27.184-3.67 6.494-8.521 4.852-20.693-3.67-27.187-86.97-66.28-190.89-101.317-300.52-101.317C222.599 15.788 0 238.39 0 512.001s222.6 496.213 496.209 496.213c273.614 0 496.213-222.6 496.213-496.213 0-36.18-3.96-72.218-11.682-107.253 1.916-8.998 3.5-17.934 5.014-26.564 2.584-14.68 5.022-28.548 8.674-40.178 0.988-3.142 1.696-4.792 2.12-5.628 0.44-0.06 1.074-0.118 1.938-0.138a19.396 19.396 0 0 0 18.818-16.986l6.544-52.36a19.388 19.388 0 0 0-15.19-21.375z m-28.152 55.36c-15.966 6.82-20.744 22.038-23.09 29.508-4.404 14.042-7.058 29.116-9.864 45.078-1.282 7.29-2.552 14.458-3.95 21.428a19.32 19.32 0 0 0-2.494 11.466c-11.195 47.157-33.233 81.96-119.455 74.445-91.15-7.948-115.22-29.676-160.97-145.305-0.413-1.048-0.805-2.18-1.217-3.36-3.764-10.738-12.478-35.624-45.532-35.624-0.6 0-1.212 0.008-1.828 0.026-11.034 0.298-40.337 1.086-47.587 41.49-6.546 36.456-59.75 142.163-164.55 142.163h-0.169c-89.856-0.098-124.934-42.07-129.424-154.86-0.62-15.657-9.54-27.72-23.465-33.197l-3.22-21.074c123.265-24.95 222.042-9.574 310.598 11.062l2.64 0.616c16.058 3.756 34.26 8.01 53.685 8.604 32.644 0.99 67.57-6.514 100.47-14.78 105.683-26.549 189.731-15.626 272.06 1.25l-2.638 21.064z" p-id="15366"></path><path d="M807.943 668.308c0-10.712-8.682-19.398-19.398-19.398h-386.01a19.396 19.396 0 0 0-19.399 19.398c0 117.12 95.283 212.403 212.403 212.403s212.404-95.282 212.404-212.403z m-384.935 19.398h345.065c-9.673 86.635-83.359 154.21-172.532 154.21s-162.86-67.575-172.533-154.21zM813.247 174.241a19.398 19.398 0 1 0 38.796 0 19.398 19.398 0 1 0-38.796 0z" p-id="15367"></path></svg> Funny Web</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://chaz.fun/phone/n93i/" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ğŸ“± 3Dç¿»ç›–æ‰‹æœº</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.siena.film/" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ğŸ¬ Siena Film</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.jiejoe.com/home" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>âœ¨ è®¾è®¡åŠ¨æ•ˆ</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.crazygames.com/" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>ğŸ² ç–¯ç‹‚ 3D æ¸¸æˆåº“</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://github.com/XiaoPeng03182/blogs-vitepress" target="_blank" rel="noreferrer" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5><svg t="1744296872060" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20947" width="16" height="16"><path d="M0 556.416C0 602.816 4.352 644.8 13.024 682.336 21.696 719.904 33.728 752.544 49.088 780.224 64.416 807.936 83.968 832.32 107.648 853.344 131.36 874.368 157.056 891.552 184.768 904.928 212.48 918.272 244.096 929.12 279.648 937.472 315.2 945.824 351.52 951.648 388.576 955.008 425.632 958.336 466.336 960 510.752 960 555.488 960 596.384 958.336 633.44 955.008 670.496 951.648 706.88 945.824 742.592 937.472 778.304 929.12 810.112 918.272 837.984 904.928 865.856 891.552 891.712 874.368 915.584 853.344 939.456 832.32 959.168 807.936 974.688 780.224 990.208 752.544 1002.304 719.904 1010.976 682.336 1019.648 644.8 1024 602.816 1024 556.416 1024 473.632 996.288 402.016 940.896 341.6 943.872 333.568 946.624 324.48 949.152 314.304 951.648 304.128 953.984 289.6 956.16 270.752 958.336 251.872 957.504 230.112 953.664 205.408 949.824 180.704 942.72 155.488 932.352 129.792L924.864 128.288C919.52 127.296 910.752 127.52 898.56 129.024 886.368 130.528 872.192 133.536 856 138.048 839.808 142.56 818.944 151.232 793.408 164.096 767.872 176.928 740.928 193.056 712.544 212.416 663.808 199.04 596.864 192.384 511.744 192.384 426.944 192.384 360.192 199.04 311.456 212.416 283.072 193.056 255.968 176.928 230.08 164.096 204.224 151.232 183.616 142.56 168.256 138.048 152.896 133.536 138.528 130.624 125.184 129.28 111.84 127.936 103.392 127.52 99.904 128.032 96.384 128.544 93.632 129.12 91.648 129.792 81.28 155.488 74.176 180.672 70.368 205.408 66.528 230.112 65.696 251.872 67.84 270.752 70.016 289.6 72.352 304.128 74.848 314.304 77.376 324.48 80.128 333.568 83.136 341.6 27.712 402.016 0 473.632 0 556.416ZM125.696 682.08C125.696 634.016 147.552 589.952 191.296 549.888 204.288 537.888 219.488 528.8 236.832 522.592 254.208 516.448 273.824 512.928 295.68 512.096 317.536 511.264 338.496 511.424 358.528 512.608 378.56 513.76 403.264 515.36 432.64 517.344 462.016 519.36 487.392 520.352 508.736 520.352 530.112 520.352 555.488 519.36 584.864 517.344 614.24 515.36 638.944 513.76 658.976 512.608 679.008 511.424 699.936 511.264 721.792 512.096 743.68 512.928 763.296 516.448 780.64 522.592 798.016 528.768 813.184 537.888 826.208 549.888 869.952 589.28 891.808 633.344 891.808 682.08 891.808 710.816 888.224 736.256 881.024 758.464 873.856 780.672 864.672 799.264 853.504 814.304 842.304 829.312 826.784 842.08 806.944 852.608 787.072 863.104 767.712 871.2 748.832 876.896 729.984 882.56 705.792 886.976 676.224 890.144 646.688 893.312 620.32 895.232 597.12 895.904 573.92 896.576 544.448 896.928 508.736 896.928 473.024 896.928 443.552 896.576 420.352 895.904 397.152 895.232 370.784 893.312 341.248 890.144 311.712 886.976 287.52 882.56 268.64 876.896 249.792 871.2 230.432 863.104 210.56 852.608 190.688 842.08 175.168 829.312 164 814.304 152.8 799.264 143.616 780.672 136.448 758.464 129.28 736.256 125.696 710.816 125.696 682.08ZM640 672A2 3 2520 1 0 768 672 2 3 2520 1 0 640 672zM256 672A2 3 2520 1 0 384 672 2 3 2520 1 0 256 672z" fill="#000000" p-id="20948"></path></svg> Githubä»“åº“</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://wordpress.xiaopeng.online/ç•™è¨€æ¿/" target="_blank" rel="noreferrer" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5><svg t="1744354778687" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2486" width="16" height="16"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#FFFFFF" p-id="2487"></path><path d="M685.6 306.4H350.4L499.2 176c11.2-9.6 27.2-9.6 38.4 0l148 130.4z m-268-25.6h200L520 195.2c-1.6-0.8-3.2-0.8-4 0L417.6 280.8z" fill="#333333" p-id="2488"></path><path d="M208 288h624c17.6 0 32 14.4 32 32v464c0 17.6-14.4 32-32 32H208c-17.6 0-32-14.4-32-32V320c0-17.6 14.4-32 32-32z" fill="#09C45E" p-id="2489"></path><path d="M832 827.2H208c-24 0-43.2-19.2-43.2-43.2V320c0-24 19.2-43.2 43.2-43.2h624c24 0 43.2 19.2 43.2 43.2v464c0 24-19.2 43.2-43.2 43.2z m-624-528c-11.2 0-20.8 8.8-20.8 20.8v464c0 11.2 8.8 20.8 20.8 20.8h624c11.2 0 20.8-8.8 20.8-20.8V320c0-11.2-8.8-20.8-20.8-20.8H208z" fill="#333333" p-id="2490"></path><path d="M744 452.8H536c-7.2 0-12.8-5.6-12.8-12.8s5.6-12.8 12.8-12.8h208c7.2 0 12.8 5.6 12.8 12.8s-5.6 12.8-12.8 12.8zM744 512.8H536c-7.2 0-12.8-5.6-12.8-12.8s5.6-12.8 12.8-12.8h208c7.2 0 12.8 5.6 12.8 12.8s-5.6 12.8-12.8 12.8zM664 576.8H536c-7.2 0-12.8-5.6-12.8-12.8s5.6-12.8 12.8-12.8h128c7.2 0 12.8 5.6 12.8 12.8s-5.6 12.8-12.8 12.8zM288 752h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H288c-17.6 0-32-14.4-32-32s14.4-32 32-32z" fill="#FFFFFF" p-id="2491"></path><path d="M384 827.2H288c-24 0-43.2-19.2-43.2-43.2s19.2-43.2 43.2-43.2h96c24 0 43.2 19.2 43.2 43.2s-19.2 43.2-43.2 43.2z m-96-64c-11.2 0-20.8 8.8-20.8 20.8s8.8 20.8 20.8 20.8h96c11.2 0 20.8-8.8 20.8-20.8s-8.8-20.8-20.8-20.8H288z" fill="#333333" p-id="2492"></path><path d="M520 216m-24 0a24 24 0 1 0 48 0 24 24 0 1 0-48 0Z" fill="#333333" p-id="2493"></path></svg> ç•™è¨€æ¿</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://wordpress.xiaopeng.online/ç¢ç¢å¿µ/" target="_blank" rel="noreferrer" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5><svg t="1744357628539" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6714" width="16" height="16"><path d="M197.333333 154.666667m-17.066666 0a17.066667 17.066667 0 1 0 34.133333 0 17.066667 17.066667 0 1 0-34.133333 0Z" fill="#71BCFF" p-id="6715"></path><path d="M810.666667 125.866667m-23.466667 0a23.466667 23.466667 0 1 0 46.933333 0 23.466667 23.466667 0 1 0-46.933333 0Z" fill="#71BCFF" p-id="6716"></path><path d="M250.666667 870.4m-21.333334 0a21.333333 21.333333 0 1 0 42.666667 0 21.333333 21.333333 0 1 0-42.666667 0Z" fill="#71BCFF" p-id="6717"></path><path d="M396.8 136.533333m-10.666667 0a10.666667 10.666667 0 1 0 21.333334 0 10.666667 10.666667 0 1 0-21.333334 0Z" fill="#71BCFF" p-id="6718"></path><path d="M150.4 790.4m-10.666667 0a10.666667 10.666667 0 1 0 21.333334 0 10.666667 10.666667 0 1 0-21.333334 0Z" fill="#71BCFF" p-id="6719"></path><path d="M231.466667 86.4m-7.466667 0a7.466667 7.466667 0 1 0 14.933333 0 7.466667 7.466667 0 1 0-14.933333 0Z" fill="#71BCFF" p-id="6720"></path><path d="M104.533333 104.533333L117.333333 84.266667c1.066667-2.133333 1.066667-5.333333-1.066666-6.4-2.133333-1.066667-5.333333-1.066667-6.4 1.066666L97.066667 99.2 77.866667 86.4c-2.133333-1.066667-5.333333-1.066667-6.4 1.066667s-1.066667 5.333333 1.066666 6.4L91.733333 106.666667l-12.8 20.266666c-1.066667 2.133333-1.066667 5.333333 1.066667 6.4 2.133333 1.066667 5.333333 1.066667 6.4-1.066666l12.8-20.266667 19.2 12.8c2.133333 1.066667 5.333333 1.066667 6.4-1.066667s1.066667-5.333333-1.066667-6.4L104.533333 104.533333zM929.066667 100.266667l-17.066667 2.133333-1.066667-17.066667c0-2.133333-2.133333-3.2-3.2-3.2-2.133333 0-3.2 2.133333-3.2 3.2l1.066667 17.066667-17.066667 2.133333c-2.133333 0-3.2 2.133333-3.2 3.2 0 2.133333 2.133333 3.2 3.2 3.2l17.066667-2.133333 1.066667 17.066667c0 2.133333 2.133333 3.2 3.2 3.2 2.133333 0 3.2-2.133333 3.2-3.2l-1.066667-17.066667 17.066667-2.133333c2.133333 0 3.2-2.133333 3.2-3.2 0-2.133333-1.066667-3.2-3.2-3.2zM172.8 874.666667l-17.066667-2.133334 2.133334-17.066666c0-2.133333-1.066667-3.2-3.2-3.2-2.133333 0-3.2 1.066667-3.2 3.2l-2.133334 17.066666-17.066666-2.133333c-2.133333 0-3.2 1.066667-3.2 3.2 0 2.133333 1.066667 3.2 3.2 3.2l17.066666 2.133333-2.133333 17.066667c0 2.133333 1.066667 3.2 3.2 3.2 2.133333 0 3.2-1.066667 3.2-3.2l2.133333-17.066667 17.066667 2.133334c2.133333 0 3.2-1.066667 3.2-3.2s-1.066667-3.2-3.2-3.2zM871.466667 334.933333v-19.2c0-27.733333-22.4-50.133333-49.066667-50.133333h-576c-26.666667 0-49.066667 22.4-49.066667 50.133333v365.866667c0 27.733333 22.4 50.133333 49.066667 50.133333h25.6v19.2c0 27.733333 22.4 50.133333 49.066667 50.133334h397.866666l5.333334 62.933333 86.4-62.933333h85.333333c26.666667 0 49.066667-22.4 49.066667-50.133334V385.066667c0-27.733333-22.4-50.133333-49.066667-50.133334" fill="#71BCFF" p-id="6721"></path><path d="M848 281.6h-9.6v-3.2c0-36.266667-28.8-66.133333-65.066667-66.133333h-576c-36.266667 0-65.066667 29.866667-65.066666 66.133333v365.866667c0 36.266667 28.8 66.133333 65.066666 66.133333h9.6v3.2c0 36.266667 28.8 66.133333 65.066667 66.133333h382.933333l4.266667 48c0 5.333333 4.266667 10.666667 9.6 12.8 2.133333 1.066667 4.266667 1.066667 6.4 1.066667 3.2 0 6.4-1.066667 9.6-3.2l82.133333-59.733333h82.133334c36.266667 0 65.066667-29.866667 65.066666-66.133334V347.733333c-1.066667-36.266667-30.933333-66.133333-66.133333-66.133333z m-650.666667 396.8c-18.133333 0-33.066667-14.933333-33.066666-34.133333V278.4c0-19.2 14.933333-34.133333 33.066666-34.133333h576c18.133333 0 33.066667 14.933333 33.066667 34.133333v3.2H272c-36.266667 0-65.066667 29.866667-65.066667 66.133333v330.666667h-9.6z m683.733334 35.2c0 19.2-14.933333 34.133333-33.066667 34.133333h-86.4c-3.2 0-6.4 1.066667-9.6 3.2l-62.933333 45.866667-3.2-34.133333c-1.066667-8.533333-7.466667-14.933333-16-14.933334H272c-18.133333 0-33.066667-14.933333-33.066667-34.133333V347.733333c0-19.2 14.933333-34.133333 33.066667-34.133333h576c18.133333 0 33.066667 14.933333 33.066667 34.133333v365.866667z" fill="#3A3A3A" p-id="6722"></path><path d="M723.2 425.6H325.333333c-8.533333 0-16-7.466667-16-16s7.466667-16 16-16h396.8c8.533333 0 16 7.466667 16 16s-6.4 16-14.933333 16z" fill="#FFFFFF" p-id="6723"></path><path d="M648.533333 530.133333H325.333333c-8.533333 0-16-7.466667-16-16s7.466667-16 16-16h322.133334c8.533333 0 16 7.466667 16 16s-6.4 16-14.933334 16z" fill="#FFFFFF" p-id="6724"></path><path d="M535.466667 636.8H325.333333c-8.533333 0-16-7.466667-16-16s7.466667-16 16-16h209.066667c8.533333 0 16 7.466667 16 16s-6.4 16-14.933333 16z" fill="#FFFFFF" p-id="6725"></path></svg> è¯´è¯´</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f><svg t="1744362861554" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3517" width="16" height="16"><path d="M885.01925 941.423455l-42.756639 69.619901-42.756639-69.619901h85.513278z" fill="#06C7CA" p-id="3518"></path><path d="M914.387447 45.347951v35.760098H768.669365V45.347951a31.700377 31.700377 0 0 1 30.663853-32.391394h84.303999a31.786754 31.786754 0 0 1 30.75023 32.391394z" fill="#FF8875" p-id="3519"></path><path d="M914.30107 81.108049v57.181606h-72.383967L768.669365 138.203278V81.108049h145.631705z" fill="#FFDB93" p-id="3520"></path><path d="M915.078463 138.289655v754.071636l-73.16136-52.344491V138.289655h73.16136zM841.917103 138.289655v701.727145l-73.247738 52.344491V138.203278l73.247738 0.086377z" fill="#06C7CA" p-id="3521"></path><path d="M605.589497 644.20003v362.783605L108.921467 509.624588 605.589497 12.956557v631.243473z m-140.362704 23.149049V352.245605L307.675056 509.624588z" fill="#FFDB93" p-id="3522"></path><path d="M540.115694 186.228917h65.646557v25.913115h-65.646557zM540.115694 275.283655h65.646557v25.913114h-65.646557zM540.115694 364.252015h65.646557v25.913114h-65.646557zM540.115694 453.220375h65.646557v25.913115h-65.646557zM540.202071 542.275112h65.56018v25.913115h-65.56018zM540.202071 631.243473h65.56018v25.913114h-65.56018zM540.202071 720.211833h65.56018v25.913115h-65.56018zM540.202071 809.26657h65.56018v25.913115h-65.56018z" fill="#18252F" p-id="3523"></path><path d="M605.589497 1019.249176a12.956557 12.956557 0 0 1-9.155967-3.80059L99.765499 518.953309a12.956557 12.956557 0 0 1 0-17.966426L596.951792 3.80059a12.956557 12.956557 0 0 1 21.767017 9.155967v993.336062A12.956557 12.956557 0 0 1 605.589497 1019.249176zM127.233401 509.624588l465.572293 465.485916V44.225049z" fill="#18252F" p-id="3524"></path><path d="M465.226793 680.305636a12.956557 12.956557 0 0 1-9.155967-3.80059L298.519089 518.953309a12.956557 12.956557 0 0 1 0-18.311934l157.551737-157.551737a12.956557 12.956557 0 0 1 22.112524 9.155967v315.103474a12.956557 12.956557 0 0 1-12.956557 12.956557zM325.98699 509.624588l126.283246 126.455999V383.514097zM768.669365 905.317849a12.956557 12.956557 0 0 1-12.956557-12.956558V138.203278h25.913115v728.935915L834.4023 829.219669l15.029606 21.075999-73.247737 52.344492a12.956557 12.956557 0 0 1-7.514804 2.677689z" fill="#18252F" p-id="3525"></path><path d="M828.960546 138.289655h25.913114v701.727145h-25.913114zM928.03502 892.361291h-25.913114V138.203278h12.611049v-12.956557a13.647574 13.647574 0 0 1 13.302065 12.956557z" fill="#18252F" p-id="3526"></path><path d="M914.30107 151.246212H768.669365a12.956557 12.956557 0 0 1-12.956557-12.956557V81.108049h25.913115v44.138672h119.718589V81.108049h25.913115V138.203278a12.956557 12.956557 0 0 1-12.956557 13.042934z" fill="#18252F" p-id="3527"></path><path d="M914.30107 94.064606H768.669365a12.956557 12.956557 0 0 1-12.956557-12.956557V45.347951a44.570557 44.570557 0 0 1 43.188525-45.347951h84.303999a44.743311 44.743311 0 0 1 43.706787 45.261574v35.846475a12.956557 12.956557 0 0 1-12.611049 12.956557z m-132.675147-25.913114h119.718589V45.347951A18.74382 18.74382 0 0 0 883.637217 25.913115h-84.303999a18.916574 18.916574 0 0 0-17.27541 19.434836zM842.262611 1023.999914a12.956557 12.956557 0 0 1-11.056262-6.132771l-72.815852-118.682065a12.956557 12.956557 0 0 1 3.455082-17.27541l72.470344-52.689999a12.956557 12.956557 0 0 1 15.115983 0l73.16136 52.344491a12.956557 12.956557 0 0 1 3.541459 17.27541l-72.815852 118.682065a12.956557 12.956557 0 0 1-11.056262 6.478279zM786.9813 895.816373l55.454065 90.43677 55.454065-90.43677-55.972327-39.819819z" fill="#18252F" p-id="3528"></path><path d="M885.01925 954.380012h-85.513278l-0.777394-25.913114h86.290672v25.913114z" fill="#18252F" p-id="3529"></path></svg> å·¥å…·</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.ilanzou.com/s/ghc0BURP" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc><svg t="1744363204448" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5676" width="16" height="16"><path d="M989.884071 853.441363H853.441745v136.442326a34.116311 34.116311 0 0 1-68.221163 0V853.441363h-579.874156a34.116311 34.116311 0 0 1-34.116311-34.116312v-579.874155H34.741949a34.116311 34.116311 0 1 1 0-68.221163h136.442326V34.741567a34.116311 34.116311 0 1 1 68.221163 0v136.442326h579.874155a34.116311 34.116311 0 0 1 34.116312 34.116311v579.874156h136.488166a34.116311 34.116311 0 0 1 0 68.221163z m-204.674949-614.024847H239.416898v545.792224h545.792224z m0 0" p-id="5677" fill="#1296db"></path><path d="M684.338523 614.386523q-52.131374-102.314555-151.271519-51.501076-27.813332-33.852732-66.570928-100.286141t-71.235134-153.506212q3.965147 83.119116 30.861682 136.373566c26.873615 53.208611 120.490057 209.717333 160.16445 240.727995s128.294292 16.043949 98.051449-71.796672z m-96.538733 19.871577c-34.43719-41.255869-33.715213-54.091028-13.190418-61.287885s41.656967-0.217739 65.230112 23.848184 28.558229 52.349113 13.511297 65.390552-31.136721 13.316478-65.573911-27.950851z m0 0" p-id="5678" fill="#1296db"></path><path d="M513.092287 537.157829l19.02354 26.243316c-33.669373 53.50657-70.432936 106.165102-91.679709 122.77059-39.662934 31.010661-128.294292 16.043949-98.051448-71.796672q52.165754-102.280175 151.271519-51.478156 9.110671-11.093245 19.413178-25.727618z m20.226836-30.254304q12.72056-19.974716 26.919454-44.304219 38.769057-66.467789 71.223674-153.494752-3.965147 83.119116-30.838762 136.373566c-9.649289 19.080839-27.870631 51.455236-49.117404 86.545645z m-94.40718 127.354575c34.46011-41.255869 33.738133-54.091028 13.213338-61.287885s-41.679887-0.217739-65.253032 23.848184-28.535309 52.349113-13.511297 65.390552 31.136721 13.316478 65.573911-27.950851z m0 0" p-id="5679" fill="#1296db"></path></svg> ç”µè„‘æˆªå±å·¥å…·Snipaste</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.ilovepdf.com/zh-cn" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc><svg t="1744363240121" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6834" width="16" height="16"><path d="M901.850593 926.476283a48.761858 48.761858 0 0 1-48.761859 48.761859H170.422718a48.761858 48.761858 0 0 1-48.761858-48.761859V48.762834a48.761858 48.761858 0 0 1 48.761858-48.761859h418.864363a48.761858 48.761858 0 0 1 34.620919 14.140939l263.801654 263.801654a48.761858 48.761858 0 0 1 14.140939 34.620919V926.476283z" fill="#EBECF0" p-id="6835"></path><path d="M901.850593 926.476283v48.761859a48.761858 48.761858 0 0 1-48.761859 48.761858H170.422718a48.761858 48.761858 0 0 1-48.761858-48.761858v-48.761859a48.761858 48.761858 0 0 0 48.761858 48.761859h682.666016a48.761858 48.761858 0 0 0 48.761859-48.761859z" fill="#C1C7D0" p-id="6836"></path><path d="M24.137143 536.381417h975.237166v243.809291a48.761858 48.761858 0 0 1-48.761858 48.761859H72.899001a48.761858 48.761858 0 0 1-48.761858-48.761859v-243.809291z" fill="#FF5630" p-id="6837"></path><path d="M121.66086 536.381417V438.8577l-97.523717 97.523717h97.523717zM901.850593 536.381417l0.975237-97.523717 97.036098 97.523717H901.850593z" fill="#DE350B" p-id="6838"></path><path d="M267.946434 585.143275h84.845634a57.051374 57.051374 0 0 1 41.935198 15.603795 55.1009 55.1009 0 0 1 16.091413 40.959961 55.588518 55.588518 0 0 1-16.091413 40.959961 59.001849 59.001849 0 0 1-43.398054 16.091413h-48.761858v76.556118H267.946434z m32.670446 81.919922h43.885672a42.422817 42.422817 0 0 0 25.843785-6.339041 23.893311 23.893311 0 0 0 7.801897-19.992362q0-24.868548-32.670445-24.868548h-44.860909zM434.71199 588.068987H511.755726a73.142787 73.142787 0 0 1 58.51423 25.356166 100.937047 100.937047 0 0 1 21.942836 68.266602 110.689418 110.689418 0 0 1-20.967599 69.729457A71.679932 71.679932 0 0 1 511.755726 780.190708H434.71199z m32.670445 158.963658H511.755726a43.398054 43.398054 0 0 0 36.083775-17.066651A75.093262 75.093262 0 0 0 560.517584 682.666992a70.704695 70.704695 0 0 0-13.65332-48.761859 48.761858 48.761858 0 0 0-37.546631-16.579031h-41.935198zM755.565018 618.788957h-100.937047v45.348529H755.565018v31.207589h-100.937047v81.919922h-32.670445v-190.171248H755.565018z" fill="#FFFFFF" p-id="6839"></path><path d="M901.850593 312.564487v6.82666h-263.801654a48.761858 48.761858 0 0 1-48.761858-48.761858V0.000975a48.761858 48.761858 0 0 1 34.620919 14.140939l264.289272 263.801654a48.761858 48.761858 0 0 1 13.653321 34.620919z" fill="#C1C7D0" p-id="6840"></path></svg> PDFå·¥å…·</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.iloveimg.com/zh-cn" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc><svg t="1744363274309" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7988" width="16" height="16"><path d="M829.64898 849.502041H194.35102c-43.885714 0-79.412245-35.526531-79.412244-79.412245V253.910204c0-43.885714 35.526531-79.412245 79.412244-79.412245h635.29796c43.885714 0 79.412245 35.526531 79.412244 79.412245v516.179592c0 43.885714-35.526531 79.412245-79.412244 79.412245z" fill="#D2F4FF" p-id="7989"></path><path d="M909.061224 656.195918l-39.706122-48.065306L626.416327 365.714286c-19.330612-19.330612-50.677551-19.330612-70.008164 0L419.526531 502.073469c-2.612245 2.612245-5.22449 3.134694-6.791837 3.134694-1.567347 0-4.702041-0.522449-6.791837-3.134694L368.326531 464.979592c-19.330612-19.330612-50.677551-19.330612-70.008164 0l-143.673469 143.673469-39.706122 48.065306v113.893878c0 43.885714 35.526531 79.412245 79.412244 79.412245h635.29796c43.885714 0 79.412245-35.526531 79.412244-79.412245v-114.416327" fill="#16C4AF" p-id="7990"></path><path d="M273.763265 313.469388m-49.632653 0a49.632653 49.632653 0 1 0 99.265306 0 49.632653 49.632653 0 1 0-99.265306 0Z" fill="#E5404F" p-id="7991"></path><path d="M644.179592 768h-365.714286c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.897959h365.714286c11.493878 0 20.897959 9.404082 20.897959 20.897959s-9.404082 20.897959-20.897959 20.897959zM461.322449 670.82449h-182.857143c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.89796h182.857143c11.493878 0 20.897959 9.404082 20.897959 20.89796s-9.404082 20.897959-20.897959 20.897959z" fill="#0B9682" p-id="7992"></path></svg> ç¼–è¾‘å›¾ç‰‡</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://zh-hans.ipshu.com/" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc><svg t="1744363365791" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10997" width="16" height="16"><path d="M376.967 345.239h56.905v258.789h-56.905zM540.793 511.24h59.805c16.186 0 29.958-2.356 41.319-7.067 11.354-4.712 20.597-10.93 27.727-18.667 7.125-7.73 12.323-16.61 15.586-26.64 3.262-10.024 4.893-20.235 4.893-30.627 0-10.63-1.631-20.897-4.893-30.808-3.263-9.905-8.461-18.723-15.586-26.459-7.13-7.73-16.372-13.954-27.727-18.666-11.361-4.712-25.134-7.068-41.319-7.068H483.889v258.789h56.904V511.24z m0-121.782h44.219c6.524 0 12.805 0.487 18.848 1.45 6.037 0.969 11.354 2.843 15.948 5.618 4.587 2.781 8.273 6.705 11.055 11.779 2.774 5.075 4.168 11.723 4.168 19.935 0 8.217-1.394 14.86-4.168 19.935-2.781 5.074-6.468 9.004-11.055 11.78-4.594 2.78-9.911 4.655-15.948 5.618-6.043 0.968-12.323 1.45-18.848 1.45h-44.219v-77.565z" fill="#f5c875" p-id="10998"></path><path d="M864 128.542H159c-17.673 0-32 14.327-32 32v598.979c0 17.673 14.327 32 32 32h321v115.522c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32V791.521h320c17.673 0 32-14.327 32-32V160.542c0-17.673-14.327-32-32-32z m-32 598.979H191V192.542h641v534.979z" fill="#f5c875" p-id="10999"></path></svg> ipè§£æ</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://screen.bmcx.com/#welcome" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc><svg t="1744363424697" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12325" width="16" height="16"><path d="M718.489072 363.678351a256.844536 256.844536 0 1 1-256.844536-256.844537 256.844536 256.844536 0 0 1 256.844536 256.844537z" fill="#FFD800" p-id="12326"></path><path d="M554.754639 515.800412a8.445361 8.445361 0 0 1-6.33402-2.850309L389.225567 343.198351a8.762062 8.762062 0 0 1 0-12.351341 8.656495 8.656495 0 0 1 12.35134 0l159.61732 170.174021a8.867629 8.867629 0 0 1-6.439588 14.779381zM554.860206 612.28866a9.18433 9.18433 0 0 1-6.439587-2.744742l-2.955877-3.167011a8.762062 8.762062 0 0 1 12.773609-12.034639l2.955876 3.16701a8.867629 8.867629 0 0 1-6.334021 14.779382z m-42.226804-44.654846a8.762062 8.762062 0 0 1-6.334021-2.744742l-2.955876-3.16701a8.762062 8.762062 0 0 1 12.668041-12.034639l3.061444 3.272577a8.656495 8.656495 0 0 1 0 12.245773 8.234227 8.234227 0 0 1-6.122887 2.428041z m-42.226804-44.654845a8.762062 8.762062 0 0 1-6.334021-2.744742l-3.061443-3.167011a8.762062 8.762062 0 0 1 0-12.35134 8.656495 8.656495 0 0 1 12.35134 0l2.955877 3.272578a8.656495 8.656495 0 0 1 0 12.35134 8.762062 8.762062 0 0 1-5.172784 2.639175z" fill="" p-id="12327"></path><path d="M468.189691 519.811959a9.18433 9.18433 0 0 1-6.439588-2.744743l-158.350515-169.540618a8.656495 8.656495 0 0 1 0-12.35134 8.762062 8.762062 0 0 1 12.35134 0L475.051546 505.032577a8.867629 8.867629 0 0 1-6.33402 14.779382z" fill="" p-id="12328"></path><path d="M854.248247 699.803711a8.762062 8.762062 0 0 1-8.762061-8.762062V307.411134a4.117113 4.117113 0 0 0-4.011547-4.117113H216.940206a4.117113 4.117113 0 0 0-4.011546 4.117113v383.630515a8.762062 8.762062 0 0 1-17.524124 0V307.411134a21.113402 21.113402 0 0 1 21.113402-21.113402h624.956701a21.113402 21.113402 0 0 1 21.113402 21.113402v383.630515a8.762062 8.762062 0 0 1-8.339794 8.762062z" fill="" p-id="12329"></path><path d="M811.599175 699.803711H246.710103a8.762062 8.762062 0 0 1-8.656495-8.762062V337.181031a8.762062 8.762062 0 0 1 8.656495-8.762062h564.889072a8.762062 8.762062 0 0 1 8.762062 8.762062v353.860618a8.762062 8.762062 0 0 1-8.762062 8.762062zM255.472165 682.279588h547.364948V345.943093H255.472165z" fill="" p-id="12330"></path><path d="M529.207423 329.052371A12.35134 12.35134 0 1 1 541.453196 316.701031a12.35134 12.35134 0 0 1-12.245773 12.35134z m0-17.524124a5.172784 5.172784 0 0 0-5.172784 5.172784 5.172784 5.172784 0 1 0 10.556701 0 5.172784 5.172784 0 0 0-5.383917-5.172784zM869.555464 751.214845H188.859381a24.491546 24.491546 0 0 1-23.541443-19.952165l-4.328247-26.180618a19.318763 19.318763 0 0 1 19.318763-22.802474h697.797938A19.318763 19.318763 0 0 1 897.319588 705.082062l-4.433815 26.180618a24.280412 24.280412 0 0 1-23.330309 19.952165z m-689.24701-51.411134a2.11134 2.11134 0 0 0-1.689073 0.633402 1.794639 1.794639 0 0 0 0 1.79464L182.630928 728.412371a6.861856 6.861856 0 0 0 6.228453 5.278351h680.696083A6.861856 6.861856 0 0 0 876.206186 728.412371l4.328247-26.180618a2.428041 2.428041 0 0 0 0-1.79464 2.11134 2.11134 0 0 0-1.689072-0.633402zM630.762887 829.862268H372.334845a8.762062 8.762062 0 1 1 0-17.524124h258.428042a8.762062 8.762062 0 0 1 0 17.524124zM308.150103 829.862268h-4.433814a8.762062 8.762062 0 1 1 0-17.524124h4.433814a8.762062 8.762062 0 0 1 0 17.524124z m-61.228866 0H242.804124A8.762062 8.762062 0 0 1 242.804124 812.865979h4.328247a8.762062 8.762062 0 1 1 0 17.524124zM827.539794 829.862268H823.42268A8.762062 8.762062 0 0 1 823.42268 812.865979h4.433815a8.762062 8.762062 0 0 1 0 17.524124z m-61.228866 0h-4.328248a8.762062 8.762062 0 1 1 0-17.524124h4.328248a8.762062 8.762062 0 0 1 0 17.524124z m-61.228866 0h-4.328248a8.762062 8.762062 0 0 1 0-17.524124h4.328248a8.762062 8.762062 0 1 1 0 17.524124z" fill="" p-id="12331"></path></svg> ç”µè„‘å±å¹•æ£€æµ‹</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link vp-external-link-icon" href="https://www.alltoall.net/" target="_blank" rel="noreferrer" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc><svg t="1744363573513" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16328" width="16" height="16"><path d="M985.088 677.888L908.8 568.32c-3.584-6.144-17.92-29.184-44.032-29.184-18.432 0-35.84 16.384-38.912 19.456l-84.992 105.472-0.512 0.512c-2.56 3.584-8.704 13.824-6.144 25.088 2.048 8.704 7.68 15.36 17.408 20.48 4.096 2.048 8.192 3.072 12.8 3.072 6.144 0 15.36-2.048 25.088-12.8l37.376-45.568c0 2.56 0.512 5.632 0.512 8.704 0.512 4.608 0.512 8.192 0.512 10.24 0 17.408-3.072 32.256-6.144 49.152l-0.512 2.56c-0.512 2.56-1.024 5.12-1.536 8.192-12.8 47.616-37.376 88.576-51.712 96.256h-0.512l-1.536 1.024-0.512 1.024c-26.112 31.232-57.856 53.76-66.56 53.76h-2.56c-24.576 8.704-44.544 12.8-70.144 16.896-27.136 2.56-36.352 20.992-35.84 35.328 0.512 15.36 12.288 31.232 31.744 31.232h17.92c9.728-1.536 20.48-3.584 33.28-6.656l4.096-1.024c8.192-2.048 11.264-2.56 13.312-4.096 54.784-17.408 100.864-50.688 140.8-101.376 40.448-55.296 60.928-114.176 60.928-175.104v-6.656-10.24l42.496 56.832c1.024 1.024 7.168 6.656 16.896 6.656 7.68 0 15.36-3.584 23.04-11.264 22.528-20.48 10.24-37.888 10.24-38.4zM424.448 87.552c-17.408 0-34.816 0-52.224 4.608-49.152 8.704-97.792 33.28-139.776 72.192-43.52 45.056-70.656 90.624-82.432 139.776-5.12 25.088-8.192 50.176-8.704 75.776v7.68l-42.496-56.32c-1.024-1.024-7.168-6.656-16.896-6.656-7.68 0-15.36 3.584-23.04 11.264-21.504 22.016-9.216 39.424-9.216 39.424l71.68 113.152c1.536 3.584 15.872 30.208 44.544 30.208 18.432 0 35.84-16.384 38.912-19.456l84.992-105.472v-0.512c5.632-8.192 7.68-16.896 6.144-25.088-2.048-8.192-7.68-15.36-17.408-19.968-4.096-2.048-8.192-3.072-12.8-3.072-6.144 0-15.36 2.048-25.088 12.8l-33.792 40.96c0-1.536 0-2.56-0.512-4.096-0.512-3.072-0.512-6.656-0.512-9.728v-4.096c0-25.6 4.608-49.152 5.12-51.2v-0.512l0.512-1.536 0.512-3.072c7.68-35.328 22.528-61.952 28.672-71.168l2.048 2.048 4.608-6.656c27.136-36.864 56.32-60.416 94.72-76.8 19.968-8.192 40.448-12.288 59.904-16.384l2.048-0.512c28.16-3.072 36.864-23.04 35.84-40.96 0-13.312-5.632-26.624-15.36-26.624z" fill="#F59D0D" p-id="16329"></path><path d="M377.344 585.216H136.192C66.56 585.216 10.24 643.584 10.24 715.264v141.312c0 71.68 56.32 130.048 125.952 130.048h241.152c69.632 0 125.952-58.368 125.952-130.048v-141.312c0-71.68-56.32-130.048-125.952-130.048z m52.736 271.36c0 29.696-23.552 54.272-52.224 54.272H136.192c-28.672 0-52.224-24.064-52.224-54.272v-141.312c0-29.696 23.552-54.272 52.224-54.272h241.152c28.672 0 52.224 24.064 52.224 54.272v141.312zM877.568 74.752h-241.152C566.784 74.752 510.464 133.12 510.464 204.8v141.312c0 71.68 56.32 130.048 125.952 130.048h241.152C947.2 476.16 1003.52 417.792 1003.52 346.112V204.8c0-71.68-56.32-130.048-125.952-130.048z m52.224 271.36c0 29.696-23.552 54.272-52.224 54.272h-241.152c-28.672 0-52.224-24.064-52.224-54.272V204.8c0-29.696 23.552-54.272 52.224-54.272h241.152c28.672 0 52.224 24.064 52.224 54.272v141.312z" fill="#343399" p-id="16330"></path></svg> æ–‡ä»¶æ ¼å¼è½¬æ¢</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/XiaoPeng03182" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg t="1744268429530" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7140" width="32" height="32"><path d="M511.957333 21.333333C241.024 21.333333 21.333333 240.981333 21.333333 512c0 216.832 140.544 400.725333 335.573334 465.664 24.490667 4.394667 32.256-10.069333 32.256-23.082667 0-11.690667 0.256-44.245333 0-85.205333-136.448 29.610667-164.736-64.64-164.736-64.64-22.314667-56.704-54.4-71.765333-54.4-71.765333-44.586667-30.464 3.285333-29.824 3.285333-29.824 49.194667 3.413333 75.178667 50.517333 75.178667 50.517333 43.776 75.008 114.816 53.333333 142.762666 40.789333 4.522667-31.658667 17.152-53.376 31.189334-65.536-108.970667-12.458667-223.488-54.485333-223.488-242.602666 0-53.546667 19.114667-97.322667 50.517333-131.669334-5.034667-12.330667-21.930667-62.293333 4.778667-129.834666 0 0 41.258667-13.184 134.912 50.346666a469.802667 469.802667 0 0 1 122.88-16.554666c41.642667 0.213333 83.626667 5.632 122.88 16.554666 93.653333-63.488 134.784-50.346667 134.784-50.346666 26.752 67.541333 9.898667 117.504 4.864 129.834666 31.402667 34.346667 50.474667 78.122667 50.474666 131.669334 0 188.586667-114.730667 230.016-224.042666 242.090666 17.578667 15.232 33.578667 44.672 33.578666 90.453334v135.850666c0 13.141333 7.936 27.605333 32.853334 22.869334C862.250667 912.597333 1002.666667 728.746667 1002.666667 512 1002.666667 240.981333 783.018667 21.333333 511.957333 21.333333z" p-id="7141" fill="#2c2c2c"></path></svg></a><a class="VPSocialLink no-icon" href="/wechat-info/index.html" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg t="1744268281277" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3390" width="16" height="16"><path d="M337.387283 341.82659c-17.757225 0-35.514451 11.83815-35.514451 29.595375s17.757225 29.595376 35.514451 29.595376 29.595376-11.83815 29.595376-29.595376c0-18.49711-11.83815-29.595376-29.595376-29.595375zM577.849711 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763zM501.641618 401.017341c17.757225 0 29.595376-12.578035 29.595376-29.595376 0-17.757225-11.83815-29.595376-29.595376-29.595375s-35.514451 11.83815-35.51445 29.595375 17.757225 29.595376 35.51445 29.595376zM706.589595 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763z" fill="#28C445" p-id="3391"></path><path d="M510.520231 2.959538C228.624277 2.959538 0 231.583815 0 513.479769s228.624277 510.520231 510.520231 510.520231 510.520231-228.624277 510.520231-510.520231-228.624277-510.520231-510.520231-510.520231zM413.595376 644.439306c-29.595376 0-53.271676-5.919075-81.387284-12.578034l-81.387283 41.433526 22.936416-71.768786c-58.450867-41.433526-93.965318-95.445087-93.965317-159.815029 0-113.202312 105.803468-201.988439 233.803468-201.98844 114.682081 0 216.046243 71.028902 236.023121 166.473989-7.398844-0.739884-14.797688-1.479769-22.196532-1.479769-110.982659 1.479769-198.289017 85.086705-198.289017 188.67052 0 17.017341 2.959538 33.294798 7.398844 49.572255-7.398844 0.739884-15.537572 1.479769-22.936416 1.479768z m346.265896 82.867052l17.757225 59.190752-63.630058-35.514451c-22.936416 5.919075-46.612717 11.83815-70.289017 11.83815-111.722543 0-199.768786-76.947977-199.768786-172.393063-0.739884-94.705202 87.306358-171.653179 198.289017-171.65318 105.803468 0 199.028902 77.687861 199.028902 172.393064 0 53.271676-34.774566 100.624277-81.387283 136.138728z" fill="#28C445" p-id="3392"></path></svg></a><a class="VPSocialLink no-icon" href="https://gitee.com/xiaopeng03/projects" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg t="1744268149438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2302" width="16" height="16"><path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="2303"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/XiaoPeng03182" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg t="1744268429530" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7140" width="32" height="32"><path d="M511.957333 21.333333C241.024 21.333333 21.333333 240.981333 21.333333 512c0 216.832 140.544 400.725333 335.573334 465.664 24.490667 4.394667 32.256-10.069333 32.256-23.082667 0-11.690667 0.256-44.245333 0-85.205333-136.448 29.610667-164.736-64.64-164.736-64.64-22.314667-56.704-54.4-71.765333-54.4-71.765333-44.586667-30.464 3.285333-29.824 3.285333-29.824 49.194667 3.413333 75.178667 50.517333 75.178667 50.517333 43.776 75.008 114.816 53.333333 142.762666 40.789333 4.522667-31.658667 17.152-53.376 31.189334-65.536-108.970667-12.458667-223.488-54.485333-223.488-242.602666 0-53.546667 19.114667-97.322667 50.517333-131.669334-5.034667-12.330667-21.930667-62.293333 4.778667-129.834666 0 0 41.258667-13.184 134.912 50.346666a469.802667 469.802667 0 0 1 122.88-16.554666c41.642667 0.213333 83.626667 5.632 122.88 16.554666 93.653333-63.488 134.784-50.346667 134.784-50.346666 26.752 67.541333 9.898667 117.504 4.864 129.834666 31.402667 34.346667 50.474667 78.122667 50.474666 131.669334 0 188.586667-114.730667 230.016-224.042666 242.090666 17.578667 15.232 33.578667 44.672 33.578666 90.453334v135.850666c0 13.141333 7.936 27.605333 32.853334 22.869334C862.250667 912.597333 1002.666667 728.746667 1002.666667 512 1002.666667 240.981333 783.018667 21.333333 511.957333 21.333333z" p-id="7141" fill="#2c2c2c"></path></svg></a><a class="VPSocialLink no-icon" href="/wechat-info/index.html" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg t="1744268281277" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3390" width="16" height="16"><path d="M337.387283 341.82659c-17.757225 0-35.514451 11.83815-35.514451 29.595375s17.757225 29.595376 35.514451 29.595376 29.595376-11.83815 29.595376-29.595376c0-18.49711-11.83815-29.595376-29.595376-29.595375zM577.849711 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763zM501.641618 401.017341c17.757225 0 29.595376-12.578035 29.595376-29.595376 0-17.757225-11.83815-29.595376-29.595376-29.595375s-35.514451 11.83815-35.51445 29.595375 17.757225 29.595376 35.51445 29.595376zM706.589595 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763z" fill="#28C445" p-id="3391"></path><path d="M510.520231 2.959538C228.624277 2.959538 0 231.583815 0 513.479769s228.624277 510.520231 510.520231 510.520231 510.520231-228.624277 510.520231-510.520231-228.624277-510.520231-510.520231-510.520231zM413.595376 644.439306c-29.595376 0-53.271676-5.919075-81.387284-12.578034l-81.387283 41.433526 22.936416-71.768786c-58.450867-41.433526-93.965318-95.445087-93.965317-159.815029 0-113.202312 105.803468-201.988439 233.803468-201.98844 114.682081 0 216.046243 71.028902 236.023121 166.473989-7.398844-0.739884-14.797688-1.479769-22.196532-1.479769-110.982659 1.479769-198.289017 85.086705-198.289017 188.67052 0 17.017341 2.959538 33.294798 7.398844 49.572255-7.398844 0.739884-15.537572 1.479769-22.936416 1.479768z m346.265896 82.867052l17.757225 59.190752-63.630058-35.514451c-22.936416 5.919075-46.612717 11.83815-70.289017 11.83815-111.722543 0-199.768786-76.947977-199.768786-172.393063-0.739884-94.705202 87.306358-171.653179 198.289017-171.65318 105.803468 0 199.028902 77.687861 199.028902 172.393064 0 53.271676-34.774566 100.624277-81.387283 136.138728z" fill="#28C445" p-id="3392"></path></svg></a><a class="VPSocialLink no-icon" href="https://gitee.com/xiaopeng03/projects" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg t="1744268149438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2302" width="16" height="16"><path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" fill="#C71D23" p-id="2303"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>è‡ªæˆ‘ä»‹ç»</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/self-introduction-2.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>ğŸ‘¨ã€Œä»£ç ç‚¼é‡‘æœ¯å£«ã€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D/self-introduction.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>ğŸŒã€Œè¯—çš„æµªæ¼«æå®¢ã€</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744176581923" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="25703" width="20" height="20"><path d="M725.952 170.048c-29.248 20.096-56.704 38.4-87.808 62.208-23.744 18.24-65.792 45.696-67.648 78.592-3.648 53.056 78.656 102.4 34.752 170.048-16.448 25.6-43.904 36.608-78.592 53.056-3.712-7.296 9.088-14.656 14.592-21.952 54.848-78.656-56.704-104.256-42.048-201.152 14.656-96.896 124.352-128 226.752-140.8z" fill="#FF1515" p-id="25704"></path><path d="M563.2 0c16.448 16.448 29.248 47.552 29.248 78.656 0 96.896-102.4 151.744-151.744 215.744-11.008 14.656-25.6 36.544-25.6 60.352 0 52.992 54.848 111.552 74.944 153.6C457.152 486.4 415.104 455.296 384 420.48 354.752 384 323.648 327.296 351.104 276.096c40.192-74.944 162.688-120.64 206.592-201.152 11.008-20.096 20.096-51.2 5.504-74.944z" fill="#FF1515" p-id="25705"></path><path d="M353.6 500.544c9.728-2.752 19.072-5.376 26.752-8.64a124.544 124.544 0 0 0-28.288 0.832c-4.672 0.512-8.768 0.96-11.968 0.96l-10.048 0.768c-50.56 3.84-150.72 11.328-149.056 52.288 0 36.544 93.312 45.696 133.504 49.344 120.704 7.36 296.256-3.648 352.896-45.696 9.152-5.504 25.6-16.448 21.952-23.744-89.6 16.448-219.392 25.6-325.44 20.096-25.6 0-53.056 0-71.36-14.656 12.8-17.92 38.208-25.088 61.056-31.552zM327.04 609.856c3.328-3.072 5.888-5.504 0.256-6.4-21.952 5.44-71.296 18.24-69.504 45.696 1.856 21.952 49.408 36.544 76.8 42.048 107.904 21.952 254.208 5.504 329.152-29.248-10.368-1.728-19.52-9.216-28.8-16.832-10.368-8.384-20.864-16.96-33.344-17.92-7.296-1.216-15.36 1.6-24.32 4.736a162.56 162.56 0 0 1-14.08 4.416c-65.856 12.8-199.296 25.6-241.408-16.448-1.728-3.584 2.112-7.104 5.248-10.048zM360.192 711.68c2.112-2.24 4.48-4.736 0-5.824l-10.752 2.816c-29.568 7.552-58.112 14.912-53.248 55.68 78.656 60.352 270.656 40.192 351.104-7.296-10.624-2.496-18.688-10.048-27.008-17.92-10.24-9.6-20.8-19.52-36.992-20.48-7.808-1.28-15.68 2.048-23.488 5.376-3.2 1.344-6.272 2.688-9.408 3.712-56.704 12.8-170.048 27.456-192-12.8-0.704-0.64 0.512-1.92 1.792-3.328z" fill="#2365C4" p-id="25706"></path><path d="M264.064 783.36c9.728-0.576 18.56-1.088 24.832-2.56-42.048-36.544-177.344-20.096-179.2 36.544-1.792 32.96 40.256 56.704 75.008 67.712 107.84 36.544 279.744 38.4 418.752 23.744 64-7.296 221.248-34.752 213.888-104.256-3.648-18.24-20.096-31.04-38.4-32.896 14.656 64-102.4 84.096-164.544 91.456-135.296 14.592-298.048 10.944-378.496-20.16-14.656-5.44-36.608-20.096-34.752-32.896 2.688-22.848 36.032-24.96 62.912-26.624z" fill="#2365C4" p-id="25707"></path><path d="M499.2 987.456c-93.248-11.008-182.848-23.808-257.856-56.704 197.504 47.552 486.4 43.904 625.408-56.704 1.984-1.472 4.032-3.392 6.016-5.376 5.44-5.12 11.136-10.56 17.728-9.216-30.912 92.8-140.224 108.8-245.184 124.032-12.8 1.92-25.6 3.776-38.208 5.76 0-1.792-107.904-1.792-107.904-1.792zM852.096 565.056c-1.792-75.008-89.6-91.456-140.8-47.552 40.256-9.152 75.008 9.152 82.304 36.544 11.968 58.304-42.048 101.952-79.168 131.904-8.32 6.72-15.744 12.672-21.376 18.048 69.44-3.648 162.688-53.056 159.04-138.944z" fill="#2365C4" p-id="25708"></path></svg> JavaåŸºç¡€å­¦ä¹ </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/Java-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175497991" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3892" width="16" height="16"><path d="M512 0C228.061867 0 0 228.061867 0 512s228.061867 512 512 512 512-228.061867 512-512S795.938133 0 512 0z m238.267733 116.48v16.059733c0 48.213333 3.5328 94.0544-5.6832 139.912534-32.477867 6.843733-51.5584 34.372267-51.5584 66.5088 0 18.312533 8.977067 36.744533 22.9376 48.213333-16.247467 36.744533-31.453867 73.3696-54.6304 107.758933A687.837867 687.837867 0 0 1 494.933333 141.653333c53.265067-32.136533 103.355733-57.309867 163.669334-73.386666 34.645333 11.4688 91.665067 27.528533 91.665066 48.213333zM669.3888 580.266667c41.147733 40.635733 84.650667 76.475733 132.744533 105.181866-48.093867 9.591467-98.440533 14.2848-151.022933 14.2848-22.869333 0-45.738667-2.338133-68.608-2.338133 0-4.8128 0-9.608533-2.235733-14.301867 31.9488-31.0272 61.661867-66.986667 89.122133-102.826666zM518.638933 51.2c26.146133 0 52.4288 2.269867 78.6944 6.9632-33.399467 13.909333-66.6624 27.938133-100.061866 44.2368C494.933333 86.101333 494.933333 69.7856 494.933333 53.469867 501.947733 51.2 511.505067 51.2 518.638933 51.2zM631.466667 537.736533c-25.105067 34.850133-52.565333 65.006933-82.3808 95.300267-11.434667-9.335467-25.105067-13.892267-41.130667-13.892267A66.6112 66.6112 0 0 0 443.9552 665.6C352.494933 642.372267 265.5232 607.5392 187.733333 558.677333a723.8144 723.8144 0 0 1 98.4064-218.368c4.590933 0 9.198933 2.269867 16.0256 2.269867a68.113067 68.113067 0 0 0 45.6192-16.913067c14.216533-12.612267 22.971733-31.300267 22.971734-52.753066 0-9.335467-2.235733-18.568533-4.590934-27.904 27.460267-27.886933 54.920533-51.114667 84.616534-74.3424C475.904 310.033067 540.0064 435.490133 631.466667 537.736533zM121.821867 768c0-70.946133-68.4032-151.415467-70.621867-238.933333 27.2896 23.637333 55.808 47.291733 85.333333 66.2016-9.130667 52.036267-14.711467 106.410667-14.711466 160.904533V768z m23.517866-221.866667C110.916267 522.461867 81.117867 496.349867 51.2 468.036267 74.1376 254.856533 234.871467 84.394667 439.125333 51.2c0 25.992533 2.2528 49.783467 4.608 75.776a1058.7136 1058.7136 0 0 0-110.2336 92.3648 63.5392 63.5392 0 0 0-34.4064-9.506133c-23.210667 0-43.1616 10.871467-55.517866 28.16-8.430933 11.776-13.312 26.538667-13.312 42.8544 0 16.5888 6.8608 30.754133 16.0768 45.021866C200.448 392.1408 165.922133 465.595733 145.339733 546.133333z m30.071467 282.999467c-2.304-26.180267-4.744533-52.48-4.744533-81.117867 0-45.3632 4.744533-90.709333 14.114133-133.614933 84.992 50.141867 177.032533 88.251733 273.698133 109.7728 0 2.338133 0 2.338133 2.321067 4.795733-82.568533 54.818133-177.032533 90.692267-278.459733 107.298134-4.5056-2.338133-4.5056-4.795733-6.929067-7.133867zM518.331733 972.8c-113.493333 0-215.432533-41.489067-296.465066-108.3904a703.488 703.488 0 0 0 264.106666-108.3904c9.3184 6.894933 20.8896 9.2672 32.477867 9.2672 23.159467 0 41.642667-11.52 55.6032-27.682133 27.818667 2.2528 55.620267 4.625067 83.438933 4.625066 74.103467 0 145.954133-9.2672 215.415467-25.429333 16.2304 6.894933 32.4608 16.162133 48.6912 20.804267A460.970667 460.970667 0 0 1 518.331733 972.8z m354.4064-307.2c-63.6928-32.648533-122.9312-74.5472-173.0048-125.7984 24.9856-39.611733 45.5168-81.732267 63.6928-121.122133h6.8096c38.7072 0 68.266667-32.648533 68.266667-72.260267a72.072533 72.072533 0 0 0-38.7072-64.0512A599.552 599.552 0 0 0 813.397333 153.6C911.342933 239.786667 972.8 365.3632 972.8 507.4944c0 46.574933-6.8096 88.354133-18.176 130.372267-24.8832 11.52-52.206933 20.770133-81.885867 27.733333z" fill="#23B8FC" p-id="3893"></path></svg> JavaåŸºç¡€çŸ¥è¯†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E9%9B%86%E5%90%88/%E9%9B%86%E5%90%88-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175562545" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5002" width="16" height="16"><path d="M519.3216 744.2432a109.056 109.056 0 0 1-52.3264-13.312L116.2752 537.6a38.0928 38.0928 0 0 1-15.0016-52.736 40.4992 40.4992 0 0 1 54.3232-14.592l350.72 193.1264a27.136 27.136 0 0 0 26.1632 0l346.0096-192.8704a40.448 40.448 0 0 1 54.3744 14.2848 38.144 38.144 0 0 1-14.6944 52.7872l-346.0096 193.024a108.7488 108.7488 0 0 1-52.8384 13.6192z" fill="#F5504E" p-id="5003"></path><path d="M519.3216 909.824a108.544 108.544 0 0 1-52.3264-13.3632l-350.72-193.1264a38.144 38.144 0 0 1-15.0016-52.7872 40.4992 40.4992 0 0 1 54.3232-14.592l350.72 193.1776a27.136 27.136 0 0 0 26.1632 0l346.0096-192.9728A40.4992 40.4992 0 0 1 932.864 650.24a38.144 38.144 0 0 1-14.6944 52.8384L572.16 896a108.7488 108.7488 0 0 1-52.8384 13.824z" fill="#F5504E" p-id="5004"></path><path d="M884.1728 300.5952l-322.1504-187.5456a84.9408 84.9408 0 0 0-86.4768 0.6144L164.3008 300.9536a50.0224 50.0224 0 0 0 0.9216 86.272l311.8592 178.688a84.9408 84.9408 0 0 0 83.3536 0.5632l322.816-178.8928a50.0224 50.0224 0 0 0 0.9216-86.9888z m-432.896-41.4208L307.456 349.3376a25.2928 25.2928 0 0 1-13.568 3.9424 25.6 25.6 0 0 1-13.6192-47.3088l143.7696-90.1632a25.6 25.6 0 1 1 27.2384 43.3664z" fill="#FF5A5A" p-id="5005"></path><path d="M811.4688 258.2528l-249.4464-145.2032a84.9408 84.9408 0 0 0-86.4768 0.6144L164.3008 300.9536a50.0224 50.0224 0 0 0 0.9216 86.272l311.8592 178.688a84.9408 84.9408 0 0 0 83.3536 0.5632l158.72-88.064a479.1808 479.1808 0 0 0 92.3136-220.16z m-360.192 0.9216L307.456 349.3376a25.2928 25.2928 0 0 1-13.568 3.9424 25.6 25.6 0 0 1-13.6192-47.3088l143.7696-90.1632a25.6 25.6 0 1 1 27.2384 43.3664z" fill="#F66A68" p-id="5006"></path><path d="M903.68 465.92a40.3456 40.3456 0 0 0-25.1904 4.7616L532.48 663.5008a27.136 27.136 0 0 1-26.1632 0l-350.72-193.0752a40.4992 40.4992 0 0 0-54.3232 14.592A38.0928 38.0928 0 0 0 116.2752 537.6l350.72 193.1776a109.4144 109.4144 0 0 0 105.1648-0.3072l295.6288-164.864A475.7504 475.7504 0 0 0 903.68 465.92z" fill="#FF5A5A" p-id="5007"></path><path d="M155.5968 470.4256a40.4992 40.4992 0 0 0-54.3232 14.592A38.0928 38.0928 0 0 0 116.2752 537.6l237.6192 130.8672q16.5888-0.6144 33.3824-2.3552a484.8128 484.8128 0 0 0 90.4192-18.4832z" fill="#F66A68" p-id="5008"></path><path d="M238.2848 515.9424l-82.688-45.5168a40.4992 40.4992 0 0 0-54.3232 14.592 37.1712 37.1712 0 0 0-5.12 15.872 477.184 477.184 0 0 0 142.1312 15.0528zM675.84 179.2l-113.8176-66.1504a84.9408 84.9408 0 0 0-86.4768 0.6144L164.3008 300.9536a50.0224 50.0224 0 0 0 0.9216 86.272l190.3104 109.056A480.5632 480.5632 0 0 0 675.84 179.2zM272.1792 341.2992a25.6 25.6 0 0 1 8.0896-35.328l143.7696-90.1632a25.6 25.6 0 1 1 27.2384 43.3664L307.456 349.3376a25.2928 25.2928 0 0 1-13.568 3.9424 25.6 25.6 0 0 1-21.7088-11.9808z" fill="#F67271" p-id="5009"></path><path d="M475.5456 113.664L164.3008 300.9536a49.8688 49.8688 0 0 0-22.9888 53.8112q17.7152-0.4608 35.84-2.3552A438.3232 438.3232 0 0 0 268.8 332.8a25.6 25.6 0 0 1 11.4688-26.6752l143.7696-90.3168a25.6 25.6 0 0 1 26.88 0 439.7056 439.7056 0 0 0 76.8-113.7152 84.8384 84.8384 0 0 0-52.1728 11.5712z" fill="#F67B7A" p-id="5010"></path><path d="M506.88 829.44l-0.6656-0.3072-350.72-193.1776a40.4992 40.4992 0 0 0-54.3232 14.592 38.144 38.144 0 0 0 15.0016 52.7872l218.6752 120.4224a478.7712 478.7712 0 0 0 152.5248 8.1408c6.656-0.6656 13.1584-1.536 19.5072-2.4576zM778.24 692.0704l-233.7792 130.3552A477.6448 477.6448 0 0 0 778.24 692.0704z" fill="#FF5A5A" p-id="5011"></path></svg> Javaé›†åˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/IO/IO%E6%B5%81-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175632364" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8062" width="16" height="16"><path d="M153.594336 307.211712a153.594336 153.594336 0 1 1 144.82666-204.792449h498.413621a224.82371 224.82371 0 0 1 10.879599 449.455427l-10.879599 0.25599H238.967188a133.563075 133.563075 0 0 0-8.447688 266.806162l8.447688 0.25599h486.51006a153.658334 153.658334 0 1 1 0 102.396224H239.031186a235.959299 235.959299 0 0 1-10.815601-471.662607l10.815601-0.191993h557.867428a122.427485 122.427485 0 0 0 8.319694-244.662978l-8.319694-0.255991H298.420996A153.658334 153.658334 0 0 1 153.594336 307.211712z m716.773569 511.98112a51.198112 51.198112 0 1 0 0 102.396224 51.198112 51.198112 0 0 0 0-102.396224zM153.594336 102.419263a51.198112 51.198112 0 1 0 0 102.396224 51.198112 51.198112 0 0 0 0-102.396224z" fill="#326BFB" p-id="8063"></path></svg> IOæµ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E5%A4%9A%E7%BA%BF%E7%A8%8B-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175680494" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9344" width="16" height="16"><path d="M27.2 984h280v-51.2H27.2v51.2zM401.6 984h280v-51.2H401.6v51.2zM921.6 764.8V532.8H552v-46.4h190.4V49.6h-432v436.8h190.4v46.4h-368v230.4H27.2V816h280v-51.2h-124.8V585.6h318.4v179.2H400V816h280v-51.2h-129.6V585.6h318.4v179.2h-124.8V816H1024v-51.2h-102.4z m-560-664h331.2v334.4H361.6V100.8zM745.6 984h280v-51.2H745.6v51.2z" p-id="9345" fill="#1296db"></path></svg> å¤šçº¿ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/File/File-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175718572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10667" width="16" height="16"><path d="M853.333333 960H170.666667V64h469.333333l213.333333 213.333333z" fill="#90CAF9" p-id="10668"></path><path d="M821.333333 298.666667H618.666667V96z" fill="#E1F5FE" p-id="10669"></path></svg> Fileæ–‡ä»¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E5%BC%82%E5%B8%B8/%E5%BC%82%E5%B8%B8-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175761793" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11916" width="16" height="16"><path d="M512 0.00617a376.829937 376.829937 0 0 0-265.214956 107.007982 365.565939 365.565939 0 0 0-108.542982 259.069957v499.708917h743.419877v-499.709917a363.00594 363.00594 0 0 0-109.055982-259.069957A375.293938 375.293938 0 0 0 511.999 0.00717z m-30.719995 745.979876L470.528007 503.810086H287.233037L527.869997 200.197137l20.479997 195.582967 174.079971 6.143999-243.19996 344.061943zM0.003085 968.192009a55.807991 55.807991 0 0 1 55.806991-56.31999H968.189924a57.34399 57.34399 0 0 1 39.423994 16.384997 58.36799 58.36799 0 0 1 16.382997 39.934993A55.807991 55.807991 0 0 1 968.189924 1024H55.810076A55.807991 55.807991 0 0 1 0.003085 968.192009z m0 0" p-id="11917" fill="#f4ea2a"></path></svg> å¼‚å¸¸</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744175814942" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15365" width="16" height="16"><path d="M909.989 343.281c-21.76-51.446-52.904-97.643-92.568-137.307-39.663-39.664-85.86-70.808-137.306-92.568-53.28-22.536-109.858-33.962-168.164-33.962S397.067 90.87 343.787 113.406c-51.446 21.76-97.643 52.904-137.307 92.568-39.664 39.664-70.808 85.86-92.568 137.307-22.536 53.28-33.962 109.858-33.962 168.164s11.426 114.884 33.962 168.164c21.76 51.445 52.904 97.643 92.568 137.306 39.664 39.664 85.86 70.809 137.307 92.568 53.28 22.535 109.858 33.962 168.164 33.962s114.884-11.427 168.164-33.962c51.445-21.76 97.643-52.904 137.306-92.568 39.664-39.663 70.809-85.86 92.568-137.306 22.535-53.28 33.962-109.858 33.962-168.164s-11.427-114.884-33.962-168.164zM543.951 376.03c17.57-0.243 35.095-0.683 52.536-1.368a1990.762 1990.762 0 0 0 91.131-5.678c10.157 34.378 16.643 71.314 19.389 110.46H543.951V376.03z m0-64.069V163.41c17.617 12.176 39.372 29.845 61.074 54.197 23.42 26.28 43.109 56.138 58.784 89.019-41.937 3.147-82.117 4.783-119.858 5.335z m-64-144.763v144.705a2038.572 2038.572 0 0 1-103.41-4.309 1929.6 1929.6 0 0 1-11.183-0.786c15.195-31.915 34.175-60.991 56.676-86.711 20.284-23.185 40.722-40.49 57.917-52.899zM370.842 371.354a2124.301 2124.301 0 0 0 109.109 4.606v103.484H322.25c2.742-39.079 9.208-75.96 19.335-110.285 9.453 0.776 19.21 1.512 29.257 2.195z m-112.731 108.09H145.342c3.916-45.757 16.208-89.778 36.139-130.276 20.257 3.578 52.836 8.759 95.407 13.641-9.902 36.699-16.182 75.682-18.777 116.635z m-0.859 64c1.975 39.144 9.712 78.242 23.101 116.799-44.093 4.976-77.797 10.319-98.621 13.992-20.08-40.64-32.458-84.841-36.39-130.792h111.91z m64.098 0h158.601v104.048c-36.37 0.602-72.818 2.13-109.109 4.601-8.41 0.573-16.612 1.182-24.609 1.821-14.322-36.523-22.659-73.543-24.883-110.47z m158.601 168.103v131.712c-16.974-15.877-36.574-35.962-56.038-59.735-18.064-22.064-33.892-44.698-47.379-67.668a2038.38 2038.38 0 0 1 103.417-4.309z m64 136.665V711.487c34.387 0.503 70.782 1.903 108.68 4.527-13.467 22.915-29.263 45.496-47.286 67.509-21.547 26.32-43.262 48.119-61.394 64.689z m52.536-199.426a2063.187 2063.187 0 0 0-52.536-1.384V543.444h163.958c-2.227 36.975-10.582 74.045-24.939 110.615a1994.972 1994.972 0 0 0-86.483-5.273z m175.521-105.342H878.56c-3.928 45.898-16.283 90.051-36.322 130.652a1822.84 1822.84 0 0 0-93.476-13.439c13.478-38.691 21.264-77.929 23.246-117.213z m-0.859-64c-2.605-41.111-8.924-80.238-18.891-117.061a1821.491 1821.491 0 0 0 90.233-13.075c19.89 40.46 32.158 84.432 36.07 130.136H771.149z m1.017-228.215a373.188 373.188 0 0 1 34.046 39.155 1772.853 1772.853 0 0 1-75.117 9.98c-19.529-46.785-45.825-88.91-78.291-125.338a423.863 423.863 0 0 0-5.386-5.927c46.185 18.263 88.573 45.955 124.748 82.13zM384.81 165.923a420.788 420.788 0 0 0-8.355 9.102c-32.552 36.525-58.904 78.775-78.449 125.71-32.357-3.484-59.48-7.244-80.226-10.469a373.386 373.386 0 0 1 33.956-39.037c38.338-38.338 83.654-67.152 133.074-85.306zM251.736 771.659a373.444 373.444 0 0 1-33.584-38.548c22.526-3.498 52.529-7.614 88.626-11.328 18.229 35.542 41.31 70.356 68.867 103.808a678.068 678.068 0 0 0 35.727 39.995c-59.757-16.875-114.524-48.814-159.636-93.927z m368.249 91.745a677.032 677.032 0 0 0 33.629-37.814c27.469-33.344 50.487-68.043 68.689-103.466a1780.315 1780.315 0 0 1 83.528 10.88 373.34 373.34 0 0 1-33.665 38.654c-43.23 43.232-95.324 74.373-152.181 91.746z" fill="#1296db" p-id="15366"></path></svg> ç½‘ç»œç¼–ç¨‹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E6%B3%A8%E8%A7%A3/%E6%B3%A8%E8%A7%A3-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176100568" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16452" width="16" height="16"><path d="M209.6 0h604.8Q1024 0 1024 209.6v604.8q0 209.6-209.6 209.6H209.6Q0 1024 0 814.4V209.6Q0 0 209.6 0z" fill="#FFFFFF" p-id="16453"></path><path d="M228.48 32h567.04Q992 32 992 228.48v567.04Q992 992 795.52 992H228.48Q32 992 32 795.52V228.48Q32 32 228.48 32z" fill="#6DBAA2" p-id="16454"></path><path d="M270.08 480q-64-54.4-124.16-96l26.56-32q57.28 40 128 93.76zM165.76 840q52.16-128 94.08-272.64a366.72 366.72 0 0 0 40.64 16.32q-34.56 96-92.16 273.6z m140.8-557.12Q247.68 232 180.48 182.4l27.84-32q64 45.76 128 96z m78.72 224h202.24V304h-224v-39.68h247.36q-6.08-20.48-34.88-92.48l-12.48-32L600.64 128q20.8 46.08 53.44 123.52l-37.76 13.44h238.72V304h-224v201.6H832V544H629.76v235.84h249.92v39.68H315.52v-39.36h272.32V544H384z" fill="#FFFFFF" p-id="16455"></path></svg> æ³¨è§£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/Stream/Stream%E6%B5%81-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176167579" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17621" width="16" height="16"><path d="M346.656 64c-64.144 62.544-101.44 136.144-111.872 220.8-15.664 126.976 10.016 167.488 40.288 357.344 20.16 126.56-40.8 232.528-182.88 317.856 36.352-100.64 45.44-197.328 27.264-290.08-27.248-139.152-92.768-272.368-27.248-419.36C135.888 152.576 220.688 90.4 346.656 64z m306.672 0c-64.144 62.544-101.44 136.144-111.872 220.8-15.664 126.976 10.032 167.488 40.288 357.344 20.16 126.56-40.8 232.528-182.88 317.856 36.352-100.64 45.44-197.328 27.264-290.08-27.248-139.152-92.768-272.368-27.248-419.36C442.56 152.576 527.36 90.4 653.328 64zM960 64c-64.144 62.544-101.44 136.144-111.872 220.8-15.664 126.976 10.032 167.488 40.288 357.344 20.16 126.56-40.784 232.528-182.864 317.856 36.336-100.64 45.424-197.328 27.248-290.08-27.248-139.152-92.768-272.368-27.248-419.36C749.232 152.576 834.048 90.4 960 64z" fill="#0078FF" p-id="17622"></path></svg> Streamæµ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/log/Log%E6%97%A5%E5%BF%97-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176188625" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18747" width="16" height="16"><path d="M112 16h736v992H112z" fill="#AED796" p-id="18748"></path><path d="M320 640h320v256H320z" fill="#FFFFFF" p-id="18749"></path><path d="M320 544h320v96H320z" fill="#F48284" p-id="18750"></path><path d="M896 128h-32V32a32 32 0 0 0-32-32H128a32 32 0 0 0-32 32v960a32 32 0 0 0 32 32h704a32 32 0 0 0 32-32V416h32a32 32 0 0 0 32-32V160a32 32 0 0 0-32-32z m-64 0H448a32 32 0 0 0-32 32v224a32 32 0 0 0 32 32h384v576H128V32h704v96zM560 720H400a16 16 0 1 0 0 32h160a16 16 0 1 0 0-32zM336 912h288a32 32 0 0 0 32-32V560a32 32 0 0 0-32-32h-32v-16a16 16 0 1 0-32 0v16h-32v-16a16 16 0 1 0-32 0v16h-32v-16a16 16 0 1 0-32 0v16h-32v-16a16 16 0 1 0-32 0v16h-32a32 32 0 0 0-32 32v320a32 32 0 0 0 32 32z m0-352h32v16a16 16 0 1 0 32 0v-16h32v16a16 16 0 1 0 32 0v-16h32v16a16 16 0 1 0 32 0v-16h32v16a16 16 0 1 0 32 0v-16h32v64H336v-64z m0 96h288v224H336V656z m224 128H400a16 16 0 1 0 0 32h160a16 16 0 1 0 0-32z" fill="#2B3139" p-id="18751"></path><path d="M448 160h448v224H448z" fill="#FFFFFF" p-id="18752"></path><path d="M499.472 213.824h35.184v84.912h50.528V328h-85.712v-114.176zM654.8 211.104c34.704 0 57.888 24.944 57.888 59.792s-23.184 59.808-57.888 59.808-57.888-24.96-57.888-59.808 23.184-59.792 57.888-59.792z m0 91.152c8.96 0 22.704-5.904 22.704-31.344 0-25.424-13.744-31.344-22.704-31.344s-22.704 5.92-22.704 31.344 13.744 31.344 22.704 31.344zM811.264 316.336c-7.84 10.08-20 14.384-32.464 14.384-33.728 0-54.528-26.224-54.528-58.688 0-43.504 30.544-60.928 56.304-60.928 29.088 0 47.488 15.824 52.608 42.688h-33.744c-1.28-8.32-8.32-14.24-16.624-14.24-24.16 0-23.344 25.44-23.344 33.264 0 10.72 4.32 29.424 25.728 29.424 8.16 0 16.48-4.16 18.24-12.624h-15.52v-24.464h46.704V328h-22.24l-1.12-11.664z" fill="#2B3139" p-id="18753"></path></svg> logæ—¥å¿—</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/Xml/XML-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176207600" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19885" width="16" height="16"><path d="M145.6 0C100.8 0 64 35.2 64 80v862.4C64 987.2 100.8 1024 145.6 1024h732.8c44.8 0 81.6-36.8 81.6-81.6V324.8L657.6 0h-512z" fill="#FC7B24" p-id="19886"></path><path d="M960 326.4v16H755.2s-100.8-20.8-99.2-108.8c0 0 4.8 92.8 97.6 92.8H960z" fill="#FB5C1B" p-id="19887"></path><path d="M657.6 0v233.6c0 25.6 17.6 92.8 97.6 92.8H960L657.6 0z" fill="#FFFFFF" p-id="19888"></path><path d="M374.4 860.8c-3.2 0-6.4 0-9.6-3.2l-59.2-80-59.2 80c-3.2 3.2-6.4 3.2-9.6 3.2-6.4 0-11.2-4.8-11.2-11.2 0-1.6 0-4.8 1.6-6.4l62.4-81.6-57.6-78.4c-1.6-1.6-1.6-3.2-1.6-6.4 0-4.8 4.8-11.2 11.2-11.2 3.2 0 6.4 1.6 9.6 4.8l54.4 73.6 54.4-73.6c3.2-3.2 6.4-4.8 9.6-4.8 6.4 0 11.2 4.8 11.2 11.2 0 3.2 0 4.8-1.6 6.4l-57.6 76.8 62.4 83.2c1.6 1.6 1.6 4.8 1.6 6.4 0 6.4-4.8 11.2-11.2 11.2z m230.4 0c-6.4 0-11.2-4.8-11.2-11.2v-148.8l-64 156.8c-1.6 1.6-3.2 3.2-6.4 3.2s-4.8-1.6-6.4-3.2l-64-156.8v148.8c0 6.4-4.8 11.2-11.2 11.2-8 0-12.8-4.8-12.8-11.2V684.8c0-9.6 9.6-19.2 20.8-19.2 8 0 16 4.8 19.2 12.8l54.4 134.4 54.4-134.4c3.2-8 11.2-12.8 19.2-12.8 11.2 0 20.8 9.6 20.8 19.2v164.8c0 6.4-4.8 11.2-12.8 11.2z m169.6-1.6h-88c-9.6 0-17.6-8-17.6-17.6V676.8c0-6.4 6.4-11.2 12.8-11.2s11.2 4.8 11.2 11.2v161.6h81.6c4.8 0 9.6 4.8 9.6 9.6 0 6.4-4.8 11.2-9.6 11.2z" fill="#FFFFFF" p-id="19889"></path></svg> XML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E5%8F%8D%E5%B0%84%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/%E5%8F%8D%E5%B0%84%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176255358" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21020" width="16" height="16"><path d="M976.4864 740.693333L565.111467 24.917333a8.328533 8.328533 0 0 0-0.750934-1.2288L564.224 23.620267c-0.341333-0.682667-0.887467-1.365333-1.2288-1.911467 0 0 0-0.136533-0.136533-0.136533L561.3568 19.797333 561.288533 19.729067c-0.477867-0.682667-1.092267-1.160533-1.570133-1.706667L559.650133 17.885867C558.967467 17.408 558.557867 16.930133 557.943467 16.384L557.738667 16.384l-1.774934-1.365333C555.895467 14.7456 555.895467 14.7456 555.758933 14.7456L553.915733 13.585067 553.642667 13.5168 551.7312 12.424533C551.662933 12.424533 551.662933 12.288 551.594667 12.288L549.546667 11.400533 549.410133 11.332267C548.727467 10.922667 547.908267 10.786133 547.2256 10.513067c-0.136533 0-0.136533 0-0.2048-0.136534L544.768 9.8304h-0.136533C543.880533 9.557333 543.061333 9.489067 542.3104 9.4208h-0.136533a18.8416 18.8416 0 0 0-2.321067-0.2048h-2.730667l-2.184533 0.2048h-0.2048A17.885867 17.885867 0 0 0 532.48 9.8304h-0.2048L529.954133 10.24h-0.068266l-1.160534 0.273067c-0.4096 0.136533-0.682667 0.341333-1.092266 0.4096h-0.136534l-2.116266 0.887466s-0.136533 0-0.136534 0.136534a20.6848 20.6848 0 0 0-2.048 1.092266l-0.068266 0.068267-2.048 1.2288v0.068267l-1.911467 1.365333h-0.136533l-1.8432 1.6384a13.5168 13.5168 0 0 0-1.6384 1.706667L515.413333 19.319467l-1.501866 1.774933-0.136534 0.2048a12.765867 12.765867 0 0 0-1.365333 1.911467c0 0.068267 0 0.2048-0.136533 0.2048a35.362133 35.362133 0 0 0-1.160534 2.048h-0.136533L31.197867 903.168l-0.068267 0.068267a12.014933 12.014933 0 0 0-0.8192 1.6384l-0.2048 0.4096a6.144 6.144 0 0 0-0.477867 1.160533l-0.273066 0.682667-0.4096 0.955733a1.4336 1.4336 0 0 0-0.2048 0.682667l-0.4096 1.365333-0.068267 0.341333-0.4096 1.706667-0.068267 0.4096c-0.136533 0.477867-0.2048 0.887467-0.2048 1.365333 0 0.136533 0 0.341333-0.136533 0.4096l-0.2048 1.6384v0.136534a36.727467 36.727467 0 0 0 0.136533 5.7344v0.068266l0.273067 1.911467a22.528 22.528 0 0 0 1.024 3.8912l0.477867 1.501867 0.2048 0.546133 0.477866 1.160533 0.2048 0.546134 0.2048 0.273066 0.273067 0.477867 0.273067 0.682667 0.341333 0.546133a2.184533 2.184533 0 0 0 0.477867 0.8192l0.6144 0.955733a9.216 9.216 0 0 1 0.477866 0.8192l0.546134 0.887467 0.6144 0.887467 0.477866 0.682666 1.570134 1.706667 0.6144 0.682667 0.887466 0.750933 0.682667 0.6144 0.887467 0.682667 0.8192 0.6144 0.750933 0.6144 1.024 0.682666c0.136533 0.2048 0.477867 0.273067 0.682667 0.477867a5.256533 5.256533 0 0 0 1.2288 0.682667l0.546133 0.341333c1.2288 0.682667 2.525867 1.160533 3.822933 1.706667l0.273067 0.068266 1.706667 0.6144 0.546133 0.2048 1.501867 0.4096 0.682666 0.068267a5.666133 5.666133 0 0 0 1.297067 0.2048l0.750933 0.136533 0.477867 0.068267 570.5728 64.7168h0.136533l1.2288 0.068267h2.048l2.048-0.068267h0.546134l2.048-0.2048h0.2048c0.6144-0.136533 1.297067-0.2048 1.911466-0.4096l0.477867-0.068267 1.979733-0.546133 0.341334-0.068267a31.675733 31.675733 0 0 0 1.706666-0.6144l0.4096-0.2048 1.8432-0.8192 0.4096-0.2048 1.774934-0.887466 0.2048-0.068267 1.774933-1.2288 0.2048-0.068267 320.512-226.5088a31.9488 31.9488 0 0 0 9.0112-41.915733zM112.503467 890.197333c0.955733 2.2528 1.570133 4.5056 2.8672 6.826667l-6.826667-0.6144 3.959467-6.212267z m52.565333 8.465067a31.9488 31.9488 0 0 0 2.730667-31.607467 31.061333 31.061333 0 0 0-35.976534-17.408l370.414934-677.751466c4.642133 4.778667 10.786133 8.192 17.885866 9.147733l2.730667 28.330667a31.402667 31.402667 0 0 0-40.5504 26.2144 31.675733 31.675733 0 0 0 31.061333 35.771733 30.037333 30.037333 0 0 0 15.018667-3.959467l43.008 444.757334a32.017067 32.017067 0 0 0 5.461333 57.821866l17.066667 177.3568-428.8512-48.674133z m718.0288-133.666133a31.607467 31.607467 0 0 0-27.170133-44.578134 31.5392 31.5392 0 0 0-32.699734 30.242134 31.607467 31.607467 0 0 0 29.832534 33.1776h1.501866l1.8432-0.068267-201.5232 142.404267-21.640533-224.938667-50.107733-518.9632 324.881066 565.111467-24.917333 17.6128zM464.6912 630.9888a31.470933 31.470933 0 0 0 34.952533-27.511467 31.675733 31.675733 0 0 0-27.0336-35.498666 31.402667 31.402667 0 0 0-34.952533 27.511466 31.675733 31.675733 0 0 0 27.0336 35.498667z m11.264-89.975467a31.470933 31.470933 0 0 0 34.952533-27.511466 31.675733 31.675733 0 0 0-27.101866-35.498667 31.402667 31.402667 0 0 0-34.952534 27.511467 31.675733 31.675733 0 0 0 27.101867 35.498666z m11.195733-90.043733a31.470933 31.470933 0 0 0 34.952534-27.511467 31.675733 31.675733 0 0 0-27.0336-35.498666 31.402667 31.402667 0 0 0-34.952534 27.511466 31.607467 31.607467 0 0 0 27.0336 35.498667z m19.0464-152.917333a31.402667 31.402667 0 0 0-34.952533 27.4432 31.675733 31.675733 0 0 0 30.993067 35.771733 31.470933 31.470933 0 0 0 30.993066-27.784533 31.675733 31.675733 0 0 0-27.0336-35.498667z m257.706667 481.621333h1.4336a31.470933 31.470933 0 0 0 31.197867-30.242133 31.607467 31.607467 0 0 0-29.832534-33.245867 31.5392 31.5392 0 0 0-32.631466 30.3104 31.5392 31.5392 0 0 0 29.832533 33.1776zM499.029333 703.829333a30.037333 30.037333 0 0 0-15.701333 3.413334 31.470933 31.470933 0 0 0 5.12-13.858134 31.675733 31.675733 0 0 0-27.101867-35.498666 31.402667 31.402667 0 0 0-34.884266 27.511466 31.675733 31.675733 0 0 0 27.0336 35.498667 30.5152 30.5152 0 0 0 18.2272-3.2768 31.607467 31.607467 0 0 0 24.439466 49.629867h1.4336a31.470933 31.470933 0 0 0 31.197867-30.378667 31.402667 31.402667 0 0 0-29.696-33.041067z m175.581867 71.748267h1.4336a31.470933 31.470933 0 0 0 31.197867-30.3104 31.607467 31.607467 0 0 0-29.764267-33.1776 31.5392 31.5392 0 0 0-32.768 30.3104 31.675733 31.675733 0 0 0 29.9008 33.1776z m-305.083733-38.229333a32.017067 32.017067 0 0 0-15.223467 42.052266 31.197867 31.197867 0 0 0 41.437867 15.496534 32.017067 32.017067 0 0 0 15.223466-42.1888 30.9248 30.9248 0 0 0-41.437866-15.428267z m-162.133334 76.1856a32.017067 32.017067 0 0 0-15.223466 42.052266 31.197867 31.197867 0 0 0 41.437866 15.496534 32.017067 32.017067 0 0 0 15.223467-42.052267 30.9248 30.9248 0 0 0-41.437867-15.496533z m81.032534-38.161067a32.017067 32.017067 0 0 0-15.291734 42.120533 31.197867 31.197867 0 0 0 41.437867 15.496534 32.017067 32.017067 0 0 0 15.291733-42.120534 30.856533 30.856533 0 0 0-41.437866-15.496533z" p-id="21021" fill="#1296db"></path></svg> åå°„å’ŒåŠ¨æ€ä»£ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8/%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176289502" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="22127" width="16" height="16"><path d="M277.942857 416.914286h285.257143V204.8H219.428571v51.2h292.571429V365.714286H219.428571v219.428571h292.571429c0 87.771429-7.314286 146.285714-14.628571 168.228572-7.314286 21.942857-36.571429 36.571429-95.085715 36.571428h-73.142857l14.628572 51.2h65.828571c80.457143 0 124.342857-21.942857 131.657143-65.828571 21.942857-36.571429 29.257143-117.028571 29.257143-234.057143h-292.571429V416.914286zM950.857143 0H73.142857C36.571429 0 0 36.571429 0 73.142857v877.714286c0 36.571429 36.571429 73.142857 73.142857 73.142857h877.714286c36.571429 0 73.142857-36.571429 73.142857-73.142857V73.142857c0-36.571429-36.571429-73.142857-73.142857-73.142857z m21.942857 950.857143c0 14.628571-7.314286 21.942857-21.942857 21.942857H73.142857c-14.628571 0-21.942857-7.314286-21.942857-21.942857V73.142857C51.2 58.514286 58.514286 51.2 73.142857 51.2h877.714286c14.628571 0 21.942857 7.314286 21.942857 21.942857v877.714286zM731.428571 848.457143h51.2V175.542857H731.428571v672.914286z" p-id="22128" fill="#1296db"></path></svg> æ–¹æ³•å¼•ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176330800" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23250" width="16" height="16"><path d="M0 73.14432C0 32.74752 32.74752 0 73.14432 0h877.71136C991.25248 0 1024 32.74752 1024 73.14432v877.71136c0 40.3968-32.74752 73.14432-73.14432 73.14432H73.14432C32.74752 1024 0 991.25248 0 950.85568V73.14432z m73.14432-24.38144a24.38144 24.38144 0 0 0-24.38144 24.38144v877.71136a24.38144 24.38144 0 0 0 24.38144 24.38144h877.71136a24.38144 24.38144 0 0 0 24.38144-24.38144V73.14432a24.38144 24.38144 0 0 0-24.38144-24.38144H73.14432z" fill="#1afa29" p-id="23251"></path><path d="M1024 307.2H0v51.2h1024V307.2zM177.664 113.3568a15.98976 15.98976 0 0 1-2.048 22.51776l-54.80448 45.6704 54.80448 45.6704a15.98976 15.98976 0 1 1-20.46976 24.56064l-57.7536-48.128c-13.80352-11.49952-13.80352-32.70656 0-44.2112l57.7536-48.128a15.98976 15.98976 0 0 1 22.51776 2.048zM339.456 113.3568a15.98976 15.98976 0 0 0 2.048 22.51776l54.80448 45.6704-54.80448 45.6704a15.98976 15.98976 0 0 0 20.46976 24.56064l57.7536-48.128c13.80352-11.49952 13.80352-32.70656 0-44.2112l-57.7536-48.128a15.98976 15.98976 0 0 0-22.51776 2.048zM289.3824 109.09184a15.98976 15.98976 0 0 1 7.82336 21.21216L238.25408 258.20672a15.98976 15.98976 0 0 1-29.04064-13.38368l58.9568-127.90272a15.98976 15.98976 0 0 1 21.21216-7.82848zM860.75904 528.37376v68.35712h53.92896v36.0192h-53.92896v122.79808c0 5.72928 1.37216 9.82016 4.11648 12.68736 2.7392 2.4576 6.85568 4.096 12.79488 4.096h31.0784v36.0192h-38.85056c-20.10624 0-35.18976-4.9152-44.32896-14.32576-9.1392-9.00608-13.25056-21.69344-13.25056-38.4768v-122.79808h-43.87328v-36.0192h43.87328v-50.35008l48.44032-18.00704zM710.64064 512c9.59488 0 17.82272 2.4576 24.2176 8.18688 6.4 5.31968 9.6 12.27776 9.6 20.87424 0 8.59648-3.65568 15.55456-10.05568 21.28384-6.4 5.3248-14.62272 8.18688-23.76192 8.18688-9.6 0-17.36704-2.86208-23.76704-8.18688-6.4-5.72928-9.59488-13.09696-9.59488-21.28384 0-8.59648 3.19488-15.55456 9.59488-20.87424 6.4-5.72928 14.16704-8.18688 23.76704-8.18688z m-24.22272 84.73088h48.44032v211.61984h-48.44032v-211.61984zM544.2048 591.0016c58.50112 0 88.20736 28.65152 88.20736 86.77376v130.57536h-48.44544v-126.88896c0-36.02432-18.7392-54.03136-55.30112-54.03136-13.70624 0-26.04544 4.09088-36.10112 13.09696-10.96704 9.82528-17.82272 23.33184-19.65056 40.5248v127.29856h-48.44544v-211.61984h48.44544v26.19392c9.1392-10.63936 19.65056-18.41664 31.53408-23.74144 11.8784-5.72928 25.13408-8.18176 39.7568-8.18176zM107.52 516.09088h49.8176v181.73952c0 26.19904 6.4 45.43488 20.10624 58.12736 13.71136 12.68736 35.18976 19.23584 64.896 19.23584 29.25056 0 50.72896-6.54848 64.44032-19.23584 13.25056-12.69248 20.10624-31.92832 20.10624-58.12736v-181.73952h49.8176v180.92032c0 38.0672-11.88352 67.13344-35.18976 87.18848-23.31136 19.64544-56.2176 29.88032-99.1744 29.88032-43.4176 0-76.32384-9.82528-99.1744-29.47072C119.40352 764.14464 107.52 735.0784 107.52 697.0112v-180.92032z" fill="#1afa29" p-id="23252"></path></svg> å•å…ƒæµ‹è¯•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%9F%BA%E7%A1%80/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744176379492" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="24645" width="16" height="16"><path d="M512.085333 1024c-10.453333 0-20.778667-2.602667-30.037333-7.552L98.005333 812.16A64 64 0 0 1 64 755.498667V269.738667c0-23.722667 13.056-45.482667 34.005333-56.618667l384-204.586667c18.816-10.069333 41.386667-10.069333 60.202667 0l383.786667 204.586667c20.906667 11.093333 34.005333 32.896 34.005333 56.618667v485.802666a64 64 0 0 1-34.005333 56.618667l-383.829334 204.288c-9.258667 4.949333-19.584 7.509333-30.08 7.509333zM496.981333 36.778667l15.018667 28.245333-384 204.586667v485.888l384.042667 204.373333 383.957333-204.330667V269.738667l-383.872-204.672-15.146667-28.245334z" fill="#878CA5" p-id="24646"></path><path d="M501.418667 263.722667l-207.786667 156.16a16.128 16.128 0 0 0 9.642667 29.013333h415.616c15.488 0 22.016-19.669333 9.685333-29.013333l-207.786667-156.16a16.085333 16.085333 0 0 0-19.370666 0zM502.101333 518.613333l-207.786666 156.16a16.128 16.128 0 0 0 9.642666 29.013334h415.573334c15.488 0 22.058667-19.669333 9.685333-29.013334l-207.786667-156.16a16.085333 16.085333 0 0 0-19.328 0z" fill="#878CA5" p-id="24647"></path></svg> ç±»åŠ è½½å™¨</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744290043017" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12505" width="20" height="20"><path d="M824.888889 383.146667L703.431111 332.8A28.444444 28.444444 0 1 0 682.666667 386.37037l60.112592 24.367408L682.666667 438.328889a28.444444 28.444444 0 0 0-14.601482 37.357037 28.918519 28.918519 0 0 0 25.979259 16.213333 15.454815 15.454815 0 0 0 11.377778-3.223703L824.888889 433.398519A28.918519 28.918519 0 0 0 841.481481 407.703704 25.694815 25.694815 0 0 0 824.888889 383.146667zM549.262222 269.463704a28.444444 28.444444 0 0 0-35.745185 17.825185l-61.724444 188.397037a28.444444 28.444444 0 0 0 17.825185 35.745185 17.540741 17.540741 0 0 0 8.154074 1.611852A31.668148 31.668148 0 0 0 505.362963 493.037037l61.724444-188.302222a28.444444 28.444444 0 0 0-17.825185-35.271111zM359.253333 349.013333A30.151111 30.151111 0 0 0 322.37037 332.8l-122.216296 50.346667a30.435556 30.435556 0 0 0-17.825185 25.979259 28.444444 28.444444 0 0 0 16.213333 25.979259l120.130371 55.182222a30.056296 30.056296 0 0 0 11.377777 3.223704 28.918519 28.918519 0 0 0 25.97926-16.213333A28.444444 28.444444 0 0 0 341.333333 439.940741l-60.112592-27.591111L341.333333 387.982222c16.308148-8.154074 24.462222-24.367407 17.92-38.968889zM580.740741 817.208889H142.222222a28.444444 28.444444 0 0 0 0 56.888889h438.518519a28.444444 28.444444 0 1 0 0-56.888889z" fill="#0097FF" p-id="12506"></path><path d="M910.222222 134.542222v512H113.777778v-512h796.444444m0-56.888889H113.777778a56.888889 56.888889 0 0 0-56.888889 56.888889v512a56.888889 56.888889 0 0 0 56.888889 56.888889h796.444444a56.888889 56.888889 0 0 0 56.888889-56.888889v-512a56.888889 56.888889 0 0 0-56.888889-56.888889zM881.777778 817.208889H748.468148a28.444444 28.444444 0 0 0 0 56.888889H881.777778a28.444444 28.444444 0 0 0 0-56.888889z" fill="#0097FF" p-id="12507"></path><path d="M666.642963 946.346667a100.693333 100.693333 0 1 1 100.693333-100.693334 100.882963 100.882963 0 0 1-100.693333 100.693334z m0-144.592593a43.804444 43.804444 0 1 0 43.899259 43.899259 43.899259 43.899259 0 0 0-43.899259-43.899259z" fill="#0097FF" p-id="12508"></path></svg> Javaåç«¯</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%90%8E%E7%AB%AF/JavaWeb%E5%AD%A6%E4%B9%A0/Web-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744289942020" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9899" width="16" height="16"><path d="M862.08 699.392c-105.344 140.330667-330.282667 92.970667-474.538667 99.754667 0 0-25.557333 1.450667-51.242666 5.674666 0 0 9.728-4.138667 22.144-8.448 101.290667-35.029333 149.162667-42.069333 210.730666-73.685333 115.626667-59.221333 230.741333-188.288 254.165334-322.346667-44.032 128.938667-177.92 239.914667-299.818667 284.970667-83.413333 30.805333-234.325333 60.757333-234.368 60.757333a225.28 225.28 0 0 1-6.101333-3.242666c-102.613333-49.92-105.6-272.213333 80.810666-343.850667 81.749333-31.402667 159.872-14.165333 248.234667-35.2 94.208-22.4 203.349333-93.013333 247.68-185.344 49.706667 147.541333 109.44 378.282667 2.304 520.96z m1.792-566.613333a393.045333 393.045333 0 0 1-45.44 80.64 425.898667 425.898667 0 0 0-305.792-129.322667C276.992 84.096 85.333333 275.754667 85.333333 511.36a425.941333 425.941333 0 0 0 136.746667 312.917333l9.386667 8.277334a36.522667 36.522667 0 1 1 0.042666 0.042666l6.357334 5.632A424.96 424.96 0 0 0 512.64 938.666667c225.194667 0 410.154667-175.274667 425.984-396.458667 11.690667-108.330667-20.309333-245.888-74.752-409.429333" p-id="9900" fill="#097310"></path></svg> JavaWeb SpringBoot å­¦ä¹ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Java%E5%90%8E%E7%AB%AF/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/Project-TakeOut-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744289966142" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11297" width="16" height="16"><path d="M938.2 325.5c0 35.7-28.9 64.6-64.6 64.6H693.4c-35.7 0-64.6-28.9-64.6-64.6V225.3c0-35.7 28.9-64.6 64.6-64.6h180.1c35.7 0 64.6 28.9 64.6 64.6v100.2z" fill="#5FE0A3" p-id="11298"></path><path d="M966.6 488.8H742.9c-106.1 0-166.9 52.4-200.3 112.5h-10.2c-185 0-182.9-141.6-182.9-187.6V313.6c0-56.9-28.9-64.6-64.6-64.6h-50.6c-35.7 0-54.8 23.4-64.6 64.6S89.7 652 89.7 652v89.4h876.9V488.8z" fill="#FFE91F" p-id="11299"></path><path d="M197.4 741.4m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z" fill="#5FE0A3" p-id="11300"></path><path d="M826.6 741.4m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z" fill="#5FE0A3" p-id="11301"></path><path d="M966.6 467.8H742.8c-48.8 0-92.3 10.5-129.1 31.3-31.7 17.9-58.5 43.3-79.5 75.4-1.3 1.9-2.5 3.9-3.7 5.8-38-0.2-69.7-6.9-94-19.9-19.7-10.5-35.1-25.5-45.9-44.6-20.1-35.8-20.1-77.9-20.1-100.5V313.6c0-33.2-8.9-56.2-27.1-70.2-17.5-13.6-39.4-15.4-58.5-15.4h-50.6c-43.7 0-72.4 27.2-85.1 80.8-9 38-70.1 296.7-78.9 334-21.2 27.3-33.9 61.5-33.9 98.6 0 88.8 72.2 161 161 161 81.7 0 149.3-61.1 159.6-140h309.9c10.3 78.9 78 140 159.6 140 88.8 0 161-72.2 161-161V488.8c0.1-11.6-9.3-21-20.9-21zM190.1 318.5c10.1-42.6 27.2-48.5 44.2-48.5h50.6c16.8 0 26.9 2 32.8 6.6 7.2 5.5 10.8 18 10.8 37v101.7c0 24.6 0 75.8 25.5 121.2 14.7 26.2 35.8 46.7 62.7 61.1 25.7 13.7 56.9 21.8 92.9 24.1-14.1 34.4-21.3 69.5-23.6 98.8H357c-10.3-78.9-78-140-159.6-140-26.4 0-51.4 6.4-73.5 17.8 21.1-89 59.2-250.4 66.2-279.8z m7.3 541.9c-65.6 0-119-53.4-119-119s53.4-119 119-119 119 53.4 119 119-53.3 119-119 119z m629.2 0c-65.6 0-119-53.4-119-119s53.4-119 119-119 119 53.4 119 119-53.4 119-119 119z m0-280c-81.7 0-149.3 61.1-159.6 140H528.2c3.3-36.6 15.3-83.3 41.2-122.9 38-58.2 96.4-87.7 173.5-87.7h202.7V633c-29.5-32.3-71.9-52.6-119-52.6zM197.4 163.6h154c11.6 0 21-9.4 21-21s-9.4-21-21-21h-154c-11.6 0-21 9.4-21 21s9.4 21 21 21z" fill="#333333" p-id="11302"></path><path d="M197.4 709.1c-17.8 0-32.3 14.5-32.3 32.3 0 17.8 14.5 32.3 32.3 32.3 17.8 0 32.3-14.5 32.3-32.3 0-17.9-14.4-32.3-32.3-32.3zM826.6 709.1c-17.8 0-32.3 14.5-32.3 32.3 0 17.8 14.5 32.3 32.3 32.3 17.8 0 32.3-14.5 32.3-32.3 0-17.9-14.5-32.3-32.3-32.3zM693.4 411.1h180.1c47.2 0 85.6-38.4 85.6-85.6V225.3c0-47.2-38.4-85.6-85.6-85.6H693.4c-47.2 0-85.6 38.4-85.6 85.6v100.2c0 47.2 38.4 85.6 85.6 85.6z m-43.6-185.8c0-24.1 19.6-43.6 43.6-43.6h180.1c24 0 43.6 19.6 43.6 43.6v100.2c0 24.1-19.6 43.6-43.6 43.6H693.4c-24 0-43.6-19.6-43.6-43.6V225.3z" fill="#333333" p-id="11303"></path><path d="M703.4 242.2h155.1v42H703.4z" fill="#333333" p-id="11304"></path></svg> è‹ç©¹å¤–å–</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744204309475" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="27182" width="20" height="20"><path d="M514.56 816.9984a32 32 0 0 1-32-32v-240a32 32 0 1 1 64 0v240a32 32 0 0 1-32 32z" fill="#619BDD" p-id="27183"></path><path d="M770.56 816.9984h-512a32 32 0 1 1 0-64h512a32 32 0 0 1 0 64z" fill="#619BDD" p-id="27184"></path><path d="M258.56 896.9984H98.56a32 32 0 0 1-32-32v-160a32 32 0 0 1 32-32H258.56a32 32 0 0 1 32 32v160a32 32 0 0 1-32 32z m-128-64h96v-96H130.56v96z m800 64H770.56a32 32 0 0 1-32-32v-160a32 32 0 0 1 32-32h160a32 32 0 0 1 32 32v160a32 32 0 0 1-32 32z m-128-64h96v-96h-96v96z" fill="#619BDD" p-id="27185"></path><path d="M722.56 320.9984c-17.69472 0-34.176 4.48-49.09056 11.776-10.84416-101.4528-99.1488-176.70144-201.0368-171.32032-101.888 5.376-181.77536 89.51296-181.87264 191.54432-53.0176 0-96 42.9824-96 96 0 53.02272 42.9824 96 96 96h432c61.85472 0 112-50.14016 112-112 0-61.8496-50.14528-112-112-112z" fill="#E1EFFF" p-id="27186"></path><path d="M722.56 576.9984H290.56c-70.59456 0-128-57.40544-128-128a128.31744 128.31744 0 0 1 97.792-124.416c14.01344-110.14144 108.31872-195.584 222.208-195.584 100.01408-0.256 188.00128 66.01216 215.36256 162.21184 8.15616-1.47456 16.384-2.21184 24.63744-2.21184 79.39072 0 144 64.6144 144 144 0 79.39584-64.60928 144-144 144z m-240-384c-88.22272 0-160 71.7824-160 160a32 32 0 0 1-32 32c-35.29728 0-64 28.70784-64 64 0 35.29728 28.70272 64 64 64h432c44.12928 0 80-35.90144 80-80 0-55.77216-59.776-98.4576-115.04128-71.48544a32.06656 32.06656 0 0 1-45.88544-25.41056c-8.42752-81.4592-77.17376-143.3088-159.07328-143.104z" fill="#619BDD" p-id="27187"></path><path d="M577.95072 374.79424a32 32 0 0 1-31.77472-28.672A63.744 63.744 0 0 0 482.56 288.9984a32 32 0 1 1 0-64c65.52064-0.1792 120.5248 49.29536 127.26272 114.46784a32 32 0 0 1-31.872 35.328z" fill="#619BDD" p-id="27188"></path></svg> å¾®æœåŠ¡</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/SpringCloud/%E5%BE%AE%E6%9C%8D%E5%8A%A1SpringCloud-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204352299" class="icon" viewBox="0 0 1549 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="28256" width="16" height="16"><path d="M1321.64 386.917c-14.463-96.983-44.401-206.398-84.932-327.547a480.729 480.729 0 0 1-55.69 99.203 522.465 522.465 0 0 0-823.12 95.777 346.132 346.132 0 0 1 213.566 89.753 360.975 360.975 0 0 0-201.768-59.497 369.664 369.664 0 0 0 0 739.392h852.487a326.152 326.152 0 0 0 99.456-637.08z m-796.48 523.1a44.4 44.4 0 1 1-6.342-62.859 44.4 44.4 0 0 1 6.343 62.858z m709.328-156.543c-129.015 171.829-404.424 114.172-581.074 122.164 0 0-31.27 1.776-62.794 6.977 0 0 11.924-5.074 27.147-10.339 124.004-42.878 182.676-51.504 258.093-90.26 141.574-72.562 282.576-230.564 311.183-394.718-53.915 157.938-217.879 293.803-367.127 348.86-102.248 37.676-287.08 74.465-287.08 74.529l-7.485-3.996c-125.716-61.146-129.205-333.32 99.013-421.042 100.09-38.502 195.805-17.317 303.952-43.132 115.377-27.402 248.959-114.172 303.254-227.013 60.955 180.646 134.089 463.223 2.918 637.97z" fill="#77BC1F" p-id="28257"></path></svg> SpringCloudå­¦ä¹ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ/MQ-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204382720" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29407" width="16" height="16"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E84738" p-id="29408"></path><path d="M743.68 463.776h-149.92a24.576 24.576 0 0 1-21.12-24.64v-158.72a24.48 24.48 0 0 0-7.04-17.28A24.064 24.064 0 0 0 548.48 256H496a24.32 24.32 0 0 0-24.192 24.416v160.384a24.8 24.8 0 0 1-22.432 22.976h-39.264a24.64 24.64 0 0 1-21.248-22.976V280.416A24.32 24.32 0 0 0 364.672 256h-52.48A24.32 24.32 0 0 0 288 280.416v463.168c0 13.536 10.88 24.416 24.192 24.416h431.616a24.32 24.32 0 0 0 24.192-24.416v-255.392a24.384 24.384 0 0 0-24.32-24.416z m-69.056 175.136a24.32 24.32 0 0 1-24.192 24.416h-52.448c-6.4 0-12.576-2.56-17.12-7.136a24.512 24.512 0 0 1-7.072-17.28v-49.92a24.32 24.32 0 0 1 24.192-24.448h52.48a24.32 24.32 0 0 1 24.16 24.416v49.952z" fill="#FFFFFF" p-id="29409"></path></svg> RabbitMQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Nacos%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Nacos%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204410087" class="icon" viewBox="0 0 5120 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="30561" width="16" height="16"><path d="M180.591 1024V361.998L542.035 915.51c10.24 15.222 20.757 29.89 30.997 44.558a251.295 251.295 0 0 0 33.764 37.916 119.559 119.559 0 0 0 39.023 23.524l7.473 1.937h76.661c44.004-13.56 66.422-53.137 66.422-119.558V45.942H619.25v676.116L249.227 161.626l-30.72-47.325a249.081 249.081 0 0 0-27.676-37.086 115.684 115.684 0 0 0-33.21-21.864 108.489 108.489 0 0 0-44.559-8.302A110.703 110.703 0 0 0 51.346 65.59a102.123 102.123 0 0 0-40.684 46.772 207.014 207.014 0 0 0-10.516 73.34V1024z m913.297 0l4.152-11.624L1348.78 292.81l251.295 724.272a57.842 57.842 0 0 1 2.214 6.365h224.45a328.51 328.51 0 0 0-11.347-36.531c-4.705-12.178-9.133-24.355-13.56-37.086L1532.27 249.081c-9.687-27.676-19.096-52.307-27.676-76.385a304.432 304.432 0 0 0-33.21-63.654 149.172 149.172 0 0 0-51.2-45.388 156.09 156.09 0 0 0-76.662-17.436 158.582 158.582 0 0 0-76.662 17.16 143.36 143.36 0 0 0-50.646 45.387 332.108 332.108 0 0 0-33.765 63.931c-9.41 24.078-19.926 48.71-28.506 76.385l-263.749 694.66c-4.428 12.73-9.133 25.184-13.838 37.362a297.79 297.79 0 0 0-12.177 39.3V1024z" fill="#2E3034" p-id="30562"></path><path d="M2269.551 857.946a332.108 332.108 0 1 1 317.993-423.715l124.818-134.78a498.162 498.162 0 1 0 4.705 442.81l-130.353-119.835a332.108 332.108 0 0 1-317.163 235.52z" fill="#2EBBFB" p-id="30563"></path><path d="M3334.234 27.676c-275.096 0-456.648 290.594-664.216 498.162C2836.072 691.892 3059.415 1024 3334.234 1024a498.162 498.162 0 1 0 0-996.324z m-29.613 818.37c-177.124 0-320.207-213.38-426.205-320.208 133.397-133.397 249.08-320.208 427.036-320.208a320.208 320.208 0 1 1 0 640.415z" fill="#2EBBFB" p-id="30564"></path><path d="M4760.362 207.568V0h-544.934a285.89 285.89 0 0 0-285.336 285.613v65.315a285.89 285.89 0 0 0 285.336 285.613h323.528v179.891h-608.864V1024h544.934a285.613 285.613 0 0 0 285.336-285.613v-65.315a285.613 285.613 0 0 0-285.89-285.613h-322.975V207.568z" fill="#2E3034" p-id="30565"></path><path d="M4898.74 913.297a110.703 110.703 0 1 0 221.406 0 110.703 110.703 0 1 0-221.406 0z" fill="#1BE1F7" p-id="30566"></path></svg> Nacosæºç åˆ†æ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Sentinel%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Sentinel%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204437313" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="31663" width="16" height="16"><path d="M177.307393 191.252918v207.190662l334.692607-191.252919V0L420.357977 51.797665v103.595331L272.933852 239.066148V135.470817L177.307393 191.252918z" fill="#33E6D7" p-id="31664"></path><path d="M846.692607 191.252918v207.190662L512 207.190661V0l91.642023 51.797665v103.595331l147.424125 83.673152V135.470817l95.626459 55.782101z" fill="#246ADF" p-id="31665"></path><path d="M512 255.003891v103.595331l-243.050584 135.470817v183.284047l243.050584-143.439689v334.692607l-243.050584-143.439689v51.797666l243.050584 139.455252v107.579767l-279.508171-159.736031A109.452451 109.452451 0 0 1 177.307393 769.195331V446.256809z" fill="#33E6D7" p-id="31666"></path><path d="M512 406.412451v75.704281l243.050584 143.439688v155.392996l-243.050584 135.470817v107.579767l279.508171-159.736031A109.452451 109.452451 0 0 0 846.692607 769.195331V446.256809L512 255.003891v103.595331l243.050584 139.455253v47.813229z" fill="#246ADF" p-id="31667"></path><path d="M512 533.914397l199.22179 115.548638v103.595331l-199.22179 115.548638v-334.692607z" fill="#246ADF" p-id="31668"></path><path d="M512 406.412451l-199.22179 115.548638v79.688716l199.22179-119.533073v-75.704281z" fill="#33E6D7" p-id="31669"></path></svg> Sentinelæºç åˆ†æ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744204469834" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32826" width="16" height="16"><path d="M525.2 198.3c-8.6 5.6-15.2 13.8-18.9 23.4-3.8 12.4-3.2 25.6 1.5 37.7 3.9 12.7 11.7 23.8 22.2 31.8 5.4 3.8 11.6 6.2 18.2 7 6.6 0.8 13.2-0.3 19.1-3.3 7-3.9 12.6-10 15.9-17.3 3.2-7.4 5-15.3 5.2-23.3 0.7-10.2-0.6-20.4-3.8-30.1-3.5-10.6-10.3-19.7-19.5-25.9-4.7-3-9.9-5-15.4-5.8-5.5-0.8-11.1-0.2-16.3 1.8-2.9 1.2-5.7 2.7-8.3 4.5" fill="#FFFFFF" p-id="32827"></path><path d="M810.2 606.5c-5.1-28.3-13.1-56-23.8-82.6-7.3-19.8-17.2-38.6-29.5-55.8-12.4-16.5-28.1-30.4-40.2-47.1-6.4-8.7-11.8-18.4-18.5-26.9-2.7-5.6-5.3-11.2-7.9-16.8-8-17.5-15.3-35.4-24.8-52-1.5-2.6-3.1-5.2-4.6-7.7-1.2-16-2.9-32-3.8-48 0.7-32.1-2-64.3-8.1-95.9-4.2-15.1-10.6-29.6-19-42.8-9.8-15.6-22.4-29.2-37.2-40.1-24.1-17.1-52.9-26.3-82.4-26.4-21.7-0.5-43.2 4.4-62.5 14.4-20.3 11.1-36.7 28.2-47 48.9-9.6 20.9-14.7 43.5-15 66.5-0.8 22.6 1.3 45 2.2 67.6 0.9 23.4 0.4 46.9 2.3 70.3 0.6 7.5 1.5 15 1.5 22.6 0 3.8-0.2 7.6-0.3 11.3l-0.3 0.8c-10.2 17.3-21.5 34-33.8 49.9-8.6 10.9-17.2 21.7-25.9 32.4-11.3 12.7-20.9 26.8-28.5 42-5.1 13.2-9.2 26.8-12.4 40.6l-0.3 1.1c-4.8 15.9-10.8 31.3-18 46.2-0.7 1.4-1.4 2.9-2 4.2-4.3 8.9-8.8 17.8-13.5 26.5l-5.4 10.1c-3.4 6.1-6.4 12.4-9 18.8-1.5 3.9-2.7 7.9-3.4 12-1.3 8.7-0.7 17.5 1.6 25.9 0.5 2.1 1.2 4.2 1.9 6.3 2.2 6.2 4.8 12.3 7.9 18.1 1.4 2.7 2.9 5.3 4.3 8l1.3 1.9c1.4 2.5 2.9 5 4.4 7.4l0.2 0.3c1.7 2.8 3.6 5.5 5.4 8.2l0.3 0.4c1.9 2.6 3.8 5.3 5.8 7.9 7.4 28.9 21 55.8 39.7 79-2.9 5.1-5.5 10.1-8.4 15.1-10.2 14.8-18.6 30.7-25.1 47.4-2.7 8.6-3.4 17.7-1.9 26.6 1.4 9 6 17.1 13 23 4.7 3.6 10.1 6.1 15.8 7.3 5.7 1.2 11.6 1.8 17.5 1.5 22.2-1.7 44.2-6.1 65.4-12.9 12.8-3.4 25.6-6.4 38.6-9 13.5-3.1 27.2-5 41-5.6 3.4 0.1 6.8-0.1 10.1-0.3 9.4 1 18.8 1.4 28.3 1l3.5-0.2c2.4 0.3 4.9 0.4 7.4 0.6 16.6 0.9 33.1 2.6 49.5 5.1 14.4 2.2 28.8 5 43 8.5 21.9 6.6 44.4 11 67.3 12.9 6 0.3 12-0.2 18-1.4 5.9-1.2 11.5-3.8 16.3-7.4 7-5.8 11.6-13.9 13.1-22.9 1.5-8.9 0.8-18-1.9-26.6-6.6-16.7-15.1-32.6-25.5-47.3-3.6-6.1-7-12.4-10.6-18.5 15.5-17.3 29.2-36.3 40.7-56.5 7 0.4 13.9-0.4 20.6-2.6 17.5-5.9 32.7-17.3 43.3-32.5 3.2-4.5 5.7-9.5 7.2-14.8 6.9-10.7 11.6-22.7 13.8-35.3 3.2-20.8 2.7-42.1-1.5-62.7h-0.2z m0 0" fill="#020204" p-id="32828"></path><path d="M425.6 323.2c-3.1 4-5.3 8.7-6.4 13.6-1.1 4.9-1.8 10-1.9 15 0.3 10.1-0.5 20.2-2.5 30.1-3.5 10.3-8.8 19.8-15.6 28.3-11.7 14.7-20.9 31.2-27.2 48.8-3.2 10.9-4.3 22.3-3.1 33.7-12.1 17.9-22.6 36.9-31.3 56.7-13.4 29.9-22 61.8-25.5 94.4-4.3 40.1 1.6 80.6 17 117.8 11.3 26.8 28.5 50.8 50.3 70.1 11.2 9.7 23.5 17.9 36.7 24.4 46.7 22.8 101.4 22.3 147.6-1.4 23.1-13.5 44.2-30.2 62.6-49.5 11.9-10.8 22.5-22.9 31.8-36.1 15.5-26.9 24.6-57.1 26.5-88.1 9.6-53.6 3.7-108.8-16.9-159.2-8.1-16.8-18.8-32.2-31.8-45.6a252.5 252.5 0 0 0-20.2-68c-7.2-15.5-15.9-30.3-22.6-46.2-2.7-6.5-5.1-13.1-8.1-19.4-2.9-6.4-6.9-12.3-11.8-17.3-5.3-4.9-11.6-8.6-18.5-10.7-6.9-2.2-14-3.4-21.2-3.6-14.4-0.7-28.9 1.1-43.1 0.6-11.5-0.5-22.8-2.5-34.3-1.8-5.7 0.3-11.4 1.4-16.7 3.5-5.4 2.1-10.1 5.5-13.8 10m4.6-125.1c-5.4 0.4-10.5 2.7-14.4 6.4-3.9 3.7-6.8 8.4-8.4 13.5-2.7 10.4-3.4 21.3-1.9 32 0.2 9.7 1.9 19.4 5.1 28.6 1.8 4.5 4.4 8.7 7.8 12.2 3.4 3.5 7.7 6.1 12.4 7.3 4.5 1.1 9.2 0.9 13.5-0.5 4.3-1.4 8.3-3.8 11.5-7 4.7-4.8 8.1-10.7 9.8-17.1 1.7-6.4 2.5-13.1 2.3-19.8 0-8.3-1.3-16.6-3.8-24.6s-6.8-15.3-12.6-21.4c-2.8-2.9-6-5.4-9.6-7.2-3.7-1.7-7.7-2.6-11.7-2.4m95 0c-8.6 5.6-15.2 13.8-18.9 23.4-3.8 12.4-3.2 25.6 1.5 37.7 3.9 12.7 11.7 23.8 22.2 31.8 5.4 3.8 11.6 6.2 18.2 7 6.6 0.8 13.2-0.3 19.1-3.3 7-3.9 12.6-10 15.9-17.3 3.2-7.4 5-15.3 5.2-23.3 0.7-10.2-0.6-20.4-3.8-30.1-3.5-10.6-10.3-19.7-19.5-25.9-4.7-3-9.9-5-15.4-5.8-5.5-0.8-11.1-0.2-16.3 1.8-2.9 1.2-5.7 2.7-8.3 4.5" fill="#FFFFFF" p-id="32829"></path><path d="M544.5 223.6c-3.2 0.2-6.2 1.2-8.9 2.9s-5 4-6.8 6.6c-3.4 5.3-5.3 11.5-5.4 17.9-0.3 4.7 0.4 9.5 1.9 14s4.3 8.5 7.9 11.5c3.8 3.1 8.4 4.9 13.3 5.2 4.9 0.2 9.7-1.1 13.7-3.9 3.2-2.3 5.8-5.2 7.6-8.7 1.8-3.4 2.9-7.2 3.4-11 1-6.8-0.2-13.8-3.2-19.9-3.1-6.2-8.4-10.9-14.8-13.4-2.8-1.1-5.7-1.5-8.7-1.4" fill="#020204" p-id="32830"></path><path d="M430.2 198.3c-5.4 0.4-10.5 2.7-14.4 6.4-3.9 3.7-6.8 8.4-8.4 13.5-2.7 10.4-3.4 21.3-1.9 32 0.2 9.7 1.9 19.4 5.1 28.6 1.8 4.6 4.4 8.7 7.8 12.2 3.4 3.5 7.7 6.1 12.4 7.3 4.5 1.1 9.2 0.9 13.5-0.5 4.3-1.4 8.3-3.8 11.5-7 4.7-4.8 8.1-10.7 9.8-17.1 1.7-6.4 2.5-13.1 2.3-19.8 0-8.3-1.3-16.6-3.8-24.6s-6.8-15.3-12.6-21.4c-2.8-2.9-6-5.4-9.6-7.2-3.7-1.7-7.7-2.6-11.7-2.4" fill="#FFFFFF" p-id="32831"></path><path d="M417.3 242.8c-1.3 6.7-1 13.7 1.1 20.2 1.6 4.3 4 8.2 7.2 11.5 2 2.2 4.3 4.1 7 5.4 2.7 1.4 5.7 1.8 8.7 1.1 2.7-0.7 5-2.3 6.7-4.5 1.7-2.2 2.9-4.7 3.7-7.3 2.3-7.8 2.1-16.1-0.4-23.9-1.6-5.7-4.7-10.9-9.1-14.8-2.1-1.8-4.7-3.2-7.4-3.9-2.8-0.7-5.7-0.5-8.4 0.7-2.8 1.4-5.1 3.7-6.5 6.5-1.4 2.8-2.3 5.8-2.7 8.9" fill="#020204" p-id="32832"></path><path d="M404.6 326.9c0.2 0.9 0.5 1.8 1 2.5 0.9 1.4 2 2.5 3.4 3.4 1.3 0.9 2.6 1.7 3.9 2.5 6.9 4.7 13 10.5 17.9 17.3 6 9.4 13.5 17.8 22 25 6.5 4.5 14.1 7.2 22 7.9 9.2 0.7 18.5-0.4 27.4-3.2 8.2-2.4 16.1-5.8 23.5-10.3 12.7-10.2 26.3-19.2 40.7-26.7 3.4-1.2 6.8-2.1 10-3.6 3.3-1.4 6.1-3.8 7.8-7 1.1-3.2 1.8-6.6 1.9-10 0.5-3.6 1.7-7.1 2.3-10.7 0.8-3.6 0.5-7.3-0.8-10.8-1.4-2.7-3.6-4.9-6.3-6.3-2.7-1.3-5.7-2.1-8.7-2.2-6.1 0.2-12.1 0.8-18 1.8-8 0.7-16-0.3-24 0-9.9 0.3-19.8 2.5-29.8 2.9-11.4 0.6-22.7-1.2-34.1-1.7-4.9-0.3-9.9-0.1-14.8 0.7-4.9 0.7-9.6 2.5-13.7 5.3-3.8 3-7.3 6.2-10.7 9.6-1.8 1.6-3.8 3-5.9 4.1-2.2 1.1-4.5 1.7-7 1.6-1.2-0.2-2.5-0.2-3.7 0-0.7 0.3-1.4 0.7-1.9 1.2l-1.5 1.8c-1 1.5-1.9 3.1-2.6 4.7" fill="#D99A03" p-id="32833"></path><path d="M429.7 301.7c-4 2.4-7.9 5-11.8 7.7-2.1 1.3-3.8 3-5.1 5.1-0.7 1.6-1 3.3-0.9 5 0.1 1.7 0.1 3.4 0 5.1-0.1 1.1-0.5 2.3-0.5 3.5 0 0.6 0 1.2 0.2 1.7 0.2 0.6 0.4 1.1 0.8 1.5 0.5 0.5 1.2 0.9 2 1.1 0.7 0.2 1.5 0.3 2.3 0.5 3.5 1 6.7 2.9 9.3 5.4 2.7 2.4 5.1 5.2 8 7.5 8 6 17.7 9.1 27.6 9 9.9-0.2 19.7-1.6 29.2-4.1 7.5-1.6 14.9-3.6 22.1-6.1 11.2-4.2 21.5-10.3 30.4-18.2 3.9-3.8 8-7.2 12.4-10.3 4-2.5 8.7-4.2 12.7-6.6 0.4-0.2 0.7-0.5 1.1-0.7 0.3-0.3 0.6-0.6 0.8-1 0.3-0.7 0.3-1.5 0-2.2-0.2-0.7-0.5-1.3-0.9-1.8-0.5-0.6-1.1-1.2-1.7-1.7-4.6-3.4-10.1-5.3-15.8-5.5-5.8-0.4-11.3 0-16.9-1.1-5.2-1.1-10.3-2.6-15.3-4.4-5.3-1.7-10.7-3-16.3-3.9-13-2.1-26.2-1.8-39.1 1-12.1 2.7-23.8 7.3-34.6 13.5" fill="#604405" p-id="32834"></path><path d="M428.4 288.1c-5.8 3.9-11 8.7-15.5 14.1-2.6 3-4.7 6.5-6.1 10.3-0.9 3-1.5 6.1-2 9.2-0.3 1.1-0.5 2.3-0.5 3.5 0 0.6 0.1 1.2 0.3 1.7 0.2 0.6 0.5 1.1 0.9 1.5 0.7 0.7 1.6 1.1 2.6 1.3 0.9 0.2 1.9 0.2 2.9 0.3 4.4 0.7 8.5 2.5 12.1 5.1 3.6 2.5 7 5.4 10.7 7.8 8.4 5 18 7.7 27.8 7.9 9.8 0.2 19.5-0.8 29-2.9 7.6-1.4 15.1-3.5 22.4-6.3 10.9-4.7 21.1-10.8 30.4-18.2 4.3-3.2 8.5-6.6 12.4-10.3 1.3-1.3 2.6-2.6 4-3.8 1.4-1.2 3-2.1 4.7-2.7 2.7-0.7 5.5-0.8 8.3-0.1 2 0.5 4.1 0.7 6.2 0.7 1.1 0 2.1-0.2 3.1-0.5 1-0.4 1.9-1 2.5-1.8 0.9-1.1 1.3-2.4 1.3-3.8s-0.4-2.7-1.1-3.9c-1.5-2.3-3.8-4.1-6.3-5.1-3.5-1.4-7.1-2.5-10.8-3.2-11.3-2.7-22.3-6.7-32.7-11.9-5.2-2.6-10.1-5.4-15.3-8.1-5.2-2.9-10.6-5.4-16.2-7.2-12.9-3.5-26.6-2.9-39.1 1.8-14 4.9-26.5 13.4-36.1 24.7" fill="#F5BD0C" p-id="32835"></path><path d="M493.5 272.2c0.7 2.3 4.3 1.9 6.4 2.9 2.1 1 3.3 2.9 5.3 3.1 2.1 0.2 5-0.7 5.3-2.6 0.4-2.6-3.4-4.2-5.8-5.1-3.2-1.5-6.8-1.6-10-0.2-0.7 0.3-1.4 1.2-1.2 1.9z m-34.4-1.2c-2.7-0.9-7.1 3.8-5.8 6.3 0.4 0.7 1.6 1.5 2.4 1.1 0.8-0.4 2.3-3.1 3.6-4 1-0.8 0.8-3.1-0.2-3.4z m0 0" fill="#CD8907" p-id="32836"></path><path d="M887.7 829.8c-2 5.2-4.9 10-8.5 14.3-8.4 9-18.6 16.2-29.8 21.2-19 8.8-37.5 18.6-55.5 29.3-11.7 7.8-22.6 16.6-32.7 26.4-8.3 8.7-17.2 16.7-26.6 24.2-9.8 7.2-21.1 12.1-33.1 14-14.7 1.9-29.6-0.4-43.1-6.5-9.7-3.7-18.1-10.2-24-18.8-5-9.2-7.3-19.5-6.8-29.9 0.6-18.3 2.8-36.5 6.6-54.5 2.6-15 5.2-30 6.8-45.1 2.8-27.6 3.1-55.3 1-82.9-0.5-4.6-0.5-9.3 0-13.9 0.6-9.4 8.5-16.6 18-16.5 4.3-0.1 8.6 0.3 12.8 1.1 10 1.2 20 2.9 29.8 5.2 6.1 1.6 12.2 3.8 18.3 5.5 10.2 3 21 3.9 31.6 2.9 11.1-2.6 22.4-4.3 33.8-5.3 4.7 0.2 9.4 1 13.8 2.4 4.6 1.3 8.9 3.6 12.4 6.9 2.5 2.7 4.5 5.8 5.8 9.2 1.9 5.1 3.1 10.4 3.5 15.8 0.2 4.8 0.6 9.6 1.2 14.4 1.7 7.7 5.4 14.9 10.6 20.9 5.3 5.8 11 11.2 17.2 16 5.9 5.2 12.1 10 18.6 14.4 3.1 2.1 6.2 4 9.1 6.3 3 2.2 5.5 5 7.4 8.2 2.4 4.4 3.2 9.5 2 14.4" fill="#F5BD0C" p-id="32837"></path><path d="M887.7 829.8c-2 5.2-4.9 10-8.5 14.3-8.4 9-18.6 16.2-29.8 21.2-19 8.8-37.5 18.6-55.5 29.3-11.7 7.8-22.6 16.6-32.7 26.4-8.3 8.7-17.2 16.7-26.6 24.2-9.8 7.2-21.1 12.1-33.1 14-14.7 1.9-29.6-0.4-43.1-6.5-9.7-3.7-18.1-10.2-24-18.8-5-9.2-7.3-19.5-6.8-29.9 0.6-18.3 2.8-36.5 6.6-54.5 2.6-15 5.2-30 6.8-45.1 2.8-27.6 3.1-55.3 1-82.9-0.5-4.6-0.5-9.3 0-13.9 0.6-9.4 8.5-16.6 18-16.5 4.3-0.1 8.6 0.3 12.8 1.1 10 1.2 20 2.9 29.8 5.2 6.1 1.6 12.2 3.8 18.3 5.5 10.2 3 21 3.9 31.6 2.9 11.1-2.6 22.4-4.3 33.8-5.3 4.7 0.2 9.4 1 13.8 2.4 4.6 1.3 8.9 3.6 12.4 6.9 2.5 2.7 4.5 5.8 5.8 9.2 1.9 5.1 3.1 10.4 3.5 15.8 0.2 4.8 0.6 9.6 1.2 14.4 1.7 7.7 5.4 14.9 10.6 20.9 5.3 5.8 11 11.2 17.2 16 5.9 5.2 12.1 10 18.6 14.4 3.1 2.1 6.2 4 9.1 6.3 3 2.2 5.5 5 7.4 8.2 2.4 4.4 3.2 9.5 2 14.4M259.4 676.3c4.9-1.9 10.2-2.4 15.4-1.4 5.2 1 10.1 3.1 14.4 6.1 8.3 6.3 15.5 14.1 21.2 22.8 14.1 19.4 27.6 39.2 39.9 59.8 10 16.7 19.1 33.9 30.6 49.6 7.5 10.2 16 19.7 23.6 29.9 7.9 10 13.9 21.4 17.6 33.5 4.4 16.1 2.6 33.2-4.9 48.1-5.4 10.4-13.5 19.1-23.4 25.1-10 6-21.5 9-33.2 8.7-18.4-2.5-36.2-8.1-52.6-16.6-34.9-13.9-72.8-18.3-108.8-29.1-11.1-3.3-21.9-7.3-33.1-10.3-5-1.2-9.9-2.7-14.7-4.7-4.7-2-8.8-5.4-11.5-9.7-2-3.5-3-7.5-2.9-11.5 0.1-4 0.9-7.9 2.3-11.5 2.7-7.5 7.1-14.2 10-21.6 4.4-12.2 6.1-25.3 5-38.2-0.6-12.9-2.9-25.8-3.6-38.7-0.6-5.8-0.4-11.6 0.6-17.3 1.5-11.4 10.4-20.5 21.9-22.2 5.3-0.9 10.6-1.3 15.9-1 5.3 0.3 10.7 0.3 16 0 5.3-0.3 10.6-1.8 15.3-4.3 4.3-2.6 8.1-6.2 11-10.4 2.9-4.2 5.5-8.5 7.9-13 2.4-4.5 5.1-8.7 8.3-12.7 3-4.1 7.1-7.2 11.8-9.4" fill="#F5BD0C" p-id="32838"></path><path d="M259.4 676.4c4.9-1.9 10.2-2.4 15.4-1.4 5.2 1 10.1 3.1 14.4 6.1 8.3 6.3 15.5 14.1 21.2 22.8 14.1 19.4 27.6 39.2 39.9 59.8 10 16.7 19.1 33.9 30.6 49.6 7.5 10.2 16 19.7 23.6 29.9 7.9 10 13.9 21.4 17.6 33.5 4.4 16.1 2.6 33.2-4.9 48.1-5.4 10.4-13.5 19.1-23.4 25.1-10 6-21.5 9-33.2 8.7-18.4-2.5-36.2-8.1-52.6-16.6-34.9-13.9-72.8-18.3-108.8-29.1-11.1-3.3-21.9-7.3-33.1-10.3-5-1.2-9.9-2.7-14.7-4.7-4.7-2-8.8-5.4-11.5-9.7-2-3.5-3-7.5-2.9-11.5 0.1-4 0.9-7.9 2.3-11.5 2.7-7.5 7.1-14.2 10-21.6 4.4-12.2 6.1-25.3 5-38.2-0.6-12.9-2.9-25.7-3.6-38.7-0.6-5.8-0.4-11.6 0.6-17.3 1.5-11.4 10.4-20.5 21.9-22.2 5.3-0.9 10.6-1.3 15.9-1 5.3 0.3 10.7 0.3 16 0 5.3-0.3 10.6-1.8 15.3-4.3 4.3-2.6 8.1-6.2 11-10.4 2.9-4.2 5.5-8.5 7.9-13 2.4-4.5 5.1-8.7 8.3-12.7 3-4.1 7.1-7.3 11.8-9.4" fill="#F5BD0C" p-id="32839"></path><path d="M267.1 684.8c4.4-1.7 9.3-2 13.9-0.9s8.9 3.2 12.6 6.2c7.1 6.2 13.1 13.6 17.6 21.9 12 19.4 23.7 39 34.6 59 7.9 15.3 16.8 30.1 26.6 44.2 6.8 9.2 14.6 17.6 21.6 26.6 7.3 8.9 12.8 19 16.2 29.9 4 14.3 2.3 29.6-4.5 42.9-5 9.4-12.5 17.3-21.7 22.6-9.2 5.4-19.8 8-30.4 7.5-16.7-2.6-32.9-7.6-48.2-14.9-30.4-11.1-63.5-12.5-94.7-21.2-11.2-3-22.1-7.1-33.4-9.9-5-1.1-10-2.5-14.8-4.3-4.8-1.8-9-5.2-11.8-9.5-1.8-3.4-2.7-7.2-2.5-11 0.2-3.8 1-7.6 2.4-11.2 2.7-7.1 7-13.6 9.7-20.7 3.8-11 5.1-22.6 3.9-34.2-0.8-11.5-2.9-22.9-3.5-34.5-0.4-5.1-0.2-10.3 0.7-15.4 0.9-5.1 3.3-9.8 6.9-13.6 4.2-3.8 9.4-6.3 15-7 5.6-0.7 11.2-0.7 16.7 0 5.6 0.7 11.2 0.9 16.8 0.8 11 0 21-6.4 25.7-16.4 2.3-4.5 4.3-9.2 5.9-13.9 1.7-4.8 4-9.3 6.7-13.6 2.8-4.3 6.8-7.7 11.5-9.7" fill="#F5BD0C" p-id="32840"></path></svg> Linuxå­¦ä¹ </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Linux%E5%AD%A6%E4%B9%A0/Linux-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Linuxå­¦ä¹ </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744204507624" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33900" width="16" height="16"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z" p-id="33901"></path></svg> Gitå­¦ä¹ </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Git%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Git-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Gitå­¦ä¹ </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744204536314" class="icon" viewBox="0 0 1220 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="35052" width="16" height="16"><path d="M903.830212 959.568539c27.357803-23.522597 54.971286-47.045194 82.329089-70.82347 9.460175-8.181773 19.687391-16.363546 28.891885-25.056679-7.414732-9.460175-19.943071-16.107865-30.425968-20.198752-21.221473-8.181773-42.442946-5.369288-61.874656 5.880649-25.56804 14.829463-36.562297 38.35206-35.539576 67.755306 0.25568 11.505618 3.579526 22.755556 9.715855 32.471411 1.789763 3.579526 4.346567 6.903371 6.903371 9.971535m31.70437 22.244195c13.551061 4.602247 28.891885 4.090886 42.698626 1.534082 7.159051-3.068165 25.056679-10.994257 31.70437-9.715855l1.022722 0.255681 1.022721 0.51136c4.090886 2.045443 7.926092 4.857928 9.971536 8.948814 4.857928 9.715855 2.556804 19.43171-6.903371 24.800999l-3.068165 1.789763c-35.028215 20.198752-72.357553 17.386267-107.385768-1.534082-16.619226-8.948814-29.403246-22.499875-38.86342-38.863421l-2.301124-3.835206c-22.499875-39.119101-19.43171-80.027965 5.880649-117.101623 8.693134-12.78402 20.198752-22.755556 33.749813-30.425968l5.113608-2.812484c32.982772-19.17603 68.522347-17.897628 102.52784-1.022722 18.153308 8.948814 32.982772 22.499875 43.209988 40.141823l1.789763 3.068165c7.414732 12.78402-2.301124 24.033958-12.016979 31.704369-11.505618 8.948814-23.011236 19.43171-34.005493 29.147566-25.056679 20.965793-49.601998 42.442946-74.147316 63.408739z m262.83945-177.442197h3.579526c10.994257 0 18.408989 7.414732 18.408989 18.408989 0 15.340824-14.573783 19.17603-27.357803 19.17603-16.619226 0-32.471411 9.971536-43.977029 21.221473-14.318102 14.062422-20.454432 32.21573-20.454432 51.903121v89.48814c0 10.227216-6.39201 18.408989-17.130586 18.408988h-2.812485c-10.738577 0-17.130587-8.181773-17.130587-18.408988v-94.601748c0-36.306617 17.641948-65.965543 47.300874-86.931336 17.897628-12.016979 38.09638-18.664669 59.573533-18.664669z m-460.99176 63.664419c14.318102-14.318102 28.891885-28.636205 43.465668-42.954307 4.090886-3.835206 19.43171-20.710112 25.56804-20.710112h6.64769l0.767042 0.25568c8.437453 1.789763 14.829463 7.159051 14.829463 16.107865v3.579526c0 6.13633-7.159051 13.295381-11.249938 17.641948-8.437453 8.948814-17.386267 17.641948-26.079401 26.590761L746.586767 913.801748c19.17603 19.17603 38.35206 38.60774 57.528089 58.039451 5.369288 5.369288 10.482896 10.738577 15.852185 16.107865 1.789763 2.045443 4.602247 4.346567 6.13633 6.90337 1.534082 2.556804 2.556804 5.369288 2.556804 8.437454v3.835206l-0.255681 0.767041c-2.045443 8.437453-7.414732 15.340824-16.874906 15.340824h-3.068165c-6.13633 0-13.0397-6.903371-17.130587-10.994257-8.693134-8.181773-16.874906-16.619226-25.568039-25.05668l-28.380525-27.869163v44.488389c0 10.227216-6.39201 18.408989-17.130587 18.408989h-2.812484c-10.738577 0-17.130587-8.181773-17.130587-18.408989v-251.078152c0-10.227216 6.39201-18.408989 17.130587-18.408989h2.812484c10.738577 0 17.130587 8.181773 17.130587 18.408989v115.31186z m-119.914107-25.056679c-5.624969-2.556804-16.107865-3.579526-21.988515-3.835206-30.937328-1.278402-53.181523 16.363546-66.476903 43.465668-4.602247 9.460175-6.64769 19.43171-6.647691 29.658926 0 31.70437 16.619226 53.948564 44.99975 67.499626 10.227216 4.857928 23.778277 5.880649 35.028215 5.880649 9.971536 0 24.033958-6.13633 32.727091-10.227216l1.534083-0.767041h6.903371l0.767041 0.25568c8.437453 1.789763 14.829463 7.159051 14.829463 16.107865v3.579526c0 22.499875-41.164544 27.613483-56.761049 28.891885-55.482647 3.835206-96.902871-26.590762-112.755056-79.516604-2.812484-9.204494-4.090886-18.408989-4.090886-27.869164v-7.414731c0-40.141823 19.943071-71.846192 54.204244-92.300624 16.107865-9.460175 33.749813-14.318102 52.158802-14.318103h7.414731c19.687391 0 37.840699 5.624969 54.204245 16.619226l1.278402 1.022722 0.767041 1.278402c1.789763 2.812484 3.323845 6.39201 3.323846 9.715855v3.579526c0 9.460175-7.159051 14.573783-15.596505 16.107865h-3.068165c-5.369288 0.511361-17.897628-5.113608-22.755555-7.414732z m-337.498128 70.31211c0 28.124844 13.806742 48.834956 37.585019 63.408739 11.249938 6.903371 23.522597 9.971536 36.562297 9.971536 27.869164 0 48.323596-14.062422 62.641698-37.585019 6.903371-11.249938 9.971536-23.522597 9.971536-36.562297 0-26.079401-12.52834-46.022472-34.005493-60.596255-11.761298-7.926092-25.056679-12.016979-39.119101-12.016979-30.937328 0-53.181523 15.596504-66.732585 43.465668-4.857928 9.460175-6.903371 19.43171-6.903371 29.914607z m69.80075-110.198252h5.113608c42.954307 0 75.425718 20.710112 96.13583 58.295131 8.181773 15.085144 12.78402 31.193009 12.78402 48.323595v7.414732c0 40.141823-19.687391 72.101873-54.459925 92.300624-16.107865 9.460175-33.749813 14.318102-52.158802 14.318103h-7.414731c-40.141823 0-72.101873-19.943071-92.300625-54.204245-9.460175-16.107865-14.318102-33.749813-14.318102-52.158802v-7.414731c0-40.141823 19.943071-71.846192 54.204245-92.300624 16.107865-9.971536 33.749813-14.573783 52.414482-14.573783z m-311.930088 110.198252c0 28.891885 14.062422 50.624719 39.374782 64.687141 10.227216 5.624969 21.477154 8.693134 33.238452 8.693134 28.380524 0 49.601998-13.295381 64.17578-37.585019 6.64769-11.249938 9.971536-23.522597 9.971535-36.562297 0-25.056679-12.016979-44.74407-32.21573-59.317853-12.272659-8.948814-26.079401-13.295381-41.164544-13.295381-30.937328 0-53.181523 15.596504-66.732584 43.465668-4.602247 9.460175-6.64769 19.43171-6.647691 29.914607z m146.504869-82.584769v-78.238202c0-10.227216 6.39201-18.408989 17.130587-18.408989H204.54432c10.738577 0 17.130587 8.181773 17.130586 18.408989v164.402497c0 40.141823-19.943071 72.101873-54.459925 92.300624-16.107865 9.460175-33.749813 14.318102-52.158801 14.318102h-7.670412c-40.141823 0-72.101873-19.943071-92.300624-54.204244-9.460175-16.107865-14.318102-33.749813-14.318103-52.158802v-7.414732c0-40.141823 19.943071-72.101873 54.204245-92.300624 16.107865-9.460175 33.749813-14.318102 52.158801-14.318102h7.414732c27.357803 0 50.369039 10.482896 69.800749 27.613483zM704.14382 218.351061h109.175531V329.827715h55.226966c25.56804 0 51.647441-4.602247 75.937079-12.78402 11.761298-4.090886 25.056679-9.715855 36.817977-16.619226-15.340824-20.198752-23.266916-45.511111-25.56804-70.56779-3.068165-34.005493 3.835206-78.493883 26.846442-105.084644l11.505618-13.295381 13.551061 10.994257c34.516854 27.613483 63.408739 66.221223 68.522347 110.453933 41.420225-12.272659 89.999501-9.204494 126.561798 11.761298l15.085144 8.693134-7.926093 15.340824c-30.937328 60.340574-95.624469 79.005243-158.777528 75.681398-94.601748 235.481648-300.168789 346.958302-549.712859 346.958302-128.862921 0-247.242946-48.067915-314.486891-162.612734l-1.022722-1.789763-9.715855-19.943071C153.40824 456.645194 145.737828 401.418227 150.851436 346.446941l1.534082-16.619226h93.323346V218.351061h109.175531V109.175531h218.351061V0h130.908364v218.351061z" fill="#394D54" p-id="35053"></path><path d="M1057.749813 259.515605c7.414732-56.761049-35.283895-101.505119-61.618977-122.726591-30.425968 35.283895-35.028215 127.328839 12.52834 166.192259-26.590762 23.778277-82.840449 44.99975-140.112859 44.999751H168.749064c-5.624969 60.084894 4.857928 115.31186 28.891885 162.612734l7.926092 14.573783c5.113608 8.437453 10.482896 16.874906 16.619226 24.800998 28.636205 1.789763 55.226966 2.556804 79.516604 2.045444 47.556554-1.022722 86.675655-6.64769 116.078902-16.874907 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738577-3.835206 1.278402-7.926092 2.556804-12.27266 3.835206-23.266916 6.64769-48.067915 10.994257-80.283645 13.0397 1.789763 0-2.045443 0.25568-2.045443 0.255681-1.022722 0-2.556804 0.25568-3.579526 0.25568-12.52834 0.767041-26.335081 0.767041-40.141823 0.767041-15.340824 0-30.170287-0.25568-47.045193-1.022721l-0.511361 0.25568c58.295131 65.454182 149.317353 104.828964 263.606492 104.828964 241.873658 0 446.929338-107.130087 537.69588-347.725343 64.431461 6.64769 126.306117-9.715855 154.430961-64.687142-44.48839-26.079401-102.27216-17.897628-135.510611-1.278402z" fill="#00AADA" p-id="35054"></path><path d="M1057.749813 259.515605c7.414732-56.761049-35.283895-101.505119-61.618977-122.726591-30.425968 35.283895-35.028215 127.328839 12.52834 166.192259-26.590762 23.778277-82.840449 44.99975-140.112859 44.999751H210.169288c-2.812484 91.789263 31.193009 161.590012 91.533583 203.777278 47.556554-1.022722 86.675655-6.64769 116.078902-16.874906 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738577-3.835206 1.278402-7.926092 2.556804-12.27266 3.835206-23.266916 6.64769-50.369039 11.761298-82.329088 13.551061l-0.767041-0.767042c82.329089 42.187266 201.731835 42.187266 338.520848-10.482896 153.40824-58.806492 296.077903-171.305868 395.793259-299.657428-1.789763 1.022722-3.068165 1.789763-4.602247 2.301123z" fill="#24B8EB" p-id="35055"></path><path d="M170.283146 421.105618c4.346567 32.21573 13.806742 62.130337 27.613483 89.74382l7.926093 14.573783c5.113608 8.437453 10.482896 16.874906 16.619226 24.800999 28.891885 1.789763 55.226966 2.556804 79.516604 2.045443 47.556554-1.022722 86.675655-6.64769 116.078901-16.874906 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738576-3.835206 1.278402-7.926092 2.556804-12.272659 3.835206-23.266916 6.64769-50.113358 11.249938-82.329089 13.295381-1.022722 0-3.068165 0-4.090886 0.25568-12.52834 0.767041-26.079401 1.022722-40.141823 1.022722-15.340824 0-30.937328-0.25568-47.556554-1.022722 58.295131 65.454182 150.084395 104.828964 264.373533 104.828964 207.101124 0 387.100125-78.493883 491.673408-252.100874H170.283146z" fill="#008BB8" p-id="35056"></path><path d="M216.561298 421.105618c12.272659 56.505368 42.187266 100.738077 85.397254 130.908365 47.556554-1.022722 86.675655-6.64769 116.078901-16.874907 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738577-3.835206 1.278402-7.926092 2.556804-12.272659 3.835206-23.266916 6.64769-50.624719 11.249938-82.84045 13.295381 82.329089 42.187266 201.220474 41.675905 338.009488-10.994257 82.840449-31.70437 162.357054-79.005243 233.947566-136.021973H216.561298z" fill="#039BC6" p-id="35057"></path><path d="M343.123096 244.430462h7.414732v78.749563h-7.414732V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.062422 0h7.414731v78.749563h-7.414731V244.430462z m-7.926093-7.926092h94.601748v94.601747h-94.601748v-94.601747zM452.298627 135.254931h7.414731v78.749563h-7.414731V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.062422 0h7.414732v78.749563H380.963795V135.254931z m-7.926092-7.926092h94.601748v94.601748h-94.601748v-94.601748z" fill="#00ACD3" p-id="35058"></path><path d="M452.298627 244.430462h7.414731v78.749563h-7.414731V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.062422 0h7.414732v78.749563H380.963795V244.430462z m-7.926092-7.926092h94.601748v94.601747h-94.601748v-94.601747z" fill="#20C2EF" p-id="35059"></path><path d="M561.474157 244.430462h7.414732v78.749563h-7.414732V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.573783 0h7.670412v78.749563h-7.670412V244.430462z m-13.806741 0h7.414731v78.749563h-7.414731V244.430462z m-7.926093-7.926092h94.601748v94.601747h-94.601748v-94.601747z" fill="#00ACD3" p-id="35060"></path><path d="M561.474157 135.254931h7.414732v78.749563h-7.414732V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.573783 0h7.670412v78.749563h-7.670412V135.254931z m-13.806741 0h7.414731v78.749563h-7.414731V135.254931z m-7.926093-7.926092h94.601748v94.601748h-94.601748v-94.601748zM670.649688 244.430462h7.414731v78.749563h-7.414731V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.573783 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-13.806742 0h7.414732v78.749563h-7.414732V244.430462z m-7.926092-7.926092h94.601748v94.601747h-94.601748v-94.601747z" fill="#20C2EF" p-id="35061"></path><path d="M670.649688 135.254931h7.414731v78.749563h-7.414731V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.573783 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-13.806742 0h7.414732v78.749563h-7.414732V135.254931z m-7.926092-7.926092h94.601748v94.601748h-94.601748v-94.601748z" fill="#00ACD3" p-id="35062"></path><path d="M670.649688 26.079401h7.414731V104.828964h-7.414731V26.079401z m-14.318102 0h7.670412V104.828964h-7.670412V26.079401z m-14.318103 0h7.670412V104.828964h-7.670412V26.079401z m-14.573783 0h7.670412V104.828964h-7.670412V26.079401z m-14.318102 0h7.670412V104.828964h-7.670412V26.079401z m-13.806742 0h7.414732V104.828964h-7.414732V26.079401z m-7.926092-7.926093h94.601748v94.601748h-94.601748v-94.601748z" fill="#20C2EF" p-id="35063"></path><path d="M779.825218 244.430462h7.414732v78.749563H779.825218V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.573783 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.062422 0h7.414731v78.749563H708.234707V244.430462z m-7.670412-7.926092h94.601747v94.601747h-94.601747v-94.601747z" fill="#00ACD3" p-id="35064"></path><path d="M461.758801 484.514357c14.318102 0 26.079401 11.761298 26.079401 26.079401s-11.761298 26.079401-26.079401 26.079401-26.079401-11.761298-26.0794-26.079401 11.505618-26.079401 26.0794-26.079401" fill="#D4EDF1" p-id="35065"></path><path d="M461.758801 491.929089c2.301124 0 4.602247 0.511361 6.647691 1.278402-2.301124 1.278402-3.835206 3.835206-3.835206 6.64769 0 4.090886 3.323845 7.670412 7.670412 7.670412 2.812484 0 5.369288-1.534082 6.64769-4.090886 1.022722 2.301124 1.534082 4.602247 1.534083 7.159051 0 10.227216-8.437453 18.664669-18.66467 18.664669s-18.664669-8.437453-18.664669-18.664669 8.181773-18.664669 18.664669-18.664669M0 430.310112h1214.226217c-26.335081-6.64769-83.607491-15.852185-74.147316-50.369038-48.067915 55.738327-163.891136 39.119101-193.294382 11.505618-32.471411 47.300874-222.186267 29.403246-235.481648-7.414732-40.908864 47.812235-167.470662 47.812235-208.379525 0-13.295381 36.817978-203.010237 54.715605-235.481648 7.414732-29.147566 27.357803-145.226467 43.977029-193.294382-11.505618 9.460175 34.772534-47.812235 43.721348-74.147316 50.369038" fill="#394D54" p-id="35066"></path><path d="M531.04819 672.695131c-64.687141-30.681648-100.226717-72.357553-119.914108-117.868664-24.033958 6.903371-52.925843 11.249938-86.419975 13.0397-12.52834 0.767041-25.82372 1.022722-39.886142 1.022722-16.107865 0-32.982772-0.511361-50.880399-1.534083 59.317853 59.317853 132.186767 104.828964 267.186017 105.596005 10.227216 0.25568 19.943071 0 29.914607-0.25568z" fill="#BFDBE0" p-id="35067"></path><path d="M435.16804 596.758052c-8.948814-12.016979-17.641948-27.357803-24.033958-41.931585-24.033958 6.903371-52.925843 11.249938-86.419975 13.0397 23.011236 12.52834 55.994007 24.033958 110.453933 28.891885z" fill="#D4EDF1" p-id="35068"></path></svg> Dockerå­¦ä¹ </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/Docker%E5%AD%A6%E4%B9%A0/Docker-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Dockerå­¦ä¹ </p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744204683094" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="36148" width="16" height="16"><path d="M934.4 358.4l-248-144a20.8 20.8 0 0 0-19.2 0L512 304l92.8 54.4a12.8 12.8 0 0 1 6.4 6.4 22.4 22.4 0 0 1 3.2 9.6v161.6a16 16 0 0 1-9.6 16l-32 19.2a20.8 20.8 0 0 1-19.2 0L512 547.2v-59.2L470.4 464l-9.6-3.2-9.6 3.2-32 19.2a17.6 17.6 0 0 0-9.6 16v161.6a17.6 17.6 0 0 0 9.6 16l9.6 6.4 83.2 48 155.2 89.6a20.8 20.8 0 0 0 19.2 0l248-144a17.6 17.6 0 0 0 9.6-16V374.4a17.6 17.6 0 0 0-9.6-16z" fill="#5191FF" p-id="36149"></path><path d="M428.8 683.2l-9.6-6.4a17.6 17.6 0 0 1-9.6-16V499.2a17.6 17.6 0 0 1 9.6-16l32-19.2 9.6-3.2 9.6 3.2 41.6 24v59.2l41.6 24a20.8 20.8 0 0 0 19.2 0l32-19.2a17.6 17.6 0 0 0 9.6-16V374.4a22.4 22.4 0 0 0-3.2-9.6 12.8 12.8 0 0 0-6.4-6.4L512 304l-155.2-89.6a20.8 20.8 0 0 0-19.2 0l-248 144a17.6 17.6 0 0 0-9.6 16v286.4a17.6 17.6 0 0 0 9.6 16l248 144a20.8 20.8 0 0 0 19.2 0l155.2-89.6z" fill="#3D4265" p-id="36150"></path></svg> ä¸­é—´ä»¶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/ElasticSearch/Elasticsearch-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204703860" class="icon" viewBox="0 0 1314 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="37232" width="16" height="16"><path d="M447.705441 287.277795H69.932103v0.607353h679.627596c74.704374 0 142.120516-34.011747 187.064611-87.458779-93.532305-122.077879-241.118995-200.426369-406.318911-200.426369-93.532305 0-181.598437 25.508811-257.517516 69.2382 75.311726 56.483795 135.439637 131.795521 174.917558 218.039595z" fill="#EFBF1B" p-id="37233"></path><path d="M937.839015 821.748112c-44.944095-52.839679-111.145532-86.244074-185.849906-86.244074H69.324751v0.607352h386.883626c-36.441158 89.280837-95.354363 166.414621-168.844031 226.542532-88.673484-47.373505-161.5558-120.863174-209.536658-210.144011 86.244074 161.5558 256.302811 271.486627 452.477711 271.486627 166.414621 0.607353 314.001311-78.955842 407.533616-202.248426z" fill="#40BEB0" p-id="37234"></path><path d="M467.140725 655.940843h224.113121c79.563195 0 143.942574-64.379379 144.549927-143.942574 0-78.955842-64.379379-143.942574-143.942574-143.942574H465.92602c10.932347 43.122037 17.613226 91.102895 17.613226 143.942574s-6.073526 100.820537-16.398521 143.942574z" fill="#0AA5DE" p-id="37235"></path><path d="M483.539246 511.998269c0-53.447032-6.680879-100.820537-17.613226-143.942574H38.349766a512.180475 512.180475 0 0 0 0 287.885148h428.790959c10.324995-43.122037 16.398521-91.102895 16.398521-143.942574z" fill="#231F20" p-id="37236"></path><path d="M272.787883 69.2382c-87.458779 51.017621-158.519037 126.9367-203.463132 218.039595H447.705441c-39.477921-86.244074-99.605832-161.5558-174.917558-218.039595z" fill="#D7A229" p-id="37237"></path><path d="M287.971698 962.653922c73.489669-59.520558 132.402874-137.261695 168.844032-226.542532H69.932103c2.429411 5.466174 5.466174 10.932347 8.502937 16.398521 47.373505 89.280837 120.255821 162.770505 209.536658 210.144011z" fill="#009B8F" p-id="37238"></path></svg> ElasticSearch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ/MQ-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204382720" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29407" width="16" height="16"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E84738" p-id="29408"></path><path d="M743.68 463.776h-149.92a24.576 24.576 0 0 1-21.12-24.64v-158.72a24.48 24.48 0 0 0-7.04-17.28A24.064 24.064 0 0 0 548.48 256H496a24.32 24.32 0 0 0-24.192 24.416v160.384a24.8 24.8 0 0 1-22.432 22.976h-39.264a24.64 24.64 0 0 1-21.248-22.976V280.416A24.32 24.32 0 0 0 364.672 256h-52.48A24.32 24.32 0 0 0 288 280.416v463.168c0 13.536 10.88 24.416 24.192 24.416h431.616a24.32 24.32 0 0 0 24.192-24.416v-255.392a24.384 24.384 0 0 0-24.32-24.416z m-69.056 175.136a24.32 24.32 0 0 1-24.192 24.416h-52.448c-6.4 0-12.576-2.56-17.12-7.136a24.512 24.512 0 0 1-7.072-17.28v-49.92a24.32 24.32 0 0 1 24.192-24.448h52.48a24.32 24.32 0 0 1 24.16 24.416v49.952z" fill="#FFFFFF" p-id="29409"></path></svg> RabbitMQ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>æ•°æ®åº“å­¦ä¹ </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/404.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204748028" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="38731" width="16" height="16"><path d="M69.316923 0c6.931692 1.102769 14.020923 1.575385 20.716308 3.465846 11.185231 3.308308 22.449231 6.616615 33.004307 11.500308 19.298462 9.058462 39.148308 17.486769 56.241231 30.72 8.113231 6.222769 15.832615 12.918154 23.945846 19.140923 1.811692 1.339077 4.411077 2.363077 6.695385 2.520615 32.531692 1.969231 64.984615 4.332308 96.492308 13.942154 20.322462 6.144 38.281846 16.384 56.24123 27.175385A767.212308 767.212308 0 0 1 504.123077 215.355077c21.425231 20.795077 40.408615 44.189538 59.234461 67.505231 21.188923 26.308923 41.984 53.169231 56.871385 83.731692 10.712615 22.055385 18.904615 45.292308 29.144615 67.584 21.267692 45.686154 43.008 90.978462 64.59077 136.349538 5.986462 12.603077 12.524308 24.812308 18.589538 37.257847 3.465846 7.168 8.822154 12.524308 16.226462 14.808615 59.392 18.432 110.355692 51.278769 157.853538 90.427077 12.130462 10.003692 24.812308 19.456 37.179077 29.144615 9.137231 7.089231 17.171692 15.281231 23.945846 24.891077 5.041231 7.168 10.870154 13.863385 16.541539 20.637539 2.914462 3.544615 2.520615 5.907692-2.599385 7.640615-18.747077 6.380308-37.494154 12.839385-57.344 15.753846-22.764308 3.308308-45.292308 8.113231-67.977846 12.209231-6.537846 1.181538-13.154462 2.126769-21.110154 3.387077 2.048 3.465846 3.465846 7.010462 5.671385 9.767385 11.106462 13.627077 24.576 24.812308 40.172307 32.846769 32.768 16.856615 60.416 40.172308 85.779693 66.402461 9.294769 9.609846 17.801846 20.007385 26.781538 29.932308 3.938462 4.174769 8.113231 8.034462 12.209231 11.894154 7.876923 7.325538 14.651077 15.202462 14.729846 27.490461-1.260308-0.315077-2.678154-0.393846-3.780923-0.94523-11.972923-5.986462-23.709538-12.288-35.761231-18.038154-48.206769-22.843077-96.571077-45.134769-144.620307-68.214154-30.798769-14.966154-60.731077-31.744-91.766154-46.316308-49.860923-23.394462-100.430769-45.371077-150.449231-68.529231-40.96-18.904615-80.344615-40.644923-115.475692-69.238153-37.257846-30.247385-67.899077-66.402462-95.625847-105.314462-33.240615-46.631385-61.44-96.492308-89.718153-146.195692-22.528-39.463385-43.795692-79.950769-71.68-116.027077-21.425231-27.963077-45.528615-53.956923-68.529231-80.738462-3.780923-4.411077-7.876923-8.664615-12.681846-13.942154 0.393846 2.284308 0.472615 3.229538 0.787692 4.17477 9.924923 33.870769 26.781538 63.803077 51.436308 89.00923 12.445538 12.681846 16.541538 26.545231 10.318769 43.323077-4.174769 11.421538-7.483077 23.236923-12.051692 34.500923-6.931692 17.171692-9.452308 35.446154-13.39077 53.32677-5.513846 25.206154-2.520615 50.176-0.236307 75.382154 1.890462 20.716308 3.859692 41.353846 11.579077 60.809846 5.907692 14.808615 13.233231 29.144615 20.322461 43.480615 3.308308 6.616615 9.058462 11.027692 15.753846 14.178462 5.750154 2.756923 7.798154 2.048 8.979693-4.411077 1.339077-7.168 2.126769-14.493538 3.150769-21.819077 2.363077-17.486769 3.780923-35.288615 7.561846-52.539077 4.489846-20.48 12.760615-39.699692 27.332923-55.611077 5.513846-5.986462 10.24-12.681846 15.753846-19.613539 0.945231 1.575385 1.969231 2.914462 2.363077 4.332308 15.911385 50.963692 40.96 97.673846 67.899077 143.36 20.716308 35.288615 41.826462 70.577231 70.340923 100.509539 8.900923 9.294769 19.062154 17.329231 28.672 25.915077 0.945231 0.787692 2.363077 1.102769 3.623385 1.654153l-1.811693 2.441847c-3.072-1.339077-6.537846-2.126769-8.979692-4.17477a759.177846 759.177846 0 0 1-28.593231-24.49723c-20.952615-18.983385-41.747692-38.203077-62.621538-57.265231a231.108923 231.108923 0 0 1-42.141539-52.775385c-6.774154-11.342769-11.500308-23.788308-17.171692-35.682461a268.051692 268.051692 0 0 0-7.561846-14.729847c-0.787692-1.417846-2.441846-2.363077-3.702154-3.544615-0.866462 1.575385-2.363077 3.229538-2.599384 5.041231-0.945231 6.380308-1.339077 12.918154-2.284308 19.377231-2.284308 16.068923-4.411077 32.137846-7.246769 48.04923a55.217231 55.217231 0 0 1-12.681847 25.363693c-8.507077 10.24-19.613538 11.500308-31.901538 10.24-16.541538-1.811692-27.963077-10.870154-38.203077-23.236923-27.017846-32.768-39.857231-71.286154-45.449846-112.403693a366.276923 366.276923 0 0 1 0.157538-106.102154c2.205538-13.784615 6.616615-27.175385 10.24-40.723692 3.072-11.500308 6.301538-22.843077 9.767385-34.185846a65.614769 65.614769 0 0 1 5.828923-12.681846c2.284308-3.938462 2.363077-7.561846-1.417846-10.24-12.996923-9.452308-20.322462-23.158154-28.672-36.391385-22.291692-35.446154-34.658462-75.067077-48.128-114.215384a396.839385 396.839385 0 0 1-7.246769-23.945847 106.732308 106.732308 0 0 0-12.288-27.805538 746.180923 746.180923 0 0 0-51.515077-71.128615 112.009846 112.009846 0 0 1-22.843077-44.740923L0 64.354462V49.230769C0.708923 46.237538 1.260308 43.086769 2.126769 40.172308 7.719385 20.716308 18.904615 6.459077 39.384615 1.575385 42.929231 0.787692 46.631385 0.472615 50.254769 0H69.316923z m127.842462 176.206769c2.441846 3.702154 4.726154 6.774154 6.695384 10.003693 10.712615 17.092923 21.346462 34.264615 32.137846 51.357538 0.787692 1.417846 2.599385 3.387077 3.702154 3.308308 14.966154-1.890462 27.726769-17.329231 24.024616-30.72-3.938462-14.336-12.996923-25.363692-23.000616-35.761231-9.294769-9.688615-20.007385-10.633846-31.665231-5.513846-4.174769 1.811692-7.876923 4.804923-11.894153 7.325538z" fill="#449EFE" p-id="38732"></path></svg> Mysqlå­¦ä¹ </p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-0009425e data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h3 class="text" data-v-0009425e><svg t="1744204683094" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="36148" width="16" height="16"><path d="M934.4 358.4l-248-144a20.8 20.8 0 0 0-19.2 0L512 304l92.8 54.4a12.8 12.8 0 0 1 6.4 6.4 22.4 22.4 0 0 1 3.2 9.6v161.6a16 16 0 0 1-9.6 16l-32 19.2a20.8 20.8 0 0 1-19.2 0L512 547.2v-59.2L470.4 464l-9.6-3.2-9.6 3.2-32 19.2a17.6 17.6 0 0 0-9.6 16v161.6a17.6 17.6 0 0 0 9.6 16l9.6 6.4 83.2 48 155.2 89.6a20.8 20.8 0 0 0 19.2 0l248-144a17.6 17.6 0 0 0 9.6-16V374.4a17.6 17.6 0 0 0-9.6-16z" fill="#5191FF" p-id="36149"></path><path d="M428.8 683.2l-9.6-6.4a17.6 17.6 0 0 1-9.6-16V499.2a17.6 17.6 0 0 1 9.6-16l32-19.2 9.6-3.2 9.6 3.2 41.6 24v59.2l41.6 24a20.8 20.8 0 0 0 19.2 0l32-19.2a17.6 17.6 0 0 0 9.6-16V374.4a22.4 22.4 0 0 0-3.2-9.6 12.8 12.8 0 0 0-6.4-6.4L512 304l-155.2-89.6a20.8 20.8 0 0 0-19.2 0l-248 144a17.6 17.6 0 0 0-9.6 16v286.4a17.6 17.6 0 0 0 9.6 16l248 144a20.8 20.8 0 0 0 19.2 0l155.2-89.6z" fill="#3D4265" p-id="36150"></path></svg> ä¸­é—´ä»¶å­¦ä¹ </h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/%E4%B8%AD%E9%97%B4%E4%BB%B6/MybatisPlus/MybatisPlus-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204771009" class="icon" viewBox="0 0 1067 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="39769" width="16" height="16"><path d="M401.486019 118.403657c40.238324 35.810743 72.0896 48.942324 95.719619 39.399619 35.449905-14.331124 46.070248 64.468114 35.449905 75.210362-6.582857 6.621867-3.988724 26.66301 7.74339 60.074667l0.199924 0.516876 9.103848-7.10461c136.201752-104.106667 249.173333-93.2864 339.065905 32.455924 16.047543 30.417676 28.345295 60.396495 36.883504 89.897448l86.503619 28.901181-74.244876 30.934552 0.03901 0.199924 50.258895 16.764343-47.903695 20.002133c0.877714 118.715733-63.229562 229.532038-192.4096 332.522057-194.56 155.160381-425.847467 119.354514-693.784381-107.422476 67.388952-19.163429 145.700571-63.029638 235.003124-131.569371-43.154286-45.509486-81.315352-115.048838-114.488077-208.618057 66.545371 6.787657 123.630933 13.775238 171.25181 20.879847a859.565105 859.565105 0 0 1-47.182019-110.416457c76.322133 7.826286 140.229486 15.80861 191.648914 24.029867-10.420419-18.158933-27.384686-61.752076-35.693714-81.310476-7.977448-18.80259-55.803124-15.447771-82.2272-12.614705l-2.555124 0.277943 5.749029-1.794438c31.934171-10.981181 59.718705-28.984076 75.605333-26.268039l3.432838 0.999619c16.564419 7.182629 30.734629 20.2752 42.554514 39.39962-9.45981-28.662248-14.175086-45.387581-14.175085-50.136991 0-7.187505-81.54941-7.187505-99.279239-14.336-10.732495-4.349562-16.564419-17.559162-17.559161-39.638552l-0.160915-6.904686 35.449905-14.331124zM160.816762 48.57661c5.480838 33.34339 31.57821 58.32899 78.345752 74.995809 9.147733 3.257295 18.344229 4.87619 27.535848 5.300419l8.547962-0.048762-6.777905 1.857829c-34.87939 9.518324-90.745905 24.61501-105.237943 19.319466l-2.413714-1.438476c-7.61661-7.709257-17.603048-30.793143-29.905676-69.193143l-3.11101-9.986438 32.967924-20.806704h0.048762z" fill="#000000" p-id="39770"></path><path d="M652.643962 400.091429l33.796876-9.942553 10.937295-34.786743 10.454553 34.274743 34.279619 10.454553-32.80701 8.947809-11.927162 35.781486-11.932038-35.781486z" fill="#FFFFFF" p-id="39771"></path></svg> MybatisPluså­¦ä¹ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/404.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>å¾…ç»­...</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e><svg t="1744204802226" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="40850" width="16" height="16"><path d="M667.648 238.592c0 17.408-14.336 30.72-30.72 30.72-17.408 0-30.72-14.336-30.72-30.72 0-17.408 14.336-30.72 30.72-30.72s30.72 13.312 30.72 30.72m91.136 0c0 17.408-14.336 30.72-30.72 30.72-17.408 0-30.72-14.336-30.72-30.72 0-17.408 14.336-30.72 30.72-30.72s30.72 13.312 30.72 30.72m112.64 0c0 17.408-14.336 30.72-30.72 30.72-17.408 0-30.72-14.336-30.72-30.72 0-17.408 14.336-30.72 30.72-30.72s30.72 13.312 30.72 30.72" fill="#1A1A3F" p-id="40851"></path><path d="M949.248 909.312H75.776c-13.312 0-24.576-11.264-24.576-24.576V136.192c0-13.312 11.264-24.576 24.576-24.576h873.472c13.312 0 24.576 11.264 24.576 24.576v749.568c0 13.312-11.264 23.552-24.576 23.552M100.352 861.184h824.32V160.768H100.352v700.416z" fill="#1A1A3F" p-id="40852"></path><path d="M839.68 362.496H79.872c-13.312 0-24.576-11.264-24.576-24.576 0-13.312 11.264-24.576 24.576-24.576H839.68c13.312 0 24.576 11.264 24.576 24.576 0 14.336-11.264 24.576-24.576 24.576" fill="#1A1A3F" p-id="40853"></path><path d="M437.248 714.752c-6.144 0-12.288-2.048-17.408-7.168-9.216-9.216-9.216-24.576 0-34.816L570.368 522.24c9.216-9.216 24.576-9.216 34.816 0 9.216 9.216 9.216 24.576 0 34.816L454.656 707.584c-5.12 4.096-11.264 7.168-17.408 7.168" fill="#28C23E" p-id="40854"></path><path d="M587.776 684.032c-13.312 0-24.576-11.264-24.576-24.576V563.2h-96.256c-13.312 0-24.576-11.264-24.576-24.576 0-13.312 11.264-24.576 24.576-24.576h120.832c13.312 0 24.576 11.264 24.576 24.576v120.832c0 14.336-11.264 24.576-24.576 24.576" fill="#28C23E" p-id="40855"></path></svg> å‰ç«¯å­¦ä¹ </h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/Vue/Vue-%E8%BF%9B%E9%98%B6%E5%AD%A6%E4%B9%A0-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204815179" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="41875" width="16" height="16"><path d="M615.6 123.6h165.5L512 589.7 242.9 123.6H63.5L512 900.4l448.5-776.9z" fill="#41B883" p-id="41876"></path><path d="M781.1 123.6H615.6L512 303 408.4 123.6H242.9L512 589.7z" fill="#34495E" p-id="41877"></path></svg> Vueå­¦ä¹ </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/Html+Css+%E7%A7%BB%E5%8A%A8Web/HTML+CSS+%E7%A7%BB%E5%8A%A8%E7%AB%AFweb-Learning-Local.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e><svg t="1744204860637" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="43883" width="16" height="16"><path d="M332.799002 686.081014m-332.799002 0a332.799002 332.799002 0 1 0 665.598003 0 332.799002 332.799002 0 1 0-665.598003 0Z" fill="#FFDCEE" p-id="43884"></path><path d="M883.19735 1024h-639.99808A141.055577 141.055577 0 0 1 102.399693 883.200422v-742.397772A141.055577 141.055577 0 0 1 243.19927 0.003072h516.350451a89.087733 89.087733 0 0 1 63.231811 25.599923l189.695431 189.695431A38.399885 38.399885 0 0 1 1023.996928 243.202342v639.99808a141.055577 141.055577 0 0 1-140.799578 140.799578zM243.19927 76.802842A63.999808 63.999808 0 0 0 179.199462 140.80265v742.397772A63.999808 63.999808 0 0 0 243.19927 947.20023h639.99808a63.999808 63.999808 0 0 0 63.999808-63.999808V259.074295l-179.199462-179.199463a12.799962 12.799962 0 0 0-8.447975-3.07199z" fill="#434260" p-id="43885"></path><path d="M198.655404 399.105875h35.583893v92.159723h96.76771v-92.159723h35.583893v226.047322h-35.583893v-102.399693H234.239297v102.399693H198.655404zM451.582645 428.801786H383.998848v-29.695911h168.447495v29.695911H486.398541v196.095411h-34.815896zM577.534267 399.105875h40.959878L659.710021 512.001536c5.119985 15.103955 9.727971 30.463909 15.103955 45.823863h1.535995c5.119985-15.359954 9.471972-30.719908 14.847955-45.823863l40.959878-114.175657h40.959877v226.047321h-33.279901V512.001536c0-20.223939 2.815992-49.407852 4.607987-69.88779l-18.175946 51.199846-39.423882 107.775677h-22.015933l-39.679881-107.775677-17.919947-51.199846c1.535995 20.479939 4.351987 49.663851 4.351987 69.88779v111.871664h-34.047898zM796.66961 399.105875h35.583893v195.839412h95.487714v30.20791h-131.071607z" fill="#434260" p-id="43886"></path></svg><svg t="1744204891658" class="icon" viewBox="0 0 1028 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="45078" width="16" height="16"><path d="M110.592 108.544h808.96v808.96H110.592z" fill="#FFEA00" p-id="45079"></path><path d="M944.128 0H83.968C38.912 0 2.048 36.864 2.048 81.92v143.36h61.44V102.4c0-22.528 18.432-40.96 40.96-40.96h819.2c22.528 0 40.96 18.432 40.96 40.96v122.88h61.44V81.92c0-45.056-36.864-81.92-81.92-81.92z m20.48 921.6c0 22.528-18.432 40.96-40.96 40.96H104.448c-22.528 0-40.96-18.432-40.96-40.96v-122.88H2.048v143.36c0 45.056 36.864 81.92 81.92 81.92h860.16c45.056 0 81.92-36.864 81.92-81.92v-143.36h-61.44v122.88z" fill="" p-id="45080"></path><path d="M63.488 286.72h901.12v450.56H63.488z" fill="#FFEA00" p-id="45081"></path><path d="M38.912 366.592c0 36.864 4.096 61.44 4.096 94.208 0 18.432-10.24 36.864-43.008 38.912v30.72c34.816 0 43.008 20.48 43.008 38.912 0 32.768-4.096 57.344-4.096 94.208 0 53.248 18.432 69.632 61.44 69.632H124.928v-28.672h-10.24c-26.624 0-32.768-10.24-32.768-43.008 0-28.672 2.048-55.296 2.048-88.064 0-34.816-10.24-51.2-32.768-55.296v-2.048c24.576-8.192 32.768-22.528 32.768-57.344 0-32.768-2.048-59.392-2.048-88.064 0-30.72 6.144-43.008 32.768-43.008H124.928v-28.672H100.352c-40.96-2.048-61.44 14.336-61.44 67.584z m534.528 129.024l-45.056-18.432c-26.624-10.24-53.248-22.528-53.248-49.152 0-26.624 22.528-43.008 55.296-43.008 28.672 0 53.248 10.24 73.728 30.72l26.624-32.768c-24.576-26.624-61.44-40.96-100.352-40.96-63.488 0-108.544 38.912-108.544 92.16 0 49.152 34.816 73.728 67.584 86.016l45.056 20.48c30.72 14.336 53.248 22.528 53.248 53.248 0 28.672-22.528 47.104-63.488 47.104-32.768 0-63.488-14.336-88.064-38.912l-26.624 30.72-22.528-26.624c-20.48 22.528-43.008 34.816-73.728 34.816-59.392 0-96.256-49.152-96.256-126.976 0-77.824 38.912-124.928 96.256-124.928 26.624 0 47.104 12.288 65.536 30.72l28.672-32.768c-20.48-22.528-53.248-40.96-94.208-40.96-81.92-8.192-147.456 57.344-147.456 165.888s63.488 169.984 147.456 169.984c40.96 0 73.728-16.384 98.304-43.008 30.72 26.624 69.632 43.008 112.64 43.008 71.68 0 116.736-43.008 116.736-96.256 0-49.152-28.672-71.68-67.584-90.112z m229.376 0l-45.056-18.432c-26.624-10.24-53.248-22.528-53.248-49.152 0-26.624 22.528-43.008 55.296-43.008 28.672 0 53.248 10.24 73.728 30.72l26.624-32.768c-24.576-26.624-61.44-40.96-100.352-40.96-63.488 0-108.544 38.912-108.544 92.16 0 49.152 34.816 73.728 67.584 86.016l45.056 20.48c30.72 14.336 53.248 22.528 53.248 53.248 0 28.672-22.528 47.104-63.488 47.104-32.768 0-63.488-14.336-88.064-38.912L634.88 634.88c30.72 30.72 71.68 49.152 118.784 49.152 71.68 0 116.736-43.008 116.736-96.256 0-51.2-28.672-73.728-67.584-92.16z m182.272-34.816c0-32.768 4.096-57.344 4.096-94.208 0-53.248-18.432-69.632-61.44-69.632H903.168v28.672h12.288c26.624 0 32.768 12.288 32.768 43.008 0 28.672-2.048 55.296-2.048 88.064 0 34.816 8.192 51.2 32.768 55.296v2.048c-26.624 8.192-34.816 24.576-34.816 59.392 0 32.768 2.048 59.392 2.048 88.064 0 30.72-6.144 43.008-32.768 43.008H903.168v28.672h24.576c40.96 0 61.44-16.384 61.44-69.632 0-36.864-4.096-61.44-4.096-94.208 0-18.432 10.24-38.912 43.008-38.912v-30.72c-34.816 0-43.008-20.48-43.008-38.912z" fill="" p-id="45082"></path></svg> HTML+CSS+ç§»åŠ¨ç«¯</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>ç›®å½•</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _%E5%BE%AE%E6%9C%8D%E5%8A%A1_SpringCloud_%E5%BE%AE%E6%9C%8D%E5%8A%A1SpringCloud-Local" data-v-e6f2a212><div><p><img src="/assets/image-20250311214936678.Bw2VYGWj.png" alt="image-20250311214936678" loading="lazy"></p><h1 id="ä¸€ã€å¾®æœåŠ¡-æœåŠ¡æ‹†åˆ†" tabindex="-1">ä¸€ã€å¾®æœåŠ¡-æœåŠ¡æ‹†åˆ† <a class="header-anchor" href="#ä¸€ã€å¾®æœåŠ¡-æœåŠ¡æ‹†åˆ†" aria-label="Permalink to &quot;ä¸€ã€å¾®æœåŠ¡-æœåŠ¡æ‹†åˆ†&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p>æœ¬ç¯‡æ–‡æ¡£å¯¹åº”Bç«™è§†é¢‘ï¼š</p><p>ã€é»‘é©¬ç¨‹åºå‘˜SpringCloudå¾®æœåŠ¡æŠ€æœ¯æ ˆå®æˆ˜æ•™ç¨‹ï¼Œæ¶µç›–springcloudå¾®æœåŠ¡æ¶æ„+Nacosé…ç½®ä¸­å¿ƒ+åˆ†å¸ƒå¼äº‹åŠ¡ç­‰ã€‘</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><p>ä¹‹å‰æˆ‘ä»¬å­¦ä¹ çš„é¡¹ç›®ä¸€æ˜¯å•ä½“é¡¹ç›®ï¼Œå¯ä»¥æ»¡è¶³å°å‹é¡¹ç›®æˆ–ä¼ ç»Ÿé¡¹ç›®çš„å¼€å‘ã€‚è€Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¸€çº¿äº’è”ç½‘å…¬å¸éƒ½åœ¨ä½¿ç”¨å¾®æœåŠ¡æŠ€æœ¯ã€‚</p><p>ä»è°·æ­Œæœç´¢æŒ‡æ•°æ¥çœ‹ï¼Œå›½å†…ä»è‡ª2016å¹´åº•å¼€å§‹ï¼Œå¾®æœåŠ¡çƒ­åº¦çªç„¶æš´æ¶¨ï¼š</p><p><img src="/assets/1732633714639-92.BulmIc71.png" alt="img" loading="lazy"></p><p>é‚£ä¹ˆï¼š</p><ul><li>åˆ°åº•ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</li><li>ä¼ä¸šè¯¥ä¸è¯¥å¼•å…¥å¾®æœåŠ¡ï¼Ÿ</li><li>å¾®æœåŠ¡æŠ€æœ¯è¯¥å¦‚ä½•åœ¨ä¼ä¸šè½åœ°ï¼Ÿ</li></ul><p>æ¥ä¸‹æ¥å‡ å¤©ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥æ­å¼€å®ƒçš„ç¥ç§˜é¢çº±ã€‚</p><p>è®¡åˆ’æ˜¯è¿™æ ·çš„ï¼Œè¯¾å‰èµ„æ–™ä¸­ç»™å¤§å®¶å‡†å¤‡äº†ä¸€ä¸ª<strong>å•ä½“</strong>çš„ç”µå•†å°é¡¹ç›®ï¼šé»‘é©¬å•†åŸï¼Œæˆ‘ä»¬ä¼šåŸºäºè¿™ä¸ªå•ä½“é¡¹ç›®æ¥æ¼”ç¤ºä»å•ä½“æ¶æ„åˆ°å¾®æœåŠ¡æ¶æ„çš„æ¼”å˜è¿‡ç¨‹ã€åˆ†æå…¶ä¸­å­˜åœ¨çš„é—®é¢˜ï¼Œä»¥åŠå¾®æœåŠ¡æŠ€æœ¯æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p><p>ä½ ä¼šå‘ç°æ¯ä¸€ä¸ªå¾®æœåŠ¡æŠ€æœ¯éƒ½æ˜¯åœ¨è§£å†³æœåŠ¡åŒ–è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é—®é¢˜ï¼Œä½ å¯¹äºæ¯ä¸€ä¸ªå¾®æœåŠ¡æŠ€æœ¯å…·ä½“çš„åº”ç”¨åœºæ™¯å’Œä½¿ç”¨æ–¹å¼éƒ½ä¼šæœ‰æ›´æ·±å±‚æ¬¡çš„ç†è§£ã€‚</p><p>ä»Šå¤©ä½œä¸ºè¯¾ç¨‹çš„ç¬¬ä¸€å¤©ï¼Œæˆ‘ä»¬è¦å®Œæˆä¸‹é¢çš„å†…å®¹ï¼š</p><ul><li>çŸ¥é“å•ä½“æ¶æ„çš„ç‰¹ç‚¹</li><li>çŸ¥é“å¾®æœåŠ¡æ¶æ„çš„ç‰¹ç‚¹</li><li>å­¦ä¼šæ‹†åˆ†å¾®æœåŠ¡</li><li>ä¼šä½¿ç”¨Nacoså®ç°æœåŠ¡æ²»ç†</li><li>ä¼šä½¿ç”¨OpenFeignå®ç°è¿œç¨‹è°ƒç”¨</li></ul><h2 id="_0-å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®" tabindex="-1">0.å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›® <a class="header-anchor" href="#_0-å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®" aria-label="Permalink to &quot;0.å¯¼å…¥é»‘é©¬å•†åŸé¡¹ç›®&quot;">â€‹</a></h2><p>åœ¨è¯¾å‰èµ„æ–™ä¸­ç»™å¤§å®¶æä¾›äº†é»‘é©¬å•†åŸé¡¹ç›®çš„èµ„æ–™ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¼å…¥è¿™ä¸ªå•ä½“é¡¹ç›®ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬ç¯‡åŠåç»­çš„å¾®æœåŠ¡å­¦ä¹ éƒ½æ˜¯åŸºäºCentos7ç³»ç»Ÿä¸‹çš„Dockeréƒ¨ç½²ï¼Œå› æ­¤ä½ å¿…é¡»åšå¥½ä¸€äº›å‡†å¤‡ï¼š</p><ul><li>Centos7çš„ç¯å¢ƒåŠä¸€ä¸ªå¥½ç”¨çš„SSHå®¢æˆ·ç«¯</li><li>å®‰è£…å¥½Docker</li><li>ä¼šä½¿ç”¨Docker</li></ul><p>å¦‚æœä½ æ²¡æœ‰è¿™æ ·çš„Linuxç¯å¢ƒï¼Œæˆ–è€…ä¸æ˜¯Centos7çš„è¯ï¼Œé‚£ä¹ˆè¿™é‡Œæœ‰ä¸€ç¯‡å‚è€ƒæ–‡æ¡£ï¼š</p><ul><li><a href="https://b11et3un53m.feishu.cn/wiki/FJAnwOhpIihMkLkOKQocdWZ7nUc" target="_blank" rel="noreferrer">Linuxç¯å¢ƒæ­å»º</a></li></ul><p>å»ºè®®æŒ‰ç…§ä¸Šé¢çš„æ–‡æ¡£æ¥æ­å»ºè™šæ‹Ÿæœºç¯å¢ƒï¼Œä½¿ç”¨å…¶å®ƒç‰ˆæœ¬ä¼šå‡ºç°ä¸€äº›ç¯å¢ƒé—®é¢˜ï¼Œæ¯”è¾ƒç—›è‹¦ã€‚</p><p>å¦‚æœå·²ç»æœ‰Linuxç¯å¢ƒï¼Œä½†æ˜¯æ²¡æœ‰å®‰è£…Dockerçš„è¯ï¼Œé‚£ä¹ˆè¿™é‡Œè¿˜æœ‰ä¸€ç¯‡å‚è€ƒæ–‡æ¡£ï¼š</p><ul><li><a href="https://b11et3un53m.feishu.cn/wiki/Rfocw7ctXij2RBkShcucLZbrn2d" target="_blank" rel="noreferrer">å®‰è£…Docker</a></li></ul><p>å¦‚æœä¸ä¼šä½¿ç”¨Dockerçš„è¯å¯ä»¥å‚è€ƒé»‘é©¬çš„å¾®æœåŠ¡å‰ç½®Dockerè¯¾ç¨‹ï¼ŒBç«™åœ°å€å¦‚ä¸‹ï¼š</p><p><a href="https://www.bilibili.com/video/BV1HP4118797/?share_source=copy_web&amp;vd_source=3362e6914fb759983690e6e0f1072453" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV1HP4118797/?share_source=copy_web&amp;vd_source=3362e6914fb759983690e6e0f1072453</a></p><p>æ³¨æ„ï¼š</p><p>å¦‚æœæ˜¯å­¦ä¹ è¿‡ä¸Šé¢Dockerè¯¾ç¨‹çš„åŒå­¦ï¼Œè™šæ‹Ÿæœºä¸­å·²ç»æœ‰äº†é»‘é©¬å•†åŸé¡¹ç›®åŠMySQLæ•°æ®åº“äº†ï¼Œä¸è¿‡ä¸ºäº†è·Ÿå…¶ä»–åŒå­¦ä¿æŒä¸€è‡´ï¼Œå¯ä»¥å…ˆå°†æ•´ä¸ªé¡¹ç›®ç§»é™¤ã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p><p>cd /root</p><p>docker compose down</p><h3 id="_0-1-å®‰è£…mysql" tabindex="-1">0.1.å®‰è£…MySQL <a class="header-anchor" href="#_0-1-å®‰è£…mysql" aria-label="Permalink to &quot;0.1.å®‰è£…MySQL&quot;">â€‹</a></h3><p>åœ¨è¯¾å‰èµ„æ–™æä¾›å¥½äº†MySQLçš„ä¸€ä¸ªç›®å½•ï¼š</p><p><img src="/assets/1732633714636-1.BL-wZndz.png" alt="img" loading="lazy"></p><p>å…¶ä¸­æœ‰MySQLçš„é…ç½®æ–‡ä»¶å’Œåˆå§‹åŒ–è„šæœ¬ï¼š</p><p><img src="/assets/1732633714637-2.Bb4c3LXu.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬å°†å…¶å¤åˆ¶åˆ°è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•ã€‚å¦‚æœ<code>/root</code>ä¸‹å·²ç»å­˜åœ¨<code>mysql</code>ç›®å½•åˆ™åˆ é™¤æ—§çš„ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥å¤åˆ¶æœ¬åœ°çš„ï¼š</p><p><img src="/assets/1732633714637-3.WtKNvyfu.png" alt="img" loading="lazy"></p><p>ç„¶ååˆ›å»ºä¸€ä¸ªé€šç”¨ç½‘ç»œï¼š</p><div class="language-Bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hm-net</span></span></code></pre></div><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…MySQLï¼š</p><div class="language-Bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3306:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Asia/Shanghai</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/mysql/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/mysql/conf:/etc/mysql/conf.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/mysql/init:/docker-entrypoint-initdb.d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hm-net</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  mysql</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œé€šè¿‡å‘½ä»¤æŸ¥çœ‹mysqlå®¹å™¨ï¼š</p><div class="language-Bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span></span></code></pre></div><p>å¦‚å›¾ï¼š</p><p><img src="/assets/1732633714637-4.XKmZO4XZ.png" alt="img" loading="lazy"></p><p>å‘ç°mysqlå®¹å™¨æ­£å¸¸è¿è¡Œã€‚</p><blockquote><p>æ³¨ï¼šå›¾ç‰‡ä¸­çš„dpså‘½ä»¤æ˜¯æˆ‘è®¾ç½®çš„åˆ«åï¼Œç­‰åŒäºdocker ps --formatï¼Œå¯ä»¥ç®€åŒ–å‘½ä»¤æ ¼å¼ã€‚ä½ å¯ä»¥å‚è€ƒé»‘é©¬çš„<a href="https://b11et3un53m.feishu.cn/wiki/MWQIw4Zvhil0I5ktPHwcoqZdnec" target="_blank" rel="noreferrer">day02-Docker</a> çš„2.1.3å°èŠ‚æ¥é…ç½®ã€‚</p></blockquote><p>æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨MySQLçš„å®¢æˆ·ç«¯å·¥å…·è¿æ¥MySQLï¼Œåº”è¯¥èƒ½å‘ç°å·²ç»åˆ›å»ºäº†é»‘é©¬å•†åŸæ‰€éœ€è¦çš„è¡¨ï¼š</p><p><img src="/assets/1732633714637-5.GNwdyNLm.png" alt="img" loading="lazy"></p><h3 id="_0-2-åç«¯" tabindex="-1">0.2.åç«¯ <a class="header-anchor" href="#_0-2-åç«¯" aria-label="Permalink to &quot;0.2.åç«¯&quot;">â€‹</a></h3><p>ç„¶åæ˜¯Javaä»£ç ï¼Œåœ¨è¯¾å‰èµ„æ–™æä¾›äº†ä¸€ä¸ªhmallç›®å½•ï¼š</p><p><img src="/assets/1732633714637-6.B66Xj8ii.png" alt="img" loading="lazy"></p><p>å°†å…¶å¤åˆ¶åˆ°ä½ çš„å·¥ä½œç©ºé—´ï¼Œç„¶ååˆ©ç”¨Ideaæ‰“å¼€ã€‚</p><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/1732633714637-7.m-_BXjaQ.png" alt="img" loading="lazy"></p><p>æŒ‰ä¸‹<code>ALT</code> + <code>8</code>é”®æ‰“å¼€servicesçª—å£ï¼Œæ–°å¢ä¸€ä¸ªå¯åŠ¨é¡¹ï¼š</p><p><img src="/assets/1732633714637-8.CJ23Z3w6.png" alt="img" loading="lazy"></p><p>åœ¨å¼¹å‡ºçª—å£ä¸­é¼ æ ‡å‘ä¸‹æ»šåŠ¨ï¼Œæ‰¾åˆ°<code>Spring Boot</code>:</p><p><img src="/assets/1732633714637-9.CpOSIfVL.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»ååº”è¯¥ä¼šåœ¨servicesä¸­å‡ºç°hmallçš„å¯åŠ¨é¡¹ï¼š</p><p><img src="/assets/1732633714637-10.CH3uuCPN.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»å¯¹åº”æŒ‰é’®ï¼Œå³å¯å®ç°è¿è¡Œæˆ–DEBUGè¿è¡Œã€‚</p><p><strong>ä¸è¿‡åˆ«ç€æ€¥ï¼ï¼</strong></p><p>æˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿™ä¸ªå¯åŠ¨é¡¹åšç®€å•é…ç½®ï¼Œåœ¨<code>HMallApplication</code>ä¸Šç‚¹å‡»é¼ æ ‡å³é”®ï¼Œä¼šå¼¹å‡ºçª—å£ï¼Œç„¶åé€‰æ‹©<code>Edit Configuration</code>ï¼š</p><p><img src="/assets/1732633714637-11.BFaLz1Xz.png" alt="img" loading="lazy"></p><p>åœ¨å¼¹å‡ºçª—å£ä¸­é…ç½®SpringBootçš„å¯åŠ¨ç¯å¢ƒä¸ºlocalï¼š</p><p><img src="/assets/1732633714637-12.CXrEV-E_.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»OKé…ç½®å®Œæˆã€‚æ¥ä¸‹æ¥å°±å¯ä»¥è¿è¡Œäº†ï¼</p><p>å¯åŠ¨å®Œæˆåï¼Œè¯•è¯•çœ‹è®¿é—®ä¸‹ <code>http://localhost:8080/hi</code> å§ï¼</p><h3 id="_0-3-å‰ç«¯" tabindex="-1">0.3.å‰ç«¯ <a class="header-anchor" href="#_0-3-å‰ç«¯" aria-label="Permalink to &quot;0.3.å‰ç«¯&quot;">â€‹</a></h3><p>åœ¨è¯¾å‰èµ„æ–™ä¸­è¿˜æä¾›äº†ä¸€ä¸ªhmall-nginxçš„ç›®å½•ï¼š</p><p><img src="/assets/1732633714637-13.CrbkH7PQ.png" alt="img" loading="lazy"></p><p>å…¶ä¸­å°±æ˜¯ä¸€ä¸ªnginxç¨‹åºä»¥åŠæˆ‘ä»¬çš„å‰ç«¯ä»£ç ï¼Œç›´æ¥åœ¨windowsä¸‹å°†å…¶å¤åˆ¶åˆ°ä¸€ä¸ªéä¸­æ–‡ã€ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ä¸‹ã€‚ç„¶åè¿›å…¥hmall-nginxåï¼Œåˆ©ç”¨cmdå¯åŠ¨å³å¯ï¼š</p><div class="language-PowerShell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">PowerShell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯åŠ¨nginx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">start </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nginx.exe</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœæ­¢</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nginx.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s stop</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é‡æ–°åŠ è½½é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nginx.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s reload</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é‡å¯</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nginx.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s restart</span></span></code></pre></div><p>ç‰¹åˆ«æ³¨æ„ï¼š</p><p>nginx.exe ä¸è¦åŒå‡»å¯åŠ¨ï¼Œè€Œæ˜¯æ‰“å¼€cmdçª—å£ï¼Œé€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ã€‚åœæ­¢çš„æ—¶å€™ä¹Ÿä¸€æ ·è¦æ˜¯ç”¨å‘½ä»¤åœæ­¢ã€‚å¦‚æœå¯åŠ¨å¤±è´¥ä¸è¦é‡å¤å¯åŠ¨ï¼Œè€Œæ˜¯æŸ¥çœ‹logsç›®å½•ä¸­çš„error.logæ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æ˜¯ç«¯å£å†²çªã€‚å¦‚æœæ˜¯ç«¯å£å†²çªåˆ™è‡ªè¡Œä¿®æ”¹ç«¯å£è§£å†³ã€‚</p><p>å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®<code>http://localhost:18080</code>ï¼Œåº”è¯¥èƒ½çœ‹åˆ°æˆ‘ä»¬çš„é—¨æˆ·é¡µé¢ï¼š</p><p><img src="/assets/1732633714637-14.CbCpaerf.png" alt="img" loading="lazy"></p><h2 id="_1-è®¤è¯†å¾®æœåŠ¡" tabindex="-1">1.è®¤è¯†å¾®æœåŠ¡ <a class="header-anchor" href="#_1-è®¤è¯†å¾®æœåŠ¡" aria-label="Permalink to &quot;1.è®¤è¯†å¾®æœåŠ¡&quot;">â€‹</a></h2><p>è¿™ä¸€ç« æˆ‘ä»¬ä»å•ä½“æ¶æ„çš„ä¼˜ç¼ºç‚¹æ¥åˆ†æï¼Œçœ‹çœ‹å¼€å‘å¤§å‹é¡¹ç›®é‡‡ç”¨å•ä½“æ¶æ„å­˜åœ¨å“ªäº›é—®é¢˜ï¼Œè€Œå¾®æœåŠ¡æ¶æ„åˆæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ã€‚</p><h3 id="_1-1-å•ä½“æ¶æ„" tabindex="-1">1.1.å•ä½“æ¶æ„ <a class="header-anchor" href="#_1-1-å•ä½“æ¶æ„" aria-label="Permalink to &quot;1.1.å•ä½“æ¶æ„&quot;">â€‹</a></h3><p><img src="/assets/image-20241126231249706.ChuR5ALW.png" alt="image-20241126231249706" loading="lazy"></p><p>å•ä½“æ¶æ„ï¼ˆmonolithic structureï¼‰ï¼šé¡¾åæ€ä¹‰ï¼Œæ•´ä¸ªé¡¹ç›®ä¸­æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸­å¼€å‘ï¼›é¡¹ç›®éƒ¨ç½²æ—¶éœ€è¦å¯¹æ‰€æœ‰æ¨¡å—ä¸€èµ·ç¼–è¯‘ã€æ‰“åŒ…ï¼›é¡¹ç›®çš„æ¶æ„è®¾è®¡ã€å¼€å‘æ¨¡å¼éƒ½éå¸¸ç®€å•ã€‚</p><p><img src="/assets/1732633714637-15.ChZc1WIP.jpeg" alt="img" loading="lazy"></p><p>å½“é¡¹ç›®è§„æ¨¡è¾ƒå°æ—¶ï¼Œè¿™ç§æ¨¡å¼ä¸Šæ‰‹å¿«ï¼Œéƒ¨ç½²ã€è¿ç»´ä¹Ÿéƒ½å¾ˆæ–¹ä¾¿ï¼Œå› æ­¤æ—©æœŸå¾ˆå¤šå°å‹é¡¹ç›®éƒ½é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚</p><p>ä½†éšç€é¡¹ç›®çš„ä¸šåŠ¡è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œå›¢é˜Ÿå¼€å‘äººå‘˜ä¹Ÿä¸æ–­å¢åŠ ï¼Œå•ä½“æ¶æ„å°±å‘ˆç°å‡ºè¶Šæ¥è¶Šå¤šçš„é—®é¢˜ï¼š</p><ul><li><strong>å›¢é˜Ÿåä½œæˆæœ¬é«˜</strong>ï¼šè¯•æƒ³ä¸€ä¸‹ï¼Œä½ ä»¬å›¢é˜Ÿæ•°åä¸ªäººåŒæ—¶åä½œå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œç”±äºæ‰€æœ‰æ¨¡å—éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä¸åŒæ¨¡å—çš„ä»£ç ä¹‹é—´ç‰©ç†è¾¹ç•Œè¶Šæ¥è¶Šæ¨¡ç³Šã€‚æœ€ç»ˆè¦æŠŠåŠŸèƒ½åˆå¹¶åˆ°ä¸€ä¸ªåˆ†æ”¯ï¼Œä½ ç»å¯¹ä¼šé™·å…¥åˆ°è§£å†³å†²çªçš„æ³¥æ½­ä¹‹ä¸­ã€‚</li><li><strong>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½</strong>ï¼šä»»ä½•æ¨¡å—å˜æ›´éƒ½éœ€è¦å‘å¸ƒæ•´ä¸ªç³»ç»Ÿï¼Œè€Œç³»ç»Ÿå‘å¸ƒè¿‡ç¨‹ä¸­éœ€è¦å¤šä¸ªæ¨¡å—ä¹‹é—´åˆ¶çº¦è¾ƒå¤šï¼Œéœ€è¦å¯¹æ¯”å„ç§æ–‡ä»¶ï¼Œä»»ä½•ä¸€å¤„å‡ºç°é—®é¢˜éƒ½ä¼šå¯¼è‡´å‘å¸ƒå¤±è´¥ï¼Œå¾€å¾€ä¸€æ¬¡å‘å¸ƒéœ€è¦æ•°ååˆ†é’Ÿç”šè‡³æ•°å°æ—¶ã€‚</li><li><strong>ç³»ç»Ÿå¯ç”¨æ€§å·®</strong>ï¼šå•ä½“æ¶æ„å„ä¸ªåŠŸèƒ½æ¨¡å—æ˜¯ä½œä¸ºä¸€ä¸ªæœåŠ¡éƒ¨ç½²ï¼Œç›¸äº’ä¹‹é—´ä¼šäº’ç›¸å½±å“ï¼Œä¸€äº›çƒ­ç‚¹åŠŸèƒ½ä¼šè€—å°½ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´å…¶å®ƒæœåŠ¡ä½å¯ç”¨ã€‚</li></ul><p>åœ¨ä¸Šè¿°é—®é¢˜ä¸­ï¼Œå‰ä¸¤ç‚¹ç›¸ä¿¡å¤§å®¶åœ¨å®æˆ˜è¿‡ç¨‹ä¸­åº”è¯¥æ·±æœ‰ä½“ä¼šã€‚å¯¹äºç¬¬ä¸‰ç‚¹ç³»ç»Ÿå¯ç”¨æ€§é—®é¢˜ï¼Œå¾ˆå¤šåŒå­¦å¯èƒ½æ„Ÿè§¦ä¸æ·±ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡é»‘é©¬å•†åŸè¿™ä¸ªé¡¹ç›®ï¼Œç»™å¤§å®¶åšä¸€ä¸ªç®€å•æ¼”ç¤ºã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹hm-serviceæ¨¡å—ä¸‹çš„<code>com.hmall.controller.HelloController</code>ä¸­çš„<code>hello</code>æ–¹æ³•ï¼Œæ¨¡æ‹Ÿæ–¹æ³•æ‰§è¡Œæ—¶çš„è€—æ—¶ï¼š</p><p><img src="/assets/1732633714637-16.DrVSKEVt.png" alt="img" loading="lazy"></p><p>æ¥ä¸‹æ¥ï¼Œå¯åŠ¨é¡¹ç›®ï¼Œç›®å‰æœ‰ä¸¤ä¸ªæ¥å£æ˜¯æ— éœ€ç™»å½•å³å¯è®¿é—®çš„ï¼š</p><ul><li><code>http://localhost:8080/hi</code></li><li><code>http://localhost:8080/search/list</code></li></ul><p>ç»è¿‡æµ‹è¯•ï¼Œç›®å‰<code>/search/list</code> æ˜¯æ¯”è¾ƒæ­£å¸¸çš„ï¼Œè®¿é—®è€—æ—¶åœ¨30æ¯«ç§’å·¦å³ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‡è®¾<code>/hi</code>è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå¹¶å‘è¾ƒé«˜çš„çƒ­ç‚¹æ¥å£ï¼Œæˆ‘ä»¬é€šè¿‡Jemeteræ¥æ¨¡æ‹Ÿ500ä¸ªç”¨æˆ·ä¸åœè®¿é—®ã€‚åœ¨è¯¾å‰èµ„æ–™ä¸­å·²ç»æä¾›äº†Jemeterçš„æµ‹è¯•è„šæœ¬ï¼š</p><p><img src="/assets/1732633714637-17.BxuRlj5b.png" alt="img" loading="lazy"></p><p>å¯¼å…¥Jemeterå¹¶æµ‹è¯•ï¼š</p><p><img src="/assets/1732633714637-18.lyoyyu2Z.png" alt="img" loading="lazy"></p><p>è¿™ä¸ªè„šæœ¬ä¼šå¼€å¯500ä¸ªçº¿ç¨‹å¹¶å‘è¯·æ±‚<code>http://localhost/hi</code>è¿™ä¸ªæ¥å£ã€‚ç”±äºè¯¥æ¥å£å­˜åœ¨æ‰§è¡Œè€—æ—¶ï¼ˆ500æ¯«ç§’ï¼‰ï¼Œè¿™å°±æœåŠ¡ç«¯å¯¼è‡´æ¯ç§’èƒ½å¤„ç†çš„è¯·æ±‚æ•°é‡æœ‰é™ï¼Œ<strong>æœ€ç»ˆä¼šæœ‰è¶Šæ¥è¶Šå¤šè¯·æ±‚ç§¯å‹ï¼Œç›´è‡³Tomcatèµ„æºè€—å°½</strong>ã€‚è¿™æ ·ï¼Œå…¶å®ƒæœ¬æ¥æ­£å¸¸çš„æ¥å£ï¼ˆä¾‹å¦‚<code>/search/list</code>ï¼‰ä¹Ÿéƒ½ä¼šè¢«æ‹–æ…¢ï¼Œç”šè‡³å› è¶…æ—¶è€Œæ— æ³•è®¿é—®äº†ã€‚</p><p>æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼Œå¯åŠ¨æµ‹è¯•è„šæœ¬ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®<code>http://localhost:8080/search/list</code>è¿™ä¸ªæ¥å£ï¼Œä¼šå‘ç°å“åº”é€Ÿåº¦éå¸¸æ…¢ï¼š</p><p><img src="/assets/1732633714637-19.hQJJG7LD.png" alt="img" loading="lazy"></p><p>å¦‚æœè¿›ä¸€æ­¥æé«˜<code>/hi</code>è¿™ä¸ªæ¥å£çš„å¹¶å‘ï¼Œæœ€ç»ˆä¼šå‘ç°<code>/search/list</code>æ¥å£çš„è¯·æ±‚å“åº”é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚</p><p>å¯è§ï¼Œå•ä½“æ¶æ„çš„å¯ç”¨æ€§æ˜¯æ¯”è¾ƒå·®çš„ï¼ŒåŠŸèƒ½ä¹‹é—´ç›¸äº’å½±å“æ¯”è¾ƒå¤§ã€‚</p><p>å½“ç„¶ï¼Œæœ‰åŒå­¦ä¼šè¯´æˆ‘ä»¬å¯ä»¥åšæ°´å¹³æ‰©å±•ã€‚</p><p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬å¯¹ç³»ç»Ÿåšæ°´å¹³æ‰©å±•ï¼Œå¢åŠ æ›´å¤šæœºå™¨ï¼Œèµ„æºè¿˜æ˜¯ä¼šè¢«è¿™æ ·çš„çƒ­ç‚¹æ¥å£å ç”¨ï¼Œä»è€Œå½±å“åˆ°å…¶å®ƒæ¥å£ï¼Œå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚è¿™ä¹Ÿå°±æ˜¯å•ä½“æ¶æ„çš„æ‰©å±•æ€§å·®çš„ä¸€ä¸ªåŸå› ã€‚</p><p>è€Œè¦æƒ³è§£å†³è¿™äº›é—®é¢˜ï¼Œå°±éœ€è¦ä½¿ç”¨å¾®æœåŠ¡æ¶æ„äº†ã€‚</p><h3 id="_1-2-å¾®æœåŠ¡" tabindex="-1">1.2.å¾®æœåŠ¡ <a class="header-anchor" href="#_1-2-å¾®æœåŠ¡" aria-label="Permalink to &quot;1.2.å¾®æœåŠ¡&quot;">â€‹</a></h3><p>å¾®æœåŠ¡æ¶æ„ï¼Œé¦–å…ˆæ˜¯æœåŠ¡åŒ–ï¼Œå°±æ˜¯å°†å•ä½“æ¶æ„ä¸­çš„åŠŸèƒ½æ¨¡å—ä»å•ä½“åº”ç”¨ä¸­æ‹†åˆ†å‡ºæ¥ï¼Œç‹¬ç«‹éƒ¨ç½²ä¸ºå¤šä¸ªæœåŠ¡ã€‚åŒæ—¶è¦æ»¡è¶³ä¸‹é¢çš„ä¸€äº›ç‰¹ç‚¹ï¼š</p><ul><li><strong>å•ä¸€èŒè´£</strong>ï¼šä¸€ä¸ªå¾®æœåŠ¡è´Ÿè´£ä¸€éƒ¨åˆ†ä¸šåŠ¡åŠŸèƒ½ï¼Œå¹¶ä¸”å…¶æ ¸å¿ƒæ•°æ®ä¸ä¾èµ–äºå…¶å®ƒæ¨¡å—ã€‚</li><li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒã€è¿ç»´äººå‘˜ï¼Œå›¢é˜Ÿäººå‘˜è§„æ¨¡ä¸è¶…è¿‡10äººï¼ˆ2å¼ æŠ«è¨èƒ½å–‚é¥±ï¼‰</li><li><strong>æœåŠ¡è‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²ï¼Œè®¿é—®è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚å¹¶ä¸”è¦åšå¥½æœåŠ¡éš”ç¦»ï¼Œé¿å…å¯¹å…¶å®ƒæœåŠ¡äº§ç”Ÿå½±å“</li></ul><p>ä¾‹å¦‚ï¼Œé»‘é©¬å•†åŸé¡¹ç›®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå•†å“ã€ç”¨æˆ·ã€è´­ç‰©è½¦ã€äº¤æ˜“ç­‰æ¨¡å—æ‹†åˆ†ï¼Œäº¤ç»™ä¸åŒçš„å›¢é˜Ÿå»å¼€å‘ï¼Œå¹¶ç‹¬ç«‹éƒ¨ç½²ï¼š</p><p><img src="/assets/image-20241126231535649.0DBXTLCF.png" alt="image-20241126231535649" loading="lazy"></p><p>é‚£ä¹ˆï¼Œå•ä½“æ¶æ„å­˜åœ¨çš„é—®é¢˜æœ‰æ²¡æœ‰è§£å†³å‘¢ï¼Ÿ</p><ul><li>å›¢é˜Ÿåä½œæˆæœ¬é«˜ï¼Ÿ <ul><li>ç”±äºæœåŠ¡æ‹†åˆ†ï¼Œæ¯ä¸ªæœåŠ¡ä»£ç é‡å¤§å¤§å‡å°‘ï¼Œå‚ä¸å¼€å‘çš„åå°äººå‘˜åœ¨1~3åï¼Œåä½œæˆæœ¬å¤§å¤§é™ä½</li></ul></li><li>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½ï¼Ÿ <ul><li>æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹éƒ¨ç½²ï¼Œå½“æœ‰æŸä¸ªæœåŠ¡æœ‰ä»£ç å˜æ›´æ—¶ï¼Œåªéœ€è¦æ‰“åŒ…éƒ¨ç½²è¯¥æœåŠ¡å³å¯</li></ul></li><li>ç³»ç»Ÿå¯ç”¨æ€§å·®ï¼Ÿ <ul><li>æ¯ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼Œå¹¶ä¸”åšå¥½æœåŠ¡éš”ç¦»ï¼Œä½¿ç”¨è‡ªå·±çš„æœåŠ¡å™¨èµ„æºï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒæœåŠ¡ã€‚</li></ul></li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¾®æœåŠ¡æ¶æ„è§£å†³äº†å•ä½“æ¶æ„å­˜åœ¨çš„é—®é¢˜ï¼Œç‰¹åˆ«é€‚åˆå¤§å‹äº’è”ç½‘é¡¹ç›®çš„å¼€å‘ï¼Œå› æ­¤è¢«å„å¤§äº’è”ç½‘å…¬å¸æ™®éé‡‡ç”¨ã€‚å¤§å®¶ä»¥å‰å¯èƒ½å¬è¯´è¿‡åˆ†å¸ƒå¼æ¶æ„ï¼Œ<strong>åˆ†å¸ƒå¼å°±æ˜¯æœåŠ¡æ‹†åˆ†çš„è¿‡ç¨‹</strong>ï¼Œå…¶å®å¾®æœåŠ¡æ¶æ„æ­£å¼åˆ†å¸ƒå¼æ¶æ„çš„ä¸€ç§æœ€ä½³å®è·µçš„æ–¹æ¡ˆã€‚</p><p>å½“ç„¶ï¼Œå¾®æœåŠ¡æ¶æ„è™½ç„¶èƒ½è§£å†³å•ä½“æ¶æ„çš„å„ç§é—®é¢˜ï¼Œä½†åœ¨æ‹†åˆ†çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šé¢ä¸´å¾ˆå¤šå…¶å®ƒé—®é¢˜ã€‚æ¯”å¦‚ï¼š</p><ul><li>å¦‚æœå‡ºç°è·¨æœåŠ¡çš„ä¸šåŠ¡è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</li><li>é¡µé¢è¯·æ±‚åˆ°åº•è¯¥è®¿é—®å“ªä¸ªæœåŠ¡ï¼Ÿ</li><li>å¦‚ä½•å®ç°å„ä¸ªæœåŠ¡ä¹‹é—´çš„æœåŠ¡éš”ç¦»ï¼Ÿ</li></ul><p>è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨åç»­çš„å­¦ä¹ ä¸­ä¼šç»™å¤§å®¶é€ä¸€è§£ç­”ã€‚</p><h3 id="_1-3-springcloud" tabindex="-1">1.3.SpringCloud <a class="header-anchor" href="#_1-3-springcloud" aria-label="Permalink to &quot;1.3.SpringCloud&quot;">â€‹</a></h3><p>å¾®æœåŠ¡æ‹†åˆ†ä»¥åç¢°åˆ°çš„å„ç§é—®é¢˜éƒ½æœ‰å¯¹åº”çš„è§£å†³æ–¹æ¡ˆå’Œå¾®æœåŠ¡ç»„ä»¶ï¼Œè€ŒSpringCloudæ¡†æ¶å¯ä»¥è¯´æ˜¯ç›®å‰Javaé¢†åŸŸæœ€å…¨é¢çš„å¾®æœåŠ¡ç»„ä»¶çš„é›†åˆäº†ã€‚</p><p><img src="/assets/image-20241126231821902.Cn_FpbRz.png" alt="image-20241126231821902" loading="lazy"></p><p>è€Œä¸”SpringCloudä¾æ‰˜äºSpringBootçš„è‡ªåŠ¨è£…é…èƒ½åŠ›ï¼Œå¤§å¤§é™ä½äº†å…¶é¡¹ç›®æ­å»ºã€ç»„ä»¶ä½¿ç”¨çš„æˆæœ¬ã€‚å¯¹äºæ²¡æœ‰è‡ªç ”å¾®æœåŠ¡ç»„ä»¶èƒ½åŠ›çš„ä¸­å°å‹ä¼ä¸šï¼Œä½¿ç”¨SpringCloudå…¨å®¶æ¡¶æ¥å®ç°å¾®æœåŠ¡å¼€å‘å¯ä»¥è¯´æ˜¯æœ€åˆé€‚çš„é€‰æ‹©äº†ï¼</p><p><a href="https://spring.io/projects/spring-cloud#overview" target="_blank" rel="noreferrer">https://spring.io/projects/spring-cloud#overview</a></p><p>ç›®å‰SpringCloudæœ€æ–°ç‰ˆæœ¬ä¸º<code>2022.0.x</code>ç‰ˆæœ¬ï¼Œå¯¹åº”çš„SpringBootç‰ˆæœ¬ä¸º<code>3.x</code>ç‰ˆæœ¬ï¼Œä½†å®ƒä»¬å…¨éƒ¨ä¾èµ–äºJDK17ï¼Œç›®å‰åœ¨ä¼ä¸šä¸­ä½¿ç”¨ç›¸å¯¹è¾ƒå°‘ã€‚</p><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>SpringCloudç‰ˆæœ¬</strong></th><th style="text-align:left;"><strong>SpringBootç‰ˆæœ¬</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2022.0-Release-Notes" target="_blank" rel="noreferrer">2022.0.x</a> aka Kilburn</td><td style="text-align:left;">3.0.x</td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2021.0-Release-Notes" target="_blank" rel="noreferrer">2021.0.x</a> aka Jubilee</td><td style="text-align:left;">2.6.x, <strong>2.7.x (Starting with 2021.0.3)</strong></td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes" target="_blank" rel="noreferrer">2020.0.x</a> aka Ilford</td><td style="text-align:left;">2.4.x, 2.5.x (Starting with 2020.0.3)</td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-Hoxton-Release-Notes" target="_blank" rel="noreferrer">Hoxton</a></td><td style="text-align:left;">2.2.x, 2.3.x (Starting with SR5)</td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Greenwich-Release-Notes" target="_blank" rel="noreferrer">Greenwich</a></td><td style="text-align:left;">2.1.x</td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Finchley-Release-Notes" target="_blank" rel="noreferrer">Finchley</a></td><td style="text-align:left;">2.0.x</td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Edgware-Release-Notes" target="_blank" rel="noreferrer">Edgware</a></td><td style="text-align:left;">1.5.x</td></tr><tr><td style="text-align:left;"><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Dalston-Release-Notes" target="_blank" rel="noreferrer">Dalston</a></td><td style="text-align:left;">1.5.x</td></tr></tbody></table><p>å› æ­¤ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨æ¬¡æ–°ç‰ˆæœ¬ï¼š<strong>Spring Cloud 2021.0.xä»¥åŠSpring Boot 2.7.xç‰ˆæœ¬</strong>ã€‚</p><p>å¦å¤–ï¼ŒAlibabaçš„å¾®æœåŠ¡äº§å“SpringCloudAlibabaç›®å‰ä¹Ÿæˆä¸ºäº†SpringCloudç»„ä»¶ä¸­çš„ä¸€å‘˜ï¼Œæˆ‘ä»¬è¯¾å ‚ä¸­ä¹Ÿä¼šä½¿ç”¨å…¶ä¸­çš„éƒ¨åˆ†ç»„ä»¶ã€‚</p><p>åœ¨æˆ‘ä»¬çš„çˆ¶å·¥ç¨‹hmallä¸­å·²ç»é…ç½®äº†SpringCloudä»¥åŠSpringCloudAlibabaçš„ä¾èµ–ï¼š</p><p><img src="/assets/1732633714637-22.BeaAkNP4.png" alt="img" loading="lazy"></p><p>å¯¹åº”çš„ç‰ˆæœ¬ï¼š</p><p><img src="/assets/1732633714637-23.BPjOqcPw.png" alt="img" loading="lazy"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨åç»­éœ€è¦ä½¿ç”¨SpringCloudæˆ–è€…SpringCloudAlibabaç»„ä»¶æ—¶ï¼Œå°±æ— éœ€å•ç‹¬æŒ‡å®šç‰ˆæœ¬äº†ã€‚</p><h3 id="_1-4-å¯¼å…¥springcloudä¾èµ–" tabindex="-1">1.4.å¯¼å…¥SpringCloudä¾èµ– <a class="header-anchor" href="#_1-4-å¯¼å…¥springcloudä¾èµ–" aria-label="Permalink to &quot;1.4.å¯¼å…¥SpringCloudä¾èµ–&quot;">â€‹</a></h3><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--spring cloud--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-dependencies&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${spring-cloud.version}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;pom&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;import&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--spring cloud alibaba--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-alibaba-dependencies&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${spring-cloud-alibaba.version}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;pom&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;import&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="_2-å¾®æœåŠ¡æ‹†åˆ†" tabindex="-1">2.å¾®æœåŠ¡æ‹†åˆ† <a class="header-anchor" href="#_2-å¾®æœåŠ¡æ‹†åˆ†" aria-label="Permalink to &quot;2.å¾®æœåŠ¡æ‹†åˆ†&quot;">â€‹</a></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€èµ·å°†é»‘é©¬å•†åŸè¿™ä¸ªå•ä½“é¡¹ç›®æ‹†åˆ†ä¸ºå¾®æœåŠ¡é¡¹ç›®ï¼Œå¹¶è§£å†³å…¶ä¸­å‡ºç°çš„å„ç§é—®é¢˜ã€‚</p><h3 id="_2-1-ç†Ÿæ‚‰é»‘é©¬å•†åŸ" tabindex="-1">2.1.ç†Ÿæ‚‰é»‘é©¬å•†åŸ <a class="header-anchor" href="#_2-1-ç†Ÿæ‚‰é»‘é©¬å•†åŸ" aria-label="Permalink to &quot;2.1.ç†Ÿæ‚‰é»‘é©¬å•†åŸ&quot;">â€‹</a></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰é»‘é©¬å•†åŸé¡¹ç›®çš„åŸºæœ¬ç»“æ„ï¼š</p><p><img src="/assets/1732633714637-24.BoOS00hU.png" alt="img" loading="lazy"></p><p>å¤§å®¶å¯ä»¥ç›´æ¥å¯åŠ¨è¯¥é¡¹ç›®ï¼Œæµ‹è¯•æ•ˆæœã€‚ä¸è¿‡ï¼Œéœ€è¦ä¿®æ”¹æ•°æ®åº“è¿æ¥å‚æ•°ï¼Œåœ¨application-local.yamlä¸­ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„è™šæ‹ŸæœºIPåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    pw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ä¿®æ”¹ä¸ºdockerä¸­çš„MySQLå¯†ç </span></span></code></pre></div><p>åŒæ—¶é…ç½®å¯åŠ¨é¡¹æ¿€æ´»çš„æ˜¯localç¯å¢ƒï¼š</p><p><img src="/assets/1732633714637-25.B9pCI6mN.png" alt="img" loading="lazy"></p><h4 id="_2-1-1-ç™»å½•" tabindex="-1">2.1.1.ç™»å½• <a class="header-anchor" href="#_2-1-1-ç™»å½•" aria-label="Permalink to &quot;2.1.1.ç™»å½•&quot;">â€‹</a></h4><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ç™»å½•ä¸šåŠ¡æµç¨‹ï¼š</p><p><img src="/assets/image-20241202152238351.DTwoCYgE.png" alt="image-20241202152238351" loading="lazy"></p><p>ç™»å½•å…¥å£åœ¨<code>com.hmall.controller.UserController</code>ä¸­çš„<code>login</code>æ–¹æ³•ï¼š</p><p><img src="/assets/1732633714638-26.0kPvN-CK.png" alt="img" loading="lazy"></p><h4 id="_2-2-2-æœç´¢å•†å“" tabindex="-1">2.2.2.æœç´¢å•†å“ <a class="header-anchor" href="#_2-2-2-æœç´¢å•†å“" aria-label="Permalink to &quot;2.2.2.æœç´¢å•†å“&quot;">â€‹</a></h4><p>åœ¨é¦–é¡µæœç´¢æ¡†è¾“å…¥å…³é”®å­—ï¼Œç‚¹å‡»æœç´¢å³å¯è¿›å…¥æœç´¢åˆ—è¡¨é¡µé¢ï¼š</p><p><img src="/assets/1732633714638-27.DelC9LYB.png" alt="img" loading="lazy"></p><p>è¯¥é¡µé¢ä¼šè°ƒç”¨æ¥å£ï¼š<code>/search/list</code>ï¼Œå¯¹åº”çš„æœåŠ¡ç«¯å…¥å£åœ¨<code>com.hmall.controller.SearchController</code>ä¸­çš„<code>search</code>æ–¹æ³•ï¼š</p><p><img src="/assets/1732633714638-28.CmYO5qSr.png" alt="img" loading="lazy"></p><p>è¿™é‡Œç›®å‰æ˜¯åˆ©ç”¨æ•°æ®åº“å®ç°äº†ç®€å•çš„åˆ†é¡µæŸ¥è¯¢ã€‚</p><h4 id="_2-2-3-è´­ç‰©è½¦" tabindex="-1">2.2.3.è´­ç‰©è½¦ <a class="header-anchor" href="#_2-2-3-è´­ç‰©è½¦" aria-label="Permalink to &quot;2.2.3.è´­ç‰©è½¦&quot;">â€‹</a></h4><p>åœ¨æœç´¢åˆ°çš„å•†å“åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»æŒ‰é’®<code>åŠ å…¥è´­ç‰©è½¦</code>ï¼Œå³å¯å°†å•†å“åŠ å…¥è´­ç‰©è½¦ï¼š</p><p><img src="/assets/1732633714638-29.BVOO25gH.png" alt="img" loading="lazy"></p><p>åŠ å…¥æˆåŠŸåå³å¯è¿›å…¥è´­ç‰©è½¦åˆ—è¡¨é¡µï¼ŒæŸ¥çœ‹è‡ªå·±è´­ç‰©è½¦å•†å“åˆ—è¡¨ï¼š</p><p><img src="/assets/1732633714638-30.CCNp2Bqn.png" alt="img" loading="lazy"></p><p>åŒæ—¶è¿™é‡Œè¿˜å¯ä»¥å¯¹è´­ç‰©è½¦å®ç°ä¿®æ”¹ã€åˆ é™¤ç­‰æ“ä½œã€‚</p><p>ç›¸å…³åŠŸèƒ½å…¨éƒ¨åœ¨<code>com.hmall.controller.CartController</code>ä¸­ï¼š</p><p><img src="/assets/1732633714638-31.DyAHZk4U.png" alt="img" loading="lazy"></p><p>å…¶ä¸­ï¼ŒæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨æ—¶ï¼Œç”±äºè¦åˆ¤æ–­å•†å“æœ€æ–°çš„ä»·æ ¼å’ŒçŠ¶æ€ï¼Œæ‰€ä»¥è¿˜éœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œä¸šåŠ¡æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20250228170606744.MIdSYj56.png" alt="image-20250228170606744" loading="lazy"></p><h4 id="_2-2-4-ä¸‹å•" tabindex="-1">2.2.4.ä¸‹å• <a class="header-anchor" href="#_2-2-4-ä¸‹å•" aria-label="Permalink to &quot;2.2.4.ä¸‹å•&quot;">â€‹</a></h4><p>åœ¨è´­ç‰©è½¦é¡µé¢ç‚¹å‡»<code>ç»“ç®—</code>æŒ‰é’®ï¼Œä¼šè¿›å…¥è®¢å•ç»“ç®—é¡µé¢ï¼š</p><p><img src="/assets/1732633714638-32.NMOAfHlK.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»æäº¤è®¢å•ï¼Œä¼šæäº¤è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åš3ä»¶äº‹æƒ…ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªæ–°çš„è®¢å•</li><li>æ‰£å‡å•†å“åº“å­˜</li><li>æ¸…ç†è´­ç‰©è½¦ä¸­å•†å“</li></ul><p>ä¸šåŠ¡å…¥å£åœ¨<code>com.hmall.controller.OrderController</code>ä¸­çš„<code>createOrder</code>æ–¹æ³•ï¼š</p><p><img src="/assets/1732633714638-33.CWj-vf5t.png" alt="img" loading="lazy"></p><h4 id="_2-2-5-æ”¯ä»˜" tabindex="-1">2.2.5.æ”¯ä»˜ <a class="header-anchor" href="#_2-2-5-æ”¯ä»˜" aria-label="Permalink to &quot;2.2.5.æ”¯ä»˜&quot;">â€‹</a></h4><p>ä¸‹å•å®Œæˆåä¼šè·³è½¬åˆ°æ”¯ä»˜é¡µé¢ï¼Œç›®å‰åªæ”¯æŒ<strong>ä½™é¢æ”¯ä»˜</strong>ï¼š</p><p><img src="/assets/1732633714638-34.C3E9CXmS.png" alt="img" loading="lazy"></p><p>åœ¨é€‰æ‹©<strong>ä½™é¢æ”¯ä»˜</strong>è¿™ç§æ–¹å¼åï¼Œä¼šå‘èµ·è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šç«‹åˆ»åˆ›å»ºä¸€ä¸ªæ”¯ä»˜æµæ°´å•ï¼Œå¹¶è¿”å›æ”¯ä»˜æµæ°´å•å·åˆ°å‰ç«¯ã€‚</p><p>å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œç„¶åç‚¹å‡»ç¡®è®¤æ”¯ä»˜æ—¶ï¼Œé¡µé¢ä¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯ä¼šåšå‡ ä»¶äº‹æƒ…ï¼š</p><ul><li>æ ¡éªŒç”¨æˆ·å¯†ç </li><li>æ‰£å‡ä½™é¢</li><li>ä¿®æ”¹æ”¯ä»˜æµæ°´çŠ¶æ€</li><li>ä¿®æ”¹äº¤æ˜“è®¢å•çŠ¶æ€</li></ul><p>è¯·æ±‚å…¥å£åœ¨<code>com.hmall.controller.PayController</code>ä¸­ï¼š</p><p><img src="/assets/1732633714638-35.Dn03o2Es.png" alt="img" loading="lazy"></p><h3 id="_2-2-æœåŠ¡æ‹†åˆ†åŸåˆ™" tabindex="-1">2.2.æœåŠ¡æ‹†åˆ†åŸåˆ™ <a class="header-anchor" href="#_2-2-æœåŠ¡æ‹†åˆ†åŸåˆ™" aria-label="Permalink to &quot;2.2.æœåŠ¡æ‹†åˆ†åŸåˆ™&quot;">â€‹</a></h3><p>æœåŠ¡æ‹†åˆ†ä¸€å®šè¦è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>ä»€ä¹ˆæ—¶å€™æ‹†ï¼Ÿ</li><li>å¦‚ä½•æ‹†ï¼Ÿ</li></ul><h4 id="_2-2-1-ä»€ä¹ˆæ—¶å€™æ‹†" tabindex="-1">2.2.1.ä»€ä¹ˆæ—¶å€™æ‹† <a class="header-anchor" href="#_2-2-1-ä»€ä¹ˆæ—¶å€™æ‹†" aria-label="Permalink to &quot;2.2.1.ä»€ä¹ˆæ—¶å€™æ‹†&quot;">â€‹</a></h4><p><img src="/assets/image-20241202155407439.GUte_nwo.png" alt="image-20241202155407439" loading="lazy"></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºä¸€ä¸ªåˆåˆ›çš„é¡¹ç›®ï¼Œé¦–å…ˆè¦åšçš„æ˜¯éªŒè¯é¡¹ç›®çš„å¯è¡Œæ€§ã€‚å› æ­¤è¿™ä¸€é˜¶æ®µçš„é¦–è¦ä»»åŠ¡æ˜¯æ•æ·å¼€å‘ï¼Œå¿«é€Ÿäº§å‡ºç”Ÿäº§å¯ç”¨çš„äº§å“ï¼ŒæŠ•å…¥å¸‚åœºåšéªŒè¯ã€‚ä¸ºäº†è¾¾æˆè¿™ä¸€ç›®çš„ï¼Œè¯¥é˜¶æ®µé¡¹ç›®æ¶æ„å¾€å¾€ä¼šæ¯”è¾ƒç®€å•ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ä¼šç›´æ¥é‡‡ç”¨å•ä½“æ¶æ„ï¼Œè¿™æ ·å¼€å‘æˆæœ¬æ¯”è¾ƒä½ï¼Œå¯ä»¥å¿«é€Ÿäº§å‡ºç»“æœï¼Œä¸€æ—¦å‘ç°é¡¹ç›®ä¸ç¬¦åˆå¸‚åœºï¼ŒæŸå¤±è¾ƒå°ã€‚</p><p>å¦‚æœè¿™ä¸€é˜¶æ®µé‡‡ç”¨å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼ŒæŠ•å…¥å¤§é‡çš„äººåŠ›å’Œæ—¶é—´æˆæœ¬ç”¨äºæ¶æ„è®¾è®¡ï¼Œæœ€ç»ˆå‘ç°äº§å“ä¸ç¬¦åˆå¸‚åœºéœ€æ±‚ï¼Œç­‰äºå…¨éƒ¨åšäº†æ— ç”¨åŠŸã€‚</p><p>æ‰€ä»¥ï¼Œå¯¹äº<strong>å¤§å¤šæ•°å°å‹é¡¹ç›®æ¥è¯´ï¼Œä¸€èˆ¬æ˜¯å…ˆé‡‡ç”¨å•ä½“æ¶æ„</strong>ï¼Œéšç€ç”¨æˆ·è§„æ¨¡æ‰©å¤§ã€ä¸šåŠ¡å¤æ‚å<strong>å†é€æ¸æ‹†åˆ†ä¸º****å¾®æœåŠ¡æ¶æ„</strong>ã€‚è¿™æ ·åˆæœŸæˆæœ¬ä¼šæ¯”è¾ƒä½ï¼Œå¯ä»¥å¿«é€Ÿè¯•é”™ã€‚ä½†æ˜¯ï¼Œè¿™ä¹ˆåšçš„é—®é¢˜å°±åœ¨äºåæœŸåšæœåŠ¡æ‹†åˆ†æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šä»£ç è€¦åˆå¸¦æ¥çš„é—®é¢˜ï¼Œæ‹†åˆ†æ¯”è¾ƒå›°éš¾ï¼ˆ<strong>å‰æ˜“åéš¾</strong>ï¼‰ã€‚</p><p>è€Œå¯¹äºä¸€äº›å¤§å‹é¡¹ç›®ï¼Œåœ¨ç«‹é¡¹ä¹‹åˆç›®çš„å°±å¾ˆæ˜ç¡®ï¼Œä¸ºäº†é•¿è¿œè€ƒè™‘ï¼Œåœ¨æ¶æ„è®¾è®¡æ—¶å°±ç›´æ¥é€‰æ‹©å¾®æœåŠ¡æ¶æ„ã€‚è™½ç„¶å‰æœŸæŠ•å…¥è¾ƒå¤šï¼Œä½†åæœŸå°±å°‘äº†æ‹†åˆ†æœåŠ¡çš„çƒ¦æ¼ï¼ˆ<strong>å‰éš¾åæ˜“</strong>ï¼‰ã€‚</p><h4 id="_2-2-2-æ€ä¹ˆæ‹†" tabindex="-1">2.2.2.æ€ä¹ˆæ‹† <a class="header-anchor" href="#_2-2-2-æ€ä¹ˆæ‹†" aria-label="Permalink to &quot;2.2.2.æ€ä¹ˆæ‹†&quot;">â€‹</a></h4><p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œå¾®æœåŠ¡æ‹†åˆ†æ—¶<strong>ç²’åº¦è¦å°</strong>ï¼Œè¿™å…¶å®æ˜¯æ‹†åˆ†çš„ç›®æ ‡ã€‚å…·ä½“å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦æ¥åˆ†æï¼š</p><ul><li><strong>é«˜å†…èš</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„èŒè´£è¦å°½é‡å•ä¸€ï¼ŒåŒ…å«çš„ä¸šåŠ¡ç›¸äº’å…³è”åº¦é«˜ã€å®Œæ•´åº¦é«˜ã€‚</li><li><strong>ä½è€¦åˆ</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„åŠŸèƒ½è¦ç›¸å¯¹ç‹¬ç«‹ï¼Œå°½é‡å‡å°‘å¯¹å…¶å®ƒå¾®æœåŠ¡çš„ä¾èµ–ï¼Œæˆ–è€…ä¾èµ–æ¥å£çš„ç¨³å®šæ€§è¦å¼ºã€‚</li></ul><p><strong>é«˜å†…èš</strong>é¦–å…ˆæ˜¯**å•ä¸€èŒè´£ï¼Œ**ä½†ä¸èƒ½è¯´ä¸€ä¸ªå¾®æœåŠ¡å°±ä¸€ä¸ªæ¥å£ï¼Œè€Œæ˜¯è¦ä¿è¯å¾®æœåŠ¡å†…éƒ¨ä¸šåŠ¡çš„å®Œæ•´æ€§ä¸ºå‰æã€‚ç›®æ ‡æ˜¯å½“æˆ‘ä»¬è¦ä¿®æ”¹æŸä¸ªä¸šåŠ¡æ—¶ï¼Œæœ€å¥½å°±åªä¿®æ”¹å½“å‰å¾®æœåŠ¡ï¼Œè¿™æ ·å˜æ›´çš„æˆæœ¬æ›´ä½ã€‚</p><p>ä¸€æ—¦å¾®æœåŠ¡åšåˆ°äº†é«˜å†…èšï¼Œé‚£ä¹ˆæœåŠ¡ä¹‹é—´çš„<strong>è€¦åˆåº¦</strong>è‡ªç„¶å°±é™ä½äº†ã€‚</p><p>å½“ç„¶ï¼Œå¾®æœåŠ¡ä¹‹é—´ä¸å¯é¿å…çš„ä¼šæœ‰æˆ–å¤šæˆ–å°‘çš„ä¸šåŠ¡äº¤äº’ï¼Œæ¯”å¦‚ä¸‹å•æ—¶éœ€è¦æŸ¥è¯¢å•†å“æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¸èƒ½åœ¨è®¢å•æœåŠ¡ç›´æ¥æŸ¥è¯¢å•†å“æ•°æ®åº“ï¼Œå¦åˆ™å°±å¯¼è‡´äº†æ•°æ®è€¦åˆã€‚è€Œåº”è¯¥ç”±å•†å“æœåŠ¡å¯¹åº”æš´éœ²æ¥å£ï¼Œå¹¶ä¸”ä¸€å®šè¦ä¿è¯å¾®æœåŠ¡å¯¹å¤–<strong>æ¥å£çš„ç¨³å®šæ€§</strong>ï¼ˆå³ï¼šå°½é‡ä¿è¯æ¥å£å¤–è§‚ä¸å˜ï¼‰ã€‚è™½ç„¶å‡ºç°äº†æœåŠ¡é—´è°ƒç”¨ï¼Œä½†æ­¤æ—¶æ— è®ºä½ å¦‚ä½•åœ¨å•†å“æœåŠ¡åšå†…éƒ¨ä¿®æ”¹ï¼Œéƒ½ä¸ä¼šå½±å“åˆ°è®¢å•å¾®æœåŠ¡ï¼ŒæœåŠ¡é—´çš„è€¦åˆåº¦å°±é™ä½äº†ã€‚</p><p>æ˜ç¡®äº†æ‹†åˆ†ç›®æ ‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‹†åˆ†æ–¹å¼äº†ã€‚æˆ‘ä»¬åœ¨åšæœåŠ¡æ‹†åˆ†æ—¶ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>çºµå‘</strong>æ‹†åˆ†</li><li><strong>æ¨ªå‘</strong>æ‹†åˆ†</li></ul><p>æ‰€è°“==<strong>çºµå‘æ‹†åˆ†</strong>==ï¼Œå°±æ˜¯æŒ‰ç…§é¡¹ç›®çš„åŠŸèƒ½æ¨¡å—æ¥æ‹†åˆ†ã€‚ä¾‹å¦‚é»‘é©¬å•†åŸä¸­ï¼Œå°±æœ‰ç”¨æˆ·ç®¡ç†åŠŸèƒ½ã€è®¢å•ç®¡ç†åŠŸèƒ½ã€è´­ç‰©è½¦åŠŸèƒ½ã€å•†å“ç®¡ç†åŠŸèƒ½ã€æ”¯ä»˜åŠŸèƒ½ç­‰ã€‚é‚£ä¹ˆæŒ‰ç…§åŠŸèƒ½æ¨¡å—å°†ä»–ä»¬æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªæœåŠ¡ï¼Œå°±å±äºçºµå‘æ‹†åˆ†ã€‚è¿™ç§æ‹†åˆ†æ¨¡å¼å¯ä»¥å°½å¯èƒ½æé«˜æœåŠ¡çš„å†…èšæ€§ã€‚</p><p>è€Œ==<strong>æ¨ªå‘æ‹†åˆ†</strong>==ï¼Œæ˜¯çœ‹å„ä¸ªåŠŸèƒ½æ¨¡å—ä¹‹é—´æœ‰æ²¡æœ‰å…¬å…±çš„ä¸šåŠ¡éƒ¨åˆ†ï¼Œå¦‚æœæœ‰å°†å…¶æŠ½å–å‡ºæ¥ä½œä¸ºé€šç”¨æœåŠ¡ã€‚ä¾‹å¦‚ç”¨æˆ·ç™»å½•æ˜¯éœ€è¦å‘é€æ¶ˆæ¯é€šçŸ¥ï¼Œè®°å½•é£æ§æ•°æ®ï¼Œä¸‹å•æ—¶ä¹Ÿè¦å‘é€çŸ­ä¿¡ï¼Œè®°å½•é£æ§æ•°æ®ã€‚å› æ­¤<strong>æ¶ˆæ¯å‘é€ã€é£æ§æ•°æ®è®°å½•å°±æ˜¯é€šç”¨çš„ä¸šåŠ¡åŠŸèƒ½</strong>ï¼Œå› æ­¤å¯ä»¥å°†ä»–ä»¬åˆ†åˆ«æŠ½å–ä¸ºå…¬å…±æœåŠ¡ï¼šæ¶ˆæ¯ä¸­å¿ƒæœåŠ¡ã€é£æ§ç®¡ç†æœåŠ¡ã€‚è¿™æ ·å¯ä»¥æé«˜ä¸šåŠ¡çš„å¤ç”¨æ€§ï¼Œé¿å…é‡å¤å¼€å‘ã€‚åŒæ—¶é€šç”¨ä¸šåŠ¡ä¸€èˆ¬æ¥å£ç¨³å®šæ€§è¾ƒå¼ºï¼Œä¹Ÿä¸ä¼šä½¿æœåŠ¡ä¹‹é—´è¿‡åˆ†è€¦åˆã€‚</p><p>å½“ç„¶ï¼Œç”±äºé»‘é©¬å•†åŸå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œå…¶ä¸­çš„çŸ­ä¿¡å‘é€ã€é£æ§ç®¡ç†å¹¶æ²¡æœ‰å®ç°ï¼Œè¿™é‡Œå°±ä¸å†è€ƒè™‘äº†ã€‚è€Œå…¶å®ƒçš„ä¸šåŠ¡æŒ‰ç…§çºµå‘æ‹†åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå¾®æœåŠ¡ï¼š</p><ul><li>ç”¨æˆ·æœåŠ¡</li><li>å•†å“æœåŠ¡</li><li>è®¢å•æœåŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡</li><li>æ”¯ä»˜æœåŠ¡</li></ul><h3 id="_2-3-æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡" tabindex="-1">2.3.æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡ <a class="header-anchor" href="#_2-3-æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡" aria-label="Permalink to &quot;2.3.æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆæŠŠå•†å“ç®¡ç†åŠŸèƒ½ã€è´­ç‰©è½¦åŠŸèƒ½æŠ½å–ä¸ºä¸¤ä¸ªç‹¬ç«‹æœåŠ¡ã€‚</p><p>ä¸€èˆ¬å¾®æœåŠ¡é¡¹ç›®æœ‰ä¸¤ç§ä¸åŒçš„å·¥ç¨‹ç»“æ„ï¼š</p><ul><li>å®Œå…¨è§£è€¦ï¼šæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½åˆ›å»ºä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥ç¨‹ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¼€å‘è¯­è¨€æ¥å¼€å‘ï¼Œé¡¹ç›®å®Œå…¨è§£è€¦ã€‚ <ul><li>ä¼˜ç‚¹ï¼šæœåŠ¡ä¹‹é—´è€¦åˆåº¦ä½</li><li>ç¼ºç‚¹ï¼šæ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹ä»“åº“ï¼Œç®¡ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦</li></ul></li><li>Mavenèšåˆï¼šæ•´ä¸ªé¡¹ç›®ä¸ºä¸€ä¸ªProjectï¼Œç„¶åæ¯ä¸ªå¾®æœåŠ¡æ˜¯å…¶ä¸­çš„ä¸€ä¸ªModule <ul><li>ä¼˜ç‚¹ï¼šé¡¹ç›®ä»£ç é›†ä¸­ï¼Œç®¡ç†å’Œè¿ç»´æ–¹ä¾¿ï¼ˆæˆè¯¾ä¹Ÿæ–¹ä¾¿ï¼‰</li><li>ç¼ºç‚¹ï¼šæœåŠ¡ä¹‹é—´è€¦åˆï¼Œç¼–è¯‘æ—¶é—´è¾ƒé•¿</li></ul></li></ul><p><strong>æ³¨æ„</strong>ï¼š</p><p>ä¸ºäº†æˆè¯¾æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨Mavenèšåˆå·¥ç¨‹ï¼Œå¤§å®¶ä»¥ååˆ°äº†ä¼ä¸šï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªç”±é€‰æ‹©å·¥ç¨‹ç»“æ„ã€‚</p><p>åœ¨hmallçˆ¶å·¥ç¨‹ä¹‹ä¸­ï¼Œæˆ‘å·²ç»æå‰å®šä¹‰äº†SpringBootã€SpringCloudçš„ä¾èµ–ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨è¿™ä¸ªé¡¹ç›®ä¸­åˆ›å»ºå¾®æœåŠ¡module.</p><h4 id="_2-3-1-å•†å“æœåŠ¡" tabindex="-1">2.3.1.å•†å“æœåŠ¡ <a class="header-anchor" href="#_2-3-1-å•†å“æœåŠ¡" aria-label="Permalink to &quot;2.3.1.å•†å“æœåŠ¡&quot;">â€‹</a></h4><p>åœ¨hmallä¸­åˆ›å»ºmoduleï¼š</p><p><img src="/assets/1732633714638-36.s3rjjFTD.png" alt="img" loading="lazy"></p><p>é€‰æ‹©mavenæ¨¡å—ï¼Œå¹¶è®¾å®šJDKç‰ˆæœ¬ä¸º11ï¼š</p><p><img src="/assets/1732633714638-37.DB67D0JG.png" alt="img" loading="lazy"></p><p>å•†å“æ¨¡å—ï¼Œæˆ‘ä»¬èµ·åä¸º<code>item-service</code>ï¼š</p><p><img src="/assets/1732633714638-38.McMB08Fg.png" alt="img" loading="lazy"></p><p>å¼•å…¥ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;item-service&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--common--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-common&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--web--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--æ•°æ®åº“--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--mybatis--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.baomidou&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mybatis-plus-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--å•å…ƒæµ‹è¯•--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-test&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${project.artifactId}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ç¼–å†™å¯åŠ¨ç±»ï¼š</p><p><img src="/assets/1732633714638-39.B-hXXejj.png" alt="img" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.item;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.mybatis.spring.annotation.MapperScan;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MapperScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.hmall.item.mapper&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ItemApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ¥ä¸‹æ¥æ˜¯é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä»<code>hm-service</code>ä¸­æ‹·è´ï¼š</p><p><img src="/assets/1732633714638-40.B1sninKC.png" alt="img" loading="lazy"></p><p>å…¶ä¸­ï¼Œ<code>application.yaml</code>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8081</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">item-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://${hm.db.host}:3306/hm-item?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.pw}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default-enum-type-handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  global-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update-strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">not_null</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    com.hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">debug</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dateformat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HH:mm:ss:SSS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/${spring.application.name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">knife4j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  openapi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">å•†å“æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿¡æ¯&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zhanghuyi@itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è™å“¥</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://www.itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        group-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule-resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.item.controller</span></span></code></pre></div><p>å‰©ä¸‹çš„<code>application-dev.yaml</code>å’Œ<code>application-local.yaml</code>ç›´æ¥ä»hm-serviceæ‹·è´å³å¯ã€‚</p><p>ç„¶åæ‹·è´<code>hm-service</code>ä¸­ä¸å•†å“ç®¡ç†æœ‰å…³çš„ä»£ç åˆ°<code>item-service</code>ï¼Œå¦‚å›¾ï¼š</p><p><img src="/assets/1732633714638-41.BmR5porw.png" alt="img" loading="lazy"></p><p>è¿™é‡Œæœ‰ä¸€ä¸ªåœ°æ–¹çš„ä»£ç éœ€è¦æ”¹åŠ¨ï¼Œå°±æ˜¯<code>ItemServiceImpl</code>ä¸­çš„<code>deductStock</code>æ–¹æ³•ï¼š</p><p><strong>æ”¹åŠ¨å‰</strong></p><p><img src="/assets/1732633714638-42.B8EtGrAb.png" alt="img" loading="lazy"></p><p><strong>æ”¹åŠ¨å</strong></p><p><img src="/assets/1732633714638-43.HwIsMvEU.png" alt="img" loading="lazy"></p><p>è¿™ä¹Ÿæ˜¯å› ä¸ºItemMapperçš„æ‰€åœ¨åŒ…å‘ç”Ÿäº†å˜åŒ–ï¼Œå› æ­¤è¿™é‡Œä»£ç å¿…é¡»ä¿®æ”¹åŒ…è·¯å¾„ã€‚</p><p>æœ€åï¼Œè¿˜è¦å¯¼å…¥æ•°æ®åº“è¡¨ã€‚é»˜è®¤çš„æ•°æ®åº“è¿æ¥çš„æ˜¯è™šæ‹Ÿæœºï¼Œåœ¨ä½ dockeræ•°æ®åº“æ‰§è¡Œè¯¾å‰èµ„æ–™æä¾›çš„SQLæ–‡ä»¶ï¼š</p><p><img src="/assets/1732633714638-44.CODvzC09.png" alt="img" loading="lazy"></p><p>æœ€ç»ˆï¼Œä¼šåœ¨æ•°æ®åº“åˆ›å»ºä¸€ä¸ªåä¸ºhm-itemçš„databaseï¼Œå°†æ¥çš„æ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½ä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªdatabaseï¼š</p><p><img src="/assets/1732633714638-45.BrPeFsEu.png" alt="img" loading="lazy"></p><p><strong>æ³¨æ„</strong>ï¼šåœ¨ä¼ä¸šå¼€å‘çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½åº”è¯¥æœ‰è‡ªå·±çš„<strong>ç‹¬ç«‹æ•°æ®åº“æœåŠ¡</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯databaseï¼Œè¯¾å ‚æˆ‘ä»¬ç”¨databaseæ¥ä»£æ›¿ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥å¯åŠ¨æµ‹è¯•äº†ï¼Œåœ¨å¯åŠ¨å‰æˆ‘ä»¬è¦é…ç½®ä¸€ä¸‹å¯åŠ¨é¡¹ï¼Œè®©é»˜è®¤æ¿€æ´»çš„é…ç½®ä¸º<code>local</code>è€Œä¸æ˜¯<code>dev</code>ï¼š</p><p><img src="/assets/1732633714638-46.DFz4oVPV.png" alt="img" loading="lazy"></p><p>åœ¨æ‰“å¼€çš„ç¼–è¾‘æ¡†å¡«å†™<code>active profiles</code>:</p><p><img src="/assets/1732633714638-47.CR_ZNAIS.png" alt="img" loading="lazy"></p><p>æ¥ç€ï¼Œå¯åŠ¨<code>item-service</code>ï¼Œè®¿é—®å•†å“å¾®æœåŠ¡çš„swaggeræ¥å£æ–‡æ¡£ï¼š<code>http://localhost:8081/doc.html</code></p><p>ç„¶åæµ‹è¯•å…¶ä¸­çš„æ ¹æ®idæ‰¹é‡æŸ¥è¯¢å•†å“è¿™ä¸ªæ¥å£ï¼š</p><p><img src="/assets/1732633714638-48.BOmK6K5L.png" alt="img" loading="lazy"></p><p>æµ‹è¯•å‚æ•°ï¼š100002672302,100002624500,100002533430ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/assets/1732633714638-49.CakDK-6c.png" alt="img" loading="lazy"></p><p>è¯´æ˜å•†å“å¾®æœåŠ¡æŠ½å–æˆåŠŸäº†ã€‚</p><h4 id="_2-3-2-è´­ç‰©è½¦æœåŠ¡" tabindex="-1">2.3.2.è´­ç‰©è½¦æœåŠ¡ <a class="header-anchor" href="#_2-3-2-è´­ç‰©è½¦æœåŠ¡" aria-label="Permalink to &quot;2.3.2.è´­ç‰©è½¦æœåŠ¡&quot;">â€‹</a></h4><p>ä¸å•†å“æœåŠ¡ç±»ä¼¼ï¼Œåœ¨hmallä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„<code>module</code>ï¼Œèµ·åä¸º<code>cart-service</code>:</p><p><img src="/assets/1732633714638-50.1lkrxlH4.png" alt="img" loading="lazy"></p><p>ç„¶åæ˜¯ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;cart-service&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--common--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-common&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--web--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--æ•°æ®åº“--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--mybatis--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.baomidou&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mybatis-plus-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--å•å…ƒæµ‹è¯•--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-test&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${project.artifactId}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ç„¶åæ˜¯å¯åŠ¨ç±»ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.mybatis.spring.annotation.MapperScan;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MapperScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.hmall.cart.mapper&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CartApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CartApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç„¶åæ˜¯é…ç½®æ–‡ä»¶ï¼ŒåŒæ ·å¯ä»¥æ‹·è´è‡ª<code>item-service</code>ï¼Œä¸è¿‡å…¶ä¸­çš„<code>application.yaml</code>éœ€è¦ä¿®æ”¹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8082</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cart-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://${hm.db.host}:3306/hm-cart?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.pw}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default-enum-type-handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  global-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update-strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">not_null</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    com.hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">debug</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dateformat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HH:mm:ss:SSS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/${spring.application.name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">knife4j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  openapi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">å•†å“æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿¡æ¯&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zhanghuyi@itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è™å“¥</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://www.itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        group-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule-resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.cart.controller</span></span></code></pre></div><p>æœ€åï¼ŒæŠŠhm-serviceä¸­çš„ä¸è´­ç‰©è½¦æœ‰å…³åŠŸèƒ½æ‹·è´è¿‡æ¥ï¼Œæœ€ç»ˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/1732633714638-51.1JlETm2U.png" alt="img" loading="lazy"></p><p>ç‰¹åˆ«æ³¨æ„çš„æ˜¯<code>com.hmall.cart.service.impl.CartServiceImpl</code>ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦å¤„ç†ï¼š</p><ul><li>éœ€è¦<strong>è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œä½†ç™»å½•æ ¡éªŒåŠŸèƒ½ç›®å‰æ²¡æœ‰å¤åˆ¶è¿‡æ¥ï¼Œå…ˆå†™æ­»å›ºå®šç”¨æˆ·id</li><li>æŸ¥è¯¢è´­ç‰©è½¦æ—¶éœ€è¦<strong>æŸ¥è¯¢å•†å“ä¿¡æ¯</strong>ï¼Œè€Œå•†å“ä¿¡æ¯ä¸åœ¨å½“å‰æœåŠ¡ï¼Œéœ€è¦å…ˆå°†è¿™éƒ¨åˆ†ä»£ç æ³¨é‡Š</li></ul><p><img src="/assets/1732633714638-52.Cckm68b_.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬å¯¹è¿™éƒ¨åˆ†ä»£ç åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.service.impl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.StrUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.domain.dto.CartFormDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.domain.po.Cart;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.domain.vo.CartVO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.mapper.CartMapper;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.service.ICartService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.exception.BizIllegalException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.BeanUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.CollUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.UserContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Service;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Collection;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * &lt;p&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * è®¢å•è¯¦æƒ…è¡¨ æœåŠ¡å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * &lt;/p&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è™å“¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@since</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 2023-05-05</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequiredArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CartServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CartMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Cart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ICartService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // private final IItemService itemService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addItem2Cart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CartFormDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cartFormDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.è·å–ç™»å½•ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkItemExists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cartFormDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getItemId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), userId)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 2.1.å­˜åœ¨ï¼Œåˆ™æ›´æ–°æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            baseMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateNum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cartFormDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getItemId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), userId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.2.ä¸å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡è´­ç‰©è½¦æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        checkCartsFull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.æ–°å¢è´­ç‰©è½¦æ¡ç›®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.1.è½¬æ¢PO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Cart cart </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeanUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cartFormDTO, Cart.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.2.ä¿å­˜å½“å‰ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.3.ä¿å­˜åˆ°æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cart);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CartVO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryMyCarts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Cart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; carts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getUserId, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1L</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /*TODO UserContext.getUser()*/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carts)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emptyList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.è½¬æ¢VO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CartVO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; vos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeanUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carts, CartVO.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.å¤„ç†VOä¸­çš„å•†å“ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        handleCartItems</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vos);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vos;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleCartItems</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CartVO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.è·å–å•†å“id TODO å¤„ç†å•†å“ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /*Set&lt;Long&gt; itemIds = vos.stream().map(CartVO::getItemId).collect(Collectors.toSet());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.æŸ¥è¯¢å•†å“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        List&lt;ItemDTO&gt; items = itemService.queryItemByIds(itemIds);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        if (CollUtils.isEmpty(items)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            throw new BadRequestException(&quot;è´­ç‰©è½¦ä¸­å•†å“ä¸å­˜åœ¨ï¼&quot;);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.è½¬ä¸º id åˆ° itemçš„map</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        Map&lt;Long, ItemDTO&gt; itemMap = items.stream().collect(Collectors.toMap(ItemDTO::getId, Function.identity()));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.å†™å…¥vo</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        for (CartVO v : vos) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            ItemDTO item = itemMap.get(v.getItemId());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            if (item == null) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                continue;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            v.setNewPrice(item.getPrice());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            v.setStatus(item.getStatus());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            v.setStock(item.getStock());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        }*/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> removeByItemIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collection&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">itemIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.æ„å»ºåˆ é™¤æ¡ä»¶ï¼ŒuserIdå’ŒitemId</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Cart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; queryWrapper </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QueryWrapper&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Cart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        queryWrapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getUserId, UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getItemId, itemIds);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ é™¤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryWrapper);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkCartsFull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getUserId, userId).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(StrUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·è´­ç‰©è½¦è¯¾ç¨‹ä¸èƒ½è¶…è¿‡{}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkItemExists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">itemId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getUserId, userId)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Cart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getItemId, itemId)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æœ€åï¼Œè¿˜æ˜¯è¦å¯¼å…¥æ•°æ®åº“è¡¨ï¼Œåœ¨æœ¬åœ°æ•°æ®åº“ç›´æ¥æ‰§è¡Œè¯¾å‰èµ„æ–™å¯¹åº”çš„SQLæ–‡ä»¶ï¼š</p><p><img src="/assets/1732633714638-53.B-uSginA.png" alt="img" loading="lazy"></p><p>åœ¨æ•°æ®åº“ä¸­ä¼šå‡ºç°åä¸º<code>hm-cart</code>çš„<code>database</code>ï¼Œä»¥åŠå…¶ä¸­çš„<code>cart</code>è¡¨ï¼Œä»£è¡¨è´­ç‰©è½¦ï¼š</p><p><img src="/assets/1732633714638-54.D1neZtAw.png" alt="img" loading="lazy"></p><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æµ‹è¯•äº†ã€‚ä¸è¿‡åœ¨å¯åŠ¨å‰ï¼ŒåŒæ ·è¦é…ç½®å¯åŠ¨é¡¹çš„<code>active profile</code>ä¸º<code>local</code>ï¼š</p><p><img src="/assets/1732633714638-55.BzuvxmlH.png" alt="img" loading="lazy"></p><p>ç„¶åå¯åŠ¨<code>CartApplication</code>ï¼Œè®¿é—®swaggeræ–‡æ¡£é¡µé¢ï¼š<code>http://localhost:8082/doc.html</code></p><p>æˆ‘ä»¬æµ‹è¯•å…¶ä¸­çš„<code>æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨</code>æ¥å£ï¼š</p><p><img src="/assets/1732633714638-56.BVKS_5wf.png" alt="img" loading="lazy"></p><p>æ— éœ€å¡«å†™å‚æ•°ï¼Œç›´æ¥è®¿é—®ï¼š</p><p><img src="/assets/1732633714638-57.gCKuSXMT.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œå…¶ä¸­ä¸å•†å“æœ‰å…³çš„å‡ ä¸ªå­—æ®µå€¼éƒ½ä¸ºç©ºï¼è¿™å°±æ˜¯å› ä¸ºåˆšæ‰æˆ‘ä»¬æ³¨é‡Šæ‰äº†æŸ¥è¯¢è´­ç‰©è½¦æ—¶ï¼ŒæŸ¥è¯¢å•†å“ä¿¡æ¯çš„ç›¸å…³ä»£ç ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åœ¨<code>cart-service</code>æœåŠ¡ä¸­å®ç°å¯¹<code>item-service</code>æœåŠ¡çš„æŸ¥è¯¢å‘¢ï¼Ÿ</p><h3 id="_2-4-æœåŠ¡è°ƒç”¨" tabindex="-1">2.4.<mark>æœåŠ¡è°ƒç”¨</mark> <a class="header-anchor" href="#_2-4-æœåŠ¡è°ƒç”¨" aria-label="Permalink to &quot;2.4.==æœåŠ¡è°ƒç”¨==&quot;">â€‹</a></h3><p>åœ¨æ‹†åˆ†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå°±æ˜¯è´­ç‰©è½¦ä¸šåŠ¡ä¸­éœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œä½†å•†å“ä¿¡æ¯æŸ¥è¯¢çš„é€»è¾‘å…¨éƒ¨è¿ç§»åˆ°äº†<code>item-service</code>æœåŠ¡ï¼Œå¯¼è‡´æˆ‘ä»¬æ— æ³•æŸ¥è¯¢ã€‚</p><p>æœ€ç»ˆç»“æœå°±æ˜¯æŸ¥è¯¢åˆ°çš„è´­ç‰©è½¦æ•°æ®ä¸å®Œæ•´ï¼Œå› æ­¤è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±å¿…é¡»æ”¹é€ å…¶ä¸­çš„ä»£ç ï¼ŒæŠŠåŸæœ¬æœ¬åœ°æ–¹æ³•è°ƒç”¨ï¼Œæ”¹é€ æˆè·¨å¾®æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼Œå³<strong>R</strong>emote <strong>P</strong>roduce <strong>C</strong>allï¼‰ã€‚</p><p>å› æ­¤ï¼Œç°åœ¨æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨çš„æµç¨‹å˜æˆäº†è¿™æ ·ï¼š</p><p><img src="/assets/image-20250228200829849.DzgaNphy.png" alt="image-20250228200829849" loading="lazy"></p><p>ä»£ç ä¸­éœ€è¦å˜åŒ–çš„å°±æ˜¯è¿™ä¸€æ­¥ï¼š</p><p><img src="/assets/1732633714638-58.DyyeKtWS.png" alt="img" loading="lazy"></p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæˆ‘ä»¬è¯¥å¦‚ä½•è·¨æœåŠ¡è°ƒç”¨ï¼Œå‡†ç¡®çš„è¯´ï¼Œå¦‚ä½•åœ¨<code>cart-service</code>ä¸­è·å–<code>item-service</code>æœåŠ¡ä¸­çš„æä¾›çš„å•†å“æ•°æ®å‘¢ï¼Ÿ</p><p>å¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ä»¥å‰æœ‰æ²¡æœ‰å®ç°è¿‡ç±»ä¼¼çš„è¿œç¨‹æŸ¥è¯¢çš„åŠŸèƒ½å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬å‰ç«¯å‘æœåŠ¡ç«¯æŸ¥è¯¢æ•°æ®ï¼Œå…¶å®å°±æ˜¯ä»æµè§ˆå™¨è¿œç¨‹æŸ¥è¯¢æœåŠ¡ç«¯æ•°æ®ã€‚æ¯”å¦‚æˆ‘ä»¬åˆšæ‰é€šè¿‡Swaggeræµ‹è¯•å•†å“æŸ¥è¯¢æ¥å£ï¼Œå°±æ˜¯å‘<code>http://localhost:8081/items</code>è¿™ä¸ªæ¥å£å‘èµ·çš„è¯·æ±‚ï¼š</p><p><img src="/assets/1732633714638-59.CFcnNL4s.png" alt="img" loading="lazy"></p><p>è€Œè¿™ç§æŸ¥è¯¢å°±æ˜¯é€šè¿‡httpè¯·æ±‚çš„æ–¹å¼æ¥å®Œæˆçš„ï¼Œä¸ä»…ä»…å¯ä»¥å®ç°è¿œç¨‹æŸ¥è¯¢ï¼Œè¿˜å¯ä»¥å®ç°æ–°å¢ã€åˆ é™¤ç­‰å„ç§è¿œç¨‹è¯·æ±‚ã€‚</p><p>å‡å¦‚æˆ‘ä»¬åœ¨cart-serviceä¸­èƒ½æ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œå‘é€httpè¯·æ±‚åˆ°item-serviceï¼Œæ˜¯ä¸æ˜¯å°±å®ç°äº†è·¨å¾®æœåŠ¡çš„<strong>è¿œç¨‹è°ƒç”¨</strong>äº†å‘¢ï¼Ÿ</p><p>é‚£ä¹ˆï¼šæˆ‘ä»¬è¯¥å¦‚ä½•ç”¨Javaä»£ç å‘é€Httpçš„è¯·æ±‚å‘¢ï¼Ÿ</p><h4 id="_2-4-1-resttemplate" tabindex="-1">2.4.1.<mark>RestTemplate</mark> <a class="header-anchor" href="#_2-4-1-resttemplate" aria-label="Permalink to &quot;2.4.1.==RestTemplate==&quot;">â€‹</a></h4><p>Springç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªRestTemplateçš„APIï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°Httpè¯·æ±‚çš„å‘é€ã€‚</p><blockquote><p>org.springframework.web.client public class RestTemplate</p><p>extends InterceptingHttpAccessor</p><p>implements RestOperations</p><p>----------------------------------------------------------------------------------------------------------------</p><p>åŒæ­¥å®¢æˆ·ç«¯æ‰§è¡ŒHTTPè¯·æ±‚ï¼Œåœ¨åº•å±‚HTTPå®¢æˆ·ç«¯åº“(å¦‚JDK HttpURLConnectionã€Apache HttpComponentsç­‰)ä¸Šå…¬å¼€ä¸€ä¸ªç®€å•çš„æ¨¡æ¿æ–¹æ³•APIã€‚RestTemplateé€šè¿‡HTTPæ–¹æ³•ä¸ºå¸¸è§åœºæ™¯æä¾›äº†æ¨¡æ¿ï¼Œæ­¤å¤–è¿˜æä¾›äº†æ”¯æŒä¸å¤ªå¸¸è§æƒ…å†µçš„é€šç”¨äº¤æ¢å’Œæ‰§è¡Œæ–¹æ³•ã€‚ RestTemplateé€šå¸¸ç”¨ä½œå…±äº«ç»„ä»¶ã€‚ç„¶è€Œï¼Œå®ƒçš„é…ç½®ä¸æ”¯æŒå¹¶å‘ä¿®æ”¹ï¼Œå› æ­¤å®ƒçš„é…ç½®é€šå¸¸æ˜¯åœ¨å¯åŠ¨æ—¶å‡†å¤‡çš„ã€‚å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨å¯åŠ¨æ—¶åˆ›å»ºå¤šä¸ªä¸åŒé…ç½®çš„RestTemplateå®ä¾‹ã€‚å¦‚æœè¿™äº›å®ä¾‹éœ€è¦å…±äº«HTTPå®¢æˆ·ç«¯èµ„æºï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„åº•å±‚ClientHttpRequestFactoryã€‚ æ³¨æ„:ä»5.0å¼€å§‹ï¼Œè¿™ä¸ªç±»å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œåªæœ‰å¯¹æ›´æ”¹å’Œé”™è¯¯çš„å°è¯·æ±‚æ‰ä¼šè¢«æ¥å—ã€‚è¯·è€ƒè™‘ä½¿ç”¨org.springframework.web.react .client. webclientï¼Œå®ƒæœ‰æ›´ç°ä»£çš„APIï¼Œæ”¯æŒåŒæ­¥ã€å¼‚æ­¥å’Œæµåœºæ™¯ã€‚</p><p>----------------------------------------------------------------------------------------------------------------</p><p>è‡ª: 3.0 å‚è§: HttpMessageConverter, RequestCallback, ResponseExtractor, ResponseErrorHandler</p></blockquote><p>å…¶ä¸­æä¾›äº†å¤§é‡çš„æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å‘é€Httpè¯·æ±‚ï¼Œä¾‹å¦‚ï¼š</p><p><img src="/assets/1732633714638-60.CaYR88K6.png" alt="img" loading="lazy"></p><p>å¯ä»¥çœ‹åˆ°å¸¸è§çš„Getã€Postã€Putã€Deleteè¯·æ±‚éƒ½æ”¯æŒï¼Œå¦‚æœè¯·æ±‚å‚æ•°æ¯”è¾ƒå¤æ‚ï¼Œè¿˜å¯ä»¥ä½¿ç”¨exchangeæ–¹æ³•æ¥æ„é€ è¯·æ±‚ã€‚</p><p>æˆ‘ä»¬åœ¨<code>cart-service</code>æœåŠ¡ä¸­å®šä¹‰ä¸€ä¸ªé…ç½®ç±»ï¼š</p><p><img src="/assets/1732633714638-61.CG_RUI0U.png" alt="img" loading="lazy"></p><p>å…ˆå°†RestTemplateæ³¨å†Œä¸ºä¸€ä¸ªBeanï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.config;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.Bean;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.Configuration;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.client.RestTemplate;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RemoteCallConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RestTemplate </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">restTemplate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RestTemplate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-4-2-è¿œç¨‹è°ƒç”¨" tabindex="-1">2.4.2.è¿œç¨‹è°ƒç”¨ <a class="header-anchor" href="#_2-4-2-è¿œç¨‹è°ƒç”¨" aria-label="Permalink to &quot;2.4.2.è¿œç¨‹è°ƒç”¨&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹<code>cart-service</code>ä¸­çš„<code>com.hmall.cart.service.impl.``CartServiceImpl</code>çš„<code>handleCartItems</code>æ–¹æ³•ï¼Œå‘é€httpè¯·æ±‚åˆ°<code>item-service</code>ï¼š</p><p><img src="/assets/1732633714638-62.CPGzGYLQ.png" alt="img" loading="lazy"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆ©ç”¨RestTemplateå‘é€httpè¯·æ±‚ä¸å‰ç«¯ajaxå‘é€è¯·æ±‚éå¸¸ç›¸ä¼¼ï¼Œéƒ½åŒ…å«å››éƒ¨åˆ†ä¿¡æ¯ï¼š</p><ul><li>â‘  è¯·æ±‚æ–¹å¼</li><li>â‘¡ è¯·æ±‚è·¯å¾„</li><li>â‘¢ è¯·æ±‚å‚æ•°</li><li>â‘£ è¿”å›å€¼ç±»å‹</li></ul><p><code>handleCartItems</code>æ–¹æ³•çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleCartItems</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CartVO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vos) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // TODO 1.è·å–å•†å“id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Set&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; itemIds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vos.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CartVO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getItemId).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2.æŸ¥è¯¢å•†å“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // List&lt;ItemDTO&gt; items = itemService.queryItemByIds(itemIds);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2.1.åˆ©ç”¨RestTemplateå‘èµ·httpè¯·æ±‚ï¼Œå¾—åˆ°httpçš„å“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ResponseEntity&lt;List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> restTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;http://localhost:8081/items?ids={ids}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            HttpMethod.GET,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParameterizedTypeReference&lt;List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Map.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ids&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, CollUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(itemIds, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;,&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2.2.è§£æå“åº”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">is2xxSuccessful</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æŸ¥è¯¢å¤±è´¥ï¼Œç›´æ¥ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(items)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 3.è½¬ä¸º id åˆ° itemçš„map</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; itemMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> items.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ItemDTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getId, Function.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">identity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 4.å†™å…¥vo</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CartVO v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vos) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ItemDTO item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> itemMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getItemId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNewPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¥½äº†ï¼Œç°åœ¨é‡å¯<code>cart-service</code>ï¼Œå†æ¬¡æµ‹è¯•æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨æ¥å£ï¼š</p><p><img src="/assets/1732633714638-63.ketBmu8m.png" alt="img" loading="lazy"></p><p>å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰å•†å“ç›¸å…³æ•°æ®éƒ½å·²ç»æŸ¥è¯¢åˆ°äº†ã€‚</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>item-service</code>æä¾›äº†æŸ¥è¯¢æ¥å£ï¼Œ<code>cart-service</code>åˆ©ç”¨Httpè¯·æ±‚è°ƒç”¨è¯¥æ¥å£ã€‚å› æ­¤<code>item-service</code>å¯ä»¥ç§°ä¸ºæœåŠ¡çš„æä¾›è€…ï¼Œè€Œ<code>cart-service</code>åˆ™ç§°ä¸ºæœåŠ¡çš„æ¶ˆè´¹è€…æˆ–æœåŠ¡è°ƒç”¨è€…ã€‚</p><h3 id="_2-5-æ€»ç»“" tabindex="-1">2.5.æ€»ç»“ <a class="header-anchor" href="#_2-5-æ€»ç»“" aria-label="Permalink to &quot;2.5.æ€»ç»“&quot;">â€‹</a></h3><p>ä»€ä¹ˆæ—¶å€™éœ€è¦æ‹†åˆ†å¾®æœåŠ¡ï¼Ÿ</p><ul><li>å¦‚æœæ˜¯åˆ›ä¸šå‹å…¬å¸ï¼Œæœ€å¥½å…ˆç”¨å•ä½“æ¶æ„å¿«é€Ÿè¿­ä»£å¼€å‘ï¼ŒéªŒè¯å¸‚åœºè¿ä½œæ¨¡å‹ï¼Œå¿«é€Ÿè¯•é”™ã€‚å½“ä¸šåŠ¡è·‘é€šä»¥åï¼Œéšç€ä¸šåŠ¡è§„æ¨¡æ‰©å¤§ã€äººå‘˜è§„æ¨¡å¢åŠ ï¼Œå†è€ƒè™‘æ‹†åˆ†å¾®æœåŠ¡ã€‚</li><li>å¦‚æœæ˜¯å¤§å‹ä¼ä¸šï¼Œæœ‰å……è¶³çš„èµ„æºï¼Œå¯ä»¥åœ¨é¡¹ç›®å¼€å§‹ä¹‹åˆå°±æ­å»ºå¾®æœåŠ¡æ¶æ„ã€‚</li></ul><p>å¦‚ä½•æ‹†åˆ†ï¼Ÿ</p><ul><li>é¦–å…ˆè¦åšåˆ°é«˜å†…èšã€ä½è€¦åˆ</li><li>ä»æ‹†åˆ†æ–¹å¼æ¥è¯´ï¼Œæœ‰æ¨ªå‘æ‹†åˆ†å’Œçºµå‘æ‹†åˆ†ä¸¤ç§ã€‚çºµå‘å°±æ˜¯æŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½æ¨¡å—ï¼Œæ¨ªå‘åˆ™æ˜¯æ‹†åˆ†é€šç”¨æ€§ä¸šåŠ¡ï¼Œæé«˜å¤ç”¨æ€§</li></ul><p>æœåŠ¡æ‹†åˆ†ä¹‹åï¼Œä¸å¯é¿å…çš„ä¼šå‡ºç°è·¨å¾®æœåŠ¡çš„ä¸šåŠ¡ï¼Œæ­¤æ—¶å¾®æœåŠ¡ä¹‹é—´å°±éœ€è¦è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚å¾®æœåŠ¡ä¹‹é—´çš„è¿œç¨‹è°ƒç”¨è¢«ç§°ä¸ºRPCï¼Œå³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚RPCçš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š</p><ul><li>åŸºäºHttpåè®®</li><li>åŸºäºDubboåè®®</li></ul><p>æˆ‘ä»¬è¯¾å ‚ä¸­ä½¿ç”¨çš„æ˜¯Httpæ–¹å¼ï¼Œè¿™ç§æ–¹å¼ä¸å…³å¿ƒæœåŠ¡æä¾›è€…çš„å…·ä½“æŠ€æœ¯å®ç°ï¼Œåªè¦å¯¹å¤–æš´éœ²Httpæ¥å£å³å¯ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡çš„éœ€è¦ã€‚</p><p>Javaå‘é€httpè¯·æ±‚å¯ä»¥ä½¿ç”¨Springæä¾›çš„RestTemplateï¼Œä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>æ³¨å†ŒRestTemplateåˆ°Springå®¹å™¨</li><li>è°ƒç”¨RestTemplateçš„APIå‘é€è¯·æ±‚ï¼Œå¸¸è§æ–¹æ³•æœ‰ï¼š <ul><li>getForObjectï¼šå‘é€Getè¯·æ±‚å¹¶è¿”å›æŒ‡å®šç±»å‹å¯¹è±¡</li><li>PostForObjectï¼šå‘é€Postè¯·æ±‚å¹¶è¿”å›æŒ‡å®šç±»å‹å¯¹è±¡</li><li>putï¼šå‘é€PUTè¯·æ±‚</li><li>deleteï¼šå‘é€Deleteè¯·æ±‚</li><li>exchangeï¼šå‘é€ä»»æ„ç±»å‹è¯·æ±‚ï¼Œè¿”å›ResponseEntity</li></ul></li></ul><h2 id="_3-æœåŠ¡æ³¨å†Œå’Œå‘ç°" tabindex="-1">3.<mark>æœåŠ¡æ³¨å†Œå’Œå‘ç°</mark> <a class="header-anchor" href="#_3-æœåŠ¡æ³¨å†Œå’Œå‘ç°" aria-label="Permalink to &quot;3.==æœåŠ¡æ³¨å†Œå’Œå‘ç°==&quot;">â€‹</a></h2><p>åœ¨ä¸Šä¸€ç« æˆ‘ä»¬å®ç°äº†å¾®æœåŠ¡æ‹†åˆ†ï¼Œå¹¶ä¸”é€šè¿‡Httpè¯·æ±‚å®ç°äº†è·¨å¾®æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ã€‚ä¸è¿‡è¿™ç§æ‰‹åŠ¨å‘é€Httpè¯·æ±‚çš„æ–¹å¼å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚å•†å“å¾®æœåŠ¡è¢«è°ƒç”¨è¾ƒå¤šï¼Œä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å¤šå®ä¾‹éƒ¨ç½²ï¼Œå¦‚å›¾ï¼š</p><p><img src="/assets/image-20250228202513479.Ccv3u4Nl.png" alt="image-20250228202513479" loading="lazy"></p><p>æ­¤æ—¶ï¼Œæ¯ä¸ª<code>item-service</code>çš„å®ä¾‹å…¶IPæˆ–ç«¯å£ä¸åŒï¼Œé—®é¢˜æ¥äº†ï¼š</p><ul><li>item-serviceè¿™ä¹ˆå¤šå®ä¾‹ï¼Œcart-serviceå¦‚ä½•çŸ¥é“æ¯ä¸€ä¸ªå®ä¾‹çš„åœ°å€ï¼Ÿ</li><li>httpè¯·æ±‚è¦å†™urlåœ°å€ï¼Œ<code>cart-service</code>æœåŠ¡åˆ°åº•è¯¥è°ƒç”¨å“ªä¸ªå®ä¾‹å‘¢ï¼Ÿ</li><li>å¦‚æœåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŸä¸€ä¸ª<code>item-service</code>å®ä¾‹å®•æœºï¼Œ<code>cart-service</code>ä¾ç„¶åœ¨è°ƒç”¨è¯¥æ€ä¹ˆåŠï¼Ÿ</li><li>å¦‚æœå¹¶å‘å¤ªé«˜ï¼Œ<code>item-service</code>ä¸´æ—¶å¤šéƒ¨ç½²äº†Nå°å®ä¾‹ï¼Œ<code>cart-service</code>å¦‚ä½•çŸ¥é“æ–°å®ä¾‹çš„åœ°å€ï¼Ÿ</li></ul><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå°±å¿…é¡»å¼•å…¥æ³¨å†Œä¸­å¿ƒçš„æ¦‚å¿µäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·æ¥åˆ†æä¸‹æ³¨å†Œä¸­å¿ƒçš„åŸç†ã€‚</p><h3 id="_3-1-æ³¨å†Œä¸­å¿ƒåŸç†" tabindex="-1">3.1.<mark>æ³¨å†Œä¸­å¿ƒåŸç†</mark> <a class="header-anchor" href="#_3-1-æ³¨å†Œä¸­å¿ƒåŸç†" aria-label="Permalink to &quot;3.1.==æ³¨å†Œä¸­å¿ƒåŸç†==&quot;">â€‹</a></h3><p>åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªè§’è‰²ï¼š</p><ul><li>æœåŠ¡æä¾›è€…ï¼šæä¾›æ¥å£ä¾›å…¶å®ƒå¾®æœåŠ¡è®¿é—®ï¼Œæ¯”å¦‚<code>item-service</code></li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼šè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ï¼Œæ¯”å¦‚<code>cart-service</code></li></ul><p>åœ¨å¤§å‹å¾®æœåŠ¡é¡¹ç›®ä¸­ï¼ŒæœåŠ¡æä¾›è€…çš„æ•°é‡ä¼šéå¸¸å¤šï¼Œä¸ºäº†ç®¡ç†è¿™äº›æœåŠ¡å°±å¼•å…¥äº†<strong>æ³¨å†Œä¸­å¿ƒ</strong>çš„æ¦‚å¿µã€‚æ³¨å†Œä¸­å¿ƒã€æœåŠ¡æä¾›è€…ã€æœåŠ¡æ¶ˆè´¹è€…ä¸‰è€…é—´å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="/assets/1732633714638-64.BPCg2r88.jpeg" alt="img" loading="lazy"></p><p>æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æœåŠ¡å¯åŠ¨æ—¶å°±ä¼šæ³¨å†Œè‡ªå·±çš„æœåŠ¡ä¿¡æ¯ï¼ˆæœåŠ¡åã€IPã€ç«¯å£ï¼‰åˆ°æ³¨å†Œä¸­å¿ƒ</li><li>è°ƒç”¨è€…å¯ä»¥<strong>ä»æ³¨å†Œä¸­å¿ƒè®¢é˜…æƒ³è¦çš„æœåŠ¡</strong>ï¼Œè·å–æœåŠ¡å¯¹åº”çš„å®ä¾‹åˆ—è¡¨ï¼ˆ1ä¸ªæœåŠ¡å¯èƒ½<strong>å¤šå®ä¾‹éƒ¨ç½²</strong>ï¼‰</li><li>è°ƒç”¨è€…è‡ªå·±å¯¹å®ä¾‹åˆ—è¡¨<strong>è´Ÿè½½å‡è¡¡</strong>ï¼ŒæŒ‘é€‰ä¸€ä¸ªå®ä¾‹</li><li>è°ƒç”¨è€…å‘è¯¥å®ä¾‹å‘èµ·è¿œç¨‹è°ƒç”¨</li></ul><p>å½“æœåŠ¡æä¾›è€…çš„å®ä¾‹å®•æœºæˆ–è€…å¯åŠ¨æ–°å®ä¾‹æ—¶ï¼Œè°ƒç”¨è€…å¦‚ä½•å¾—çŸ¥å‘¢ï¼Ÿ</p><ul><li><strong>æœåŠ¡æä¾›è€…</strong>ä¼šå®šæœŸå‘æ³¨å†Œä¸­å¿ƒå‘é€è¯·æ±‚ï¼ŒæŠ¥å‘Šè‡ªå·±çš„å¥åº·çŠ¶æ€**ï¼ˆ<mark>å¿ƒè·³è¯·æ±‚</mark>ï¼‰**</li><li>å½“æ³¨å†Œä¸­å¿ƒé•¿æ—¶é—´æ”¶ä¸åˆ°æä¾›è€…çš„å¿ƒè·³æ—¶ï¼Œä¼šè®¤ä¸ºè¯¥å®ä¾‹å®•æœºï¼Œå°†å…¶ä»æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ä¸­å‰”é™¤</li><li>å½“æœåŠ¡æœ‰æ–°å®ä¾‹å¯åŠ¨æ—¶ï¼Œä¼šå‘é€æ³¨å†ŒæœåŠ¡è¯·æ±‚ï¼Œå…¶ä¿¡æ¯ä¼šè¢«è®°å½•åœ¨æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡å®ä¾‹åˆ—è¡¨</li><li><strong>å½“æ³¨å†Œä¸­å¿ƒæœåŠ¡åˆ—è¡¨å˜æ›´æ—¶ï¼Œä¼šä¸»åŠ¨é€šçŸ¥å¾®æœåŠ¡ï¼Œæ›´æ–°æœ¬åœ°æœåŠ¡åˆ—è¡¨</strong></li></ul><p><img src="/assets/image-20241202173429325.Qx3dM_2_.png" alt="image-20241202173429325" loading="lazy"></p><h3 id="_3-2-nacosæ³¨å†Œä¸­å¿ƒ" tabindex="-1">3.2.Nacosæ³¨å†Œä¸­å¿ƒ <a class="header-anchor" href="#_3-2-nacosæ³¨å†Œä¸­å¿ƒ" aria-label="Permalink to &quot;3.2.Nacosæ³¨å†Œä¸­å¿ƒ&quot;">â€‹</a></h3><p>ç›®å‰å¼€æºçš„æ³¨å†Œä¸­å¿ƒæ¡†æ¶æœ‰å¾ˆå¤šï¼Œå›½å†…æ¯”è¾ƒå¸¸è§çš„æœ‰ï¼š</p><ul><li>Eurekaï¼šNetflixå…¬å¸å‡ºå“ï¼Œç›®å‰è¢«é›†æˆåœ¨SpringCloudå½“ä¸­ï¼Œä¸€èˆ¬ç”¨äºJavaåº”ç”¨</li><li>Nacosï¼šAlibabaå…¬å¸å‡ºå“ï¼Œç›®å‰è¢«é›†æˆåœ¨SpringCloudAlibabaä¸­ï¼Œä¸€èˆ¬ç”¨äºJavaåº”ç”¨</li><li>Consulï¼šHashiCorpå…¬å¸å‡ºå“ï¼Œç›®å‰é›†æˆåœ¨SpringCloudä¸­ï¼Œä¸é™åˆ¶å¾®æœåŠ¡è¯­è¨€</li></ul><p>ä»¥ä¸Šå‡ ç§æ³¨å†Œä¸­å¿ƒéƒ½éµå¾ªSpringCloudä¸­çš„APIè§„èŒƒï¼Œå› æ­¤åœ¨ä¸šåŠ¡å¼€å‘ä½¿ç”¨ä¸Šæ²¡æœ‰å¤ªå¤§å·®å¼‚ã€‚ç”±äºNacosæ˜¯å›½å†…äº§å“ï¼Œä¸­æ–‡æ–‡æ¡£æ¯”è¾ƒä¸°å¯Œï¼Œè€Œä¸”åŒæ—¶å…·å¤‡<strong>é…ç½®ç®¡ç†</strong>åŠŸèƒ½ï¼ˆåé¢ä¼šå­¦ä¹ ï¼‰ï¼Œå› æ­¤åœ¨å›½å†…ä½¿ç”¨è¾ƒå¤šï¼Œè¯¾å ‚ä¸­æˆ‘ä»¬ä¼šNacosä¸ºä¾‹æ¥å­¦ä¹ ã€‚</p><p>å®˜æ–¹ç½‘ç«™å¦‚ä¸‹ï¼š</p><p><a href="https://nacos.io/zh-cn/" target="_blank" rel="noreferrer">https://nacos.io/zh-cn/</a></p><p>æˆ‘ä»¬åŸºäºDockeræ¥éƒ¨ç½²Nacosçš„æ³¨å†Œä¸­å¿ƒï¼Œé¦–å…ˆæˆ‘ä»¬è¦å‡†å¤‡MySQLæ•°æ®åº“è¡¨ï¼Œç”¨æ¥å­˜å‚¨Nacosçš„æ•°æ®ã€‚ç”±äºæ˜¯Dockeréƒ¨ç½²ï¼Œæ‰€ä»¥å¤§å®¶éœ€è¦å°†èµ„æ–™ä¸­çš„SQLæ–‡ä»¶å¯¼å…¥åˆ°ä½ <strong>Dockerä¸­çš„MySQLå®¹å™¨</strong>ä¸­ï¼š</p><p><img src="/assets/1732633714638-65.C0Juhb9v.png" alt="img" loading="lazy"></p><p>æœ€ç»ˆè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/1732633714638-66.Rq8v8tVh.png" alt="img" loading="lazy"></p><p>ç„¶åï¼Œæ‰¾åˆ°è¯¾å‰èµ„æ–™ä¸‹çš„nacosæ–‡ä»¶å¤¹ï¼š</p><p><img src="/assets/1732633714638-67.CrH9ynZn.png" alt="img" loading="lazy"></p><p>å…¶ä¸­çš„<code>nacos/custom.env</code>æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸€ä¸ªMYSQL_SERVICE_HOSTä¹Ÿå°±æ˜¯mysqlåœ°å€ï¼Œéœ€è¦ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„è™šæ‹ŸæœºIPåœ°å€ï¼š</p><p><img src="/assets/1732633714639-68.C1FTsmK-.png" alt="img" loading="lazy"></p><p>ç„¶åï¼Œå°†è¯¾å‰èµ„æ–™ä¸­çš„<code>nacos</code>ç›®å½•ä¸Šä¼ è‡³è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•ã€‚</p><p>è¿›å…¥rootç›®å½•ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„dockerå‘½ä»¤ï¼š</p><p><code>&lt;h2 id=&quot;nacos-Dockeréƒ¨ç½²&quot;&gt;</code>nacos-Dockeréƒ¨ç½²<code>&lt;/h2&gt;</code></p><div class="language-PowerShell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">PowerShell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker run </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name nacos \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">env</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file .</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nacos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">custom.env \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8848</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8848</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9848</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9848</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9849</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9849</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">restart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">always \</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">privileged</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nacos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nacos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server:v2.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">slim</span></span></code></pre></div><p>å¯åŠ¨å®Œæˆåï¼Œè®¿é—®ä¸‹é¢åœ°å€ï¼š<a href="http://192.168.150.101:8848/nacos/%EF%BC%8C%E6%B3%A8%E6%84%8F%E5%B0%86%60192.168.150.101%60%E6%9B%BF%E6%8D%A2%E4%B8%BA%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BAIP%E5%9C%B0%E5%9D%80%E3%80%82" target="_blank" rel="noreferrer">http://192.168.150.101:8848/nacos/ï¼Œæ³¨æ„å°†`192.168.150.101`æ›¿æ¢ä¸ºä½ è‡ªå·±çš„è™šæ‹ŸæœºIPåœ°å€ã€‚</a></p><p><strong>é™åˆ¶nacosçš„å†…å­˜ä½¿ç”¨é‡ï¼š</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é™åˆ¶nacosçš„å†…å­˜ä½¿ç”¨é‡ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --env-file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./nacos/custom.env</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8848:8848</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9848:9848</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9849:9849</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> charging-station</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --memory=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;512m&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --cpus=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> JAVA_OPTS=&quot;-Xms256m -Xmx512m&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --restart=always</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --privileged=true</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  nacos/nacos-server:v2.1.0-slim</span></span></code></pre></div><p><code>&lt;h2 id=&quot;nacos-Dockeréƒ¨ç½²-2&quot;&gt;</code>nacos-Dockeréƒ¨ç½²-2<code>&lt;/h2&gt;</code></p><p><strong>å¦ä¸€ç§æ–¹æ³•ä¸ä½¿ç”¨custom.env</strong></p><p><a href="https://blog.csdn.net/apple_74262176/article/details/141886769" target="_blank" rel="noreferrer">https://blog.csdn.net/apple_74262176/article/details/141886769</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‹‰å– Nacos é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos/nacos-server:v2.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/nacos/{conf,logs,data}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8848:8848</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos/nacos-server:v2.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‹·è´æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos:/home/nacos/conf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/nacos</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos:/home/nacos/data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/nacos</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos:/home/nacos/logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/nacos</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆæƒæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/nacos/{conf,logs,data}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ é™¤å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ‰§è¡Œsqlï¼Œåˆ›å»ºnacosçš„æ•°æ®åº“</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¯åŠ¨nacoså®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#MYSQL_SERVICE_HOST=192.168.100.233: ä¿®æ”¹ä¸ºè‡ªå·±çš„MYSQLçš„IP</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#MYSQL_SERVICE_PASSWORD=123456 : ä¿®æ”¹ä¸ºè‡ªå·±çš„MYSQLå¯†ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#MYSQL_SERVICE_DB_NAME : æ¢æˆè‡ªå·±Nacoså¯¹åº”æ•°æ®åº“åç§°</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MODE=standalone</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SPRING_DATASOURCE_PLATFORM=mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL_SERVICE_HOST=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">47.109.155.207</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL_SERVICE_PORT=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3307</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL_SERVICE_USER=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL_SERVICE_PASSWORD=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MYSQL_SERVICE_DB_NAME=nacos</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TIME_ZONE=&#39;Asia/Shanghai&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NACOS_AUTH_ENABLE=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/root/nacos/logs:/home/nacos/logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/root/nacos/data:/home/nacos/data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/root/nacos/conf:/home/nacos/conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8848:8848</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9848:9848</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9849:9849</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--name </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --restart=always</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos/nacos-server:v2.1.0-slim</span></span></code></pre></div><p><strong>nacosçš„sqlè¯­å¥</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Navicat Premium Data Transfer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Source Server         : 159.75.111.41</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Source Server Type    : MySQL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Source Server Version : 80033</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Source Host           : 159.75.111.41:3306</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Source Schema         : nacos</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Target Server Type    : MySQL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Target Server Version : 80033</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> File Encoding         : 65001</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Date: 30/03/2024 21:32:58</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NAMES utf8mb4;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FOREIGN_KEY_CHECKS </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for config_info</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `config_info`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config_info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `data_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `content`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> longtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `md5`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;md5&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_ip`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source ip&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `app_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§Ÿæˆ·å­—æ®µ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `c_desc`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `c_use`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `effect`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `type`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `c_schema`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `encrypted_data_key`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§˜é’¥&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_configinfo_datagrouptenant`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`data_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`group_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;config_info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of config_info</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for config_info_aggr</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `config_info_aggr`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config_info_aggr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `data_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;group_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `datum_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;datum_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `content`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> longtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å†…å®¹&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `app_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§Ÿæˆ·å­—æ®µ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_configinfoaggr_datagrouptenantdatum`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`data_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`group_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`datum_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;å¢åŠ ç§Ÿæˆ·å­—æ®µ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of config_info_aggr</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for config_info_beta</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `config_info_beta`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config_info_beta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `data_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;group_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `app_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `content`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> longtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `beta_ips`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;betaIps&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `md5`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;md5&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_ip`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source ip&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§Ÿæˆ·å­—æ®µ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `encrypted_data_key`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§˜é’¥&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_configinfobeta_datagrouptenant`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`data_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`group_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;config_info_beta&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of config_info_beta</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for config_info_tag</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `config_info_tag`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config_info_tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `data_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;group_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tenant_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tag_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tag_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `app_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `content`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> longtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `md5`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;md5&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source user&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_ip`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source ip&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_configinfotag_datagrouptenanttag`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`data_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`group_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tag_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;config_info_tag&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of config_info_tag</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for config_tags_relation</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `config_tags_relation`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">config_tags_relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tag_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tag_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tag_type`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tag_type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `data_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;group_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tenant_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `nid`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`nid`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_configtagrelation_configidtag`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tag_name`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tag_type`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `idx_tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;config_tag_relation&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of config_tags_relation</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for group_capacity</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `group_capacity`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">group_capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¸»é”®ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `quota`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `usage`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä½¿ç”¨é‡&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_size`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_aggr_count`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_aggr_size`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_history_count`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æœ€å¤§å˜æ›´å†å²æ•°é‡&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_group_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`group_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of group_capacity</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for his_config_info</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `his_config_info`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">his_config_info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `nid`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `data_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `group_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `app_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `content`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> longtext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `md5`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_user`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `src_ip`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `op_type`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§Ÿæˆ·å­—æ®µ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `encrypted_data_key`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç§˜é’¥&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`nid`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `idx_gmt_create`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`gmt_create`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `idx_gmt_modified`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`gmt_modified`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `idx_did`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`data_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;å¤šç§Ÿæˆ·æ”¹é€ &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of his_config_info</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `his_config_info`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;132&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DEFAULT_GROUP&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;202cb962ac59075b964b07152d234b70&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2024-03-30 21:32:28&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2024-03-30 21:32:28&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;212.87.195.237&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;I&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `his_config_info`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;132&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DEFAULT_GROUP&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;202cb962ac59075b964b07152d234b70&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2024-03-30 21:32:36&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2024-03-30 21:32:36&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;212.87.195.237&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for permissions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `permissions`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">permissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `role`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `resource`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `action`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_role_permission`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`role`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`resource`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`action`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of permissions</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for roles</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `roles`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `username`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `role`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `idx_user_role`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`username`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`role`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of roles</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `roles`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;nacos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ROLE_ADMIN&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for tenant_capacity</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `tenant_capacity`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tenant_capacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¸»é”®ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Tenant ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `quota`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `usage`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä½¿ç”¨é‡&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_size`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_aggr_count`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_aggr_size`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `max_history_count`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) UNSIGNED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æœ€å¤§å˜æ›´å†å²æ•°é‡&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> datetime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CURRENT_TIMESTAMP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of tenant_capacity</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for tenant_info</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `tenant_info`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tenant_info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `kp`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;kp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tenant_id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_name`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tenant_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `tenant_desc`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tenant_desc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `create_source`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;create_source&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_create`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `gmt_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bigint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¿®æ”¹æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `uk_tenant_info_kptenantid`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`kp`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  INDEX</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `idx_tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`tenant_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb3_bin COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;tenant_info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of tenant_info</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Table structure for users</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DROP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `users`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">users</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">`  (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `username`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `password`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  `enabled`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> tinyint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`username`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BTREE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CHARACTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_general_ci ROW_FORMAT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Dynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Records of users</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- ----------------------------</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `users`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;nacos&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FOREIGN_KEY_CHECKS </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>é¦–æ¬¡è®¿é—®ä¼šè·³è½¬åˆ°ç™»å½•é¡µï¼Œ<strong>è´¦å·å¯†ç éƒ½æ˜¯nacos</strong></p><p><img src="/assets/1732633714639-69.BVHqyun-.png" alt="img" loading="lazy"></p><p><img src="/assets/image-20241215152017243.CGXi_WkX.png" alt="image-20241215152017243" loading="lazy"></p><h3 id="_3-3-æœåŠ¡æ³¨å†Œ" tabindex="-1">3.3.<mark>æœåŠ¡æ³¨å†Œ</mark> <a class="header-anchor" href="#_3-3-æœåŠ¡æ³¨å†Œ" aria-label="Permalink to &quot;3.3.==æœåŠ¡æ³¨å†Œ==&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠ<code>item-service</code>æ³¨å†Œåˆ°Nacosï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å¼•å…¥ä¾èµ–</li><li>é…ç½®Nacosåœ°å€</li><li>é‡å¯</li></ul><h4 id="_3-3-1-æ·»åŠ ä¾èµ–" tabindex="-1">3.3.1.æ·»åŠ ä¾èµ– <a class="header-anchor" href="#_3-3-1-æ·»åŠ ä¾èµ–" aria-label="Permalink to &quot;3.3.1.æ·»åŠ ä¾èµ–&quot;">â€‹</a></h4><p>åœ¨<code>item-service</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_3-3-2-é…ç½®nacos" tabindex="-1">3.3.2.é…ç½®Nacos <a class="header-anchor" href="#_3-3-2-é…ç½®nacos" aria-label="Permalink to &quot;3.3.2.é…ç½®Nacos&quot;">â€‹</a></h4><p>åœ¨<code>item-service</code>çš„<code>application.yml</code>ä¸­æ·»åŠ nacosåœ°å€é…ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">item-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.150.101:8848</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span></code></pre></div><h4 id="_3-3-3-å¯åŠ¨æœåŠ¡å®ä¾‹" tabindex="-1">3.3.3.å¯åŠ¨æœåŠ¡å®ä¾‹ <a class="header-anchor" href="#_3-3-3-å¯åŠ¨æœåŠ¡å®ä¾‹" aria-label="Permalink to &quot;3.3.3.å¯åŠ¨æœåŠ¡å®ä¾‹&quot;">â€‹</a></h4><p>ä¸ºäº†æµ‹è¯•ä¸€ä¸ªæœåŠ¡å¤šä¸ªå®ä¾‹çš„æƒ…å†µï¼Œæˆ‘ä»¬å†é…ç½®ä¸€ä¸ª<code>item-service</code>çš„éƒ¨ç½²å®ä¾‹ï¼š</p><p><img src="/assets/1732633714639-70.vnGmijI3.png" alt="img" loading="lazy"></p><p>ç„¶å<strong>é…ç½®å¤šä¸ªå¯åŠ¨é¡¹</strong>ï¼Œæ³¨æ„é‡å‘½åå¹¶ä¸”é…ç½®æ–°çš„ç«¯å£ï¼Œé¿å…å†²çªï¼š</p><p><img src="/assets/1732633714639-71.vPN6NJhB.png" alt="img" loading="lazy"></p><p>é‡å¯<code>item-service</code>çš„ä¸¤ä¸ªå®ä¾‹ï¼š</p><p><img src="/assets/1732633714639-72.BdbRumvx.png" alt="img" loading="lazy"></p><p>è®¿é—®nacosæ§åˆ¶å°ï¼Œå¯ä»¥å‘ç°æœåŠ¡æ³¨å†ŒæˆåŠŸï¼š</p><p><img src="/assets/1732633714639-73.D8ZIQO-w.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»è¯¦æƒ…ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°<code>item-service</code>æœåŠ¡çš„ä¸¤ä¸ªå®ä¾‹ä¿¡æ¯ï¼š</p><p><img src="/assets/1732633714639-74.BkF89Y8a.png" alt="img" loading="lazy"></p><h3 id="_3-4-æœåŠ¡å‘ç°" tabindex="-1">3.4.æœåŠ¡å‘ç° <a class="header-anchor" href="#_3-4-æœåŠ¡å‘ç°" aria-label="Permalink to &quot;3.4.æœåŠ¡å‘ç°&quot;">â€‹</a></h3><p>æœåŠ¡çš„æ¶ˆè´¹è€…è¦å»nacosè®¢é˜…æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯æœåŠ¡å‘ç°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å¼•å…¥ä¾èµ–</li><li>é…ç½®Nacosåœ°å€</li><li>å‘ç°å¹¶è°ƒç”¨æœåŠ¡</li></ul><p><img src="/assets/image-20241202203828445.u5mXCZom.png" alt="image-20241202203828445" loading="lazy"></p><h4 id="_3-4-1-å¼•å…¥ä¾èµ–" tabindex="-1">3.4.1.å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_3-4-1-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;3.4.1.å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p><img src="/assets/image-20241202204805309.Dk4sxrNm.png" alt="image" loading="lazy"></p><p>æœåŠ¡å‘ç°é™¤äº†è¦å¼•å…¥nacosä¾èµ–ä»¥å¤–ï¼Œç”±äºè¿˜éœ€è¦<strong>è´Ÿè½½å‡è¡¡</strong>ï¼Œå› æ­¤è¦å¼•å…¥SpringCloudæä¾›çš„LoadBalancerä¾èµ–ã€‚</p><p>æˆ‘ä»¬åœ¨<code>cart-service</code>ä¸­çš„<code>pom.xml</code>ä¸­æ·»åŠ ä¸‹é¢çš„ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>å¯ä»¥å‘ç°ï¼Œè¿™é‡ŒNacosçš„ä¾èµ–äºæœåŠ¡æ³¨å†Œæ—¶ä¸€è‡´ï¼Œè¿™ä¸ªä¾èµ–ä¸­åŒæ—¶<strong>åŒ…å«äº†æœåŠ¡æ³¨å†Œå’Œå‘ç°</strong>çš„åŠŸèƒ½ã€‚å› ä¸ºä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥è°ƒç”¨åˆ«äººï¼Œä¹Ÿå¯ä»¥è¢«åˆ«äººè°ƒç”¨ï¼Œå³å¯ä»¥æ˜¯è°ƒç”¨è€…ï¼Œä¹Ÿå¯ä»¥æ˜¯æä¾›è€…ã€‚</p><p>å› æ­¤ï¼Œç­‰ä¸€ä¼šå„¿<code>cart-service</code>å¯åŠ¨ï¼ŒåŒæ ·ä¼šæ³¨å†Œåˆ°Nacos</p><h4 id="_3-4-2-é…ç½®nacosåœ°å€" tabindex="-1">3.4.2.é…ç½®Nacosåœ°å€ <a class="header-anchor" href="#_3-4-2-é…ç½®nacosåœ°å€" aria-label="Permalink to &quot;3.4.2.é…ç½®Nacosåœ°å€&quot;">â€‹</a></h4><p>åœ¨<code>cart-service</code>çš„<code>application.yml</code>ä¸­æ·»åŠ nacosåœ°å€é…ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.150.101:8848</span></span></code></pre></div><h4 id="_3-4-3-å‘ç°å¹¶è°ƒç”¨æœåŠ¡" tabindex="-1">3.4.3.å‘ç°å¹¶è°ƒç”¨æœåŠ¡ <a class="header-anchor" href="#_3-4-3-å‘ç°å¹¶è°ƒç”¨æœåŠ¡" aria-label="Permalink to &quot;3.4.3.å‘ç°å¹¶è°ƒç”¨æœåŠ¡&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼ŒæœåŠ¡è°ƒç”¨è€…<code>cart-service</code>å°±å¯ä»¥å»è®¢é˜…<code>item-service</code>æœåŠ¡äº†ã€‚ä¸è¿‡item-serviceæœ‰å¤šä¸ªå®ä¾‹ï¼Œè€ŒçœŸæ­£å‘èµ·è°ƒç”¨æ—¶åªéœ€è¦çŸ¥é“ä¸€ä¸ªå®ä¾‹çš„åœ°å€ã€‚</p><p>å› æ­¤ï¼ŒæœåŠ¡è°ƒç”¨è€…å¿…é¡»åˆ©ç”¨è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼Œä»å¤šä¸ªå®ä¾‹ä¸­æŒ‘é€‰ä¸€ä¸ªå»è®¿é—®ã€‚å¸¸è§çš„<strong>è´Ÿè½½å‡è¡¡ç®—æ³•</strong>æœ‰ï¼š</p><ul><li>éšæœº</li><li>è½®è¯¢</li><li>IPçš„hash:</li><li>é€šè¿‡å¯¹å®¢æˆ·ç«¯çš„ IP åœ°å€è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œç¡®ä¿ç›¸åŒ IP åœ°å€çš„è¯·æ±‚æ€»æ˜¯è¢«è·¯ç”±åˆ°åŒä¸€å°æœåŠ¡å™¨ï¼Œä»è€Œå®ç°ä¼šè¯ç²˜æ€§ï¼ˆSession Stickinessï¼‰ï¼Œå³åŒä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚å§‹ç»ˆè®¿é—®åŒä¸€å°æœåŠ¡å™¨ã€‚</li><li>æœ€è¿‘æœ€å°‘è®¿é—®</li><li>...</li></ul><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æœ€ç®€å•çš„éšæœºè´Ÿè½½å‡è¡¡ã€‚</p><p>å¦å¤–ï¼ŒæœåŠ¡å‘ç°éœ€è¦ç”¨åˆ°ä¸€ä¸ªå·¥å…·ï¼ŒDiscoveryClientï¼ŒSpringCloudå·²ç»å¸®æˆ‘ä»¬è‡ªåŠ¨è£…é…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ³¨å…¥ä½¿ç”¨ï¼š</p><p><img src="/assets/1732633714639-75.BmYilQ8Z.png" alt="img" loading="lazy"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹åŸæ¥çš„è¿œç¨‹è°ƒç”¨åšä¿®æ”¹äº†ï¼Œä¹‹å‰è°ƒç”¨æ—¶æˆ‘ä»¬éœ€è¦å†™æ­»æœåŠ¡æä¾›è€…çš„IPå’Œç«¯å£ï¼š</p><p><img src="/assets/1732633714639-76.CEdbxL--.png" alt="img" loading="lazy"></p><p>ä½†ç°åœ¨ä¸éœ€è¦äº†ï¼Œæˆ‘ä»¬é€šè¿‡DiscoveryClientå‘ç°æœåŠ¡å®ä¾‹åˆ—è¡¨ï¼Œç„¶åé€šè¿‡è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰æ‹©ä¸€ä¸ªå®ä¾‹å»è°ƒç”¨ï¼š</p><p><img src="/assets/1732633714639-77.Diis5Aab.png" alt="img" loading="lazy"></p><p>ç»è¿‡swaggeræµ‹è¯•ï¼Œå‘ç°æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p><h2 id="_4-openfeign" tabindex="-1">4.<mark>OpenFeign</mark> <a class="header-anchor" href="#_4-openfeign" aria-label="Permalink to &quot;4.==OpenFeign==&quot;">â€‹</a></h2><p><img src="/assets/image-20241202204805309.Dk4sxrNm.png" alt="image-20241202204805309" loading="lazy"></p><p>åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬åˆ©ç”¨Nacoså®ç°äº†æœåŠ¡çš„æ²»ç†ï¼Œåˆ©ç”¨RestTemplateå®ç°äº†æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ã€‚ä½†æ˜¯è¿œç¨‹è°ƒç”¨çš„ä»£ç å¤ªå¤æ‚äº†ï¼š</p><p><img src="/assets/1732633714639-78.CCskDbr6.png" alt="img" loading="lazy"></p><p>è€Œä¸”è¿™ç§è°ƒç”¨æ–¹å¼ï¼Œä¸åŸæœ¬çš„æœ¬åœ°æ–¹æ³•è°ƒç”¨å·®å¼‚å¤ªå¤§ï¼Œç¼–ç¨‹æ—¶çš„ä½“éªŒä¹Ÿä¸ç»Ÿä¸€ï¼Œä¸€ä¼šå„¿è¿œç¨‹è°ƒç”¨ï¼Œä¸€ä¼šå„¿æœ¬åœ°è°ƒç”¨ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æƒ³åŠæ³•æ”¹å˜è¿œç¨‹è°ƒç”¨çš„å¼€å‘æ¨¡å¼ï¼Œè®©<strong>è¿œç¨‹è°ƒç”¨åƒæœ¬åœ°æ–¹æ³•è°ƒç”¨ä¸€æ ·ç®€å•</strong>ã€‚è€Œè¿™å°±è¦ç”¨åˆ°OpenFeignç»„ä»¶äº†ã€‚</p><p>å…¶å®è¿œç¨‹è°ƒç”¨çš„å…³é”®ç‚¹å°±åœ¨äºå››ä¸ªï¼š</p><ul><li>è¯·æ±‚æ–¹å¼</li><li>è¯·æ±‚è·¯å¾„</li><li>è¯·æ±‚å‚æ•°</li><li>è¿”å›å€¼ç±»å‹</li></ul><p>æ‰€ä»¥ï¼ŒOpenFeignå°±åˆ©ç”¨<strong>SpringMVCçš„ç›¸å…³æ³¨è§£</strong>æ¥å£°æ˜ä¸Šè¿°4ä¸ªå‚æ•°ï¼Œç„¶ååŸºäº<strong>åŠ¨æ€ä»£ç†</strong>å¸®æˆ‘ä»¬ç”Ÿæˆè¿œç¨‹è°ƒç”¨çš„ä»£ç ï¼Œè€Œæ— éœ€æˆ‘ä»¬æ‰‹åŠ¨å†ç¼–å†™ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªå¿«é€Ÿå…¥é—¨çš„æ¡ˆä¾‹æ¥ä½“éªŒä¸€ä¸‹OpenFeignçš„ä¾¿æ·å§ã€‚</p><h3 id="_4-1-å¿«é€Ÿå…¥é—¨" tabindex="-1">4.1.<mark>å¿«é€Ÿå…¥é—¨</mark> <a class="header-anchor" href="#_4-1-å¿«é€Ÿå…¥é—¨" aria-label="Permalink to &quot;4.1.==å¿«é€Ÿå…¥é—¨==&quot;">â€‹</a></h3><p>æˆ‘ä»¬è¿˜æ˜¯ä»¥cart-serviceä¸­çš„æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦ä¸ºä¾‹ã€‚å› æ­¤ä¸‹é¢çš„æ“ä½œéƒ½æ˜¯åœ¨cart-serviceä¸­è¿›è¡Œã€‚</p><p><img src="/assets/image-20241202205204548.Dfw0_gMz.png" alt="image-20241202205204548" loading="lazy"></p><h4 id="_4-1-1-å¼•å…¥ä¾èµ–" tabindex="-1">4.1.1.å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_4-1-1-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;4.1.1.å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p>åœ¨<code>cart-service</code>æœåŠ¡çš„pom.xmlä¸­å¼•å…¥<code>OpenFeign</code>çš„ä¾èµ–å’Œ<code>loadBalancer</code>ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--openFeign--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-openfeign&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--è´Ÿè½½å‡è¡¡å™¨--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-loadbalancer&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_4-1-2-å¯ç”¨openfeign" tabindex="-1">4.1.2.å¯ç”¨OpenFeign <a class="header-anchor" href="#_4-1-2-å¯ç”¨openfeign" aria-label="Permalink to &quot;4.1.2.å¯ç”¨OpenFeign&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨<code>cart-service</code>çš„<code>CartApplication</code>å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ï¼Œå¯åŠ¨OpenFeignåŠŸèƒ½ï¼š</p><p><img src="/assets/1732633714639-79.CCoQMu6F.png" alt="img" loading="lazy"></p><h4 id="_4-1-3-ç¼–å†™openfeignå®¢æˆ·ç«¯" tabindex="-1">4.1.3.ç¼–å†™OpenFeignå®¢æˆ·ç«¯ <a class="header-anchor" href="#_4-1-3-ç¼–å†™openfeignå®¢æˆ·ç«¯" aria-label="Permalink to &quot;4.1.3.ç¼–å†™OpenFeignå®¢æˆ·ç«¯&quot;">â€‹</a></h4><p>åœ¨<code>cart-service</code>ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„æ¥å£ï¼Œç¼–å†™Feignå®¢æˆ·ç«¯ï¼š</p><p>å…¶ä¸­ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.client;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.domain.dto.ItemDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.FeignClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.GetMapping;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.RequestParam;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FeignClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryItemByIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ids&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Collection&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ids</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™é‡Œåªéœ€è¦å£°æ˜æ¥å£ï¼Œæ— éœ€å®ç°æ–¹æ³•ã€‚æ¥å£ä¸­çš„å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š</p><ul><li><code>@FeignClient(&quot;item-service&quot;)</code> ï¼šå£°æ˜æœåŠ¡åç§°</li><li><code>@GetMapping</code> ï¼šå£°æ˜è¯·æ±‚æ–¹å¼</li><li><code>@GetMapping(&quot;/items&quot;)</code> ï¼šå£°æ˜è¯·æ±‚è·¯å¾„</li><li><code>@RequestParam(&quot;ids&quot;) Collection&lt;Long&gt; ids</code> ï¼šå£°æ˜è¯·æ±‚å‚æ•°</li><li><code>List&lt;ItemDTO&gt;</code> ï¼šè¿”å›å€¼ç±»å‹</li></ul><p>æœ‰äº†ä¸Šè¿°ä¿¡æ¯ï¼ŒOpenFeignå°±å¯ä»¥åˆ©ç”¨<strong>åŠ¨æ€ä»£ç†</strong>å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”å‘<code>http://item-service/items</code>å‘é€ä¸€ä¸ª<code>GET</code>è¯·æ±‚ï¼Œæºå¸¦idsä¸ºè¯·æ±‚å‚æ•°ï¼Œå¹¶è‡ªåŠ¨å°†è¿”å›å€¼å¤„ç†ä¸º<code>List&lt;ItemDTO&gt;</code>ã€‚</p><p>æˆ‘ä»¬åªéœ€è¦ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå³å¯å®ç°è¿œç¨‹è°ƒç”¨äº†ã€‚</p><h4 id="_4-1-4-ä½¿ç”¨feignclient" tabindex="-1">4.1.4.ä½¿ç”¨FeignClient <a class="header-anchor" href="#_4-1-4-ä½¿ç”¨feignclient" aria-label="Permalink to &quot;4.1.4.ä½¿ç”¨FeignClient&quot;">â€‹</a></h4><p>æœ€åï¼Œæˆ‘ä»¬åœ¨<code>cart-service</code>çš„<code>com.hmall.cart.service.impl.CartServiceImpl</code>ä¸­æ”¹é€ ä»£ç ï¼Œç›´æ¥è°ƒç”¨<code>ItemClient</code>çš„æ–¹æ³•ï¼š</p><p><img src="/assets/1732633714639-80.Ci40NuZ5.png" alt="img" loading="lazy"></p><p>feignæ›¿æˆ‘ä»¬å®Œæˆäº†<strong>æœåŠ¡æ‹‰å–ã€è´Ÿè½½å‡è¡¡ã€å‘é€httpè¯·æ±‚</strong>çš„æ‰€æœ‰å·¥ä½œï¼Œæ˜¯ä¸æ˜¯çœ‹èµ·æ¥ä¼˜é›…å¤šäº†ã€‚</p><p>è€Œä¸”ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å†éœ€è¦RestTemplateäº†ï¼Œè¿˜çœå»äº†RestTemplateçš„æ³¨å†Œã€‚</p><h3 id="openfeignæºç åˆ†æ" tabindex="-1"><mark>OpenFeignæºç åˆ†æ</mark> <a class="header-anchor" href="#openfeignæºç åˆ†æ" aria-label="Permalink to &quot;==OpenFeignæºç åˆ†æ==&quot;">â€‹</a></h3><h4 id="_1-åŠ¨æ€ä»£ç†å¯¹è±¡" tabindex="-1">1.<mark>åŠ¨æ€ä»£ç†å¯¹è±¡</mark> <a class="header-anchor" href="#_1-åŠ¨æ€ä»£ç†å¯¹è±¡" aria-label="Permalink to &quot;1.==åŠ¨æ€ä»£ç†å¯¹è±¡==&quot;">â€‹</a></h4><p>åœ¨ Spring ä¸­ï¼ŒåŠ¨æ€ä»£ç†å¯¹è±¡æ˜¯ Spring AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰å®ç°æ ¸å¿ƒåŠŸèƒ½çš„ä¸€ç§æœºåˆ¶ã€‚é€šè¿‡åŠ¨æ€ä»£ç†ï¼ŒSpring å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¹¶å°†ä¸€äº›<strong>æ¨ªåˆ‡é€»è¾‘</strong>ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€æƒé™éªŒè¯ã€äº‹åŠ¡ç®¡ç†ç­‰ï¼‰ä¸ä¸šåŠ¡é€»è¾‘è¿›è¡Œæ— ä¾µå…¥å¼çš„é›†æˆã€‚</p><h5 id="_1-1-åŠ¨æ€ä»£ç†å¯¹è±¡æ˜¯ä»€ä¹ˆ" tabindex="-1">1.1.åŠ¨æ€ä»£ç†å¯¹è±¡æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-1-åŠ¨æ€ä»£ç†å¯¹è±¡æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1.1.åŠ¨æ€ä»£ç†å¯¹è±¡æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h5><p>åŠ¨æ€ä»£ç†å¯¹è±¡æ˜¯ä¸€ä¸ªåœ¨è¿è¡Œæ—¶ç”Ÿæˆçš„å¯¹è±¡ï¼Œå®ƒå¯ä»¥æ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å¹¶åœ¨è°ƒç”¨å‰åæ’å…¥é¢å¤–çš„é€»è¾‘ã€‚Spring <strong>ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç° AO</strong>Pï¼Œå°†å¢å¼ºé€»è¾‘ï¼ˆ<code>Advice</code>ï¼‰ä¸ä¸šåŠ¡æ–¹æ³•åˆ†ç¦»ã€‚</p><h5 id="_1-2-åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼-proxyå’Œinvocationhandler" tabindex="-1">1.2.åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼ï¼ˆProxyå’ŒInvocationHandlerï¼‰ <a class="header-anchor" href="#_1-2-åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼-proxyå’Œinvocationhandler" aria-label="Permalink to &quot;1.2.åŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼ï¼ˆProxyå’ŒInvocationHandlerï¼‰&quot;">â€‹</a></h5><p>Spring åŠ¨æ€ä»£ç†çš„å®ç°ä¾èµ–äºä»¥ä¸‹ä¸¤ç§æŠ€æœ¯ï¼š</p><ol><li><p><strong>JDK åŠ¨æ€ä»£ç†ï¼ˆåŸºäºæ¥å£ï¼‰</strong></p><ul><li><mark><strong>é€šè¿‡ Java å†…ç½®çš„ <code>java.lang.reflect.Proxy</code> ç±»å’Œ <code>InvocationHandler</code> æ¥å£å®ç°</strong></mark>ã€‚</li><li>åªèƒ½ä»£ç†<strong>å®ç°äº†æ¥å£çš„ç±»</strong>ã€‚</li><li>åŠ¨æ€ç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼Œè¯¥ä»£ç†ç±»å®ç°ç›®æ ‡ç±»çš„æ¥å£ï¼Œå¹¶åœ¨è°ƒç”¨æ–¹æ³•æ—¶é€šè¿‡ <code>InvocationHandler</code> å¤„ç†ã€‚</li><li><strong>å¤„ç†å™¨ï¼š</strong> <code>InvocationHandler</code> æ¥å£ä¸­çš„ <code>invoke</code> æ–¹æ³•ä¼šåœ¨ä»£ç†å¯¹è±¡è°ƒç”¨æ—¶æ‰§è¡Œï¼Œå®é™…çš„å¢å¼ºé€»è¾‘ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ç­‰ï¼‰åœ¨ <code>invoke</code> æ–¹æ³•ä¸­å®Œæˆã€‚</li></ul></li><li><p><strong>CGLIB åŠ¨æ€ä»£ç†ï¼ˆåŸºäºç»§æ‰¿ï¼‰</strong></p><ol><li><p><strong>åŸç†ï¼š</strong></p><p>CGLIBï¼ˆCode Generation Libraryï¼‰æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„é«˜æ€§èƒ½ä»£ç ç”Ÿæˆåº“ï¼Œå®ƒé€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»å¹¶è¦†ç›–ç›®æ ‡ç±»çš„æ–¹æ³•æ¥ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚ä¸ JDK åŠ¨æ€ä»£ç†ä¸åŒï¼ŒCGLIB ä¸è¦æ±‚ç›®æ ‡ç±»å®ç°æ¥å£ï¼Œè€Œæ˜¯é€šè¿‡å­—èŠ‚ç æŠ€æœ¯åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ã€‚</p></li><li><p>é€šè¿‡ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ CGLIBï¼ˆCode Generation Libraryï¼‰ç”Ÿæˆä»£ç†ç±»ã€‚</p></li><li><p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p><ol><li><strong>ä»£ç†ç±»ï¼š</strong> CGLIB é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œåœ¨å­ç±»ä¸­è¦†ç›–ç›®æ ‡æ–¹æ³•ã€‚</li><li><strong>æ‹¦æˆªå™¨ï¼š</strong> åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œé€šè¿‡ <code>MethodInterceptor</code> çš„ <code>intercept</code> æ–¹æ³•è¿›è¡Œå¢å¼ºå¤„ç†ã€‚</li></ol></li><li><p>ä½¿ç”¨å­—èŠ‚ç ç”ŸæˆæŠ€æœ¯ï¼Œç›´æ¥<strong>ä¸ºç›®æ ‡ç±»åˆ›å»ºå­ç±»</strong>è¿›è¡Œä»£ç†ã€‚</p></li><li><p>å¯ä»¥ä»£ç†æ²¡æœ‰å®ç°æ¥å£çš„ç±»ï¼Œä½†ä¸èƒ½ä»£ç† <code>final</code> ç±»æˆ– <code>final</code> æ–¹æ³•ã€‚</p></li></ol></li></ol><h5 id="_1-3-jdk-åŠ¨æ€ä»£ç†ç¤ºä¾‹" tabindex="-1">1.3.JDK åŠ¨æ€ä»£ç†ç¤ºä¾‹ <a class="header-anchor" href="#_1-3-jdk-åŠ¨æ€ä»£ç†ç¤ºä¾‹" aria-label="Permalink to &quot;1.3.JDK åŠ¨æ€ä»£ç†ç¤ºä¾‹&quot;">â€‹</a></h5><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.lang.reflect.InvocationHandler;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.lang.reflect.Method;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.lang.reflect.Proxy;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›®æ ‡æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> performTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›®æ ‡å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> performTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Executing task...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ¨æ€ä»£ç†å®ç°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DynamicProxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InvocationHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object target; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›®æ ‡å¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Method </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Before method: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Object result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;After method: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Service target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Service proxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Service) Proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newProxyInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            target.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            target.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInterfaces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DynamicProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">performTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>è¾“å‡º</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Before method: performTask</span></span>
<span class="line"><span>Executing task...</span></span>
<span class="line"><span>After method: performTask</span></span></code></pre></div><h5 id="_1-4-cglib-åŠ¨æ€ä»£ç†ç¤ºä¾‹" tabindex="-1">1.4.CGLIB åŠ¨æ€ä»£ç†ç¤ºä¾‹ <a class="header-anchor" href="#_1-4-cglib-åŠ¨æ€ä»£ç†ç¤ºä¾‹" aria-label="Permalink to &quot;1.4.CGLIB åŠ¨æ€ä»£ç†ç¤ºä¾‹&quot;">â€‹</a></h5><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cglib.proxy.Enhancer;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cglib.proxy.MethodInterceptor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cglib.proxy.MethodProxy;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.lang.reflect.Method;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›®æ ‡ç±»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> performTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Executing task...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ¨æ€ä»£ç†å®ç°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CglibProxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object target;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CglibProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Method </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, MethodProxy </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Before method: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Object result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;After method: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Service target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Enhancer enhancer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Enhancer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSuperclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Service.class); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CGLIB é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œåœ¨å­ç±»ä¸­è¦†ç›–ç›®æ ‡æ–¹æ³•ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CglibProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Service proxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Service) enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">performTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>è¾“å‡º</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Before method: performTask</span></span>
<span class="line"><span>Executing task...</span></span>
<span class="line"><span>After method: performTask</span></span></code></pre></div><h5 id="_1-5-åœ¨-spring-ä¸­çš„åº”ç”¨" tabindex="-1">1.5.åœ¨ Spring ä¸­çš„åº”ç”¨ <a class="header-anchor" href="#_1-5-åœ¨-spring-ä¸­çš„åº”ç”¨" aria-label="Permalink to &quot;1.5.åœ¨ Spring ä¸­çš„åº”ç”¨&quot;">â€‹</a></h5><ol><li><p><strong>JDK åŠ¨æ€ä»£ç†</strong>ï¼š</p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†æ¥ä¸ºå®ç°äº†æ¥å£çš„ç±»åˆ›å»ºä»£ç†å¯¹è±¡ã€‚</li><li>é…ç½®æ–¹å¼ï¼šç¡®ä¿<strong>ç›®æ ‡ç±»å®ç°äº†æ¥å£</strong>ï¼Œ<strong>Spring è‡ªåŠ¨é€‰æ‹© JDK åŠ¨æ€ä»£ç†</strong>ã€‚</li></ul></li><li><p><strong>CGLIB åŠ¨æ€ä»£ç†</strong>ï¼š</p><ul><li><p><strong>å½“ç›®æ ‡ç±»æœªå®ç°æ¥å£æ—¶</strong>ï¼ŒSpring ä½¿ç”¨ CGLIB åŠ¨æ€ä»£ç†ã€‚</p></li><li><p>å¯é€šè¿‡æ˜¾å¼é…ç½®å¼ºåˆ¶ä½¿ç”¨ CGLIBï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableAspectJAutoProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">proxyTargetClass</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼ºåˆ¶ä½¿ç”¨ CGLIB</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span></code></pre></div></li></ul></li></ol><h5 id="_1-6-ä¸¤è€…çš„å¯¹æ¯”" tabindex="-1">1.6.ä¸¤è€…çš„å¯¹æ¯” <a class="header-anchor" href="#_1-6-ä¸¤è€…çš„å¯¹æ¯”" aria-label="Permalink to &quot;1.6.ä¸¤è€…çš„å¯¹æ¯”&quot;">â€‹</a></h5><table tabindex="0"><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>JDK åŠ¨æ€ä»£ç†</strong></th><th><strong>CGLIB åŠ¨æ€ä»£ç†</strong></th></tr></thead><tbody><tr><td>ä»£ç†å¯¹è±¡</td><td>å¿…é¡»å®ç°æ¥å£</td><td>å¯ä»¥æ˜¯å…·ä½“ç±»</td></tr><tr><td>æ€§èƒ½</td><td>ç¨ä½ï¼ˆä½¿ç”¨åå°„ï¼‰</td><td>ç¨é«˜ï¼ˆç›´æ¥è°ƒç”¨æ–¹æ³•ï¼‰</td></tr><tr><td>é™åˆ¶</td><td>æ— æ³•ä»£ç†æœªå®ç°æ¥å£çš„ç±»</td><td>æ— æ³•ä»£ç† <code>final</code> ç±»æˆ–æ–¹æ³•</td></tr></tbody></table><h5 id="æ€»ç»“" tabindex="-1"><strong>æ€»ç»“</strong> <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;**æ€»ç»“**&quot;">â€‹</a></h5><ul><li>Spring çš„åŠ¨æ€ä»£ç†ä¸»è¦ç”¨äº AOPï¼Œèƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹ç›®æ ‡ç±»ä»£ç çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€å¢å¼ºåŠŸèƒ½ã€‚</li><li>å¦‚æœç›®æ ‡ç±»å®ç°äº†æ¥å£ï¼Œä¼˜å…ˆä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼›å¦åˆ™ä½¿ç”¨ CGLIB åŠ¨æ€ä»£ç†ã€‚</li><li>é…åˆ Spring çš„ <code>@Aspect</code> å’Œ <code>@EnableAspectJAutoProxy</code> æ³¨è§£ï¼ŒåŠ¨æ€ä»£ç†å¯ä»¥éå¸¸é«˜æ•ˆåœ°å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹é€»è¾‘çš„æ³¨å…¥ã€‚</li></ul><h4 id="_2-åŠ¨æ€ä»£ç†å¯¹è±¡-itemclient" tabindex="-1">2.åŠ¨æ€ä»£ç†å¯¹è±¡-itemClient <a class="header-anchor" href="#_2-åŠ¨æ€ä»£ç†å¯¹è±¡-itemclient" aria-label="Permalink to &quot;2.åŠ¨æ€ä»£ç†å¯¹è±¡-itemClient&quot;">â€‹</a></h4><p><img src="/assets/image-20241202213303335.U1oQVztz.png" alt="image-20241202213303335" loading="lazy"></p><h4 id="_3-delegateå§”æ‰˜å®Œæˆè´Ÿè½½å‡è¡¡å’Œè¯·æ±‚" tabindex="-1">3.delegateå§”æ‰˜å®Œæˆè´Ÿè½½å‡è¡¡å’Œè¯·æ±‚ <a class="header-anchor" href="#_3-delegateå§”æ‰˜å®Œæˆè´Ÿè½½å‡è¡¡å’Œè¯·æ±‚" aria-label="Permalink to &quot;3.delegateå§”æ‰˜å®Œæˆè´Ÿè½½å‡è¡¡å’Œè¯·æ±‚&quot;">â€‹</a></h4><p><img src="/assets/image-20241202215138941.oGfzA1jk.png" alt="image-20241202215138941" loading="lazy"></p><h3 id="_4-2-ä¼˜åŒ–-ä½¿ç”¨okhttpè¿æ¥æ± " tabindex="-1">4.2.<mark>ä¼˜åŒ–</mark>-ä½¿ç”¨okhttpè¿æ¥æ±  <a class="header-anchor" href="#_4-2-ä¼˜åŒ–-ä½¿ç”¨okhttpè¿æ¥æ± " aria-label="Permalink to &quot;4.2.==ä¼˜åŒ–==-ä½¿ç”¨okhttpè¿æ¥æ± &quot;">â€‹</a></h3><p><img src="/assets/image-20241202211454757.4lNzNH9U.png" alt="image-20241202211454757" loading="lazy"></p><p>Feignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚å…¶åº•å±‚æ”¯æŒçš„httpå®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š</p><ul><li><strong>HttpURLConnectionï¼šé»˜è®¤å®ç°ï¼ˆæ€§èƒ½è¾ƒå¼±ï¼‰</strong>ï¼Œä¸æ”¯æŒè¿æ¥æ± </li><li>Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ± </li><li>OKHttpï¼šæ”¯æŒè¿æ¥æ± </li></ul><p>å› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å¸¦æœ‰è¿æ¥æ± çš„å®¢æˆ·ç«¯æ¥ä»£æ›¿é»˜è®¤çš„HttpURLConnectionã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨OK Http.</p><h5 id="_1-ä¸ºä»€ä¹ˆ-httpurlconnection-çš„æ€§èƒ½è¾ƒä½" tabindex="-1">1. <strong>ä¸ºä»€ä¹ˆ HttpURLConnection çš„æ€§èƒ½è¾ƒä½</strong> <a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆ-httpurlconnection-çš„æ€§èƒ½è¾ƒä½" aria-label="Permalink to &quot;1. **ä¸ºä»€ä¹ˆ HttpURLConnection çš„æ€§èƒ½è¾ƒä½**&quot;">â€‹</a></h5><p>HttpURLConnection æ˜¯ Java å†…ç½®çš„ HTTP å®¢æˆ·ç«¯å®ç°ã€‚æ€§èƒ½è¾ƒä½çš„åŸå› åŒ…æ‹¬ï¼š</p><ol><li><p><strong>ä¸æ”¯æŒè¿æ¥æ± </strong>ï¼š</p><ul><li><p>æ¯æ¬¡å‘èµ· HTTP è¯·æ±‚æ—¶ï¼Œéƒ½ä¼š<strong>æ–°å»ºä¸€ä¸ªè¿æ¥ï¼ˆTCP ä¸‰æ¬¡æ¡æ‰‹ï¼‰</strong>ã€‚</p><ul><li><p>æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œä¼šå¢åŠ è¿æ¥å»ºç«‹çš„æ—¶é—´æ¶ˆè€—ã€‚</p></li><li><p>è‹¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¸è¢«å¤ç”¨ï¼ˆå³æ²¡æœ‰è¿æ¥æ± æœºåˆ¶ï¼‰ï¼Œæ¯ä¸ª HTTP è¯·æ±‚éƒ½éœ€è¦ç‹¬ç«‹å»ºç«‹å’Œæ–­å¼€è¿æ¥ï¼Œå¢åŠ äº†é¢å¤–çš„å»¶è¿Ÿå’Œç½‘ç»œè´Ÿè½½ã€‚</p></li><li><p><strong>ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼š</strong></p><ol><li><p><strong>SYNï¼ˆåŒæ­¥ï¼‰ï¼š</strong> å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå¸¦æœ‰ SYN æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œç”¨äºè¯·æ±‚å»ºç«‹è¿æ¥ã€‚è¿™æ—¶å®¢æˆ·ç«¯è¿›å…¥ <strong>SYN_SENT</strong> çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨çš„å“åº”ã€‚</p><p><strong>å®¢æˆ·ç«¯ -&gt; æœåŠ¡å™¨ï¼š</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SYN</span></span></code></pre></div></li><li><p><strong>SYN-ACKï¼ˆåŒæ­¥-ç¡®è®¤ï¼‰ï¼š</strong> æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN æ•°æ®åŒ…åï¼Œç¡®è®¤æ”¶åˆ°å¹¶è¿”å›ä¸€ä¸ªå¸¦æœ‰ SYN å’Œ ACKï¼ˆç¡®è®¤ï¼‰æ ‡å¿—çš„æ•°æ®åŒ…ã€‚è¿™æ˜¯æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚æœåŠ¡å™¨è¿›å…¥ <strong>SYN_RECEIVED</strong> çŠ¶æ€ã€‚</p><p><strong>æœåŠ¡å™¨ -&gt; å®¢æˆ·ç«¯ï¼š</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SYN + ACK</span></span></code></pre></div></li><li><p><strong>ACKï¼ˆç¡®è®¤ï¼‰ï¼š</strong> å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ SYN-ACK æ•°æ®åŒ…åï¼Œå†å‘é€ä¸€ä¸ª ACKï¼ˆç¡®è®¤ï¼‰æ•°æ®åŒ…ç»™æœåŠ¡å™¨ï¼Œè¡¨ç¤ºè¿æ¥å·²æˆåŠŸå»ºç«‹ã€‚å®¢æˆ·ç«¯è¿›å…¥ <strong>ESTABLISHED</strong> çŠ¶æ€ï¼Œè¡¨ç¤ºå¯ä»¥å¼€å§‹æ•°æ®ä¼ è¾“ã€‚</p><p><strong>å®¢æˆ·ç«¯ -&gt; æœåŠ¡å™¨ï¼š</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ACK</span></span></code></pre></div></li></ol></li></ul></li><li><p>å»ºç«‹è¿æ¥éœ€è¦è€—è´¹æ—¶é—´å’Œèµ„æºï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œè¿™ä¼šæ˜¾è‘—é™ä½æ€§èƒ½ã€‚</p></li></ul></li><li><p><strong>è¾ƒæ—§çš„è®¾è®¡</strong>ï¼š</p><ul><li>HttpURLConnection çš„è®¾è®¡ç›¸å¯¹è¿‡æ—¶ï¼Œç¼ºä¹ç°ä»£ HTTP å®¢æˆ·ç«¯çš„ä¸€äº›ä¼˜åŒ–æœºåˆ¶ï¼Œå¦‚éé˜»å¡ IO æ”¯æŒã€è¶…æ—¶æ§åˆ¶æ›´çµæ´»çš„é…ç½®ç­‰ã€‚</li></ul></li><li><p><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜</strong>ï¼š</p><ul><li>HttpURLConnection ä¸æ”¯æŒ<strong>å¤šçº¿ç¨‹å¤ç”¨è¿æ¥</strong>ï¼Œå¯¼è‡´æ¯ä¸ªçº¿ç¨‹å¯èƒ½éœ€è¦é‡æ–°å»ºç«‹è¿æ¥ã€‚</li></ul></li></ol><hr><h5 id="_2-è¿æ¥æ± æ˜¯ä»€ä¹ˆ" tabindex="-1">2. <strong><mark>è¿æ¥æ± </mark>æ˜¯ä»€ä¹ˆ</strong> <a class="header-anchor" href="#_2-è¿æ¥æ± æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;2. **==è¿æ¥æ± ==æ˜¯ä»€ä¹ˆ**&quot;">â€‹</a></h5><p><strong>è¿æ¥æ± </strong> æ˜¯ä¸€ä¸ªç”¨äºå¤ç”¨å’Œç®¡ç†è¿æ¥èµ„æºçš„æœºåˆ¶ï¼Œå…¶ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š</p><ul><li><strong>å¤ç”¨å·²å»ºç«‹çš„è¿æ¥</strong>ï¼šå½“ä¸€ä¸ªè¿æ¥è¢«ä½¿ç”¨å®Œåï¼Œå®ƒä¼šè¢«æ”¾å›è¿æ¥æ± ï¼Œä»¥ä¾›åç»­è¯·æ±‚å¤ç”¨ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½æ–°å»ºè¿æ¥ã€‚</li><li><strong>å‡å°‘èµ„æºæ¶ˆè€—</strong>ï¼šé€šè¿‡å¤ç”¨è¿æ¥ï¼Œå¯ä»¥é¿å…é‡å¤çš„ TCP æ¡æ‰‹å’Œèµ„æºåˆ†é…ï¼Œä»è€Œé™ä½ CPU å’Œå†…å­˜çš„å¼€é”€ã€‚</li><li><strong>é™åˆ¶è¿æ¥æ•°é‡</strong>ï¼šè¿æ¥æ± ä¼šç»´æŠ¤ä¸€ä¸ªè¿æ¥çš„æœ€å¤§æ•°é‡ï¼Œé˜²æ­¢æœåŠ¡å™¨è¢«è¿‡å¤šè¿æ¥å‹å®ã€‚</li></ul><hr><h5 id="_3-è¿æ¥æ± ä¸ºä»€ä¹ˆæå‡æ€§èƒ½" tabindex="-1">3. <strong>è¿æ¥æ± ä¸ºä»€ä¹ˆæå‡æ€§èƒ½</strong> <a class="header-anchor" href="#_3-è¿æ¥æ± ä¸ºä»€ä¹ˆæå‡æ€§èƒ½" aria-label="Permalink to &quot;3. **è¿æ¥æ± ä¸ºä»€ä¹ˆæå‡æ€§èƒ½**&quot;">â€‹</a></h5><ol><li><strong>é™ä½è¿æ¥å»ºç«‹çš„å¼€é”€</strong>ï¼š <ul><li>æ¯æ¬¡å»ºç«‹ä¸€ä¸ªæ–°çš„ HTTP è¿æ¥éœ€è¦è¿›è¡Œ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¹¶ä¸”å¯èƒ½æ¶‰åŠ <strong><mark>SSL æ¡æ‰‹</mark></strong>ï¼ˆå¦‚æœæ˜¯ HTTPSï¼‰ã€‚è¿æ¥æ± é€šè¿‡å¤ç”¨å·²æœ‰è¿æ¥ï¼Œé¿å…äº†è¿™äº›è€—æ—¶æ“ä½œã€‚ <ul><li><strong>SSL/TLS æ¡æ‰‹è¿‡ç¨‹æ€»ç»“ï¼š</strong><ol><li><strong>å®¢æˆ·ç«¯å‘é€ Client Hello</strong>ï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œå‘Šè¯‰æœåŠ¡å™¨è‡ªå·±æ”¯æŒå“ªäº›åè®®ã€åŠ å¯†å¥—ä»¶ç­‰ã€‚</li><li><strong>æœåŠ¡å™¨è¿”å› Server Hello</strong>ï¼šæœåŠ¡å™¨é€‰æ‹©åè®®å’ŒåŠ å¯†å¥—ä»¶ï¼Œå¹¶è¿”å›è‡ªå·±çš„å…¬é’¥è¯ä¹¦ã€‚</li><li><strong>å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨è¯ä¹¦</strong>ï¼šå®¢æˆ·ç«¯æ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæ€§å¹¶ç”Ÿæˆä¸€ä¸ªå¯†é’¥ã€‚</li><li><strong>åŒæ–¹äº¤æ¢å¯†é’¥</strong>ï¼šå®¢æˆ·ç«¯ç”¨æœåŠ¡å™¨çš„å…¬é’¥åŠ å¯†ç”Ÿæˆçš„å¯†é’¥ï¼Œå¹¶å‘é€ç»™æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†è·å–å¯†é’¥ã€‚</li><li><strong>åŒæ–¹ç¡®è®¤æ¡æ‰‹å®Œæˆ</strong>ï¼šåŒæ–¹é€šè¿‡åŠ å¯†ç¡®è®¤æ¡æ‰‹è¿‡ç¨‹æ— è¯¯ã€‚</li><li><strong>å¼€å§‹åŠ å¯†é€šä¿¡</strong>ï¼šæ¡æ‰‹å®Œæˆåï¼Œå¼€å§‹ä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†æ•°æ®è¿›è¡Œé€šä¿¡</li></ol></li><li><strong>SSL/TLS æ¡æ‰‹çš„æ€§èƒ½å¼€é”€ï¼š</strong><ol><li>è™½ç„¶ SSL/TLS æ¡æ‰‹æ˜¯ä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œä½†å®ƒä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚æ¯æ¬¡å»ºç«‹æ–°çš„ SSL è¿æ¥æ—¶ï¼Œå¿…é¡»è¿›è¡Œä¸Šè¿°çš„æ¡æ‰‹è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ° <strong>å…¬é’¥åŠ å¯†å’Œè§£å¯†</strong>ï¼Œè¿™ä¼šæ¶ˆè€—ä¸€å®šçš„è®¡ç®—èµ„æºã€‚ä¸ºäº†å‡å°‘è¿™ç§å¼€é”€ï¼Œå¸¸è§çš„åšæ³•æ˜¯ï¼š</li><li>ä½¿ç”¨ <strong>Session ç¼“å­˜</strong> æˆ– <strong>Session é‡ç”¨</strong> æ¥é¿å…æ¯æ¬¡éƒ½è¿›è¡Œå®Œæ•´çš„æ¡æ‰‹ã€‚</li><li>ä½¿ç”¨ <strong>TLS 1.3</strong> åè®®ï¼Œå®ƒå‡å°‘äº†æ¡æ‰‹è¿‡ç¨‹ä¸­çš„ä¸€äº›æ­¥éª¤ï¼Œä»è€Œæå‡äº†æ€§èƒ½ã€‚</li></ol></li></ul></li></ul></li><li><strong>å‡å°‘å»¶è¿Ÿ</strong>ï¼š <ul><li>å¤ç”¨è¿æ¥åï¼Œè¯·æ±‚çš„å»¶è¿Ÿä¸»è¦é›†ä¸­åœ¨æ•°æ®ä¼ è¾“ä¸Šï¼Œè€Œéè¿æ¥å»ºç«‹ï¼Œå¤§å¤§ç¼©çŸ­äº†å“åº”æ—¶é—´ã€‚</li></ul></li><li><strong>é«˜å¹¶å‘ä¼˜åŒ–</strong>ï¼š <ul><li>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤ç”¨è¿æ¥å¯ä»¥å‡å°‘æ“ä½œç³»ç»Ÿçš„èµ„æºå‹åŠ›ï¼Œæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦æ•°é‡å’Œçº¿ç¨‹æ•°ã€‚</li></ul></li><li><strong>é™ä½èµ„æºæ¶ˆè€—</strong>ï¼š <ul><li>è¿æ¥æ± å¯ä»¥æœ‰æ•ˆå‡å°‘çº¿ç¨‹é¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥å¸¦æ¥çš„ CPU å’Œå†…å­˜å¼€é”€ã€‚</li></ul></li></ol><hr><h5 id="_4-ä¸ºä»€ä¹ˆæ¨è-okhttp-æˆ–-apache-httpclient" tabindex="-1">4. <strong>ä¸ºä»€ä¹ˆæ¨è OKHttp æˆ– Apache HttpClient</strong> <a class="header-anchor" href="#_4-ä¸ºä»€ä¹ˆæ¨è-okhttp-æˆ–-apache-httpclient" aria-label="Permalink to &quot;4. **ä¸ºä»€ä¹ˆæ¨è OKHttp æˆ– Apache HttpClient**&quot;">â€‹</a></h5><p><strong>OKHttp</strong> å’Œ <strong>Apache HttpClient</strong> éƒ½æ”¯æŒè¿æ¥æ± æœºåˆ¶ï¼Œå¹¶ä¸”è®¾è®¡ç°ä»£ã€æ€§èƒ½ä¼˜åŒ–æ˜¾è‘—ï¼Œé€‚åˆå¤§å¤šæ•°åº”ç”¨åœºæ™¯ã€‚</p><ul><li><strong>OKHttp ä¼˜åŠ¿</strong>ï¼š <ul><li>è½»é‡çº§ä¸”é«˜æ€§èƒ½ï¼ŒåŸç”Ÿæ”¯æŒ HTTP/2ã€‚</li><li>å†…å»ºé«˜æ•ˆçš„è¿æ¥å¤ç”¨å’Œç¼“å­˜æœºåˆ¶ã€‚</li><li>æ›´å‹å¥½çš„å¼‚æ­¥æ”¯æŒï¼Œé€‚åˆç°ä»£ Web åº”ç”¨ã€‚</li></ul></li><li><strong>Apache HttpClient ä¼˜åŠ¿</strong>ï¼š <ul><li>åŠŸèƒ½å…¨é¢ï¼Œæ”¯æŒæ›´å¤æ‚çš„ HTTP åœºæ™¯ï¼Œæ¯”å¦‚é«˜çº§çš„è®¤è¯æœºåˆ¶å’Œä»£ç†é…ç½®ã€‚</li><li>å†å²æ‚ ä¹…ï¼Œç”Ÿæ€å®Œå–„ï¼Œé€‚åˆå¯¹åŠŸèƒ½éœ€æ±‚è¾ƒé«˜çš„åº”ç”¨ã€‚</li></ul></li></ul><hr><h5 id="_5-æ€»ç»“" tabindex="-1">5. <strong>æ€»ç»“</strong> <a class="header-anchor" href="#_5-æ€»ç»“" aria-label="Permalink to &quot;5. **æ€»ç»“**&quot;">â€‹</a></h5><p>é€‰æ‹© OKHttp æˆ– Apache HttpClientï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒä»¬èƒ½å……åˆ†åˆ©ç”¨è¿æ¥æ± æœºåˆ¶ï¼Œæé«˜ HTTP è¯·æ±‚çš„æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ã€‚å¯¹äºé«˜æ€§èƒ½ã€é«˜å¹¶å‘çš„åº”ç”¨åœºæ™¯ï¼Œé¿å…ä½¿ç”¨ HttpURLConnectionï¼Œæ”¹ç”¨æ”¯æŒè¿æ¥æ± çš„ HTTP å®¢æˆ·ç«¯æ˜¯å¸¸è§ä¼˜åŒ–æ–¹æ¡ˆã€‚</p><h4 id="_4-2-1-å¼•å…¥ä¾èµ–" tabindex="-1">4.2.1.å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_4-2-1-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;4.2.1.å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p>åœ¨<code>cart-service</code>çš„<code>pom.xml</code>ä¸­å¼•å…¥ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--OK http çš„ä¾èµ– --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;io.github.openfeign&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;feign-okhttp&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_4-2-2-å¼€å¯è¿æ¥æ± " tabindex="-1">4.2.2.<mark>å¼€å¯è¿æ¥æ± </mark> <a class="header-anchor" href="#_4-2-2-å¼€å¯è¿æ¥æ± " aria-label="Permalink to &quot;4.2.2.==å¼€å¯è¿æ¥æ± ==&quot;">â€‹</a></h4><p>åœ¨<code>cart-service</code>çš„<code>application.yml</code>é…ç½®æ–‡ä»¶ä¸­å¼€å¯Feignçš„è¿æ¥æ± åŠŸèƒ½ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">feign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  okhttp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #å¼€å¯OKHttpåŠŸèƒ½</span></span></code></pre></div><p>é‡å¯æœåŠ¡ï¼Œè¿æ¥æ± å°±ç”Ÿæ•ˆäº†ã€‚</p><h4 id="_4-2-3-éªŒè¯" tabindex="-1">4.2.3.éªŒè¯ <a class="header-anchor" href="#_4-2-3-éªŒè¯" aria-label="Permalink to &quot;4.2.3.éªŒè¯&quot;">â€‹</a></h4><p>æˆ‘ä»¬å¯ä»¥æ‰“æ–­ç‚¹éªŒè¯è¿æ¥æ± æ˜¯å¦ç”Ÿæ•ˆï¼Œåœ¨<code>org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient</code>ä¸­çš„<code>execute</code>æ–¹æ³•ä¸­æ‰“æ–­ç‚¹ï¼š</p><p><img src="/assets/1732633714639-81.CwXwYMiH.png" alt="img" loading="lazy"></p><p>Debugæ–¹å¼å¯åŠ¨cart-serviceï¼Œè¯·æ±‚ä¸€æ¬¡æŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦æ–¹æ³•ï¼Œè¿›å…¥æ–­ç‚¹ï¼š</p><p><img src="/assets/1732633714639-82.Eu7_uG1g.png" alt="img" loading="lazy"></p><p>å¯ä»¥å‘ç°è¿™é‡Œåº•å±‚çš„å®ç°å·²ç»æ”¹ä¸º<code>OkHttpClient</code></p><h3 id="_4-3-æœ€ä½³å®è·µ" tabindex="-1">4.3.æœ€ä½³å®è·µ <a class="header-anchor" href="#_4-3-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;4.3.æœ€ä½³å®è·µ&quot;">â€‹</a></h3><p>å°†æ¥æˆ‘ä»¬è¦æŠŠä¸ä¸‹å•æœ‰å…³çš„ä¸šåŠ¡æŠ½å–ä¸ºä¸€ä¸ªç‹¬ç«‹å¾®æœåŠ¡:<code>trade-service</code>ï¼Œä¸è¿‡æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹<code>hm-service</code>ä¸­åŸæœ¬ä¸ä¸‹å•æœ‰å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>å…¥å£åœ¨<code>com.hmall.controller.OrderController</code>çš„<code>createOrder</code>æ–¹æ³•ï¼Œç„¶åè°ƒç”¨äº†<code>IOrderService</code>ä¸­çš„<code>createOrder</code>æ–¹æ³•ã€‚</p><p>ç”±äºä¸‹å•æ—¶å‰ç«¯æäº¤äº†å•†å“idï¼Œä¸ºäº†è®¡ç®—è®¢å•æ€»ä»·ï¼Œéœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š</p><p><img src="/assets/1732633714639-83.IDDcxnuA.png" alt="img" loading="lazy"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‹†åˆ†äº†äº¤æ˜“å¾®æœåŠ¡ï¼ˆ<code>trade-service</code>ï¼‰ï¼Œå®ƒä¹Ÿéœ€è¦è¿œç¨‹è°ƒç”¨<code>item-service</code>ä¸­çš„æ ¹æ®idæ‰¹é‡æŸ¥è¯¢å•†å“åŠŸèƒ½ã€‚è¿™ä¸ªéœ€æ±‚ä¸<code>cart-service</code>ä¸­æ˜¯ä¸€æ ·çš„ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨<code>trade-service</code>ä¸­å†æ¬¡å®šä¹‰<code>ItemClient</code>æ¥å£ï¼Œè¿™ä¸æ˜¯é‡å¤ç¼–ç å—ï¼Ÿ æœ‰ä»€ä¹ˆåŠæ³•èƒ½åŠ <strong>é¿å…é‡å¤ç¼–ç </strong>å‘¢ï¼Ÿ</p><h4 id="_4-3-1-æ€è·¯åˆ†æ" tabindex="-1">4.3.1.æ€è·¯åˆ†æ <a class="header-anchor" href="#_4-3-1-æ€è·¯åˆ†æ" aria-label="Permalink to &quot;4.3.1.æ€è·¯åˆ†æ&quot;">â€‹</a></h4><p>ç›¸ä¿¡å¤§å®¶éƒ½èƒ½æƒ³åˆ°ï¼Œé¿å…é‡å¤ç¼–ç çš„åŠæ³•å°±æ˜¯<strong>æŠ½å–</strong>ã€‚ä¸è¿‡è¿™é‡Œæœ‰ä¸¤ç§æŠ½å–æ€è·¯ï¼š</p><ul><li>æ€è·¯1ï¼šæŠ½å–åˆ°å¾®æœåŠ¡ä¹‹å¤–çš„å…¬å…±module</li><li>æ€è·¯2ï¼šæ¯ä¸ªå¾®æœåŠ¡è‡ªå·±æŠ½å–ä¸€ä¸ªmodule</li></ul><p>å¦‚å›¾ï¼š</p><p><img src="/assets/1732633714639-84.7OheLBkQ.jpeg" alt="img" loading="lazy"></p><p><img src="/assets/image-20241202221756036.BLUx2_4C.png" alt="image-20241202221756036" loading="lazy"></p><p><img src="/assets/image-20241208220845498.Ce9ks4k0.png" alt="image-20241208220845498" loading="lazy"></p><p>æ–¹æ¡ˆ1æŠ½å–æ›´åŠ ç®€å•ï¼Œå·¥ç¨‹ç»“æ„ä¹Ÿæ¯”è¾ƒæ¸…æ™°ï¼Œä½†ç¼ºç‚¹æ˜¯æ•´ä¸ªé¡¹ç›®<strong>è€¦åˆåº¦åé«˜</strong>ã€‚</p><p>æ–¹æ¡ˆ2æŠ½å–ç›¸å¯¹éº»çƒ¦ï¼Œå·¥ç¨‹ç»“æ„ç›¸å¯¹æ›´å¤æ‚ï¼Œä½†æœåŠ¡ä¹‹é—´<strong>è€¦åˆåº¦é™ä½</strong>ã€‚</p><p>ç”±äºitem-serviceå·²ç»åˆ›å»ºå¥½ï¼Œæ— æ³•ç»§ç»­æ‹†åˆ†ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨æ–¹æ¡ˆ1.</p><h4 id="_4-3-2-æŠ½å–feignå®¢æˆ·ç«¯" tabindex="-1">4.3.2.æŠ½å–Feignå®¢æˆ·ç«¯ <a class="header-anchor" href="#_4-3-2-æŠ½å–feignå®¢æˆ·ç«¯" aria-label="Permalink to &quot;4.3.2.æŠ½å–Feignå®¢æˆ·ç«¯&quot;">â€‹</a></h4><p>åœ¨<code>hmall</code>ä¸‹å®šä¹‰ä¸€ä¸ªæ–°çš„moduleï¼Œå‘½åä¸ºhm-api</p><p><img src="/assets/1732633714639-85.DQ2jtdNm.png" alt="img" loading="lazy"></p><p>å…¶ä¾èµ–å¦‚ä¸‹ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--open feign--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-openfeign&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!-- load balancer--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-loadbalancer&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!-- swagger æ³¨è§£ä¾èµ– --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;io.swagger&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;swagger-annotations&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.6.6&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;compile&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ç„¶åæŠŠItemDTOå’ŒItemClientéƒ½æ‹·è´è¿‡æ¥ï¼Œæœ€ç»ˆç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/1732633714639-86.BBXyjZ92.png" alt="img" loading="lazy"></p><p>ç°åœ¨ï¼Œä»»ä½•å¾®æœåŠ¡è¦è°ƒç”¨<code>item-service</code>ä¸­çš„æ¥å£ï¼Œåªéœ€è¦å¼•å…¥<code>hm-api</code>æ¨¡å—ä¾èµ–å³å¯ï¼Œæ— éœ€è‡ªå·±ç¼–å†™Feignå®¢æˆ·ç«¯äº†ã€‚</p><h4 id="_4-3-3-æ‰«æåŒ…" tabindex="-1">4.3.3.æ‰«æåŒ… <a class="header-anchor" href="#_4-3-3-æ‰«æåŒ…" aria-label="Permalink to &quot;4.3.3.æ‰«æåŒ…&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨<code>cart-service</code>çš„<code>pom.xml</code>ä¸­å¼•å…¥<code>hm-api</code>æ¨¡å—ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--å¯¼å…¥hm-apiæ¨¡å—--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>åˆ é™¤<code>cart-service</code>ä¸­åŸæ¥çš„ItemDTOå’ŒItemClientï¼Œé‡å¯é¡¹ç›®ï¼Œå‘ç°æŠ¥é”™äº†ï¼š</p><p><img src="/assets/1732633714639-87.xnaggikp.png" alt="img" loading="lazy"></p><p>è¿™é‡Œå› ä¸º<code>ItemClient</code>ç°åœ¨å®šä¹‰åˆ°äº†<code>com.hmall.api.client</code>åŒ…ä¸‹ï¼Œè€Œcart-serviceçš„å¯åŠ¨ç±»å®šä¹‰åœ¨<code>com.hmall.cart</code>åŒ…ä¸‹ï¼Œæ‰«æä¸åˆ°<code>ItemClient</code>ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚</p><p>è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œåœ¨cart-serviceçš„å¯åŠ¨ç±»ä¸Šæ·»åŠ å£°æ˜å³å¯ï¼Œä¸¤ç§æ–¹å¼ï¼š</p><p><img src="/assets/image-20241202223105852.BRvvSguM.png" alt="image-20241202223105852" loading="lazy"></p><ul><li>æ–¹å¼1ï¼šå£°æ˜æ‰«æåŒ…ï¼š</li></ul><p><img src="/assets/1732633714639-88.CbOsCwAC.png" alt="img" loading="lazy"></p><ul><li>æ–¹å¼2ï¼šå£°æ˜è¦ç”¨çš„FeignClient</li></ul><p><img src="/assets/1732633714639-89.DGBHijg5.png" alt="img" loading="lazy"></p><h3 id="_4-4-æ—¥å¿—é…ç½®" tabindex="-1">4.4.æ—¥å¿—é…ç½® <a class="header-anchor" href="#_4-4-æ—¥å¿—é…ç½®" aria-label="Permalink to &quot;4.4.æ—¥å¿—é…ç½®&quot;">â€‹</a></h3><p>OpenFeignåªä¼šåœ¨FeignClientæ‰€åœ¨åŒ…çš„æ—¥å¿—çº§åˆ«ä¸º<strong>DEBUG</strong>æ—¶ï¼Œæ‰ä¼šè¾“å‡ºæ—¥å¿—ã€‚è€Œä¸”å…¶æ—¥å¿—çº§åˆ«æœ‰4çº§ï¼š</p><ul><li><strong>NONE</strong>ï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚</li><li><strong>BASIC</strong>ï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´</li><li><strong>HEADERS</strong>ï¼šåœ¨BASICçš„åŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯</li><li><strong>FULL</strong>ï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ã€‚</li></ul><p>Feigné»˜è®¤çš„æ—¥å¿—çº§åˆ«å°±æ˜¯NONEï¼Œæ‰€ä»¥é»˜è®¤æˆ‘ä»¬çœ‹ä¸åˆ°è¯·æ±‚æ—¥å¿—ã€‚</p><h4 id="_4-4-1-å®šä¹‰æ—¥å¿—çº§åˆ«" tabindex="-1">4.4.1.å®šä¹‰æ—¥å¿—çº§åˆ« <a class="header-anchor" href="#_4-4-1-å®šä¹‰æ—¥å¿—çº§åˆ«" aria-label="Permalink to &quot;4.4.1.å®šä¹‰æ—¥å¿—çº§åˆ«&quot;">â€‹</a></h4><p>åœ¨hm-apiæ¨¡å—ä¸‹æ–°å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œå®šä¹‰Feignçš„æ—¥å¿—çº§åˆ«ï¼š</p><p><img src="/assets/1732633714639-90.euPXnHtD.png" alt="img" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.config;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feign.Logger;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.Bean;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultFeignConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Logger.Level </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">feignLogLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Logger.Level.FULL;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_4-4-2-é…ç½®" tabindex="-1">4.4.2.é…ç½® <a class="header-anchor" href="#_4-4-2-é…ç½®" aria-label="Permalink to &quot;4.4.2.é…ç½®&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œè¦è®©æ—¥å¿—çº§åˆ«ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦é…ç½®è¿™ä¸ªç±»ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>å±€éƒ¨</strong>ç”Ÿæ•ˆï¼šåœ¨æŸä¸ª<code>FeignClient</code>ä¸­é…ç½®ï¼Œåªå¯¹å½“å‰<code>FeignClient</code>ç”Ÿæ•ˆ</li></ul><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FeignClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;item-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">configuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultFeignConfig.class)</span></span></code></pre></div><ul><li><strong>å…¨å±€</strong>ç”Ÿæ•ˆï¼šåœ¨<code>@EnableFeignClients</code>ä¸­é…ç½®ï¼Œé’ˆå¯¹æ‰€æœ‰<code>FeignClient</code>ç”Ÿæ•ˆã€‚</li></ul><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableFeignClients</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">defaultConfiguration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultFeignConfig.class)</span></span></code></pre></div><p>æ—¥å¿—æ ¼å¼ï¼š</p><p><img src="/assets/image-20241202225603357.BgDaLQ8u.png" alt="image-20241202225603357" loading="lazy"></p><div class="language-Plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>17:35:32:148 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---&gt; GET http://item-service/items?ids=100000006163 HTTP/1.1</span></span>
<span class="line"><span>17:35:32:148 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---&gt; END HTTP (0-byte body)</span></span>
<span class="line"><span>17:35:32:278 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] &lt;--- HTTP/1.1 200  (127ms)</span></span>
<span class="line"><span>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive</span></span>
<span class="line"><span>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json</span></span>
<span class="line"><span>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 26 May 2023 09:35:32 GMT</span></span>
<span class="line"><span>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60</span></span>
<span class="line"><span>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked</span></span>
<span class="line"><span>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] </span></span>
<span class="line"><span>17:35:32:280 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{&quot;id&quot;:100000006163,&quot;name&quot;:&quot;å·´å¸ƒè±†(BOBDOG)æŸ”è–„æ‚¦åŠ¨å©´å„¿æ‹‰æ‹‰è£¤XXLç 80ç‰‡(15kgä»¥ä¸Š)&quot;,&quot;price&quot;:67100,&quot;stock&quot;:10000,&quot;image&quot;:&quot;https://m.360buyimg.com/mobilecms/s720x720_jfs/t23998/350/2363990466/222391/a6e9581d/5b7cba5bN0c18fb4f.jpg!q70.jpg.webp&quot;,&quot;category&quot;:&quot;æ‹‰æ‹‰è£¤&quot;,&quot;brand&quot;:&quot;å·´å¸ƒè±†&quot;,&quot;spec&quot;:&quot;{}&quot;,&quot;sold&quot;:11,&quot;commentCount&quot;:33343434,&quot;isAD&quot;:false,&quot;status&quot;:2}]</span></span>
<span class="line"><span>17:35:32:281 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] &lt;--- END HTTP (369-byte body)</span></span></code></pre></div><p><img src="/assets/image-20241202225009729.D2NtaWBa.png" alt="image-20241202225009729" loading="lazy"></p><h2 id="_5-ä½œä¸š" tabindex="-1">5.ä½œä¸š <a class="header-anchor" href="#_5-ä½œä¸š" aria-label="Permalink to &quot;5.ä½œä¸š&quot;">â€‹</a></h2><h3 id="_5-1-æ‹†åˆ†å¾®æœåŠ¡" tabindex="-1">5.1.æ‹†åˆ†å¾®æœåŠ¡ <a class="header-anchor" href="#_5-1-æ‹†åˆ†å¾®æœåŠ¡" aria-label="Permalink to &quot;5.1.æ‹†åˆ†å¾®æœåŠ¡&quot;">â€‹</a></h3><p>å°†hm-serviceä¸­çš„å…¶å®ƒä¸šåŠ¡ä¹Ÿéƒ½æ‹†åˆ†ä¸ºå¾®æœåŠ¡ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>user-serviceï¼šç”¨æˆ·å¾®æœåŠ¡ï¼ŒåŒ…å«ç”¨æˆ·ç™»å½•ã€ç®¡ç†ç­‰åŠŸèƒ½</li><li>trade-serviceï¼šäº¤æ˜“å¾®æœåŠ¡ï¼ŒåŒ…å«è®¢å•ç›¸å…³åŠŸèƒ½</li><li>pay-serviceï¼šæ”¯ä»˜å¾®æœåŠ¡ï¼ŒåŒ…å«æ”¯ä»˜ç›¸å…³åŠŸèƒ½</li></ul><p>å…¶ä¸­äº¤æ˜“æœåŠ¡ã€æ”¯ä»˜æœåŠ¡ã€ç”¨æˆ·æœåŠ¡ä¸­çš„ä¸šåŠ¡éƒ½éœ€è¦çŸ¥é“å½“å‰ç™»å½•ç”¨æˆ·æ˜¯è°ï¼Œç›®å‰æš‚æœªå®ç°ï¼Œå…ˆå°†ç”¨æˆ·idå†™æ­»ã€‚</p><p><strong>æ€è€ƒ</strong>ï¼šå¦‚ä½•æ‰èƒ½åœ¨æ¯ä¸ªå¾®æœåŠ¡ä¸­éƒ½æ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Ÿå¦‚ä½•åœ¨å¾®æœåŠ¡ä¹‹é—´ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</p><h3 id="_5-2-å®šä¹‰feignclient" tabindex="-1">5.2.å®šä¹‰FeignClient <a class="header-anchor" href="#_5-2-å®šä¹‰feignclient" aria-label="Permalink to &quot;5.2.å®šä¹‰FeignClient&quot;">â€‹</a></h3><p>åœ¨ä¸Šè¿°ä¸šåŠ¡ä¸­ï¼ŒåŒ…å«å¤§é‡çš„å¾®æœåŠ¡è°ƒç”¨ï¼Œå°†è¢«è°ƒç”¨çš„æ¥å£å…¨éƒ¨å®šä¹‰ä¸ºFeignClientï¼Œå°†å…¶ä¸å¯¹åº”çš„DTOæ”¾åœ¨hm-apiæ¨¡å—</p><h3 id="_5-3-å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ" tabindex="-1">5.3.å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ <a class="header-anchor" href="#_5-3-å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ" aria-label="Permalink to &quot;5.3.å°†å¾®æœåŠ¡ä¸å‰ç«¯è”è°ƒ&quot;">â€‹</a></h3><p>è¯¾å‰èµ„æ–™æä¾›äº†ä¸€ä¸ª<code>hmall-nginx</code>ç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†Nginxä»¥åŠæˆ‘ä»¬çš„å‰ç«¯ä»£ç ï¼š</p><p><img src="/assets/1732633714639-91.ClBJ3AKy.png" alt="img" loading="lazy"></p><p>å°†å…¶æ‹·è´åˆ°ä¸€ä¸ªä¸åŒ…å«ä¸­æ–‡ã€ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ï¼Œå¯åŠ¨åå³å¯è®¿é—®åˆ°é¡µé¢ï¼š</p><ul><li>18080æ˜¯ç”¨æˆ·ç«¯é¡µé¢</li><li>18081æ˜¯ç®¡ç†ç«¯é¡µé¢</li></ul><p>ä¹‹å‰<code>nginx</code>å†…éƒ¨ä¼šå°†å‘å‘æœåŠ¡ç«¯è¯·æ±‚å…¨éƒ¨ä»£ç†åˆ°8080ç«¯å£ï¼Œä½†æ˜¯ç°åœ¨æ‹†åˆ†äº†Nä¸ªå¾®æœåŠ¡ï¼Œ8080ä¸å¯ç”¨äº†ã€‚è¯·é€šè¿‡<code>Nginx</code>é…ç½®ï¼Œå®Œæˆå¯¹ä¸åŒå¾®æœåŠ¡çš„åå‘ä»£ç†ã€‚</p><p><strong>è®¤çœŸæ€è€ƒè¿™ç§æ–¹å¼å­˜åœ¨å“ªäº›é—®é¢˜</strong>ï¼Œ<strong>æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼Ÿ</p><h3 id="_1-ç”¨æˆ·æœåŠ¡" tabindex="-1">1.ç”¨æˆ·æœåŠ¡ <a class="header-anchor" href="#_1-ç”¨æˆ·æœåŠ¡" aria-label="Permalink to &quot;1.ç”¨æˆ·æœåŠ¡&quot;">â€‹</a></h3><h4 id="_1-1-åˆ›å»ºé¡¹ç›®" tabindex="-1">1.1.åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_1-1-åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;1.1.åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>åœ¨hmallä¸‹æ–°å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸ºuser-serviceï¼š</p><p><img src="/assets/image-20241205163908471.BsS0Pi4B.png" alt="image" loading="lazy"></p><h4 id="_1-2-ä¾èµ–" tabindex="-1">1.2.ä¾èµ– <a class="header-anchor" href="#_1-2-ä¾èµ–" aria-label="Permalink to &quot;1.2.ä¾èµ–&quot;">â€‹</a></h4><p>user-serviceçš„pom.xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;user-service&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--common--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-common&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--api--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--web--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--æ•°æ®åº“--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--mybatis--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.baomidou&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mybatis-plus-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${project.artifactId}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_1-3-å¯åŠ¨ç±»" tabindex="-1">1.3.å¯åŠ¨ç±» <a class="header-anchor" href="#_1-3-å¯åŠ¨ç±»" aria-label="Permalink to &quot;1.3.å¯åŠ¨ç±»&quot;">â€‹</a></h4><p>åœ¨user-serviceä¸­çš„<code>com.hmall.user</code>åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.user;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.mybatis.spring.annotation.MapperScan;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MapperScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.hmall.user.mapper&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UserApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_1-4-é…ç½®æ–‡ä»¶" tabindex="-1">1.4.é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_1-4-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;1.4.é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>ä»<code>hm-service</code>é¡¹ç›®ä¸­å¤åˆ¶3ä¸ªyamlé…ç½®æ–‡ä»¶åˆ°<code>user-service</code>çš„<code>resource</code>ç›®å½•ã€‚</p><p>å…¶ä¸­<code>application-dev.yaml</code>å’Œ<code>application-local.yaml</code>ä¿æŒä¸å˜ã€‚<code>application.yaml</code>å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8084</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">user-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://${hm.db.host}:3306/hm-user?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.pw}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default-enum-type-handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  global-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update-strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">not_null</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    com.hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">debug</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dateformat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HH:mm:ss:SSS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/${spring.application.name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">knife4j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  openapi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ç”¨æˆ·æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿¡æ¯&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zhanghuyi@itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è™å“¥</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://www.itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        group-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule-resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.user.controller</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  jwt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">classpath:hmall.jks</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall123</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    tokenTTL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30m</span></span></code></pre></div><p>å°†hm-serviceä¸‹çš„hmall.jksæ–‡ä»¶æ‹·è´åˆ°user-serviceä¸‹çš„resourcesç›®å½•ï¼Œè¿™æ˜¯JWTåŠ å¯†çš„ç§˜é’¥æ–‡ä»¶ï¼š</p><p><img src="/assets/image-20241205163940322.A1tM_Obf.png" alt="image-20241205163940322" loading="lazy"></p><h4 id="_1-5-ä»£ç " tabindex="-1">1.5.ä»£ç  <a class="header-anchor" href="#_1-5-ä»£ç " aria-label="Permalink to &quot;1.5.ä»£ç &quot;">â€‹</a></h4><p>å¤åˆ¶hm-serviceä¸­æ‰€æœ‰ä¸userã€addressã€jwtæœ‰å…³çš„ä»£ç ï¼Œæœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164041776.BiItt6BH.png" alt="image-20241205164041776" loading="lazy"></p><h4 id="_1-6-æ•°æ®åº“" tabindex="-1">1.6.æ•°æ®åº“ <a class="header-anchor" href="#_1-6-æ•°æ®åº“" aria-label="Permalink to &quot;1.6.æ•°æ®åº“&quot;">â€‹</a></h4><p>user-serviceä¹Ÿéœ€è¦è‡ªå·±çš„ç‹¬ç«‹çš„databaseï¼Œå‘MySQLä¸­å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„SQLï¼š</p><p><img src="/assets/image-20241205164113477.BwSGSwub.png" alt="image-20241205164113477" loading="lazy"></p><p>å¯¼å…¥ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164125391.CCaHgWxg.png" alt="image-20241205164125391" loading="lazy"></p><h4 id="_1-7-é…ç½®å¯åŠ¨é¡¹" tabindex="-1">1.7.é…ç½®å¯åŠ¨é¡¹ <a class="header-anchor" href="#_1-7-é…ç½®å¯åŠ¨é¡¹" aria-label="Permalink to &quot;1.7.é…ç½®å¯åŠ¨é¡¹&quot;">â€‹</a></h4><p>ç»™user-serviceé…ç½®å¯åŠ¨é¡¹ï¼Œè®¾ç½®profileä¸ºlocalï¼š</p><p><img src="/assets/image-20241205164139156.C_WZ9n5X.png" alt="image-20241205164139156" loading="lazy"></p><h4 id="_1-8-æµ‹è¯•" tabindex="-1">1.8.æµ‹è¯• <a class="header-anchor" href="#_1-8-æµ‹è¯•" aria-label="Permalink to &quot;1.8.æµ‹è¯•&quot;">â€‹</a></h4><p>å¯åŠ¨UserApplicationï¼Œè®¿é—®<code>http://localhost:8084/doc.html#/default/ç”¨æˆ·ç›¸å…³æ¥å£/loginUsingPOST</code>ï¼Œæµ‹è¯•ç™»å½•æ¥å£ï¼š</p><p><img src="/assets/image-20241205164202916.1cuHWpH4.png" alt="image-20241205164202916" loading="lazy"></p><p>ç”¨æˆ·æœåŠ¡æµ‹è¯•é€šè¿‡ã€‚</p><h3 id="_2-äº¤æ˜“æœåŠ¡" tabindex="-1">2.äº¤æ˜“æœåŠ¡ <a class="header-anchor" href="#_2-äº¤æ˜“æœåŠ¡" aria-label="Permalink to &quot;2.äº¤æ˜“æœåŠ¡&quot;">â€‹</a></h3><h4 id="_2-1-åˆ›å»ºé¡¹ç›®" tabindex="-1">2.1.åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_2-1-åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;2.1.åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>åœ¨hmallä¸‹æ–°å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸ºtrade-serviceï¼š</p><p><img src="/assets/image-20241205164218690.CzISqguo.png" alt="image-20241205164218690" loading="lazy"></p><h4 id="_2-2-ä¾èµ–" tabindex="-1">2.2.ä¾èµ– <a class="header-anchor" href="#_2-2-ä¾èµ–" aria-label="Permalink to &quot;2.2.ä¾èµ–&quot;">â€‹</a></h4><p>trade-serviceçš„pom.xmlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;trade-service&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--common--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-common&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--api--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--web--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--æ•°æ®åº“--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--mybatis--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.baomidou&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mybatis-plus-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${project.artifactId}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_2-3-å¯åŠ¨ç±»" tabindex="-1">2.3.å¯åŠ¨ç±» <a class="header-anchor" href="#_2-3-å¯åŠ¨ç±»" aria-label="Permalink to &quot;2.3.å¯åŠ¨ç±»&quot;">â€‹</a></h4><p>åœ¨trade-serviceä¸­çš„<code>com.hmall.trade</code>åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.mybatis.spring.annotation.MapperScan;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.EnableFeignClients;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableFeignClients</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">basePackages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;com.hmall.api.client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">defaultConfiguration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultFeignConfig.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MapperScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.hmall.trade.mapper&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TradeApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TradeApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-4-é…ç½®æ–‡ä»¶" tabindex="-1">2.4.é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_2-4-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;2.4.é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>ä»<code>hm-service</code>é¡¹ç›®ä¸­å¤åˆ¶3ä¸ªyamlé…ç½®æ–‡ä»¶åˆ°<code>trade-service</code>çš„<code>resource</code>ç›®å½•ã€‚</p><p>å…¶ä¸­<code>application-dev.yaml</code>å’Œ<code>application-local.yaml</code>ä¿æŒä¸å˜ã€‚<code>application.yaml</code>å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8085</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">trade-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://${hm.db.host}:3306/hm-trade?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.pw}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default-enum-type-handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  global-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update-strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">not_null</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    com.hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">debug</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dateformat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HH:mm:ss:SSS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/${spring.application.name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">knife4j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  openapi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">äº¤æ˜“æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¿¡æ¯&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zhanghuyi@itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è™å“¥</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://www.itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        group-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule-resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.trade.controller</span></span></code></pre></div><h4 id="_2-5-ä»£ç " tabindex="-1">2.5.ä»£ç  <a class="header-anchor" href="#_2-5-ä»£ç " aria-label="Permalink to &quot;2.5.ä»£ç &quot;">â€‹</a></h4><h5 id="_2-5-1-åŸºç¡€ä»£ç " tabindex="-1">2.5.1.åŸºç¡€ä»£ç  <a class="header-anchor" href="#_2-5-1-åŸºç¡€ä»£ç " aria-label="Permalink to &quot;2.5.1.åŸºç¡€ä»£ç &quot;">â€‹</a></h5><p>å¤åˆ¶hm-serviceä¸­æ‰€æœ‰ä¸tradeæœ‰å…³çš„ä»£ç ï¼Œæœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164247446.B_o6ehqO.png" alt="image-20241205164247446" loading="lazy"></p><p>åœ¨äº¤æ˜“æœåŠ¡ä¸­ï¼Œç”¨æˆ·ä¸‹å•æ—¶éœ€è¦åšä¸‹åˆ—äº‹æƒ…ï¼š</p><ul><li><strong>æ ¹æ®idæŸ¥è¯¢å•†å“åˆ—è¡¨</strong></li><li>è®¡ç®—å•†å“æ€»ä»·</li><li>ä¿å­˜è®¢å•</li><li><strong>æ‰£å‡åº“å­˜</strong></li><li><strong>æ¸…ç†è´­ç‰©è½¦å•†å“</strong></li></ul><p>å…¶ä¸­ï¼ŒæŸ¥è¯¢å•†å“ã€æ‰£å‡åº“å­˜éƒ½æ˜¯ä¸å•†å“æœ‰å…³çš„ä¸šåŠ¡ï¼Œåœ¨item-serviceä¸­æœ‰ç›¸å…³åŠŸèƒ½ï¼›æ¸…ç†è´­ç‰©è½¦å•†å“æ˜¯è´­ç‰©è½¦ä¸šåŠ¡ï¼Œåœ¨cart-serviceä¸­æœ‰ç›¸å…³åŠŸèƒ½ã€‚</p><p>å› æ­¤äº¤æ˜“æœåŠ¡è¦è°ƒç”¨ä»–ä»¬ï¼Œå¿…é¡»é€šè¿‡OpenFeignè¿œç¨‹è°ƒç”¨ã€‚æˆ‘ä»¬éœ€è¦å°†ä¸Šè¿°åŠŸèƒ½æŠ½å–ä¸ºFeignClient.</p><h5 id="_2-5-2-æŠ½å–itemclientæ¥å£" tabindex="-1">2.5.2.æŠ½å–ItemClientæ¥å£ <a class="header-anchor" href="#_2-5-2-æŠ½å–itemclientæ¥å£" aria-label="Permalink to &quot;2.5.2.æŠ½å–ItemClientæ¥å£&quot;">â€‹</a></h5><p>é¦–å…ˆæ˜¯<strong>æ‰£å‡åº“å­˜</strong>ï¼Œåœ¨<code>item-service</code>ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164305293.C_mnciw1.png" alt="image-20241205164305293" loading="lazy"></p><p>æˆ‘ä»¬å°†è¿™ä¸ªæ¥å£æŠ½å–åˆ°<code>hm-api</code>æ¨¡å—çš„<code>com.hmall.api.client.ItemClient</code>ä¸­:</p><p><img src="/assets/image-20241205164329578.C2byhWPB.png" alt="image-20241205164329578" loading="lazy"></p><p>å°†æ¥å£å‚æ•°çš„<code>OrderDetailDTO</code>æŠ½å–åˆ°<code>hm-api</code>æ¨¡å—çš„<code>com.hmall.api.dto</code>åŒ…ä¸‹ï¼š</p><p><img src="/assets/image-20241205164345252.DYxq1quX.png" alt="image-20241205164345252" loading="lazy"></p><h5 id="_2-5-3-æŠ½å–cartclientæ¥å£" tabindex="-1">2.5.3.æŠ½å–CartClientæ¥å£ <a class="header-anchor" href="#_2-5-3-æŠ½å–cartclientæ¥å£" aria-label="Permalink to &quot;2.5.3.æŠ½å–CartClientæ¥å£&quot;">â€‹</a></h5><p>æ¥ä¸‹æ¥æ˜¯<strong>æ¸…ç†è´­ç‰©è½¦å•†å“</strong>ï¼Œåœ¨<code>cart-service</code>ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164404260.li54KOdM.png" alt="image-20241205164404260" loading="lazy"></p><p>æˆ‘ä»¬åœ¨<code>hm-api</code>æ¨¡å—çš„<code>com.hmall.api.client</code>åŒ…ä¸‹å®šä¹‰ä¸€ä¸ª<code>CartClient</code>æ¥å£ï¼š</p><p><img src="/assets/image-20241205164424067.DNVuQMTI.png" alt="image-20241205164424067" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.FeignClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.DeleteMapping;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.RequestParam;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Collection;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FeignClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cart-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CartClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DeleteMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/carts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deleteCartItemByIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ids&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Collection&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ids</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="_2-5-4-æ”¹é€ orderserviceimpl" tabindex="-1">2.5.4.æ”¹é€ OrderServiceImpl <a class="header-anchor" href="#_2-5-4-æ”¹é€ orderserviceimpl" aria-label="Permalink to &quot;2.5.4.æ”¹é€ OrderServiceImpl&quot;">â€‹</a></h5><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ”¹é€ OrderServiceImplä¸­çš„é€»è¾‘ï¼Œå°†æœ¬åœ°æ–¹æ³•è°ƒç”¨æ”¹é€ ä¸ºåŸºäºFeignClientçš„è°ƒç”¨ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.service.impl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client.CartClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client.ItemClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.dto.ItemDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.dto.OrderDetailDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.exception.BadRequestException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.UserContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.domain.dto.OrderFormDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.domain.po.Order;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.domain.po.OrderDetail;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.mapper.OrderMapper;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.service.IOrderDetailService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.trade.service.IOrderService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Service;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.transaction.annotation.Transactional;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.ArrayList;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Map;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Set;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.stream.Collectors;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * &lt;p&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æœåŠ¡å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * &lt;/p&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequiredArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IOrderService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ItemClient itemClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOrderDetailService detailService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CartClient cartClient;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Long </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(OrderFormDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">orderFormDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.è®¢å•æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Order order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.1.æŸ¥è¯¢å•†å“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderDetailDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; detailDTOS </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderFormDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDetails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.2.è·å–å•†å“idå’Œæ•°é‡çš„Map</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; itemNumMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detailDTOS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(OrderDetailDTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getItemId, OrderDetailDTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getNum));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Set&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; itemIds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> itemNumMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keySet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.3.æŸ¥è¯¢å•†å“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> itemClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryItemByIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(itemIds);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> items.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> itemIds.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BadRequestException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å•†å“ä¸å­˜åœ¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.4.åŸºäºå•†å“ä»·æ ¼ã€è´­ä¹°æ•°é‡è®¡ç®—å•†å“æ€»ä»·ï¼štotalFee</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> total </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ItemDTO item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> items) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            total </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  itemNumMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTotalFee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(total);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.5.å…¶å®ƒå±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPaymentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderFormDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPaymentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.6.å°†Orderå†™å…¥æ•°æ®åº“orderè¡¨ä¸­</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.ä¿å­˜è®¢å•è¯¦æƒ…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; details </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildDetails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), items, itemNumMap);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        detailService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">saveBatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(details);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.æ‰£å‡åº“å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            itemClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deductStock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(detailDTOS);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RuntimeException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åº“å­˜ä¸è¶³ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.æ¸…ç†è´­ç‰©è½¦å•†å“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cartClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deleteCartItemByIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(itemIds);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildDetails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">orderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">numMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; details </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;&gt;(items.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ItemDTO item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> items) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            OrderDetail detail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSpec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSpec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setNum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(numMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setItemId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            detail.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            details.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(detail);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> details;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-6-æ•°æ®åº“" tabindex="-1">2.6.æ•°æ®åº“ <a class="header-anchor" href="#_2-6-æ•°æ®åº“" aria-label="Permalink to &quot;2.6.æ•°æ®åº“&quot;">â€‹</a></h4><p>trade-serviceä¹Ÿéœ€è¦è‡ªå·±çš„ç‹¬ç«‹çš„databaseï¼Œå‘MySQLä¸­å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„SQLï¼š</p><p><img src="/assets/image-20241205164442547.DAhd2an5.png" alt="image-20241205164442547" loading="lazy"></p><p>å¯¼å…¥ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164453162.B-8DqXUo.png" alt="image-20241205164453162" loading="lazy"></p><h4 id="_2-7-é…ç½®å¯åŠ¨é¡¹" tabindex="-1">2.7.é…ç½®å¯åŠ¨é¡¹ <a class="header-anchor" href="#_2-7-é…ç½®å¯åŠ¨é¡¹" aria-label="Permalink to &quot;2.7.é…ç½®å¯åŠ¨é¡¹&quot;">â€‹</a></h4><p>ç»™trade-serviceé…ç½®å¯åŠ¨é¡¹ï¼Œè®¾ç½®profileä¸ºlocalï¼š</p><p><img src="/assets/image-20241205164510230.COq6S1Jq.png" alt="image-20241205164510230" loading="lazy"></p><h4 id="_2-8-æµ‹è¯•" tabindex="-1">2.8.æµ‹è¯• <a class="header-anchor" href="#_2-8-æµ‹è¯•" aria-label="Permalink to &quot;2.8.æµ‹è¯•&quot;">â€‹</a></h4><p>å¯åŠ¨TradeApplicationï¼Œè®¿é—®<code>[http://localhost:8085/doc.html](http://localhost:8085/doc.html#/default/è®¢å•ç®¡ç†æ¥å£/queryOrderByIdUsingGET)</code>ï¼Œæµ‹è¯•æŸ¥è¯¢è®¢å•æ¥å£ï¼š</p><p><img src="/assets/image-20241205164523810.CxUVo0fj.png" alt="image-20241205164523810" loading="lazy"></p><p>è¯·æ±‚å‚æ•°ï¼š1654779387523936258ï¼Œäº¤æ˜“æœåŠ¡æµ‹è¯•é€šè¿‡ã€‚</p><p>æ³¨æ„ï¼Œåˆ›å»ºè®¢å•æ¥å£æ— æ³•æµ‹è¯•ï¼Œå› ä¸ºæ— æ³•è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚</p><h3 id="_3-æ”¯ä»˜æœåŠ¡" tabindex="-1">3.æ”¯ä»˜æœåŠ¡ <a class="header-anchor" href="#_3-æ”¯ä»˜æœåŠ¡" aria-label="Permalink to &quot;3.æ”¯ä»˜æœåŠ¡&quot;">â€‹</a></h3><h4 id="_3-1-åˆ›å»ºé¡¹ç›®" tabindex="-1">3.1.åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_3-1-åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;3.1.åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>åœ¨<code>hmall</code>ä¸‹æ–°å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸º<code>pay-service</code>ï¼š</p><p><img src="/assets/image-20241205164542662.A9pBdJPf.png" alt="image-20241205164542662" loading="lazy"></p><h4 id="_3-2-ä¾èµ–" tabindex="-1">3.2.ä¾èµ– <a class="header-anchor" href="#_3-2-ä¾èµ–" aria-label="Permalink to &quot;3.2.ä¾èµ–&quot;">â€‹</a></h4><p><code>pay-service</code>çš„<code>pom.xml</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;pay-service&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--common--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-common&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--api--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--web--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--æ•°æ®åº“--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--mybatis--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.baomidou&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mybatis-plus-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--nacos æœåŠ¡æ³¨å†Œå‘ç°--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${project.artifactId}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_3-3-å¯åŠ¨ç±»" tabindex="-1">3.3.å¯åŠ¨ç±» <a class="header-anchor" href="#_3-3-å¯åŠ¨ç±»" aria-label="Permalink to &quot;3.3.å¯åŠ¨ç±»&quot;">â€‹</a></h4><p>åœ¨pay-serviceä¸­çš„<code>com.hmall.pay</code>åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.mybatis.spring.annotation.MapperScan;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.EnableFeignClients;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableFeignClients</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">basePackages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;com.hmall.api.client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">defaultConfiguration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultFeignConfig.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">MapperScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.hmall.pay.mapper&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PayApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3-4-é…ç½®æ–‡ä»¶" tabindex="-1">3.4.é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_3-4-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;3.4.é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>ä»<code>hm-service</code>é¡¹ç›®ä¸­å¤åˆ¶3ä¸ªyamlé…ç½®æ–‡ä»¶åˆ°<code>trade-service</code>çš„<code>resource</code>ç›®å½•ã€‚</p><p>å…¶ä¸­<code>application-dev.yaml</code>å’Œ<code>application-local.yaml</code>ä¿æŒä¸å˜ã€‚<code>application.yaml</code>å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8086</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pay-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://${hm.db.host}:3306/hm-pay?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.pw}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default-enum-type-handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  global-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update-strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">not_null</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    com.hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">debug</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dateformat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HH:mm:ss:SSS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/${spring.application.name}&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">knife4j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  openapi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">æ”¯ä»˜æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ”¯ä»˜æœåŠ¡æ¥å£æ–‡æ¡£&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">zhanghuyi@itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è™å“¥</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://www.itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        group-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule-resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.pay.controller</span></span></code></pre></div><h4 id="_3-5-ä»£ç " tabindex="-1">3.5.ä»£ç  <a class="header-anchor" href="#_3-5-ä»£ç " aria-label="Permalink to &quot;3.5.ä»£ç &quot;">â€‹</a></h4><h5 id="_3-5-1-åŸºç¡€ä»£ç " tabindex="-1">3.5.1.åŸºç¡€ä»£ç  <a class="header-anchor" href="#_3-5-1-åŸºç¡€ä»£ç " aria-label="Permalink to &quot;3.5.1.åŸºç¡€ä»£ç &quot;">â€‹</a></h5><p>å¤åˆ¶hm-serviceä¸­æ‰€æœ‰ä¸æ”¯ä»˜æœ‰å…³çš„ä»£ç ï¼Œæœ€ç»ˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164602827.W1I8io0H.png" alt="image-20241205164602827" loading="lazy"></p><p>åœ¨æ”¯ä»˜æœåŠ¡ä¸­ï¼ŒåŸºäºç”¨æˆ·ä½™é¢æ”¯ä»˜æ—¶éœ€è¦åšä¸‹åˆ—äº‹æƒ…ï¼š</p><ul><li><strong>æ‰£å‡ç”¨æˆ·ä½™é¢</strong></li><li>æ ‡è®°æ”¯ä»˜å•çŠ¶æ€ä¸ºå·²æ”¯ä»˜</li><li><strong>æ ‡è®°è®¢å•çŠ¶æ€ä¸ºå·²æ”¯ä»˜</strong></li></ul><p>å…¶ä¸­ï¼Œ<strong>æ‰£å‡ç”¨æˆ·ä½™é¢</strong>æ˜¯åœ¨<code>user-service</code>ä¸­æœ‰ç›¸å…³åŠŸèƒ½ï¼›<strong>æ ‡è®°è®¢å•çŠ¶æ€</strong>åˆ™æ˜¯åœ¨<code>trade-service</code>ä¸­æœ‰ç›¸å…³åŠŸèƒ½ã€‚å› æ­¤äº¤æ˜“æœåŠ¡è¦è°ƒç”¨ä»–ä»¬ï¼Œå¿…é¡»é€šè¿‡OpenFeignè¿œç¨‹è°ƒç”¨ã€‚æˆ‘ä»¬éœ€è¦å°†ä¸Šè¿°åŠŸèƒ½æŠ½å–ä¸ºFeignClient.</p><h5 id="_2-5-2-æŠ½å–userclientæ¥å£" tabindex="-1">2.5.2.æŠ½å–UserClientæ¥å£ <a class="header-anchor" href="#_2-5-2-æŠ½å–userclientæ¥å£" aria-label="Permalink to &quot;2.5.2.æŠ½å–UserClientæ¥å£&quot;">â€‹</a></h5><p>é¦–å…ˆæ˜¯<strong>æ‰£å‡ç”¨æˆ·ä½™é¢</strong>ï¼Œåœ¨<code>user-service</code>ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164617224.c0fTSW69.png" alt="image-20241205164617224" loading="lazy"></p><p>æˆ‘ä»¬å°†è¿™ä¸ªæ¥å£æŠ½å–åˆ°<code>hm-api</code>æ¨¡å—çš„<code>com.hmall.api.client.UserClient</code>ä¸­:</p><p><img src="/assets/image-20241205164633644.0PJ8MrbJ.png" alt="image-20241205164633644" loading="lazy"></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.FeignClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.PutMapping;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.RequestParam;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FeignClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PutMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/users/money/deduct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deductMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pw&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestParam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;amount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Integer </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="_2-5-3-æŠ½å–tradeclientæ¥å£" tabindex="-1">2.5.3.æŠ½å–TradeClientæ¥å£ <a class="header-anchor" href="#_2-5-3-æŠ½å–tradeclientæ¥å£" aria-label="Permalink to &quot;2.5.3.æŠ½å–TradeClientæ¥å£&quot;">â€‹</a></h5><p>æ¥ä¸‹æ¥æ˜¯<strong>æ ‡è®°è®¢å•çŠ¶æ€</strong>ï¼Œåœ¨<code>trade-service</code>ä¸­çš„å¯¹åº”ä¸šåŠ¡æ¥å£å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164647253.DaqJ6tXS.png" alt="image-20241205164647253" loading="lazy"></p><p>æˆ‘ä»¬å°†è¿™ä¸ªæ¥å£æŠ½å–åˆ°<code>hm-api</code>æ¨¡å—çš„<code>com.hmall.api.client.TradeClient</code>ä¸­:</p><p><img src="/assets/image-20241205164700609.DuX7VQUh.png" alt="image-20241205164700609" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.FeignClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.PathVariable;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.bind.annotation.PutMapping;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FeignClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;trade-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TradeClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PutMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/orders/{orderId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> markOrderPaySuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PathVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;orderId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">orderId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="_2-5-4-æ”¹é€ payorderserviceimpl" tabindex="-1">2.5.4.æ”¹é€ PayOrderServiceImpl <a class="header-anchor" href="#_2-5-4-æ”¹é€ payorderserviceimpl" aria-label="Permalink to &quot;2.5.4.æ”¹é€ PayOrderServiceImpl&quot;">â€‹</a></h5><p>æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥æ”¹é€ <code>PayOrderServiceImpl</code>ä¸­çš„é€»è¾‘ï¼Œå°†æœ¬åœ°æ–¹æ³•è°ƒç”¨æ”¹é€ ä¸ºåŸºäº<code>FeignClient</code>çš„è°ƒç”¨ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.service.impl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.core.toolkit.IdWorker;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.core.toolkit.StringUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client.TradeClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client.UserClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.exception.BizIllegalException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.BeanUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.UserContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.domain.dto.PayApplyDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.domain.dto.PayOrderFormDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.domain.po.PayOrder;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.enums.PayStatus;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.mapper.PayOrderMapper;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.pay.service.IPayOrderService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Service;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.transaction.annotation.Transactional;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.time.LocalDateTime;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * &lt;p&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ”¯ä»˜è®¢å• æœåŠ¡å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * &lt;/p&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequiredArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PayOrderServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PayOrderMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PayOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IPayOrderService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserClient userClient;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TradeClient tradeClient;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">applyPayOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayApplyDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">applyDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.å¹‚ç­‰æ€§æ ¡éªŒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PayOrder payOrder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkIdempotent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(applyDTO);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.è¿”å›ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryPayOrderByBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrderFormDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">payOrderDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.æŸ¥è¯¢æ”¯ä»˜å•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PayOrder po </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ¤æ–­çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PayStatus.WAIT_BUYER_PAY.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equalsValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // è®¢å•ä¸æ˜¯æœªæ”¯ä»˜ï¼ŒçŠ¶æ€å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.å°è¯•æ‰£å‡ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deductMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.ä¿®æ”¹æ”¯ä»˜å•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> markPayOrderSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">success) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 5.ä¿®æ”¹è®¢å•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tradeClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markOrderPaySuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> markPayOrderSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, LocalDateTime </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">successTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lambdaUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getStatus, PayStatus.TRADE_SUCCESS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getPaySuccessTime, successTime)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getId, id)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // æ”¯ä»˜çŠ¶æ€çš„ä¹è§‚é”åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getStatus, PayStatus.NOT_COMMIT.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), PayStatus.WAIT_BUYER_PAY.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PayOrder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">checkIdempotent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayApplyDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">applyDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.é¦–å…ˆæŸ¥è¯¢æ”¯ä»˜å•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PayOrder oldOrder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> queryByBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(applyDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (oldOrder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ä¸å­˜åœ¨æ”¯ä»˜å•ï¼Œè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡ï¼Œå†™å…¥æ–°çš„æ”¯ä»˜å•å¹¶è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PayOrder payOrder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildPayOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(applyDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPayOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(IdWorker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrder);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payOrder;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.æ—§å•å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (PayStatus.TRADE_SUCCESS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equalsValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å·²ç»æ”¯ä»˜æˆåŠŸï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¢å•å·²ç»æ”¯ä»˜ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.æ—§å•å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (PayStatus.TRADE_CLOSED.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equalsValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å·²ç»å…³é—­ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è®¢å•å·²å…³é—­&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 5.æ—§å•å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ”¯ä»˜æ¸ é“æ˜¯å¦ä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">StringUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayChannelCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), applyDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayChannelCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æ”¯ä»˜æ¸ é“ä¸ä¸€è‡´ï¼Œéœ€è¦é‡ç½®æ•°æ®ï¼Œç„¶åé‡æ–°ç”³è¯·æ”¯ä»˜å•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PayOrder payOrder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildPayOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(applyDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setQrCodeUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            updateById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrder);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPayOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPayOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payOrder;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 6.æ—§å•å·²ç»å­˜åœ¨ï¼Œä¸”å¯èƒ½æ˜¯æœªæ”¯ä»˜æˆ–æœªæäº¤ï¼Œä¸”æ”¯ä»˜æ¸ é“ä¸€è‡´ï¼Œç›´æ¥è¿”å›æ—§æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> oldOrder;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PayOrder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildPayOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayApplyDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">payApplyDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.æ•°æ®è½¬æ¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PayOrder payOrder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeanUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payApplyDTO, PayOrder.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆå§‹åŒ–æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPayOverTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plusMinutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">120L</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayStatus.WAIT_BUYER_PAY.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        payOrder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBizUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payOrder;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PayOrder </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryByBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lambdaQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getBizOrderNo, bizOrderNo)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">one</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-6-æ•°æ®åº“-1" tabindex="-1">2.6.æ•°æ®åº“ <a class="header-anchor" href="#_2-6-æ•°æ®åº“-1" aria-label="Permalink to &quot;2.6.æ•°æ®åº“&quot;">â€‹</a></h4><p><code>pay-service</code>ä¹Ÿéœ€è¦è‡ªå·±çš„ç‹¬ç«‹çš„databaseï¼Œå‘MySQLä¸­å¯¼å…¥è¯¾å‰èµ„æ–™æä¾›çš„SQLï¼š</p><p><img src="/assets/image-20241205164715930.CrycvNyl.png" alt="image-20241205164715930" loading="lazy"></p><p>å¯¼å…¥ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241205164732571.BAekeK_E.png" alt="image-20241205164732571" loading="lazy"></p><h4 id="_2-7-é…ç½®å¯åŠ¨é¡¹-1" tabindex="-1">2.7.é…ç½®å¯åŠ¨é¡¹ <a class="header-anchor" href="#_2-7-é…ç½®å¯åŠ¨é¡¹-1" aria-label="Permalink to &quot;2.7.é…ç½®å¯åŠ¨é¡¹&quot;">â€‹</a></h4><p>ç»™<code>pay-service</code>é…ç½®å¯åŠ¨é¡¹ï¼Œè®¾ç½®profileä¸º<code>local</code>ï¼š</p><p><img src="/assets/image-20241205164748388.OT2_IXCa.png" alt="image-20241205164748388" loading="lazy"></p><h4 id="_2-8-æµ‹è¯•-1" tabindex="-1">2.8.æµ‹è¯• <a class="header-anchor" href="#_2-8-æµ‹è¯•-1" aria-label="Permalink to &quot;2.8.æµ‹è¯•&quot;">â€‹</a></h4><p>åœ¨æ”¯ä»˜æœåŠ¡çš„PayControllerä¸­æ·»åŠ ä¸€ä¸ªæ¥å£æ–¹ä¾¿æµ‹è¯•ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ApiOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŸ¥è¯¢æ”¯ä»˜å•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PayOrderVO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> queryPayOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BeanUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), PayOrderVO.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¯åŠ¨PayApplicationï¼Œè®¿é—®<code>[http://localhost:8086/doc.html](http://localhost:8086/doc.html#/default/æ”¯ä»˜ç›¸å…³æ¥å£/queryPayOrdersUsingGET)</code>ï¼Œæµ‹è¯•æŸ¥è¯¢è®¢å•æ¥å£ï¼š</p><p><img src="/assets/image-20241205164801016.DA6e5tpL.png" alt="image-20241205164801016" loading="lazy"></p><p>æ”¯ä»˜æœåŠ¡æµ‹è¯•é€šè¿‡ã€‚</p><h1 id="äºŒã€å¾®æœåŠ¡-ç½‘å…³-é…ç½®ç®¡ç†" tabindex="-1">äºŒã€å¾®æœåŠ¡-ç½‘å…³&amp;é…ç½®ç®¡ç† <a class="header-anchor" href="#äºŒã€å¾®æœåŠ¡-ç½‘å…³-é…ç½®ç®¡ç†" aria-label="Permalink to &quot;äºŒã€å¾®æœåŠ¡-ç½‘å…³&amp;é…ç½®ç®¡ç†&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p>æˆ‘ä»¬å°†é»‘é©¬å•†åŸæ‹†åˆ†ä¸º5ä¸ªå¾®æœåŠ¡ï¼š</p><ul><li>ç”¨æˆ·æœåŠ¡</li><li>å•†å“æœåŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡</li><li>äº¤æ˜“æœåŠ¡</li><li>æ”¯ä»˜æœåŠ¡</li></ul><p>ç”±äºæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰ä¸åŒçš„åœ°å€æˆ–ç«¯å£ï¼Œå…¥å£ä¸åŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨ä¸å‰ç«¯è”è°ƒçš„æ—¶å€™å‘ç°äº†ä¸€äº›é—®é¢˜ï¼š</p><ul><li>è¯·æ±‚ä¸åŒæ•°æ®æ—¶è¦è®¿é—®ä¸åŒçš„å…¥å£ï¼Œéœ€è¦ç»´æŠ¤å¤šä¸ªå…¥å£åœ°å€ï¼Œéº»çƒ¦</li><li>å‰ç«¯æ— æ³•è°ƒç”¨nacosï¼Œæ— æ³•å®æ—¶æ›´æ–°æœåŠ¡åˆ—è¡¨</li></ul><p>å•ä½“æ¶æ„æ—¶æˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€æ¬¡ç”¨æˆ·ç™»å½•ã€èº«ä»½æ ¡éªŒï¼Œå°±å¯ä»¥åœ¨æ‰€æœ‰ä¸šåŠ¡ä¸­è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚è€Œå¾®æœåŠ¡æ‹†åˆ†åï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹éƒ¨ç½²ï¼Œè¿™å°±å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ç¼–å†™ç™»å½•æ ¡éªŒã€ç”¨æˆ·ä¿¡æ¯è·å–çš„åŠŸèƒ½å—ï¼Ÿ</li><li>å½“å¾®æœåŠ¡ä¹‹é—´è°ƒç”¨æ—¶ï¼Œè¯¥å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</li></ul><p>ä¸è¦ç€æ€¥ï¼Œè¿™äº›é—®é¢˜éƒ½å¯ä»¥åœ¨ä»Šå¤©çš„å­¦ä¹ ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œæˆ‘ä»¬ä¼šé€šè¿‡<strong>ç½‘å…³</strong>æŠ€æœ¯è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ä»Šå¤©çš„å†…å®¹ä¼šåˆ†ä¸º3ç« ï¼š</p><ul><li>ç¬¬ä¸€ç« ï¼šç½‘å…³è·¯ç”±ï¼Œè§£å†³å‰ç«¯è¯·æ±‚å…¥å£çš„é—®é¢˜ã€‚</li><li>ç¬¬äºŒç« ï¼šç½‘å…³é‰´æƒï¼Œè§£å†³ç»Ÿä¸€ç™»å½•æ ¡éªŒå’Œç”¨æˆ·ä¿¡æ¯è·å–çš„é—®é¢˜ã€‚</li><li>ç¬¬ä¸‰ç« ï¼šç»Ÿä¸€é…ç½®ç®¡ç†ï¼Œè§£å†³å¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶é‡å¤å’Œé…ç½®çƒ­æ›´æ–°é—®é¢˜ã€‚</li></ul><p>é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ä½ å°†æŒæ¡ä¸‹åˆ—èƒ½åŠ›ï¼š</p><ul><li>ä¼šåˆ©ç”¨å¾®æœåŠ¡ç½‘å…³åšè¯·æ±‚è·¯ç”±</li><li>ä¼šåˆ©ç”¨å¾®æœåŠ¡ç½‘å…³åšç™»å½•èº«ä»½æ ¡éªŒ</li><li>ä¼šåˆ©ç”¨Nacoså®ç°ç»Ÿä¸€é…ç½®ç®¡ç†</li><li>ä¼šåˆ©ç”¨Nacoså®ç°é…ç½®çƒ­æ›´æ–°</li></ul><p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·è¿›å…¥ä»Šå¤©çš„å­¦ä¹ å§ã€‚</p><h2 id="_1-ç½‘å…³è·¯ç”±" tabindex="-1">1.ç½‘å…³è·¯ç”± <a class="header-anchor" href="#_1-ç½‘å…³è·¯ç”±" aria-label="Permalink to &quot;1.ç½‘å…³è·¯ç”±&quot;">â€‹</a></h2><h3 id="_1-1-è®¤è¯†ç½‘å…³" tabindex="-1">1.1.è®¤è¯†ç½‘å…³ <a class="header-anchor" href="#_1-1-è®¤è¯†ç½‘å…³" aria-label="Permalink to &quot;1.1.è®¤è¯†ç½‘å…³&quot;">â€‹</a></h3><p>ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Ÿ</p><p>é¡¾æ˜æ€è®®ï¼Œç½‘å…³å°±æ˜¯<strong>ç½‘</strong>ç»œçš„<strong>å…³</strong>å£ã€‚æ•°æ®åœ¨ç½‘ç»œé—´ä¼ è¾“ï¼Œä»ä¸€ä¸ªç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ç½‘ç»œæ—¶å°±éœ€è¦ç»è¿‡ç½‘å…³æ¥åš<strong>æ•°æ®çš„è·¯ç”±å’Œè½¬å‘ä»¥åŠæ•°æ®å®‰å…¨çš„æ ¡éªŒ</strong>ã€‚</p><p><img src="/assets/image-20241203220605298.Ct_kQYfM.png" alt="image-20241203220605298" loading="lazy"></p><p>æ›´é€šä¿—çš„æ¥è®²ï¼Œç½‘å…³å°±åƒæ˜¯ä»¥å‰å›­åŒºä¼ è¾¾å®¤çš„å¤§çˆ·ã€‚</p><ul><li>å¤–é¢çš„äººè¦æƒ³è¿›å…¥å›­åŒºï¼Œå¿…é¡»ç»è¿‡å¤§çˆ·çš„è®¤å¯ï¼Œå¦‚æœä½ æ˜¯ä¸æ€€å¥½æ„çš„äººï¼Œè‚¯å®šè¢«ç›´æ¥æ‹¦æˆªã€‚</li><li>å¤–é¢çš„äººè¦ä¼ è¯æˆ–é€ä¿¡ï¼Œè¦æ‰¾å¤§çˆ·ã€‚å¤§çˆ·å¸®ä½ å¸¦ç»™ç›®æ ‡äººã€‚</li></ul><p><img src="/assets/image-20241207162218957.CnfXaCfg.png" alt="image-20241207162218957" loading="lazy"></p><p>ç°åœ¨ï¼Œå¾®æœåŠ¡ç½‘å…³å°±èµ·åˆ°åŒæ ·çš„ä½œç”¨ã€‚<strong>å‰ç«¯è¯·æ±‚ä¸èƒ½ç›´æ¥è®¿é—®å¾®æœåŠ¡ï¼Œè€Œæ˜¯è¦è¯·æ±‚ç½‘å…³</strong>ï¼š</p><ul><li>ç½‘å…³å¯ä»¥åšå®‰å…¨æ§åˆ¶ï¼Œä¹Ÿå°±æ˜¯<strong>ç™»å½•èº«ä»½æ ¡éªŒ</strong>ï¼Œæ ¡éªŒé€šè¿‡æ‰æ”¾è¡Œ</li><li>é€šè¿‡è®¤è¯åï¼Œç½‘å…³å†æ ¹æ®è¯·æ±‚åˆ¤æ–­åº”è¯¥è®¿é—®å“ªä¸ªå¾®æœåŠ¡ï¼Œå°†<strong>è¯·æ±‚è½¬å‘</strong>è¿‡å»</li></ul><p><img src="/assets/image-20241207162246417.C9FUPyL6.png" alt="image-20241207162246417" loading="lazy"></p><p>åœ¨SpringCloudå½“ä¸­ï¼Œæä¾›äº†ä¸¤ç§ç½‘å…³å®ç°æ–¹æ¡ˆï¼š</p><ul><li>Netflix Zuulï¼šæ—©æœŸå®ç°ï¼Œç›®å‰å·²ç»æ·˜æ±°</li><li>SpringCloudGatewayï¼šåŸºäºSpringçš„WebFluxæŠ€æœ¯ï¼Œ<strong>å®Œå…¨æ”¯æŒå“åº”å¼ç¼–ç¨‹</strong>ï¼Œååèƒ½åŠ›æ›´å¼º</li></ul><p>è¯¾å ‚ä¸­æˆ‘ä»¬ä»¥SpringCloudGatewayä¸ºä¾‹æ¥è®²è§£ï¼Œå®˜æ–¹ç½‘ç«™ï¼š</p><p><a href="https://spring.io/projects/spring-cloud-gateway#learn" target="_blank" rel="noreferrer">https://spring.io/projects/spring-cloud-gateway#learn</a></p><h3 id="_1-2-å¿«é€Ÿå…¥é—¨" tabindex="-1">1.2.å¿«é€Ÿå…¥é—¨ <a class="header-anchor" href="#_1-2-å¿«é€Ÿå…¥é—¨" aria-label="Permalink to &quot;1.2.å¿«é€Ÿå…¥é—¨&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹å¦‚ä½•åˆ©ç”¨ç½‘å…³å®ç°è¯·æ±‚è·¯ç”±ã€‚ç”±äºç½‘å…³æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œå› æ­¤ä¹Ÿ<strong>éœ€è¦åˆ›å»ºä¸€ä¸ªæ¨¡å—å¼€å‘åŠŸèƒ½</strong>ã€‚å¤§æ¦‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>åˆ›å»ºç½‘å…³å¾®æœåŠ¡</li><li>å¼•å…¥SpringCloudGatewayã€NacosDiscoveryä¾èµ–</li><li>ç¼–å†™å¯åŠ¨ç±»</li><li><strong>é…ç½®ç½‘å…³è·¯ç”±</strong></li></ul><p><img src="/assets/image-20241203220958233.B-AWja3B.png" alt="image-20241203220958233" loading="lazy"></p><h4 id="_1-2-1-åˆ›å»ºé¡¹ç›®" tabindex="-1">1.2.1.åˆ›å»ºé¡¹ç›® <a class="header-anchor" href="#_1-2-1-åˆ›å»ºé¡¹ç›®" aria-label="Permalink to &quot;1.2.1.åˆ›å»ºé¡¹ç›®&quot;">â€‹</a></h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åœ¨hmallä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„moduleï¼Œå‘½åä¸ºhm-gatewayï¼Œä½œä¸ºç½‘å…³å¾®æœåŠ¡ï¼š</p><p><img src="/assets/image-20241207162334652.6D3RuuuS.png" alt="image-20241207162334652" loading="lazy"></p><h4 id="_1-2-2-å¼•å…¥ä¾èµ–" tabindex="-1">1.2.2.å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_1-2-2-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;1.2.2.å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p>åœ¨<code>hm-gateway</code>æ¨¡å—çš„<code>pom.xml</code>æ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hmall&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">modelVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-gateway&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;11&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">maven.compiler.target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--common--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.heima&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;hm-common&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.0.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--ç½‘å…³--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-gateway&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--nacos discovery--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        &lt;!--è´Ÿè½½å‡è¡¡--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-loadbalancer&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;${project.artifactId}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">finalName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-maven-plugin&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_1-2-3-å¯åŠ¨ç±»" tabindex="-1">1.2.3.å¯åŠ¨ç±» <a class="header-anchor" href="#_1-2-3-å¯åŠ¨ç±»" aria-label="Permalink to &quot;1.2.3.å¯åŠ¨ç±»&quot;">â€‹</a></h4><p>åœ¨<code>hm-gateway</code>æ¨¡å—çš„<code>com.hmall.gateway</code>åŒ…ä¸‹æ–°å»ºä¸€ä¸ªå¯åŠ¨ç±»ï¼š</p><p><img src="/assets/image-20241207162409562.BzvHQn59.png" alt="image-20241207162409562" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.gateway;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.SpringApplication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GatewayApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(GatewayApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_1-2-4-é…ç½®è·¯ç”±" tabindex="-1">1.2.4.<mark>é…ç½®è·¯ç”±</mark> <a class="header-anchor" href="#_1-2-4-é…ç½®è·¯ç”±" aria-label="Permalink to &quot;1.2.4.==é…ç½®è·¯ç”±==&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨<code>hm-gateway</code>æ¨¡å—çš„<code>resources</code>ç›®å½•æ–°å»ºä¸€ä¸ª<code>application.yaml</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.88.133:8848</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      routes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">item-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è·¯ç”±è§„åˆ™idï¼Œè‡ªå®šä¹‰ï¼Œå”¯ä¸€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://item-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è·¯ç”±çš„ç›®æ ‡æœåŠ¡ï¼Œlbä»£è¡¨è´Ÿè½½å‡è¡¡ï¼Œä¼šä»æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦ç¬¦åˆå½“å‰è§„åˆ™ï¼Œç¬¦åˆåˆ™è·¯ç”±åˆ°ç›®æ ‡æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/items/**,/search/**</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è¿™é‡Œæ˜¯ä»¥è¯·æ±‚è·¯å¾„ä½œä¸ºåˆ¤æ–­è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cart-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://cart-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/carts/**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">user-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://user-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/users/**,/addresses/**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">trade-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://trade-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/orders/**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pay-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://pay-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/pay-orders/**</span></span></code></pre></div><p><strong><mark>æ³¨æ„è¿™é‡Œçš„idå¿…é¡»é…ç½®è·ŸæœåŠ¡åä¸€è‡´ï¼š</mark></strong></p><p>åœ¨nacosåå°ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ³¨å†Œä¸­å¿ƒçš„æœåŠ¡</p><p><img src="/assets/image-20241203235052249.CDjw8BDt.png" alt="image-20241203235052249" loading="lazy"></p><p><img src="/assets/image-20241203235152015.ASNBtjWp.png" alt="image-20241203235152015" loading="lazy"></p><p><img src="/assets/image-20241203235529450.YZxVnqLl.png" alt="image-20241203235529450" loading="lazy"></p><p><strong><mark>å¦‚æœä¸ä¸€è‡´ï¼š</mark></strong></p><p><img src="/assets/image-20241203235331026.0dme5jcr.png" alt="image-20241203235331026" loading="lazy"></p><p><strong>åœ¨nacoså®ä¾‹ç®¡ç†ç•Œé¢ä¸­åªæœ‰hm-gatewayå’Œhm-apiï¼ˆå…¶ä»–å››ä¸ªå®ä¾‹éƒ½åœ¨hm-apiä¹‹ä¸­ï¼‰</strong></p><p>RoundRobinLoadBalancer : No servers available for service: user-service</p><p><img src="/assets/image-20241204000735407.Kx4VRLRP.png" alt="image-20241204000735407" loading="lazy"></p><p><img src="/assets/image-20241204000646311.L04fvmII.png" alt="image-20241204000646311" loading="lazy"></p><h4 id="_1-2-5-æµ‹è¯•" tabindex="-1">1.2.5.æµ‹è¯• <a class="header-anchor" href="#_1-2-5-æµ‹è¯•" aria-label="Permalink to &quot;1.2.5.æµ‹è¯•&quot;">â€‹</a></h4><p>å¯åŠ¨GatewayApplicationï¼Œä»¥ <code>http://localhost:8080</code> æ‹¼æ¥å¾®æœåŠ¡æ¥å£è·¯å¾„æ¥æµ‹è¯•ã€‚ä¾‹å¦‚ï¼š</p><p><code>http://localhost:8080/items/page?pageNo=1&amp;pageSize=1</code></p><p><img src="/assets/image-20241207162501044.D8tYX-QI.png" alt="image-20241207162501044" loading="lazy"></p><p>æ­¤æ—¶ï¼Œå¯åŠ¨UserApplicationã€CartApplicationï¼Œç„¶åæ‰“å¼€å‰ç«¯é¡µé¢ï¼Œå‘ç°ç›¸å…³åŠŸèƒ½éƒ½å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼š</p><p><img src="/assets/image-20241203222150515.CYOq1YSv.png" alt="image-20241203222150515" loading="lazy"></p><h3 id="_1-3-è·¯ç”±è¿‡æ»¤" tabindex="-1">1.3.è·¯ç”±è¿‡æ»¤ <a class="header-anchor" href="#_1-3-è·¯ç”±è¿‡æ»¤" aria-label="Permalink to &quot;1.3.è·¯ç”±è¿‡æ»¤&quot;">â€‹</a></h3><p>è·¯ç”±è§„åˆ™çš„å®šä¹‰è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      routes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">item</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://item-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">//Path-è¯·æ±‚è·¯å¾„å¿…é¡»ç¬¦åˆæŒ‡å®šè§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/items/**,/search/**</span></span></code></pre></div><p>å…¶ä¸­routeså¯¹åº”çš„ç±»å‹å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241207162642310.BNWkoJHi.png" alt="image-20241207162642310" loading="lazy"></p><p>æ˜¯ä¸€ä¸ªé›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å®šä¹‰å¾ˆå¤šè·¯ç”±è§„åˆ™ã€‚é›†åˆä¸­çš„<code>RouteDefinition</code>å°±æ˜¯å…·ä½“çš„è·¯ç”±è§„åˆ™å®šä¹‰ï¼Œå…¶ä¸­å¸¸è§çš„å±æ€§å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241207162659165.DzJ-fBtr.png" alt="image-20241207162659165" loading="lazy"></p><p>å››ä¸ªå±æ€§å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><code>id</code>ï¼šè·¯ç”±çš„<strong>å”¯ä¸€æ ‡ç¤º</strong></li><li><code>predicates</code>ï¼š<strong><mark>è·¯ç”±æ–­è¨€</mark></strong>ï¼Œå…¶å®å°±æ˜¯åŒ¹é…æ¡ä»¶</li><li><code>filters</code>ï¼š<strong><mark>è·¯ç”±è¿‡æ»¤æ¡ä»¶</mark></strong>ï¼Œåé¢è®²</li><li><code>uri</code>ï¼šè·¯ç”±ç›®æ ‡åœ°å€ï¼Œ<strong><code>lb://</code>ä»£è¡¨<mark>è´Ÿè½½å‡è¡¡</mark></strong>ï¼Œ<strong>ä»æ³¨å†Œä¸­å¿ƒè·å–ç›®æ ‡å¾®æœåŠ¡çš„å®ä¾‹åˆ—è¡¨</strong>ï¼Œå¹¶ä¸”è´Ÿè½½å‡è¡¡é€‰æ‹©ä¸€ä¸ªè®¿é—®ã€‚</li></ul><p>è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨<code>predicates</code>ï¼Œä¹Ÿå°±æ˜¯**<mark>è·¯ç”±æ–­è¨€</mark>**ã€‚SpringCloudGatewayä¸­æ”¯æŒçš„æ–­è¨€ç±»å‹æœ‰å¾ˆå¤šï¼š</p><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>åç§°</strong></th><th style="text-align:left;"><strong>è¯´æ˜</strong></th><th style="text-align:left;"><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td style="text-align:left;">After</td><td style="text-align:left;">æ˜¯æŸä¸ªæ—¶é—´ç‚¹åçš„è¯·æ±‚</td><td style="text-align:left;">- After=2037-01-20T17:42:47.789-07:00[America/Denver]</td></tr><tr><td style="text-align:left;">Before</td><td style="text-align:left;">æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td><td style="text-align:left;">- Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</td></tr><tr><td style="text-align:left;">Between</td><td style="text-align:left;">æ˜¯æŸä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚</td><td style="text-align:left;">- Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver]</td></tr><tr><td style="text-align:left;">Cookie</td><td style="text-align:left;">è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›cookie</td><td style="text-align:left;">- Cookie=chocolate, ch.p</td></tr><tr><td style="text-align:left;">Header</td><td style="text-align:left;">è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›header</td><td style="text-align:left;">- Header=X-Request-Id, \d+</td></tr><tr><td style="text-align:left;">Host</td><td style="text-align:left;">è¯·æ±‚å¿…é¡»æ˜¯è®¿é—®æŸä¸ªhostï¼ˆåŸŸåï¼‰</td><td style="text-align:left;">- Host=<strong>.somehost.org,</strong>.anotherhost.org</td></tr><tr><td style="text-align:left;">Method</td><td style="text-align:left;">è¯·æ±‚æ–¹å¼å¿…é¡»æ˜¯æŒ‡å®šæ–¹å¼</td><td style="text-align:left;">- Method=GET,POST</td></tr><tr><td style="text-align:left;"><strong>Path</strong></td><td style="text-align:left;"><strong>è¯·æ±‚è·¯å¾„å¿…é¡»ç¬¦åˆæŒ‡å®šè§„åˆ™</strong></td><td style="text-align:left;">- Path=/red/{segment},/blue/**</td></tr><tr><td style="text-align:left;">Query</td><td style="text-align:left;">è¯·æ±‚å‚æ•°å¿…é¡»åŒ…å«æŒ‡å®šå‚æ•°</td><td style="text-align:left;">- Query=name, Jackæˆ–è€…- Query=name</td></tr><tr><td style="text-align:left;">RemoteAddr</td><td style="text-align:left;">è¯·æ±‚è€…çš„ipå¿…é¡»æ˜¯æŒ‡å®šèŒƒå›´</td><td style="text-align:left;">- RemoteAddr=192.168.1.1/24</td></tr><tr><td style="text-align:left;">weight</td><td style="text-align:left;">æƒé‡å¤„ç†</td><td style="text-align:left;"></td></tr></tbody></table><h2 id="_2-ç½‘å…³ç™»å½•æ ¡éªŒ" tabindex="-1">2.ç½‘å…³ç™»å½•æ ¡éªŒ <a class="header-anchor" href="#_2-ç½‘å…³ç™»å½•æ ¡éªŒ" aria-label="Permalink to &quot;2.ç½‘å…³ç™»å½•æ ¡éªŒ&quot;">â€‹</a></h2><p>å•ä½“æ¶æ„æ—¶æˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€æ¬¡ç”¨æˆ·ç™»å½•ã€èº«ä»½æ ¡éªŒï¼Œå°±å¯ä»¥åœ¨æ‰€æœ‰ä¸šåŠ¡ä¸­è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚è€Œå¾®æœåŠ¡æ‹†åˆ†åï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸å†å…±äº«æ•°æ®ã€‚ä¹Ÿå°±æ„å‘³ç€æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦åšç™»å½•æ ¡éªŒï¼Œè¿™æ˜¾ç„¶ä¸å¯å–ã€‚</p><h3 id="_2-1-é‰´æƒæ€è·¯åˆ†æ" tabindex="-1">2.1.é‰´æƒæ€è·¯åˆ†æ <a class="header-anchor" href="#_2-1-é‰´æƒæ€è·¯åˆ†æ" aria-label="Permalink to &quot;2.1.é‰´æƒæ€è·¯åˆ†æ&quot;">â€‹</a></h3><p>æˆ‘ä»¬çš„ç™»å½•æ˜¯åŸºäºJWTæ¥å®ç°çš„ï¼Œæ ¡éªŒJWTçš„ç®—æ³•å¤æ‚ï¼Œè€Œä¸”éœ€è¦ç”¨åˆ°ç§˜é’¥ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½å»åšç™»å½•æ ¡éªŒï¼Œè¿™å°±å­˜åœ¨ç€ä¸¤å¤§é—®é¢˜ï¼š</p><ul><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦çŸ¥é“JWTçš„ç§˜é’¥ï¼Œä¸å®‰å…¨</li><li>æ¯ä¸ªå¾®æœåŠ¡é‡å¤ç¼–å†™ç™»å½•æ ¡éªŒä»£ç ã€æƒé™æ ¡éªŒä»£ç ï¼Œéº»çƒ¦</li></ul><p>æ—¢ç„¶ç½‘å…³æ˜¯æ‰€æœ‰å¾®æœåŠ¡çš„å…¥å£ï¼Œä¸€åˆ‡è¯·æ±‚éƒ½éœ€è¦å…ˆç»è¿‡ç½‘å…³ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠç™»å½•æ ¡éªŒçš„å·¥ä½œæ”¾åˆ°ç½‘å…³å»åšï¼Œè¿™æ ·ä¹‹å‰è¯´çš„é—®é¢˜å°±è§£å†³äº†ï¼š</p><ul><li>åªéœ€è¦åœ¨ç½‘å…³å’Œç”¨æˆ·æœåŠ¡ä¿å­˜ç§˜é’¥</li><li>åªéœ€è¦åœ¨ç½‘å…³å¼€å‘ç™»å½•æ ¡éªŒåŠŸèƒ½</li></ul><p>æ­¤æ—¶ï¼Œç™»å½•æ ¡éªŒçš„æµç¨‹å¦‚å›¾ï¼š</p><p><img src="/assets/image-20241207163941100.BFBxiYoX.png" alt="image-20241207163941100" loading="lazy"></p><p>ä¸è¿‡ï¼Œè¿™é‡Œå­˜åœ¨å‡ ä¸ª<strong>é—®é¢˜</strong>ï¼š</p><ul><li>ç½‘å…³è·¯ç”±æ˜¯é…ç½®çš„ï¼Œ<strong>è¯·æ±‚è½¬å‘</strong>æ˜¯Gatewayå†…éƒ¨ä»£ç ï¼Œæˆ‘ä»¬<strong>å¦‚ä½•åœ¨è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒ</strong>ï¼Ÿ</li><li>ç½‘å…³æ ¡éªŒJWTä¹‹åï¼Œå¦‚ä½•<strong>å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡</strong>ï¼Ÿ</li><li>å¾®æœåŠ¡ä¹‹é—´ä¹Ÿä¼š<strong>ç›¸äº’è°ƒç”¨</strong>ï¼Œè¿™ç§è°ƒç”¨ä¸ç»è¿‡ç½‘å…³ï¼Œåˆè¯¥å¦‚ä½•<strong>ä¼ é€’ç”¨æˆ·ä¿¡æ¯</strong>ï¼Ÿ</li></ul><p>è¿™äº›é—®é¢˜å°†åœ¨æ¥ä¸‹æ¥å‡ èŠ‚ä¸€ä¸€è§£å†³ã€‚</p><h3 id="_2-2-ç½‘å…³è¿‡æ»¤å™¨" tabindex="-1">2.2.ç½‘å…³è¿‡æ»¤å™¨ <a class="header-anchor" href="#_2-2-ç½‘å…³è¿‡æ»¤å™¨" aria-label="Permalink to &quot;2.2.ç½‘å…³è¿‡æ»¤å™¨&quot;">â€‹</a></h3><p>ç™»å½•æ ¡éªŒå¿…é¡»åœ¨è¯·æ±‚è½¬å‘åˆ°å¾®æœåŠ¡ä¹‹å‰åšï¼Œå¦åˆ™å°±å¤±å»äº†æ„ä¹‰ã€‚è€Œç½‘å…³çš„è¯·æ±‚è½¬å‘æ˜¯<code>Gateway</code>å†…éƒ¨ä»£ç å®ç°çš„ï¼Œè¦æƒ³åœ¨è¯·æ±‚è½¬å‘ä¹‹å‰åšç™»å½•æ ¡éªŒï¼Œå°±å¿…é¡»äº†è§£<code>Gateway</code>å†…éƒ¨å·¥ä½œçš„åŸºæœ¬åŸç†ã€‚</p><p><img src="/assets/image-20241207164206956.DEddXexQ.png" alt="image-20241207164206956" loading="lazy"></p><p>å¦‚å›¾æ‰€ç¤ºï¼š</p><ol><li>å®¢æˆ·ç«¯è¯·æ±‚è¿›å…¥ç½‘å…³åç”±<code>HandlerMapping</code>å¯¹è¯·æ±‚åšåˆ¤æ–­ï¼Œæ‰¾åˆ°ä¸å½“å‰è¯·æ±‚åŒ¹é…çš„è·¯ç”±è§„åˆ™ï¼ˆ<strong><code>Route</code></strong>ï¼‰ï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™<code>WebHandler</code>å»å¤„ç†ã€‚</li><li><code>WebHandler</code>åˆ™ä¼šåŠ è½½å½“å‰è·¯ç”±ä¸‹éœ€è¦æ‰§è¡Œçš„<strong>è¿‡æ»¤å™¨é“¾ï¼ˆ<code>Filter chain</code></strong>ï¼‰ï¼Œç„¶åæŒ‰ç…§é¡ºåºé€ä¸€æ‰§è¡Œè¿‡æ»¤å™¨ï¼ˆåé¢ç§°ä¸º**<code>Filter</code>**ï¼‰ã€‚</li><li>å›¾ä¸­<code>Filter</code>è¢«è™šçº¿åˆ†ä¸º<strong>å·¦å³ä¸¤éƒ¨åˆ†</strong>ï¼Œæ˜¯å› ä¸º<code>Filter</code>å†…éƒ¨çš„é€»è¾‘åˆ†ä¸º<code>pre</code>å’Œ<code>post</code>ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¼šåœ¨è¯·æ±‚è·¯ç”±åˆ°å¾®æœåŠ¡<strong>ä¹‹å‰</strong>å’Œ<strong>ä¹‹å</strong>è¢«æ‰§è¡Œã€‚</li><li>åªæœ‰æ‰€æœ‰<code>Filter</code>çš„<code>pre</code>é€»è¾‘éƒ½ä¾æ¬¡é¡ºåºæ‰§è¡Œé€šè¿‡åï¼Œè¯·æ±‚æ‰ä¼šè¢«è·¯ç”±åˆ°å¾®æœåŠ¡ã€‚</li><li>å¾®æœåŠ¡è¿”å›ç»“æœåï¼Œå†**<mark>å€’åºæ‰§è¡Œ</mark><code>Filter</code>çš„<code>post</code>é€»è¾‘**ã€‚</li><li>æœ€ç»ˆæŠŠå“åº”ç»“æœè¿”å›ã€‚</li></ol><p>å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæœ€ç»ˆè¯·æ±‚è½¬å‘æ˜¯æœ‰ä¸€ä¸ªåä¸º<code>NettyRoutingFilter</code>çš„è¿‡æ»¤å™¨æ¥æ‰§è¡Œçš„ï¼Œè€Œä¸”è¿™ä¸ªè¿‡æ»¤å™¨æ˜¯æ•´ä¸ªè¿‡æ»¤å™¨é“¾ä¸­é¡ºåºæœ€é åçš„ä¸€ä¸ªã€‚<strong>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œåœ¨å…¶ä¸­å®ç°ç™»å½•æ ¡éªŒé€»è¾‘ï¼Œå¹¶ä¸”å°†è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºå®šä¹‰åˆ°</strong><code>NettyRoutingFilter</code><strong>ä¹‹å‰</strong>ï¼Œè¿™å°±ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚äº†ï¼</p><p>é‚£ä¹ˆï¼Œè¯¥å¦‚ä½•å®ç°ä¸€ä¸ªç½‘å…³è¿‡æ»¤å™¨å‘¢ï¼Ÿ</p><p>ç½‘å…³è¿‡æ»¤å™¨é“¾ä¸­çš„è¿‡æ»¤å™¨æœ‰ä¸¤ç§ï¼š</p><ul><li><strong><code>GatewayFilter</code></strong>ï¼šè·¯ç”±è¿‡æ»¤å™¨ï¼Œä½œç”¨èŒƒå›´æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥æ˜¯ä»»æ„æŒ‡å®šçš„è·¯ç”±<code>Route</code>.</li></ul><p><img src="/assets/image-20241207170038280.D0EFNxkf.png" alt="image-20241207170038280" loading="lazy"></p><ul><li><strong><code>GlobalFilter</code></strong>ï¼šå…¨å±€è¿‡æ»¤å™¨ï¼Œä½œç”¨èŒƒå›´æ˜¯æ‰€æœ‰è·¯ç”±ï¼Œä¸å¯é…ç½®ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šè¿‡æ»¤å™¨é“¾ä¹‹å¤–è¿˜æœ‰ä¸€ç§è¿‡æ»¤å™¨ï¼ŒHttpHeadersFilterï¼Œç”¨æ¥å¤„ç†ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡çš„è¯·æ±‚å¤´ã€‚ä¾‹å¦‚org.springframework.cloud.gateway.filter.headers.XForwardedHeadersFilterå¯ä»¥<strong>ä¼ é€’ä»£ç†è¯·æ±‚åŸæœ¬çš„hostå¤´åˆ°ä¸‹æ¸¸å¾®æœåŠ¡</strong>ã€‚</p><p>å…¶å®<code>GatewayFilter</code>å’Œ<code>GlobalFilter</code>è¿™ä¸¤ç§è¿‡æ»¤å™¨çš„æ–¹æ³•ç­¾åå®Œå…¨ä¸€è‡´ï¼š</p><p><img src="/assets/image-20241207170005854.D6mxhdNs.png" alt="image-20241207170005854" loading="lazy"></p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å¤„ç†è¯·æ±‚å¹¶å°†å…¶ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> exchange</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ï¼Œå…¶ä¸­åŒ…å«requestã€responseç­‰å„ç§æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> chain</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> è¿‡æ»¤å™¨é“¾ï¼ŒåŸºäºå®ƒå‘ä¸‹ä¼ é€’è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> æ ¹æ®è¿”å›å€¼æ ‡è®°å½“å‰è¯·æ±‚æ˜¯å¦è¢«å®Œæˆæˆ–æ‹¦æˆªï¼Œä½¿ç”¨chain.filter(exchange)æ”¾è¡Œï¼Œ(å°†exchangeä¸Šä¸‹æ–‡ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨)ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Mono</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Void</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange exchange, GatewayFilterChain chain);</span></span></code></pre></div><p><img src="/assets/image-20241207170502680.s3arcyCr.png" alt="image-20241207170502680" loading="lazy"></p><p><code>FilteringWebHandler</code>åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œä¼šå°†<code>GlobalFilter</code>è£…é¥°ä¸º<code>GatewayFilter</code>ï¼Œç„¶åæ”¾åˆ°åŒä¸€ä¸ªè¿‡æ»¤å™¨é“¾ä¸­ï¼Œæ’åºä»¥åä¾æ¬¡æ‰§è¡Œã€‚</p><p><code>Gateway</code>ä¸­å†…ç½®äº†å¾ˆå¤šçš„<code>GatewayFilter</code>ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories" target="_blank" rel="noreferrer">https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories</a></p><p><code>Gateway</code>å†…ç½®çš„<code>GatewayFilter</code>è¿‡æ»¤å™¨ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œæ— éœ€ç¼–ç ï¼Œåªè¦åœ¨yamlæ–‡ä»¶ä¸­ç®€å•é…ç½®å³å¯ã€‚è€Œä¸”å…¶ä½œç”¨èŒƒå›´ä¹Ÿå¾ˆçµæ´»ï¼Œé…ç½®åœ¨å“ªä¸ª<code>Route</code>ä¸‹ï¼Œå°±ä½œç”¨äºå“ªä¸ª<code>Route</code>.</p><p>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªè¿‡æ»¤å™¨å«åš<code>AddRequestHeaderGatewayFilterFacotry</code>ï¼Œé¡¾æ˜æ€è®®ï¼Œå°±æ˜¯<strong>æ·»åŠ è¯·æ±‚å¤´çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç»™è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´å¹¶ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡ã€‚</strong></p><p>ä½¿ç”¨çš„ä½¿ç”¨åªéœ€è¦åœ¨application.yamlä¸­è¿™æ ·é…ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      routes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test_route</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://test-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          -Path=/test/**</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=key, value</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # é€—å·ä¹‹å‰æ˜¯è¯·æ±‚å¤´çš„keyï¼Œé€—å·ä¹‹åæ˜¯value</span></span></code></pre></div><p>å¦‚æœæƒ³è¦è®©è¿‡æ»¤å™¨<strong>ä½œç”¨äºæ‰€æœ‰çš„è·¯ç”±</strong>ï¼Œåˆ™å¯ä»¥è¿™æ ·é…ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default-filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># default-filtersä¸‹çš„è¿‡æ»¤å™¨å¯ä»¥ä½œç”¨äºæ‰€æœ‰è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AddRequestHeader=key, value</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      routes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">test_route</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://test-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          -Path=/test/**</span></span></code></pre></div><h3 id="_2-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨" tabindex="-1">2.3.è‡ªå®šä¹‰è¿‡æ»¤å™¨ <a class="header-anchor" href="#_2-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨" aria-label="Permalink to &quot;2.3.è‡ªå®šä¹‰è¿‡æ»¤å™¨&quot;">â€‹</a></h3><p>æ— è®ºæ˜¯<code>GatewayFilter</code>è¿˜æ˜¯<code>GlobalFilter</code>éƒ½æ”¯æŒè‡ªå®šä¹‰ï¼Œåªä¸è¿‡<strong>ç¼–ç </strong>æ–¹å¼ã€<strong>ä½¿ç”¨</strong>æ–¹å¼ç•¥æœ‰å·®åˆ«ã€‚</p><h4 id="_2-3-1-è‡ªå®šä¹‰gatewayfilter" tabindex="-1">2.3.1.è‡ªå®šä¹‰GatewayFilter <a class="header-anchor" href="#_2-3-1-è‡ªå®šä¹‰gatewayfilter" aria-label="Permalink to &quot;2.3.1.è‡ªå®šä¹‰GatewayFilter&quot;">â€‹</a></h4><h5 id="_1-ä¸å¸¦å‚æ•°" tabindex="-1">ï¼ˆ1ï¼‰ä¸å¸¦å‚æ•° <a class="header-anchor" href="#_1-ä¸å¸¦å‚æ•°" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰ä¸å¸¦å‚æ•°&quot;">â€‹</a></h5><p><img src="/assets/image-20241207171653674.LZITa9DK.png" alt="image-20241207171653674" loading="lazy"></p><p>è‡ªå®šä¹‰<code>GatewayFilter</code>ä¸æ˜¯ç›´æ¥å®ç°<code>GatewayFilter</code>ï¼Œè€Œæ˜¯å®ç°<code>AbstractGatewayFilterFactory</code>ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrintAnyGatewayFilterFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractGatewayFilterFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GatewayFilter </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // è·å–è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ServerHttpRequest request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ç¼–å†™è¿‡æ»¤å™¨é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿‡æ»¤å™¨æ‰§è¡Œäº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //å¦‚æœéœ€è¦è€ƒè™‘ä¸åŒè‡ªå®šä¹‰è¿‡æ»¤å™¨çš„ä¼˜å…ˆçº§ï¼Œéœ€è¦ä½¿ç”¨GateWayFilterçš„è£…é¥°ç±»OrderedGatewayFilter</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GatewayFilter </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Config </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // OrderedGatewayFilteræ˜¯GatewayFilterçš„å­ç±»ï¼ŒåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // - GatewayFilterï¼šè¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // - int orderå€¼ï¼šå€¼è¶Šå°ï¼Œè¿‡æ»¤å™¨æ‰§è¡Œä¼˜å…ˆçº§è¶Šé«˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderedGatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><img src="/assets/image-20241207172614130.BcSkWZ1f.png" alt="image-20241207172614130" loading="lazy"></p><p><img src="/assets/image-20241207172419306.ClGBUCke.png" alt="image-20241207172419306" loading="lazy"></p><p><strong>æ³¨æ„</strong>ï¼š<strong>è¯¥ç±»çš„åç§°</strong>ä¸€å®šè¦ä»¥<code>GatewayFilterFactory</code>ä¸º<strong>åç¼€</strong>ï¼</p><p>ç„¶ååœ¨yamlé…ç½®ä¸­è¿™æ ·ä½¿ç”¨ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default-filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PrintAny</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ­¤å¤„ç›´æ¥ä»¥è‡ªå®šä¹‰çš„GatewayFilterFactoryç±»åç§°å‰ç¼€ç±»å£°æ˜è¿‡æ»¤å™¨</span></span></code></pre></div><h5 id="_2-å¸¦å‚æ•°" tabindex="-1">ï¼ˆ2ï¼‰å¸¦å‚æ•° <a class="header-anchor" href="#_2-å¸¦å‚æ•°" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å¸¦å‚æ•°&quot;">â€‹</a></h5><p><img src="/assets/image-20241207173015850.DwZ0qDZF.png" alt="image-20241207173015850" loading="lazy"></p><p>å¦å¤–ï¼Œè¿™ç§è¿‡æ»¤å™¨è¿˜å¯ä»¥æ”¯æŒåŠ¨æ€é…ç½®å‚æ•°ï¼Œä¸è¿‡å®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œç¤ºä¾‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrintAnyGatewayFilterFactory</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // çˆ¶ç±»æ³›å‹æ˜¯å†…éƒ¨ç±»çš„Configç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbstractGatewayFilterFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PrintAnyGatewayFilterFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GatewayFilter </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Config </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // OrderedGatewayFilteræ˜¯GatewayFilterçš„å­ç±»ï¼ŒåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // - GatewayFilterï¼šè¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // - int orderå€¼ï¼šå€¼è¶Šå°ï¼Œè¿‡æ»¤å™¨æ‰§è¡Œä¼˜å…ˆçº§è¶Šé«˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderedGatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GatewayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // è·å–configå€¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                String a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                String b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                String c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // ç¼–å†™è¿‡æ»¤å™¨é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è‡ªå®šä¹‰é…ç½®å±æ€§ï¼Œæˆå‘˜å˜é‡åç§°å¾ˆé‡è¦ï¼Œä¸‹é¢ä¼šç”¨åˆ°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String a;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String b;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String c;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å°†å˜é‡åç§°ä¾æ¬¡è¿”å›ï¼Œé¡ºåºå¾ˆé‡è¦ï¼Œå°†æ¥è¯»å–å‚æ•°æ—¶éœ€è¦æŒ‰é¡ºåºè·å–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shortcutFieldOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;c&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è¿”å›å½“å‰é…ç½®ç±»çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å†…éƒ¨çš„Config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConfigClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Config.class;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç„¶ååœ¨yamlæ–‡ä»¶ä¸­ä½¿ç”¨ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default-filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PrintAny=1,2,3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ³¨æ„ï¼Œè¿™é‡Œå¤šä¸ªå‚æ•°ä»¥&quot;,&quot;éš”å¼€ï¼Œå°†æ¥ä¼šæŒ‰ç…§shortcutFieldOrder()æ–¹æ³•è¿”å›çš„å‚æ•°é¡ºåºä¾æ¬¡å¤åˆ¶</span></span></code></pre></div><p>ä¸Šé¢è¿™ç§é…ç½®æ–¹å¼å‚æ•°å¿…é¡»ä¸¥æ ¼æŒ‰ç…§shortcutFieldOrder()æ–¹æ³•çš„è¿”å›å‚æ•°åé¡ºåºæ¥èµ‹å€¼ã€‚</p><p>è¿˜æœ‰ä¸€ç§ç”¨æ³•ï¼Œæ— éœ€æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œå°±æ˜¯æ‰‹åŠ¨æŒ‡å®šå‚æ•°åï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default-filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PrintAny</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">              args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰‹åŠ¨æŒ‡å®šå‚æ•°åï¼Œæ— éœ€æŒ‰ç…§å‚æ•°é¡ºåº</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">                a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">                b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">                c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span></code></pre></div><h4 id="_2-3-2-è‡ªå®šä¹‰globalfilter" tabindex="-1">2.3.2.è‡ªå®šä¹‰GlobalFilter <a class="header-anchor" href="#_2-3-2-è‡ªå®šä¹‰globalfilter" aria-label="Permalink to &quot;2.3.2.è‡ªå®šä¹‰GlobalFilter&quot;">â€‹</a></h4><p><img src="/assets/image-20241207171330869.DCQ9hJEA.png" alt="image-20241207171330869" loading="lazy"></p><p>è‡ªå®šä¹‰GlobalFilteråˆ™ç®€å•å¾ˆå¤šï¼Œç›´æ¥å®ç°GlobalFilterå³å¯ï¼Œè€Œä¸”<strong>ä¹Ÿæ— æ³•è®¾ç½®åŠ¨æ€å‚æ•°</strong>ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrintAnyGlobalFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlobalFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ordered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç¼–å†™è¿‡æ»¤å™¨é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœªç™»å½•ï¼Œæ— æ³•è®¿é—®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // return chain.filter(exchange);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ‹¦æˆª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerHttpResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRawStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">401</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºï¼Œå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> xiaopeng</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@version</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 1.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyGlobalFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlobalFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ordered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //1.è·å–è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerHttpRequest request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //2.è¿‡æ»¤å™¨ä¸šåŠ¡å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GlobalFilter pre é˜¶æ®µæ‰§è¡Œäº†ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //3.æ”¾è¡Œ--ç»§ç»­æ‰§è¡Œè¿‡æ»¤å™¨é“¾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºï¼Œå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-4-ç™»å½•æ ¡éªŒ" tabindex="-1">2.4.ç™»å½•æ ¡éªŒ <a class="header-anchor" href="#_2-4-ç™»å½•æ ¡éªŒ" aria-label="Permalink to &quot;2.4.ç™»å½•æ ¡éªŒ&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨è‡ªå®šä¹‰<code>GlobalFilter</code>æ¥å®Œæˆç™»å½•æ ¡éªŒã€‚</p><h5 id="_2-4-1-jwtå·¥å…·" tabindex="-1">2.4.1.JWTå·¥å…· <a class="header-anchor" href="#_2-4-1-jwtå·¥å…·" aria-label="Permalink to &quot;2.4.1.JWTå·¥å…·&quot;">â€‹</a></h5><p>ç™»å½•æ ¡éªŒéœ€è¦ç”¨åˆ°JWTï¼Œè€Œä¸”JWTçš„åŠ å¯†éœ€è¦ç§˜é’¥å’ŒåŠ å¯†å·¥å…·ã€‚è¿™äº›åœ¨<code>hm-service</code>ä¸­å·²ç»æœ‰äº†ï¼Œæˆ‘ä»¬ç›´æ¥æ‹·è´è¿‡æ¥ï¼š</p><p><img src="/assets/1733560251384-187.C93Ynet9.png" alt="img" loading="lazy"></p><p>å…·ä½“ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li><code>AuthProperties</code>ï¼šé…ç½®ç™»å½•æ ¡éªŒéœ€è¦æ‹¦æˆªçš„è·¯å¾„ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„è·¯å¾„éƒ½éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®</li><li><code>JwtProperties</code>ï¼šå®šä¹‰ä¸JWTå·¥å…·æœ‰å…³çš„å±æ€§ï¼Œæ¯”å¦‚ç§˜é’¥æ–‡ä»¶ä½ç½®</li><li><code>SecurityConfig</code>ï¼šå·¥å…·çš„è‡ªåŠ¨è£…é…</li><li><code>JwtTool</code>ï¼šJWTå·¥å…·ï¼Œå…¶ä¸­åŒ…å«äº†æ ¡éªŒå’Œè§£æ<code>token</code>çš„åŠŸèƒ½</li><li><code>hmall.jks</code>ï¼šç§˜é’¥æ–‡ä»¶</li></ul><p>å…¶ä¸­<code>AuthProperties</code>å’Œ<code>JwtProperties</code>æ‰€éœ€çš„å±æ€§è¦åœ¨<code>application.yaml</code>ä¸­é…ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #é…ç½®jwtå¯†é’¥æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  jwt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">classpath:hmall.jks</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç§˜é’¥åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç§˜é’¥åˆ«å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç§˜é’¥æ–‡ä»¶å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    tokenTTL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30m</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç™»å½•æœ‰æ•ˆæœŸ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # é…ç½®ç™»å½•æ ¡éªŒç™½åå•</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    excludePaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ— éœ€ç™»å½•æ ¡éªŒçš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/search/**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/users/login</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/items/**</span></span></code></pre></div><h5 id="_2-4-2-ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨" tabindex="-1">2.4.2.ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨ <a class="header-anchor" href="#_2-4-2-ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨" aria-label="Permalink to &quot;2.4.2.ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨&quot;">â€‹</a></h5><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç™»å½•æ ¡éªŒçš„è¿‡æ»¤å™¨ï¼š</p><p><img src="/assets/1733560251380-1.DPyZjYCD.png" alt="img" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241208162631081.CRu8-nLP.png" alt="image-20241208162631081" loading="lazy"></p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.gateway.filter;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.exception.UnauthorizedException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.CollUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.gateway.config.AuthProperties;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.gateway.util.JwtTool;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.context.properties.EnableConfigurationProperties;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.filter.GlobalFilter;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.Ordered;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.http.server.reactive.ServerHttpRequest;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.http.server.reactive.ServerHttpResponse;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.util.AntPathMatcher;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.server.ServerWebExchange;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reactor.core.publisher.Mono;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequiredArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableConfigurationProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AuthProperties.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthGlobalFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlobalFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ordered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtTool jwtTool;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthProperties authProperties;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AntPathMatcher antPathMatcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AntPathMatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.è·å–Request</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerHttpRequest request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ¤æ–­æ˜¯å¦ä¸éœ€è¦æ‹¦æˆª</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isExclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æ— éœ€æ‹¦æˆªï¼Œç›´æ¥æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.è·å–è¯·æ±‚å¤´ä¸­çš„token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHeaders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(headers)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> headers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.æ ¡éªŒå¹¶è§£ætoken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwtTool.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (UnauthorizedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¦‚æœæ— æ•ˆï¼Œæ‹¦æˆª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ServerHttpResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRawStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">401</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // TODO 5.å¦‚æœæœ‰æ•ˆï¼Œä¼ é€’ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userId = &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userId);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 6.æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isExclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">antPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (String pathPattern </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExcludePaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(antPathMatcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pathPattern, antPath)){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>é‡å¯æµ‹è¯•ï¼Œä¼šå‘ç°è®¿é—®/itemså¼€å¤´çš„è·¯å¾„ï¼Œæœªç™»å½•çŠ¶æ€ä¸‹ä¸ä¼šè¢«æ‹¦æˆªï¼š</p><p><img src="/assets/1733560251381-2.JcfJQ5Ok.png" alt="img" loading="lazy"></p><p>è®¿é—®å…¶ä»–è·¯å¾„åˆ™ï¼Œæœªç™»å½•çŠ¶æ€ä¸‹è¯·æ±‚ä¼šè¢«æ‹¦æˆªï¼Œå¹¶ä¸”è¿”å›<code>401</code>çŠ¶æ€ç ï¼š</p><p><img src="/assets/1733560251381-3.2Sq_ZyWa.png" alt="img" loading="lazy"></p><h3 id="_2-5-å¾®æœåŠ¡è·å–ç”¨æˆ·" tabindex="-1">2.5.å¾®æœåŠ¡è·å–ç”¨æˆ· <a class="header-anchor" href="#_2-5-å¾®æœåŠ¡è·å–ç”¨æˆ·" aria-label="Permalink to &quot;2.5.å¾®æœåŠ¡è·å–ç”¨æˆ·&quot;">â€‹</a></h3><p>ç°åœ¨ï¼Œç½‘å…³å·²ç»å¯ä»¥å®Œæˆç™»å½•æ ¡éªŒå¹¶è·å–ç™»å½•ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚ä½†æ˜¯<strong>å½“ç½‘å…³å°†è¯·æ±‚è½¬å‘åˆ°å¾®æœåŠ¡æ—¶ï¼Œå¾®æœåŠ¡åˆè¯¥å¦‚ä½•è·å–ç”¨æˆ·èº«ä»½å‘¢ï¼Ÿ</strong></p><p>ç”±äºç½‘å…³å‘é€è¯·æ±‚åˆ°å¾®æœåŠ¡ä¾ç„¶é‡‡ç”¨çš„æ˜¯**<code>Http</code>è¯·æ±‚**ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯<strong>ä»¥è¯·æ±‚å¤´çš„æ–¹å¼ä¼ é€’åˆ°ä¸‹æ¸¸å¾®æœåŠ¡</strong>ã€‚ç„¶åå¾®æœåŠ¡å¯ä»¥ä»è¯·æ±‚å¤´ä¸­è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚è€ƒè™‘åˆ°<strong>å¾®æœåŠ¡å†…éƒ¨å¯èƒ½å¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ç”¨åˆ°ç™»å½•ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥<strong>åˆ©ç”¨SpringMVCçš„æ‹¦æˆªå™¨æ¥å®ç°ç™»å½•ç”¨æˆ·ä¿¡æ¯è·å–ï¼Œå¹¶å­˜å…¥ThreadLocalï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚</strong></p><p>æ®å›¾æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241208173138633.DSQ7RIpC.png" alt="image-20241208173138633" loading="lazy"></p><p><img src="/assets/1733560251381-4.tYtolS7X.jpeg" alt="img" loading="lazy"></p><p>å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„äº‹æƒ…æœ‰ï¼š</p><ul><li>æ”¹é€ ç½‘å…³è¿‡æ»¤å™¨ï¼Œåœ¨è·å–ç”¨æˆ·ä¿¡æ¯åä¿å­˜åˆ°è¯·æ±‚å¤´ï¼Œè½¬å‘åˆ°ä¸‹æ¸¸å¾®æœåŠ¡</li><li>ç¼–å†™å¾®æœåŠ¡æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªè¯·æ±‚è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä¿å­˜åˆ°ThreadLocalåæ”¾è¡Œ</li></ul><h4 id="_2-5-1-ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´" tabindex="-1">2.5.1.ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´ <a class="header-anchor" href="#_2-5-1-ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´" aria-label="Permalink to &quot;2.5.1.ä¿å­˜ç”¨æˆ·åˆ°è¯·æ±‚å¤´&quot;">â€‹</a></h4><p><img src="/assets/image-20241208173503498.CxAdHDBR.png" alt="image-20241208173503498" loading="lazy"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¿®æ”¹ç™»å½•æ ¡éªŒæ‹¦æˆªå™¨çš„å¤„ç†é€»è¾‘ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°è¯·æ±‚å¤´ä¸­ï¼š</p><p><img src="/assets/1733560251381-5.DXCS1XE7.png" alt="img" loading="lazy"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Jwtç™»å½•æ ¡éªŒå…¨å±€è¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> xiaopeng</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@version</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 1.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequiredArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableConfigurationProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AuthProperties.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthGlobalFilter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlobalFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ordered</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AuthProperties authProperties;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtTool jwtTool;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //Spring Framework æä¾›çš„ä¸€ä¸ªè·¯å¾„åŒ¹é…å·¥å…·ç±»ï¼Œç”¨äºå¤„ç†è·¯å¾„æ¨¡å¼çš„åŒ¹é…æ“ä½œã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //å®ƒæ”¯æŒé€šé…ç¬¦åŒ¹é…ã€è·¯å¾„å˜é‡è§£æç­‰åŠŸèƒ½ï¼Œå¸¸ç”¨äº Web åº”ç”¨ç¨‹åºä¸­å¤„ç† URL è·¯å¾„çš„åŒ¹é…è§„åˆ™ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AntPathMatcher antPathMatcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AntPathMatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServerWebExchange </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exchange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, GatewayFilterChain </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.è·å–Request</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerHttpRequest request </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ¤æ–­æ˜¯å¦ä¸éœ€è¦æ‹¦æˆª</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isExclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æ— éœ€æ‹¦æˆªï¼Œç›´æ¥æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(exchange);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.è·å–è¯·æ±‚å¤´ä¸­çš„token</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; authorization </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHeaders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authorization)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authorization.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 4.æ ¡éªŒå¹¶è§£ætoken</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Long userId;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwtTool.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (UnauthorizedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //å¦‚æœæ— æ•ˆï¼Œæ‹¦æˆª</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ServerHttpResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            //è®¾ç½®401ç™»å½•é”™è¯¯ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.UNAUTHORIZED);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 5.å¦‚æœæœ‰æ•ˆï¼Œå°†åœ¨ç½‘å…³è·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé€šè¿‡è¯·æ±‚å¤´çš„æ–¹å¼ä¼ é€’ç»™å…¶ä»–å¾®æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String userInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userId.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ServerWebExchange ex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> exchange.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mutate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(builder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> builder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userInfo))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 6.æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * ä½¿ç”¨è·¯å¾„åŒ¹é…å·¥å…·AntPathMatcher,åˆ¤æ–­æ˜¯å¦åŒ…æ‹¬ç™½åå•è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> antPath</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isExclude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">antPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (String pathPattern </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExcludePaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (antPathMatcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pathPattern, antPath)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-5-2-æ‹¦æˆªå™¨è·å–ç”¨æˆ·" tabindex="-1">2.5.2.æ‹¦æˆªå™¨è·å–ç”¨æˆ· <a class="header-anchor" href="#_2-5-2-æ‹¦æˆªå™¨è·å–ç”¨æˆ·" aria-label="Permalink to &quot;2.5.2.æ‹¦æˆªå™¨è·å–ç”¨æˆ·&quot;">â€‹</a></h4><p>åœ¨hm-commonä¸­å·²ç»æœ‰ä¸€ä¸ªç”¨äºä¿å­˜ç™»å½•ç”¨æˆ·çš„ThreadLocalå·¥å…·ï¼š</p><p><img src="/assets/1733560251381-6.DUVTqLvc.png" alt="img" loading="lazy"></p><p>å…¶ä¸­å·²ç»æä¾›äº†ä¿å­˜å’Œè·å–ç”¨æˆ·çš„æ–¹æ³•ï¼š</p><p><img src="/assets/1733560251381-7.CHJudbDn.png" alt="img" loading="lazy"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™æ‹¦æˆªå™¨ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯å¹¶ä¿å­˜åˆ°<code>UserContext</code>ï¼Œç„¶åæ”¾è¡Œå³å¯ã€‚</p><p>ç”±äºæ¯ä¸ªå¾®æœåŠ¡<strong>éƒ½æœ‰è·å–ç™»å½•ç”¨æˆ·çš„éœ€æ±‚</strong>ï¼Œå› æ­¤==<strong>æ‹¦æˆªå™¨æˆ‘ä»¬ç›´æ¥å†™åœ¨<code>hm-common</code>ä¸­</strong>ï¼Œ<strong>å¹¶å†™å¥½è‡ªåŠ¨è£…é…ã€‚</strong>==è¿™æ ·å¾®æœåŠ¡åªéœ€è¦å¼•å…¥<code>hm-common</code>å°±<strong>å¯ä»¥ç›´æ¥å…·å¤‡æ‹¦æˆªå™¨åŠŸèƒ½</strong>ï¼Œæ— éœ€é‡å¤ç¼–å†™ã€‚</p><p>æˆ‘ä»¬åœ¨<code>hm-common</code>æ¨¡å—ä¸‹å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ï¼š</p><p><img src="/assets/1733560251381-8.DHwVC9x5.png" alt="img" loading="lazy"></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.interceptor;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.util.StrUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.UserContext;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.servlet.HandlerInterceptor;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.servlet.http.HttpServletRequest;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.servlet.http.HttpServletResponse;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserInfoInterceptor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HandlerInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> preHandle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, HttpServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.è·å–è¯·æ±‚å¤´ä¸­çš„ç”¨æˆ·ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String userInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> request.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (StrUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isNotBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userInfo)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ä¸ä¸ºç©ºï¼Œä¿å­˜åˆ°ThreadLocal</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">valueOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userInfo));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.æ”¾è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> afterCompletion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, HttpServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç§»é™¤ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ¥ç€åœ¨<code>hm-common</code>æ¨¡å—ä¸‹ç¼–å†™<code>SpringMVC</code>çš„é…ç½®ç±»ï¼Œé…ç½®ç™»å½•æ‹¦æˆªå™¨ï¼š</p><p><img src="/assets/1733560251381-9.DymdDCzM.png" alt="img" loading="lazy"></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><p>ç”±äº<strong>ç½‘å…³æœåŠ¡hm-serviceä¸­æ²¡æœ‰ä½¿ç”¨åˆ°Spring MVC</strong>ï¼Œä½†æ˜¯è¯¥é…ç½®ç±»æ˜¯å†™åœ¨hm-cmomonæ¨¡å—ä¸­çš„ï¼Œè¿™æ˜¯ç”±äºå…¶ä»–å¾®æœåŠ¡å’Œç½‘å…³æœåŠ¡éƒ½éœ€è¦ä¾èµ–commonæ¨¡å—ä¸­çš„ç±»ï¼Œæ‰€ä»¥ç½‘å…³æ¨¡å—ä¹Ÿä¸å¾—ä¸ä¾èµ–hm-commonæ¨¡å—ï¼›ä½†æ˜¯<strong>é…ç½®ç±»ä¸­WebMvcConfigureræ˜¯å±äºSpring MVCçš„</strong>ï¼Œå¦‚æœåœ¨ç½‘å…³æœåŠ¡ä¸­ï¼Œä»ç„¶æŠŠè¯¥é…ç½®ç±»ä¸­çš„Beanå¯¹è±¡æ³¨å…¥åˆ°Springå®¹å™¨ä¸­ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨**@ConditionalOnClassæ³¨è§£**æ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p><p><img src="/assets/image-20241208180602189.CQTuYaWt.png" alt="image" loading="lazy"></p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.config;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.interceptors.UserInfoInterceptor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.Configuration;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.servlet.DispatcherServlet;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConditionalOnClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(DispatcherServlet.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MvcConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebMvcConfigurer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addInterceptors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(InterceptorRegistry </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">registry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        registry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserInfoInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>è¿™ä¸ª<mark>é…ç½®ç±»é»˜è®¤æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„</mark></strong>ï¼Œ<strong>å› ä¸ºå®ƒæ‰€åœ¨çš„åŒ…æ˜¯<code>com.hmall.common.config</code>ï¼Œ<mark>ä¸å…¶å®ƒå¾®æœåŠ¡çš„æ‰«æåŒ…ä¸ä¸€è‡´</mark>ï¼Œæ— æ³•è¢«æ‰«æåˆ°ï¼Œå› æ­¤æ— æ³•ç”Ÿæ•ˆã€‚</strong></p><p>åŸºäºSpringBootçš„è‡ªåŠ¨è£…é…åŸç†ï¼Œæˆ‘ä»¬è¦å°†å…¶æ·»åŠ åˆ°<code>resources</code>ç›®å½•ä¸‹çš„<code>META-INF/spring.factories</code>æ–‡ä»¶ä¸­ï¼š</p><p><img src="/assets/1733560251381-10.BnOaDlO5.png" alt="img" loading="lazy"></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-Properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  com.hmall.common.config.MyBatisConfig,\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  com.hmall.common.config.MvcConfig,\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  com.hmall.common.config.JsonConfig</span></span></code></pre></div><h4 id="_2-5-3-æ¢å¤è´­ç‰©è½¦ä»£ç " tabindex="-1">2.5.3.æ¢å¤è´­ç‰©è½¦ä»£ç  <a class="header-anchor" href="#_2-5-3-æ¢å¤è´­ç‰©è½¦ä»£ç " aria-label="Permalink to &quot;2.5.3.æ¢å¤è´­ç‰©è½¦ä»£ç &quot;">â€‹</a></h4><p>ä¹‹å‰æˆ‘ä»¬æ— æ³•è·å–ç™»å½•ç”¨æˆ·ï¼Œæ‰€ä»¥æŠŠè´­ç‰©è½¦æœåŠ¡çš„ç™»å½•ç”¨æˆ·å†™æ­»äº†ï¼Œç°åœ¨éœ€è¦æ¢å¤åˆ°åŸæ¥çš„æ ·å­ã€‚</p><p>æ‰¾åˆ°<code>cart-service</code>æ¨¡å—çš„<code>com.hmall.cart.service.impl.CartServiceImpl</code>ï¼š</p><p><img src="/assets/1733560251381-11.DHekzjSv.png" alt="img" loading="lazy"></p><p>ä¿®æ”¹å…¶ä¸­çš„<code>queryMyCarts</code>æ–¹æ³•ï¼š</p><p><img src="/assets/1733560251381-12.BOwX518d.png" alt="img" loading="lazy"></p><h3 id="_2-6-openfeignä¼ é€’ç”¨æˆ·ä¿¡æ¯" tabindex="-1">2.6.OpenFeign<mark>ä¼ é€’ç”¨æˆ·ä¿¡æ¯</mark> <a class="header-anchor" href="#_2-6-openfeignä¼ é€’ç”¨æˆ·ä¿¡æ¯" aria-label="Permalink to &quot;2.6.OpenFeign==ä¼ é€’ç”¨æˆ·ä¿¡æ¯==&quot;">â€‹</a></h3><p>å‰ç«¯å‘èµ·çš„è¯·æ±‚éƒ½ä¼šç»è¿‡ç½‘å…³å†åˆ°å¾®æœåŠ¡ï¼Œç”±äºæˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨åŠŸèƒ½ï¼Œå¾®æœåŠ¡å¯ä»¥è½»æ¾è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ä½†æœ‰äº›ä¸šåŠ¡æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œè¯·æ±‚åˆ°è¾¾å¾®æœåŠ¡åè¿˜<strong>éœ€è¦è°ƒç”¨å…¶å®ƒå¤šä¸ªå¾®æœåŠ¡</strong>ã€‚æ¯”å¦‚ä¸‹å•ä¸šåŠ¡ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="/assets/1733560251381-13.Ct9_aYId.jpeg" alt="img" loading="lazy"></p><p>ä¸‹å•çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è°ƒç”¨å•†å“æœåŠ¡æ‰£å‡åº“å­˜ï¼Œè°ƒç”¨è´­ç‰©è½¦æœåŠ¡æ¸…ç†ç”¨æˆ·è´­ç‰©è½¦ã€‚è€Œæ¸…ç†è´­ç‰©è½¦æ—¶å¿…é¡»çŸ¥é“å½“å‰ç™»å½•çš„ç”¨æˆ·èº«ä»½ã€‚ä½†æ˜¯ï¼Œ<strong>è®¢å•æœåŠ¡è°ƒç”¨è´­ç‰©è½¦æ—¶å¹¶æ²¡æœ‰ä¼ é€’ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œè´­ç‰©è½¦æœåŠ¡æ— æ³•çŸ¥é“å½“å‰ç”¨æˆ·æ˜¯è°ï¼</p><p>ç”±äºå¾®æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯æ˜¯é€šè¿‡æ‹¦æˆªå™¨åœ¨è¯·æ±‚å¤´ä¸­è¯»å–ï¼Œå› æ­¤è¦æƒ³å®ç°å¾®æœåŠ¡ä¹‹é—´çš„ç”¨æˆ·ä¿¡æ¯ä¼ é€’ï¼Œå°±<strong>å¿…é¡»åœ¨å¾®æœåŠ¡å‘èµ·è°ƒç”¨æ—¶æŠŠç”¨æˆ·ä¿¡æ¯å­˜å…¥è¯·æ±‚å¤´</strong>ã€‚</p><p>å¾®æœåŠ¡ä¹‹é—´è°ƒç”¨æ˜¯åŸºäºOpenFeignæ¥å®ç°çš„ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å‘é€çš„è¯·æ±‚ã€‚æˆ‘ä»¬å¦‚ä½•æ‰èƒ½è®©æ¯ä¸€ä¸ªç”±OpenFeignå‘èµ·çš„è¯·æ±‚è‡ªåŠ¨æºå¸¦ç™»å½•ç”¨æˆ·ä¿¡æ¯å‘¢ï¼Ÿ</p><p>è¿™é‡Œè¦å€ŸåŠ©Feignä¸­æä¾›çš„ä¸€ä¸ª<strong>æ‹¦æˆªå™¨æ¥å£ï¼š<code>feign.RequestInterceptor</code></strong></p><p><img src="/assets/image-20241208221302444.CPgWUQgU.png" alt="image-20241208221302444" loading="lazy"></p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RequestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * Called for every request. </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * Add data using methods on the supplied {@link RequestTemplate}.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RequestTemplate </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æˆ‘ä»¬åªéœ€è¦å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶åå®ç°applyæ–¹æ³•ï¼Œåˆ©ç”¨<code>RequestTemplate</code>ç±»æ¥æ·»åŠ è¯·æ±‚å¤´ï¼Œå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°è¯·æ±‚å¤´ä¸­ã€‚è¿™æ ·ä»¥æ¥ï¼Œæ¯æ¬¡OpenFeignå‘èµ·è¯·æ±‚çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¼ é€’ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>ç”±äº<code>FeignClient</code>å…¨éƒ¨éƒ½æ˜¯åœ¨<code>hm-api</code>æ¨¡å—ï¼Œå› æ­¤æˆ‘ä»¬<strong>åœ¨<code>hm-api</code>æ¨¡å—</strong>çš„<code>com.hmall.api.config.DefaultFeignConfig</code>ä¸­ç¼–å†™è¿™ä¸ªæ‹¦æˆªå™¨ï¼š</p><p><img src="/assets/1733560251381-14.DAtc8_Nx.png" alt="img" loading="lazy"></p><p>åœ¨<code>com.hmall.api.config.DefaultFeignConfig</code>ä¸­æ·»åŠ ä¸€ä¸ªBeanï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * ç”¨äºå¾®æœåŠ¡ä¸å¾®æœåŠ¡ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œä¼ é€’ç”¨æˆ·id</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * feignæ‹¦æˆªå™¨ï¼Œå°†ç”¨æˆ·ä¿¡æ¯æ”¾å…¥è¯·æ±‚å¤´ä¸­ä¼ é€’ç»™ä¸‹æ¸¸å¾®æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RequestInterceptor </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userInfoRequestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RequestInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RequestTemplate </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // è·å–ç™»å½•ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Long userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // å¦‚æœä¸ºç©ºåˆ™ç›´æ¥è·³è¿‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // å¦‚æœä¸ä¸ºç©ºåˆ™æ”¾å…¥è¯·æ±‚å¤´ä¸­ï¼Œä¼ é€’ç»™ä¸‹æ¸¸å¾®æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                template.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, userId.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>å¥½äº†ï¼Œç°åœ¨å¾®æœåŠ¡ä¹‹é—´é€šè¿‡OpenFeignè°ƒç”¨æ—¶ä¹Ÿä¼šä¼ é€’ç™»å½•ç”¨æˆ·ä¿¡æ¯äº†ã€‚</p><p><img src="/assets/image-20241208221920539.Cr1ygY5B.png" alt="image-20241208221920539" loading="lazy"></p><h2 id="_3-é…ç½®ç®¡ç†" tabindex="-1">3.é…ç½®ç®¡ç† <a class="header-anchor" href="#_3-é…ç½®ç®¡ç†" aria-label="Permalink to &quot;3.é…ç½®ç®¡ç†&quot;">â€‹</a></h2><p>åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»è§£å†³äº†å¾®æœåŠ¡ç›¸å…³çš„å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨</li><li>å¾®æœåŠ¡æ³¨å†Œã€å‘ç°</li><li>å¾®æœåŠ¡è¯·æ±‚è·¯ç”±ã€è´Ÿè½½å‡è¡¡</li><li>å¾®æœåŠ¡ç™»å½•ç”¨æˆ·ä¿¡æ¯ä¼ é€’</li></ul><p>ä¸è¿‡ï¼Œç°åœ¨ä¾ç„¶è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼š</p><ul><li><strong>ç½‘å…³è·¯ç”±</strong>åœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ­»äº†ï¼Œå¦‚æœå˜æ›´å¿…é¡»é‡å¯å¾®æœåŠ¡</li><li>æŸäº›<strong>ä¸šåŠ¡é…ç½®</strong>åœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ­»äº†ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½è¦é‡å¯æœåŠ¡</li><li>æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰å¾ˆå¤šé‡å¤çš„é…ç½®ï¼Œç»´æŠ¤æˆæœ¬é«˜</li></ul><p>è¿™äº›é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ç»Ÿä¸€çš„<strong>é…ç½®ç®¡ç†å™¨æœåŠ¡</strong>è§£å†³ã€‚è€ŒNacosä¸ä»…ä»…å…·å¤‡æ³¨å†Œä¸­å¿ƒåŠŸèƒ½ï¼Œä¹Ÿå…·å¤‡é…ç½®ç®¡ç†çš„åŠŸèƒ½ï¼š</p><p><img src="/assets/image-20241209163956213.DROdk6yp.png" alt="image-20241209163956213" loading="lazy"></p><p><img src="/assets/1733560251381-15.D-Wfw680.jpeg" alt="img" loading="lazy"></p><p>å¾®æœåŠ¡å…±äº«çš„é…ç½®å¯ä»¥<strong>ç»Ÿä¸€äº¤ç»™Nacosä¿å­˜å’Œç®¡ç†</strong>ï¼Œåœ¨Nacosæ§åˆ¶å°ä¿®æ”¹é…ç½®åï¼ŒNacosä¼šå°†é…ç½®å˜æ›´æ¨é€ç»™ç›¸å…³çš„å¾®æœåŠ¡ï¼Œå¹¶ä¸”æ— éœ€é‡å¯å³å¯ç”Ÿæ•ˆï¼Œå®ç°<strong>é…ç½®çƒ­æ›´æ–°</strong>ã€‚</p><p>ç½‘å…³çš„è·¯ç”±åŒæ ·æ˜¯é…ç½®ï¼Œå› æ­¤åŒæ ·å¯ä»¥åŸºäºè¿™ä¸ªåŠŸèƒ½å®ç°<strong>åŠ¨æ€è·¯ç”±</strong>åŠŸèƒ½ï¼Œæ— éœ€é‡å¯ç½‘å…³å³å¯ä¿®æ”¹è·¯ç”±é…ç½®ã€‚</p><h3 id="_3-1-é…ç½®å…±äº«" tabindex="-1">3.1.é…ç½®å…±äº« <a class="header-anchor" href="#_3-1-é…ç½®å…±äº«" aria-label="Permalink to &quot;3.1.é…ç½®å…±äº«&quot;">â€‹</a></h3><p>æˆ‘ä»¬å¯ä»¥æŠŠå¾®æœåŠ¡å…±äº«çš„é…ç½®æŠ½å–åˆ°Nacosä¸­ç»Ÿä¸€ç®¡ç†ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯ä¸ªå¾®æœåŠ¡éƒ½é‡å¤é…ç½®äº†ã€‚åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>åœ¨Nacosä¸­æ·»åŠ å…±äº«é…ç½®</li><li>å¾®æœåŠ¡æ‹‰å–é…ç½®</li></ul><h4 id="_3-1-1-æ·»åŠ å…±äº«é…ç½®" tabindex="-1">3.1.1.æ·»åŠ å…±äº«é…ç½® <a class="header-anchor" href="#_3-1-1-æ·»åŠ å…±äº«é…ç½®" aria-label="Permalink to &quot;3.1.1.æ·»åŠ å…±äº«é…ç½®&quot;">â€‹</a></h4><p>ä»¥cart-serviceä¸ºä¾‹ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ‰å“ªäº›é…ç½®æ˜¯é‡å¤çš„ï¼Œå¯ä»¥æŠ½å–çš„ï¼š</p><p>é¦–å…ˆæ˜¯jdbcç›¸å…³é…ç½®ï¼š</p><p><img src="/assets/1733560251381-16.CNo8JOEU.png" alt="img" loading="lazy"></p><p>ç„¶åæ˜¯æ—¥å¿—é…ç½®ï¼š</p><p><img src="/assets/1733560251381-17.Bj9MLVWW.png" alt="img" loading="lazy"></p><p>ç„¶åæ˜¯swaggerä»¥åŠOpenFeignçš„é…ç½®ï¼š</p><p><img src="/assets/1733560251381-18.lpdr6cRd.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬åœ¨nacosæ§åˆ¶å°åˆ†åˆ«æ·»åŠ è¿™äº›é…ç½®ã€‚</p><p>é¦–å…ˆæ˜¯jdbcç›¸å…³é…ç½®ï¼Œåœ¨<code>é…ç½®ç®¡ç†</code>-&gt;<code>é…ç½®åˆ—è¡¨</code>ä¸­ç‚¹å‡»<code>+</code>æ–°å»ºä¸€ä¸ªé…ç½®ï¼š</p><p><img src="/assets/1733560251381-19.iVzN7JMQ.png" alt="img" loading="lazy"></p><p>åœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™ä¿¡æ¯ï¼š</p><p><img src="/assets/1733560251381-20.BZ05L7Ru.png" alt="img" loading="lazy"></p><p>å…¶ä¸­è¯¦ç»†çš„é…ç½®å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://${hm.db.host:192.168.150.101}:${hm.db.port:3306}/${hm.db.database}?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.un:root}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.db.pw:123}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mybatis-plus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default-enum-type-handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  global-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update-strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">not_null</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      id-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span></span></code></pre></div><p>æ³¨æ„è¿™é‡Œçš„jdbcçš„ç›¸å…³å‚æ•°å¹¶æ²¡æœ‰å†™æ­»ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>æ•°æ®åº“ip</code>ï¼šé€šè¿‡<code>${hm.db.host:192.168.150.101}</code><strong>é…ç½®äº†é»˜è®¤å€¼</strong>ä¸º<code>192.168.150.101</code>ï¼ŒåŒæ—¶å…è®¸é€šè¿‡<code>${hm.db.host}</code>æ¥<strong>è¦†ç›–é»˜è®¤å€¼</strong></li><li><code>æ•°æ®åº“ç«¯å£</code>ï¼šé€šè¿‡<code>${hm.db.port:3306}</code>é…ç½®äº†é»˜è®¤å€¼ä¸º<code>3306</code>ï¼ŒåŒæ—¶å…è®¸é€šè¿‡<code>${hm.db.port}</code>æ¥è¦†ç›–é»˜è®¤å€¼</li><li><code>æ•°æ®åº“database</code>ï¼šå¯ä»¥é€šè¿‡<code>${hm.db.database}</code>æ¥è®¾å®šï¼Œæ— é»˜è®¤å€¼</li></ul><p>ç„¶åæ˜¯ç»Ÿä¸€çš„æ—¥å¿—é…ç½®ï¼Œå‘½åä¸º<code>shared-log.``yaml</code>ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    com.hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">debug</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    dateformat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HH:mm:ss:SSS</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/${spring.application.name}&quot;</span></span></code></pre></div><p>ç„¶åæ˜¯ç»Ÿä¸€çš„swaggeré…ç½®ï¼Œå‘½åä¸º<code>shared-swagger.yaml</code>ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">knife4j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  openapi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.swagger.title:é»‘é©¬å•†åŸæ¥å£æ–‡æ¡£}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.swagger.description:é»‘é©¬å•†åŸæ¥å£æ–‡æ¡£}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.swagger.email:zhanghuyi@itcast.cn}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    concat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.swagger.concat:è™å“¥}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://www.itcast.cn</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1.0.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        group-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        api-rule-resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${hm.swagger.package}</span></span></code></pre></div><p>æ³¨æ„ï¼Œè¿™é‡Œçš„swaggerç›¸å…³é…ç½®æˆ‘ä»¬æ²¡æœ‰å†™æ­»ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>title</code>ï¼šæ¥å£æ–‡æ¡£æ ‡é¢˜ï¼Œæˆ‘ä»¬ç”¨äº†<code>${hm.swagger.title}</code>æ¥ä»£æ›¿ï¼Œå°†æ¥å¯ä»¥æœ‰ç”¨æˆ·æ‰‹åŠ¨æŒ‡å®š</li><li><code>email</code>ï¼šè”ç³»äººé‚®ç®±ï¼Œæˆ‘ä»¬ç”¨äº†<code>${hm.swagger.email:``zhanghuyi@itcast.cn``}</code>ï¼Œé»˜è®¤å€¼æ˜¯<code>zhanghuyi@itcast.cn</code>ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·åˆ©ç”¨<code>${hm.swagger.email}</code>æ¥è¦†ç›–ã€‚</li></ul><h4 id="_3-1-2-æ‹‰å–å…±äº«é…ç½®" tabindex="-1">3.1.2.æ‹‰å–å…±äº«é…ç½® <a class="header-anchor" href="#_3-1-2-æ‹‰å–å…±äº«é…ç½®" aria-label="Permalink to &quot;3.1.2.æ‹‰å–å…±äº«é…ç½®&quot;">â€‹</a></h4><p><img src="/assets/image-20241209165316950.B6SWx7zc.png" alt="image" loading="lazy"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åœ¨å¾®æœåŠ¡<strong>æ‹‰å–å…±äº«é…ç½®</strong>ã€‚å°†<strong>æ‹‰å–åˆ°çš„å…±äº«é…ç½®</strong>ä¸<strong>æœ¬åœ°</strong>çš„<code>application.yaml</code><strong>é…ç½®åˆå¹¶</strong>ï¼Œ<strong>å®Œæˆé¡¹ç›®<mark>ä¸Šä¸‹æ–‡çš„åˆå§‹åŒ–</mark>ã€‚</strong></p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>è¯»å–Nacosé…ç½®</strong>æ˜¯SpringCloudä¸Šä¸‹æ–‡ï¼ˆ<code>ApplicationContext</code>ï¼‰åˆå§‹åŒ–æ—¶å¤„ç†çš„ï¼Œå‘ç”Ÿåœ¨é¡¹ç›®çš„<strong>å¼•å¯¼é˜¶æ®µ</strong>ã€‚ç„¶åæ‰ä¼šåˆå§‹åŒ–SpringBootä¸Šä¸‹æ–‡ï¼Œå»è¯»å–<code>application.yaml</code>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´<strong>å¼•å¯¼é˜¶æ®µï¼Œ<code>application.yaml</code>æ–‡ä»¶å°šæœªè¯»å–ï¼Œæ ¹æœ¬ä¸çŸ¥é“<mark>nacos åœ°å€</mark>ï¼Œè¯¥å¦‚ä½•å»åŠ è½½nacosä¸­çš„é…ç½®æ–‡ä»¶å‘¢</strong>ï¼Ÿ</p><p>SpringCloudåœ¨åˆå§‹åŒ–ä¸Šä¸‹æ–‡çš„æ—¶å€™ä¼šå…ˆè¯»å–ä¸€ä¸ªåä¸º<code>bootstrap.yaml</code>(æˆ–è€…<code>bootstrap.properties</code>)çš„æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬<strong>å°†nacosåœ°å€é…ç½®åˆ°<code>bootstrap.yaml</code>ä¸­</strong>ï¼Œé‚£ä¹ˆåœ¨é¡¹ç›®<strong>å¼•å¯¼é˜¶æ®µ</strong>å°±å¯ä»¥è¯»å–nacosä¸­çš„é…ç½®äº†ã€‚</p><p><img src="/assets/1733560251381-21.8-UB_-ni.jpeg" alt="img" loading="lazy"></p><p>å› æ­¤ï¼Œå¾®æœåŠ¡æ•´åˆNacosé…ç½®ç®¡ç†çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ï¼‰å¼•å…¥ä¾èµ–ï¼š</p><p>åœ¨cart-serviceæ¨¡å—å¼•å…¥ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--nacosé…ç½®ç®¡ç†--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--è¯»å–bootstrapæ–‡ä»¶--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>2ï¼‰æ–°å»ºbootstrap.yaml</p><p><img src="/assets/image-20241209165514720.BLI0bQ6l.png" alt="image-20241209165514720" loading="lazy"></p><p>åœ¨cart-serviceä¸­çš„resourcesç›®å½•æ–°å»ºä¸€ä¸ªbootstrap.yamlæ–‡ä»¶ï¼š</p><p><img src="/assets/1733560251381-22.DTxoFpKH.png" alt="img" loading="lazy"></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#bootstrap.yamlå¼•å¯¼é…ç½®æ–‡ä»¶ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å£°æ˜nacosåœ°å€å’Œå…±äº«é…ç½®åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cart-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.88.133</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        file-extension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ–‡ä»¶åç¼€å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        shared-configs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…±äº«é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-jdbc.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«mybatisé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-log.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-swagger.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span></code></pre></div><p>3ï¼‰ä¿®æ”¹application.yaml</p><p>ç”±äºä¸€äº›é…ç½®æŒªåˆ°äº†bootstrap.yamlï¼Œå› æ­¤application.yamléœ€è¦ä¿®æ”¹ä¸ºï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8082</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¼€å¯feign è¿æ¥æ± OkHttp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">feign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  okhttp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #å¼€å¯OKHttpåŠŸèƒ½</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  swagger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é»‘é©¬å•†åŸè´­ç‰©è½¦ç®¡ç†æ¥å£æ–‡æ¡£&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.cart.controller</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-cart</span></span></code></pre></div><p>é‡å¯æœåŠ¡ï¼Œå‘ç°æ‰€æœ‰é…ç½®éƒ½ç”Ÿæ•ˆäº†ã€‚</p><h3 id="_3-2-é…ç½®çƒ­æ›´æ–°" tabindex="-1">3.2.é…ç½®çƒ­æ›´æ–° <a class="header-anchor" href="#_3-2-é…ç½®çƒ­æ›´æ–°" aria-label="Permalink to &quot;3.2.é…ç½®çƒ­æ›´æ–°&quot;">â€‹</a></h3><p><img src="/assets/image-20241209172034200.YXAGuj6M.png" alt="image-20241209172034200" loading="lazy"></p><p>æœ‰å¾ˆå¤šçš„ä¸šåŠ¡ç›¸å…³å‚æ•°ï¼Œå°†æ¥å¯èƒ½ä¼šæ ¹æ®å®é™…æƒ…å†µ<strong>ä¸´æ—¶è°ƒæ•´</strong>ã€‚ä¾‹å¦‚è´­ç‰©è½¦ä¸šåŠ¡ï¼Œè´­ç‰©è½¦æ•°é‡æœ‰ä¸€ä¸ªä¸Šé™ï¼Œé»˜è®¤æ˜¯10ï¼Œå¯¹åº”ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/assets/1733560251381-23.DEqRSk24.png" alt="img" loading="lazy"></p><p>ç°åœ¨è¿™é‡Œè´­ç‰©è½¦æ˜¯å†™æ­»çš„å›ºå®šå€¼ï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åæœŸä¿®æ”¹ã€‚</p><p>ä½†ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œå³ä¾¿å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œ<strong><mark>ä¿®æ”¹äº†é…ç½®è¿˜æ˜¯éœ€è¦é‡æ–°æ‰“åŒ…ã€é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ</mark></strong>ã€‚èƒ½ä¸èƒ½ä¸ç”¨é‡å¯ï¼Œç›´æ¥ç”Ÿæ•ˆå‘¢ï¼Ÿ</p><p>è¿™å°±è¦ç”¨åˆ°Nacosçš„é…ç½®çƒ­æ›´æ–°èƒ½åŠ›äº†ï¼Œåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li>åœ¨Nacosä¸­æ·»åŠ é…ç½®</li><li>åœ¨å¾®æœåŠ¡è¯»å–é…ç½®</li></ul><h4 id="_3-2-1-æ·»åŠ é…ç½®åˆ°nacos" tabindex="-1">3.2.1.æ·»åŠ é…ç½®åˆ°Nacos <a class="header-anchor" href="#_3-2-1-æ·»åŠ é…ç½®åˆ°nacos" aria-label="Permalink to &quot;3.2.1.æ·»åŠ é…ç½®åˆ°Nacos&quot;">â€‹</a></h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨nacosä¸­æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå°†è´­ç‰©è½¦çš„ä¸Šé™æ•°é‡æ·»åŠ åˆ°é…ç½®ä¸­ï¼š</p><p><img src="/assets/1733560251381-24.DdgRrOrN.png" alt="img" loading="lazy"></p><p>æ³¨æ„æ–‡ä»¶çš„dataIdæ ¼å¼ï¼š</p><div class="language-Plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[æœåŠ¡å]-[spring.active.profile].[åç¼€å]</span></span></code></pre></div><p>æ–‡ä»¶åç§°ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li><strong><code>æœåŠ¡å</code></strong>ï¼šæˆ‘ä»¬æ˜¯è´­ç‰©è½¦æœåŠ¡ï¼Œæ‰€ä»¥æ˜¯<code>cart-service</code></li><li><strong><code>spring.active.profile</code></strong>ï¼šå°±æ˜¯spring bootä¸­çš„<code>spring.active.profile</code>ï¼›å¯ä»¥çœç•¥ï¼Œåˆ™æ‰€æœ‰profileå…±äº«è¯¥é…ç½®</li><li><strong><code>åç¼€å</code></strong>ï¼šä¾‹å¦‚yaml</li></ul><p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨<code>cart-service.yaml</code>è¿™ä¸ªåç§°ï¼Œåˆ™ä¸ç®¡æ˜¯<strong>devè¿˜æ˜¯localç¯å¢ƒéƒ½å¯ä»¥å…±äº«è¯¥é…ç½®</strong>ã€‚</p><p>é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    maxAmounts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è´­ç‰©è½¦å•†å“æ•°é‡ä¸Šé™</span></span></code></pre></div><p>æäº¤é…ç½®ï¼Œåœ¨æ§åˆ¶å°èƒ½çœ‹åˆ°æ–°æ·»åŠ çš„é…ç½®ï¼š</p><p><img src="/assets/1733560251381-25.COLsPZIW.png" alt="img" loading="lazy"></p><h4 id="_3-2-2-é…ç½®çƒ­æ›´æ–°" tabindex="-1">3.2.2.é…ç½®çƒ­æ›´æ–° <a class="header-anchor" href="#_3-2-2-é…ç½®çƒ­æ›´æ–°" aria-label="Permalink to &quot;3.2.2.é…ç½®çƒ­æ›´æ–°&quot;">â€‹</a></h4><p>æ¥ç€ï¼Œæˆ‘ä»¬åœ¨å¾®æœåŠ¡ä¸­è¯»å–é…ç½®ï¼Œå®ç°é…ç½®çƒ­æ›´æ–°ã€‚</p><p>åœ¨<code>cart-service</code>ä¸­æ–°å»ºä¸€ä¸ªå±æ€§è¯»å–ç±»ï¼š</p><p><img src="/assets/1733560251381-26.BscCwRDD.png" alt="img" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.config;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.Data;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.boot.context.properties.ConfigurationProperties;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ConfigurationProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hm.cart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CartProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer maxAmounts;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ¥ç€ï¼Œåœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨è¯¥å±æ€§åŠ è½½ç±»ï¼š</p><p><img src="/assets/1733560251382-27.U2G6ZIGT.png" alt="img" loading="lazy"></p><p>æµ‹è¯•ï¼Œå‘è´­ç‰©è½¦ä¸­æ·»åŠ å¤šä¸ªå•†å“ï¼š</p><p><img src="/assets/1733560251382-28.rE2Vb5ib.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬åœ¨nacosæ§åˆ¶å°ï¼Œå°†è´­ç‰©è½¦ä¸Šé™é…ç½®ä¸º5ï¼š</p><p><img src="/assets/1733560251382-29.eBjuE9ov.png" alt="img" loading="lazy"></p><p>æ— éœ€é‡å¯ï¼Œå†æ¬¡æµ‹è¯•è´­ç‰©è½¦åŠŸèƒ½ï¼š</p><p><img src="/assets/1733560251382-30.B0DnqU51.png" alt="img" loading="lazy"></p><p>åŠ å…¥æˆåŠŸï¼</p><p>æ— éœ€é‡å¯æœåŠ¡ï¼Œé…ç½®çƒ­æ›´æ–°å°±ç”Ÿæ•ˆäº†ï¼</p><h3 id="_3-3-åŠ¨æ€è·¯ç”±" tabindex="-1">3.3.åŠ¨æ€è·¯ç”± <a class="header-anchor" href="#_3-3-åŠ¨æ€è·¯ç”±" aria-label="Permalink to &quot;3.3.åŠ¨æ€è·¯ç”±&quot;">â€‹</a></h3><p>ç½‘å…³çš„è·¯ç”±é…ç½®å…¨éƒ¨æ˜¯åœ¨é¡¹ç›®å¯åŠ¨æ—¶ç”±<code>org.springframework.cloud.gateway.route.CompositeRouteDefinitionLocator</code>åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åŠ è½½ï¼Œå¹¶ä¸”<strong>ä¸€ç»åŠ è½½å°±ä¼šç¼“å­˜åˆ°å†…å­˜ä¸­çš„è·¯ç”±è¡¨å†…ï¼ˆä¸€ä¸ªMapï¼‰ï¼Œä¸ä¼šæ”¹å˜</strong>ã€‚ä¹Ÿ<strong>ä¸ä¼šç›‘å¬è·¯ç”±å˜æ›´</strong>ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ— æ³•åˆ©ç”¨ä¸ŠèŠ‚è¯¾å­¦ä¹ çš„é…ç½®çƒ­æ›´æ–°æ¥å®ç°è·¯ç”±æ›´æ–°ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»**ç›‘å¬Nacosçš„é…ç½®å˜æ›´ï¼Œç„¶åæ‰‹åŠ¨æŠŠæœ€æ–°çš„è·¯ç”±<mark>æ›´æ–°åˆ°è·¯ç”±è¡¨</mark>ä¸­ã€‚**è¿™é‡Œæœ‰ä¸¤ä¸ªéš¾ç‚¹ï¼š</p><p><img src="/assets/image-20241209195906193.C6GrPjeJ.png" alt="image-20241209195906193" loading="lazy"></p><ul><li>å¦‚ä½•ç›‘å¬Nacosé…ç½®å˜æ›´ï¼Ÿ</li><li>å¦‚ä½•æŠŠè·¯ç”±ä¿¡æ¯æ›´æ–°åˆ°è·¯ç”±è¡¨ï¼Ÿ</li></ul><h4 id="_3-3-1-ç›‘å¬nacosé…ç½®å˜æ›´" tabindex="-1">3.3.1.ç›‘å¬Nacosé…ç½®å˜æ›´ <a class="header-anchor" href="#_3-3-1-ç›‘å¬nacosé…ç½®å˜æ›´" aria-label="Permalink to &quot;3.3.1.ç›‘å¬Nacosé…ç½®å˜æ›´&quot;">â€‹</a></h4><p><img src="/assets/image-20241209200614104.DAJcb93Y.png" alt="image-20241209200614104" loading="lazy"></p><p>åœ¨Nacoså®˜ç½‘ä¸­ç»™å‡ºäº†æ‰‹åŠ¨ç›‘å¬Nacosé…ç½®å˜æ›´çš„SDKï¼š</p><p><a href="https://nacos.io/zh-cn/docs/sdk.html" target="_blank" rel="noreferrer">https://nacos.io/zh-cn/docs/sdk.html</a></p><p>å¦‚æœå¸Œæœ› Nacos æ¨é€é…ç½®å˜æ›´ï¼Œå¯ä»¥ä½¿ç”¨ Nacos åŠ¨æ€ç›‘å¬é…ç½®æ¥å£æ¥å®ç°ã€‚</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String dataId, String group, Listener listener)</span></span></code></pre></div><p>è¯·æ±‚å‚æ•°è¯´æ˜ï¼š</p><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>å‚æ•°å</strong></th><th style="text-align:left;"><strong>å‚æ•°ç±»å‹</strong></th><th style="text-align:left;"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td style="text-align:left;">dataId</td><td style="text-align:left;">string</td><td style="text-align:left;">é…ç½® IDï¼Œä¿è¯å…¨å±€å”¯ä¸€æ€§ï¼Œåªå…è®¸è‹±æ–‡å­—ç¬¦å’Œ 4 ç§ç‰¹æ®Šå­—ç¬¦ï¼ˆ&quot;.&quot;ã€&quot;:&quot;ã€&quot;-&quot;ã€&quot;_&quot;ï¼‰ã€‚ä¸è¶…è¿‡ 256 å­—èŠ‚ã€‚</td></tr><tr><td style="text-align:left;">group</td><td style="text-align:left;">string</td><td style="text-align:left;">é…ç½®åˆ†ç»„ï¼Œä¸€èˆ¬æ˜¯é»˜è®¤çš„DEFAULT_GROUPã€‚</td></tr><tr><td style="text-align:left;">listener</td><td style="text-align:left;">Listener</td><td style="text-align:left;">ç›‘å¬å™¨ï¼Œé…ç½®å˜æ›´è¿›å…¥ç›‘å¬å™¨çš„<strong>å›è°ƒå‡½æ•°</strong>ã€‚</td></tr></tbody></table><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String serverAddr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;{serverAddr}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String dataId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;{dataId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String group </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;{group}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1.åˆ›å»ºConfigServiceï¼Œè¿æ¥Nacos</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Properties properties </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">properties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;serverAddr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, serverAddr);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ConfigService configService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NacosFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createConfigService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(properties);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2.è¯»å–é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> configService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dataId, group, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3.æ·»åŠ é…ç½®ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">configService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dataId, group, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Listener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> receiveConfigInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // é…ç½®å˜æ›´çš„é€šçŸ¥å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;recieve1:&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> configInfo);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Executor </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExecutor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>è¿™é‡Œæ ¸å¿ƒçš„æ­¥éª¤æœ‰2æ­¥ï¼š</p><ul><li>åˆ›å»ºConfigServiceï¼Œç›®çš„æ˜¯è¿æ¥åˆ°Nacos</li><li>æ·»åŠ é…ç½®ç›‘å¬å™¨ï¼Œç¼–å†™é…ç½®å˜æ›´çš„é€šçŸ¥å¤„ç†é€»è¾‘</li></ul><p>ç”±äºæˆ‘ä»¬é‡‡ç”¨äº†<code>spring-cloud-starter-alibaba-nacos-config</code><strong>è‡ªåŠ¨è£…é…</strong>ï¼Œå› æ­¤<code>ConfigService</code>å·²ç»åœ¨<code>com.alibaba.cloud.nacos.NacosConfigAutoConfiguration</code>ä¸­è‡ªåŠ¨åˆ›å»ºå¥½äº†ï¼š</p><p><img src="/assets/1733560251382-31.iH06nWPZ.png" alt="img" loading="lazy"></p><p><strong>NacosConfigManager</strong>ä¸­æ˜¯è´Ÿè´£ç®¡ç†Nacosçš„ConfigServiceçš„ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="/assets/1733560251382-32.BHIYSdLr.png" alt="img" loading="lazy"></p><p>å› æ­¤ï¼Œåªè¦æˆ‘ä»¬æ‹¿åˆ°<code>NacosConfigManager</code>å°±ç­‰äºæ‹¿åˆ°äº†<code>ConfigService</code>ï¼Œç¬¬ä¸€æ­¥å°±å®ç°äº†ã€‚</p><p>ç¬¬äºŒæ­¥ï¼Œç¼–å†™ç›‘å¬å™¨ã€‚è™½ç„¶å®˜æ–¹æä¾›çš„SDKæ˜¯ConfigServiceä¸­çš„addListenerï¼Œä¸è¿‡<strong>é¡¹ç›®ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ä¸ä»…ä»…éœ€è¦æ·»åŠ ç›‘å¬å™¨ï¼Œä¹Ÿéœ€è¦è¯»å–é…ç½®</strong>ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨çš„APIæ˜¯è¿™ä¸ªï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConfigAndSignListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String dataId, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é…ç½®æ–‡ä»¶id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String group, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é…ç½®ç»„ï¼Œèµ°é»˜è®¤</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timeoutMs, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯»å–é…ç½®çš„è¶…æ—¶æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Listener listener </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) throws NacosException;</span></span></code></pre></div><p>æ—¢å¯ä»¥é…ç½®ç›‘å¬å™¨ï¼Œå¹¶ä¸”ä¼šæ ¹æ®dataIdå’Œgroupè¯»å–é…ç½®å¹¶è¿”å›ã€‚æˆ‘ä»¬å°±å¯ä»¥<strong>åœ¨é¡¹ç›®å¯åŠ¨æ—¶å…ˆæ›´æ–°ä¸€æ¬¡è·¯ç”±ï¼Œåç»­éšç€é…ç½®å˜æ›´é€šçŸ¥åˆ°ç›‘å¬å™¨ï¼Œå®Œæˆè·¯ç”±æ›´æ–°</strong>ã€‚</p><h4 id="_3-3-2-æ›´æ–°è·¯ç”±" tabindex="-1">3.3.2.æ›´æ–°è·¯ç”± <a class="header-anchor" href="#_3-3-2-æ›´æ–°è·¯ç”±" aria-label="Permalink to &quot;3.3.2.æ›´æ–°è·¯ç”±&quot;">â€‹</a></h4><p><img src="/assets/image-20241209201622378.COy6DWsZ.png" alt="image-20241209201622378" loading="lazy"></p><p>æ›´æ–°è·¯ç”±è¦ç”¨åˆ°<code>org.springframework.cloud.gateway.route.RouteDefinitionWriter</code>è¿™ä¸ªæ¥å£ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.route;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reactor.core.publisher.Mono;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Spencer Gibb</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RouteDefinitionWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ›´æ–°è·¯ç”±åˆ°è·¯ç”±è¡¨ï¼Œå¦‚æœè·¯ç”±idé‡å¤ï¼Œåˆ™ä¼šè¦†ç›–æ—§çš„è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RouteDefinition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * æ ¹æ®è·¯ç”±idåˆ é™¤æŸä¸ªè·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">routeId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™é‡Œæ›´æ–°çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯RouteDefinitionï¼Œä¹‹å‰æˆ‘ä»¬è§è¿‡ï¼ŒåŒ…å«ä¸‹åˆ—å¸¸è§å­—æ®µï¼š</p><p><img src="/assets/image-20241209201454557.WXdC52Ic.png" alt="image-20241209201454557" loading="lazy"></p><ul><li>idï¼šè·¯ç”±id</li><li>predicatesï¼šè·¯ç”±åŒ¹é…è§„åˆ™</li><li>filtersï¼šè·¯ç”±è¿‡æ»¤å™¨</li><li>uriï¼šè·¯ç”±ç›®çš„åœ°</li></ul><p>å°†æ¥æˆ‘ä»¬ä¿å­˜åˆ°Nacosçš„é…ç½®ä¹Ÿè¦ç¬¦åˆè¿™ä¸ªå¯¹è±¡ç»“æ„ï¼Œå°†æ¥æˆ‘ä»¬ä»¥<strong>JSONæ¥ä¿å­˜</strong>ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20241209201743049.C-VmHmF4.png" alt="image-20241209201743049" loading="lazy"></p><div class="language-JSON vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;predicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/items/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/search/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lb://item-service&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä»¥ä¸ŠJSONé…ç½®å°±ç­‰åŒäºï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      routes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">item</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          uri</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lb://item-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          predicates</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Path=/items/**,/search/**</span></span></code></pre></div><p>OKï¼Œæˆ‘ä»¬æ‰€éœ€è¦ç”¨åˆ°çš„SDKå·²ç»é½å…¨äº†ã€‚</p><h4 id="_3-3-3-å®ç°åŠ¨æ€è·¯ç”±" tabindex="-1">3.3.3.å®ç°åŠ¨æ€è·¯ç”± <a class="header-anchor" href="#_3-3-3-å®ç°åŠ¨æ€è·¯ç”±" aria-label="Permalink to &quot;3.3.3.å®ç°åŠ¨æ€è·¯ç”±&quot;">â€‹</a></h4><p>é¦–å…ˆï¼Œ æˆ‘ä»¬åœ¨ç½‘å…³gatewayå¼•å…¥ä¾èµ–ï¼š</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--ç»Ÿä¸€é…ç½®ç®¡ç†--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--åŠ è½½bootstrap--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ç„¶ååœ¨ç½‘å…³<code>gateway</code>çš„<code>resources</code>ç›®å½•åˆ›å»º<code>bootstrap.yaml</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        file-extension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yaml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        shared-configs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-log.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span></code></pre></div><p>æ¥ç€ï¼Œä¿®æ”¹<code>gateway</code>çš„<code>resources</code>ç›®å½•ä¸‹çš„<code>application.yml</code>ï¼ŒæŠŠä¹‹å‰çš„è·¯ç”±ç§»é™¤ï¼Œæœ€ç»ˆå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  jwt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    location</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">classpath:hmall.jks</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç§˜é’¥åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç§˜é’¥åˆ«å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç§˜é’¥æ–‡ä»¶å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    tokenTTL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">30m</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ç™»å½•æœ‰æ•ˆæœŸ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    excludePaths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ— éœ€ç™»å½•æ ¡éªŒçš„è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/search/**</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/users/login</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/items/**</span></span></code></pre></div><p>ç„¶åï¼Œåœ¨<code>gateway</code>ä¸­å®šä¹‰é…ç½®ç›‘å¬å™¨ï¼š</p><p><img src="/assets/1733560251382-33.A_39E0Mz.png" alt="img" loading="lazy"></p><p>å…¶ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.gateway.route;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.json.JSONUtil;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.alibaba.cloud.nacos.NacosConfigManager;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.alibaba.nacos.api.config.listener.Listener;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.alibaba.nacos.api.exception.NacosException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.CollUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.RequiredArgsConstructor;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.extern.slf4j.Slf4j;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.route.RouteDefinition;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.gateway.route.RouteDefinitionWriter;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.stereotype.Component;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reactor.core.publisher.Mono;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.annotation.PostConstruct;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.HashSet;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Set;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.concurrent.Executor;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequiredArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DynamicRouteLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RouteDefinitionWriter writer;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NacosConfigManager nacosConfigManager;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è·¯ç”±é…ç½®æ–‡ä»¶çš„idå’Œåˆ†ç»„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String dataId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;gateway-routes.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String group </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DEFAULT_GROUP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¿å­˜æ›´æ–°è¿‡çš„è·¯ç”±id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Set&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; routeIds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashSet&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostConstruct</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //è¡¨ç¤ºDynamicRouteLoaderè¿™ä¸ªBeanåˆå§‹åŒ–åå†æ‰§è¡Œè¿™ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initRouteConfigListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NacosException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.æ³¨å†Œç›‘å¬å™¨å¹¶é¦–æ¬¡æ‹‰å–é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String configInfo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nacosConfigManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConfigService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConfigAndSignListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dataId, group, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Listener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Executor </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getExecutor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> receiveConfigInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                        updateConfigInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(configInfo);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œæ›´æ–°ä¸€æ¬¡é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        updateConfigInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(configInfo);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateConfigInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">configInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç›‘å¬åˆ°è·¯ç”±é…ç½®å˜æ›´ï¼Œ{}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, configInfo);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1.ååºåˆ—åŒ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RouteDefinition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; routeDefinitions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JSONUtil.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(configInfo, RouteDefinition.class);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.æ›´æ–°å‰å…ˆæ¸…ç©ºæ—§è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.1.æ¸…é™¤æ—§è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (String routeId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> routeIds) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            writer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeId)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        routeIds.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2.2.åˆ¤æ–­æ˜¯å¦æœ‰æ–°çš„è·¯ç”±è¦æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeDefinitions)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æ— æ–°è·¯ç”±é…ç½®ï¼Œç›´æ¥ç»“æŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3.æ›´æ–°è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        routeDefinitions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeDefinition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 3.1.æ›´æ–°è·¯ç”±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            writer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeDefinition)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 3.2.è®°å½•è·¯ç”±idï¼Œæ–¹ä¾¿å°†æ¥åˆ é™¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            routeIds.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeDefinition.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>é‡å¯ç½‘å…³ï¼Œä»»æ„è®¿é—®ä¸€ä¸ªæ¥å£ï¼Œæ¯”å¦‚ <code>http://localhost:8080/search/list?pageNo=1&amp;pageSize=1</code>ï¼š</p><p><img src="/assets/1733560251382-34.CstQ8NeK.png" alt="img" loading="lazy"></p><p>å‘ç°æ˜¯404ï¼Œæ— æ³•è®¿é—®ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨Nacosæ§åˆ¶å°æ·»åŠ è·¯ç”±ï¼Œè·¯ç”±æ–‡ä»¶åä¸º<code>gateway-routes.json</code>ï¼Œç±»å‹ä¸º<code>json</code>ï¼š</p><p><img src="/assets/1733560251382-35.DHVg-mmv.png" alt="img" loading="lazy"></p><p>é…ç½®å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-JSON vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;item&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;predicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/items/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/search/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lb://item-service&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;predicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/carts/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lb://cart-service&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;predicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/users/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/addresses/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lb://user-service&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;trade&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;predicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/orders/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lb://trade-service&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;predicates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;_genkey_0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/pay-orders/**&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;filters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lb://pay-service&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>æ— éœ€é‡å¯ç½‘å…³ï¼Œç¨ç­‰å‡ ç§’é’Ÿåï¼Œå†æ¬¡è®¿é—®åˆšæ‰çš„åœ°å€ï¼š</p><p><img src="/assets/1733560251382-36.B7ydD8IL.png" alt="img" loading="lazy"></p><p><img src="/assets/image-20241209205641569.Cwxwwc_f.png" alt="image-20241209205641569" loading="lazy"></p><p>ç½‘å…³è·¯ç”±æˆåŠŸäº†ï¼</p><h4 id="_3-3-4-mono-å“åº”å¼ç¼–ç¨‹ä»£ç åˆ†æ" tabindex="-1">3.3.4 <strong><code>Mono</code> <mark>å“åº”å¼ç¼–ç¨‹</mark>ä»£ç åˆ†æ</strong> <a class="header-anchor" href="#_3-3-4-mono-å“åº”å¼ç¼–ç¨‹ä»£ç åˆ†æ" aria-label="Permalink to &quot;3.3.4 **`Mono` ==å“åº”å¼ç¼–ç¨‹==ä»£ç åˆ†æ**&quot;">â€‹</a></h4><p>è¿™æ®µä»£ç æ˜¯åŸºäºå“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰æ¨¡å‹çš„ï¼Œé€šå¸¸ä½¿ç”¨åƒ <strong>Project Reactor</strong> è¿™æ ·çš„å“åº”å¼åº“ã€‚è®©æˆ‘ä»¬é€ä¸€åˆ†æï¼š</p><h5 id="_1-mono-çš„ä½œç”¨" tabindex="-1">ï¼ˆ1ï¼‰ <strong><code>Mono</code> çš„ä½œç”¨</strong> <a class="header-anchor" href="#_1-mono-çš„ä½œç”¨" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰ **`Mono` çš„ä½œç”¨**&quot;">â€‹</a></h5><ul><li><strong><code>Mono</code></strong> æ˜¯ Reactor ä¸­çš„æ ¸å¿ƒæ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œè¡¨ç¤ºä¸€ç§ <strong>åŒ…å«é›¶æˆ–ä¸€ä¸ªå…ƒç´ çš„å¼‚æ­¥æ•°æ®æµ</strong>ã€‚</li><li>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œ<code>Mono.just(routeId)</code> è¡¨ç¤ºåˆ›å»ºäº†ä¸€ä¸ªåŒ…å«å•ä¸ªå€¼ï¼ˆå³ <code>routeId</code>ï¼‰çš„ <code>Mono</code>ï¼Œå®ƒå°†<strong>åœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»è¢«å‘å¸ƒã€‚</strong></li></ul><hr><h5 id="_2-just-çš„ä½œç”¨" tabindex="-1">ï¼ˆ2ï¼‰<code>just</code> çš„ä½œç”¨ <a class="header-anchor" href="#_2-just-çš„ä½œç”¨" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰`just` çš„ä½œç”¨&quot;">â€‹</a></h5><ul><li><strong><code>Mono.just(T data)</code></strong> æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ª <code>Mono</code> å®ä¾‹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å€¼ <code>data</code>ã€‚</li><li>è¿™ä¸ªå€¼ä¼šç«‹å³è¢«åŒ…è£…æˆä¸€ä¸ª <code>Mono</code>ï¼Œå¹¶<strong>åœ¨è®¢é˜…æ—¶è¢«å‘å°„</strong>ã€‚</li></ul><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Mono&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; mono </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(System.out</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">println); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å‡º: Hello</span></span></code></pre></div><p>åœ¨ä½ çš„ä»£ç ä¸­ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeId)</span></span></code></pre></div><ul><li>ä½œç”¨æ˜¯å°† <code>routeId</code> åŒ…è£…æˆä¸€ä¸ª <code>Mono</code>ï¼Œä»¥ä¾¿åœ¨å¼‚æ­¥æ“ä½œä¸­ä½¿ç”¨ã€‚</li></ul><hr><h5 id="_3-subscribe-çš„ä½œç”¨" tabindex="-1">ï¼ˆ3ï¼‰ <strong><code>subscribe</code> çš„ä½œç”¨</strong> <a class="header-anchor" href="#_3-subscribe-çš„ä½œç”¨" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰ **`subscribe` çš„ä½œç”¨**&quot;">â€‹</a></h5><ul><li><p><strong><code>subscribe</code></strong> æ–¹æ³•æ˜¯è§¦å‘æ•°æ®æµçš„å…³é”®ï¼Œå®ƒè®© <code>Mono</code> æˆ– <code>Flux</code> å¼€å§‹å·¥ä½œã€‚</p></li><li><p><strong>è®¢é˜…ï¼ˆsubscribeï¼‰åï¼Œæ•°æ®æµä¼šå¼€å§‹ä¼ é€’å€¼ï¼ˆå‘å°„æ•°æ®ï¼‰ã€å¤„ç†æ•°æ®ï¼Œå¹¶æœ€ç»ˆå®Œæˆæˆ–æŠ›å‡ºé”™è¯¯</strong>ã€‚</p></li><li><p>å¸¸è§çš„ subscribe</p><p>å½¢å¼ï¼š</p><ol><li>ç®€å•è®¢é˜…ï¼š<code>mono.subscribe()</code>ï¼Œåªæ˜¯è§¦å‘æµã€‚</li><li>å¸¦å›è°ƒçš„è®¢é˜…ï¼š</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Received: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value),   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆåŠŸæ—¶çš„å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.err.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error),      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯æ—¶çš„å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Completed!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®Œæˆæ—¶çš„å›è°ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li></ul><p>åœ¨ä½ çš„ä»£ç ä¸­ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">routeDefinitionWriter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Mono.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routeId)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><ul><li>è°ƒç”¨ <code>routeDefinitionWriter.delete(Mono.just(routeId))</code> è¿”å›ä¸€ä¸ª <code>Mono</code>ï¼Œè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥åˆ é™¤æ“ä½œã€‚</li><li><code>subscribe()</code> è¡¨ç¤ºè§¦å‘è¿™ä¸ªåˆ é™¤æ“ä½œã€‚</li></ul><hr><h5 id="ä»£ç åˆ†æçš„æ•´ä½“æµç¨‹" tabindex="-1">ä»£ç åˆ†æçš„æ•´ä½“æµç¨‹ <a class="header-anchor" href="#ä»£ç åˆ†æçš„æ•´ä½“æµç¨‹" aria-label="Permalink to &quot;ä»£ç åˆ†æçš„æ•´ä½“æµç¨‹&quot;">â€‹</a></h5><ol><li><strong><code>Mono.just(routeId)</code></strong>ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å« <code>routeId</code> çš„ <code>Mono</code>ã€‚</li><li><strong><code>routeDefinitionWriter.delete(...)</code></strong>ï¼šè°ƒç”¨åˆ é™¤æ–¹æ³•ï¼Œè¿™é€šå¸¸æ˜¯ä¸€ä¸ªéé˜»å¡çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ª <code>Mono</code> è¡¨ç¤ºåˆ é™¤ç»“æœã€‚</li><li><strong><code>subscribe()</code></strong>ï¼šè§¦å‘åˆ é™¤æ“ä½œï¼Œè®© <code>Mono</code> å¼€å§‹æ‰§è¡Œã€‚</li></ol><hr><h5 id="æ€»ç»“-1" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“-1" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h5><ul><li><strong><code>Mono</code></strong> æ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œè¡¨ç¤ºå¼‚æ­¥çš„å•å€¼ç»“æœã€‚</li><li><strong><code>just</code></strong> ç”¨äºå°†å·²æœ‰çš„å€¼åŒ…è£…æˆä¸€ä¸ª <code>Mono</code>ã€‚</li><li><strong><code>subscribe</code></strong> ç”¨äºè§¦å‘ <code>Mono</code> çš„æ‰§è¡Œï¼Œå¯åŠ¨æ•°æ®æµã€‚</li></ul><p>è¿™ç§å†™æ³•å¸¸è§äº<strong>éé˜»å¡çš„åº”ç”¨ç¨‹åº</strong>ä¸­ï¼Œæ¯”å¦‚åŸºäº Spring WebFlux çš„å“åº”å¼ API å¼€å‘ã€‚</p><h2 id="_4-ä½œä¸š" tabindex="-1">4.ä½œä¸š <a class="header-anchor" href="#_4-ä½œä¸š" aria-label="Permalink to &quot;4.ä½œä¸š&quot;">â€‹</a></h2><p>å°†é¡¹ç›®ä¸€æ‹†åˆ†ä¸ºä¸€ä¸ªå¾®æœåŠ¡é¡¹ç›®ï¼Œå¹¶å®Œæˆä¸‹åˆ—éœ€æ±‚ï¼š</p><ul><li>åŸºäºOpenFeignå®ç°æœåŠ¡é—´è¿œç¨‹è°ƒç”¨</li><li>å®šä¹‰ç½‘å…³ï¼Œå®ç°å¯¹å¾®æœåŠ¡çš„è¯·æ±‚è·¯ç”±</li><li>åŸºäºç½‘å…³å®ç°ç™»å½•ç”¨æˆ·æ ¡éªŒå’Œç”¨æˆ·ä¿¡æ¯ä¼ é€’</li></ul><p>ä»¥è‹ç©¹å¤–å–ä¸ºä¾‹ï¼Œé¡¹ç›®å¯ä»¥æ‹†åˆ†ä¸ºï¼š</p><ul><li>ä¸šåŠ¡æœåŠ¡ï¼š <ul><li>ç”¨æˆ·æœåŠ¡ï¼šç”¨æˆ·ã€åœ°å€ã€ç™»å½•ç­‰ç›¸å…³ä¸šåŠ¡</li><li>äº§å“æœåŠ¡ï¼šåº—é“ºã€åˆ†ç±»ã€èœå“ã€å¥—é¤ç­‰ä¸šåŠ¡</li><li>äº¤æ˜“æœåŠ¡ï¼šè®¢å•ã€è´­ç‰©è½¦ä¸šåŠ¡</li><li>æ•°æ®æœåŠ¡ï¼šå·¥ä½œå°ã€æŠ¥è¡¨ç»Ÿè®¡ç­‰ä¸šåŠ¡</li></ul></li><li>åŸºç¡€æœåŠ¡ï¼š <ul><li>æ”¯ä»˜æœåŠ¡ï¼šæ”¯ä»˜ç›¸å…³ä¸šåŠ¡</li><li>æ–‡ä»¶æœåŠ¡ï¼šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</li></ul></li></ul><h1 id="ä¸‰ã€é˜»å¡-éé˜»å¡å¼å’Œå“åº”å¼ç¼–ç¨‹" tabindex="-1">ä¸‰ã€é˜»å¡/éé˜»å¡å¼å’Œ<mark>å“åº”å¼ç¼–ç¨‹</mark> <a class="header-anchor" href="#ä¸‰ã€é˜»å¡-éé˜»å¡å¼å’Œå“åº”å¼ç¼–ç¨‹" aria-label="Permalink to &quot;ä¸‰ã€é˜»å¡/éé˜»å¡å¼å’Œ==å“åº”å¼ç¼–ç¨‹==&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p>åœ¨ Java ç¼–ç¨‹ä¸­ï¼Œ<strong>é˜»å¡å¼ç¼–ç¨‹</strong>ã€<strong>éé˜»å¡å¼ç¼–ç¨‹</strong>å’Œ<strong>å“åº”å¼ç¼–ç¨‹</strong>æ˜¯ä¸‰ç§ä¸åŒçš„ç¼–ç¨‹æ¨¡å¼ï¼Œä¸»è¦ä¸ä»»åŠ¡æ‰§è¡Œã€èµ„æºç­‰å¾…ä»¥åŠçº¿ç¨‹çš„ä½¿ç”¨æ–¹å¼æœ‰å…³ã€‚</p><hr><h2 id="_1-é˜»å¡å¼ç¼–ç¨‹" tabindex="-1"><strong>1. é˜»å¡å¼ç¼–ç¨‹</strong> <a class="header-anchor" href="#_1-é˜»å¡å¼ç¼–ç¨‹" aria-label="Permalink to &quot;**1. é˜»å¡å¼ç¼–ç¨‹**&quot;">â€‹</a></h2><h3 id="æ¦‚å¿µ" tabindex="-1"><strong>æ¦‚å¿µ</strong> <a class="header-anchor" href="#æ¦‚å¿µ" aria-label="Permalink to &quot;**æ¦‚å¿µ**&quot;">â€‹</a></h3><p>é˜»å¡å¼ç¼–ç¨‹æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒæŸä¸ªä»»åŠ¡æ—¶ï¼Œå¦‚æœéœ€è¦ç­‰å¾…èµ„æºï¼ˆå¦‚ I/O æ“ä½œå®Œæˆã€é”è¢«é‡Šæ”¾ï¼‰ï¼Œ<strong>çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ç›´åˆ°ä»»åŠ¡å®Œæˆã€‚æœŸé—´ï¼Œçº¿ç¨‹æ— æ³•æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</strong></p><h3 id="ç‰¹ç‚¹" tabindex="-1"><strong>ç‰¹ç‚¹</strong> <a class="header-anchor" href="#ç‰¹ç‚¹" aria-label="Permalink to &quot;**ç‰¹ç‚¹**&quot;">â€‹</a></h3><ul><li>ç®€å•ã€ç›´è§‚ï¼Œä»£ç æµç¨‹ä¸æ€ç»´é€»è¾‘ä¸€è‡´ã€‚</li><li>æ¯ä¸ªä»»åŠ¡å ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæ•ˆç‡è¾ƒä½ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ã€‚</li><li>å¦‚æœçº¿ç¨‹è¢«é˜»å¡ï¼Œç³»ç»Ÿèµ„æºå°†è¢«æµªè´¹ã€‚</li></ul><h3 id="ç¤ºä¾‹" tabindex="-1"><strong>ç¤ºä¾‹</strong> <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to &quot;**ç¤ºä¾‹**&quot;">â€‹</a></h3><p>ä»¥é˜»å¡å¼è¯»å–æ–‡ä»¶ä¸ºä¾‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.io.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BlockingExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        BufferedReader reader </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BufferedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FileReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String line;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜»å¡ç›´åˆ°ä¸‹ä¸€è¡Œè¯»å–å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åœ¨æ­¤ä¾‹ä¸­ï¼Œ<code>readLine()</code> æ˜¯ä¸€ä¸ªé˜»å¡æ“ä½œï¼Œå½“æ–‡ä»¶å†…å®¹ä¸å¯ç”¨æ—¶ï¼Œçº¿ç¨‹ä¼šç­‰å¾…æ•°æ®å‡†å¤‡å¥½ã€‚</p><hr><h2 id="_2-éé˜»å¡å¼ç¼–ç¨‹" tabindex="-1"><strong>2. éé˜»å¡å¼ç¼–ç¨‹</strong> <a class="header-anchor" href="#_2-éé˜»å¡å¼ç¼–ç¨‹" aria-label="Permalink to &quot;**2. éé˜»å¡å¼ç¼–ç¨‹**&quot;">â€‹</a></h2><h3 id="æ¦‚å¿µ-1" tabindex="-1"><strong>æ¦‚å¿µ</strong> <a class="header-anchor" href="#æ¦‚å¿µ-1" aria-label="Permalink to &quot;**æ¦‚å¿µ**&quot;">â€‹</a></h3><p>éé˜»å¡å¼ç¼–ç¨‹æ˜¯æŒ‡<strong>çº¿ç¨‹ä¸ä¼šè¢«æŒ‚èµ·ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ç»“æœ</strong>ã€‚å¦‚æœä»»åŠ¡å°šæœªå®Œæˆï¼Œä¼š<strong>é€šè¿‡è½®è¯¢æˆ–<mark>å›è°ƒæœºåˆ¶è·å–ç»“æœã€‚</mark></strong></p><h3 id="ç‰¹ç‚¹-1" tabindex="-1"><strong>ç‰¹ç‚¹</strong> <a class="header-anchor" href="#ç‰¹ç‚¹-1" aria-label="Permalink to &quot;**ç‰¹ç‚¹**&quot;">â€‹</a></h3><ul><li>æ›´é«˜æ•ˆï¼šçº¿ç¨‹ä¸ä¼šå› ä¸ºç­‰å¾…è€Œæµªè´¹èµ„æºã€‚</li><li>è¾ƒå¤æ‚ï¼š<strong>éœ€è¦å¤„ç†å›è°ƒæˆ–è½®è¯¢é€»è¾‘</strong>ã€‚</li><li>é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚</li></ul><h3 id="ç¤ºä¾‹-1" tabindex="-1"><strong>ç¤ºä¾‹</strong> <a class="header-anchor" href="#ç¤ºä¾‹-1" aria-label="Permalink to &quot;**ç¤ºä¾‹**&quot;">â€‹</a></h3><p>ä»¥éé˜»å¡æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥è°ƒç”¨ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.concurrent.CompletableFuture;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NonBlockingExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CompletableFuture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">supplyAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸é˜»å¡ä¸»çº¿ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (InterruptedException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Result from async task&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">thenAccept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å›è°ƒå¤„ç†ç»“æœ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Main thread continues...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>è¾“å‡º</strong>ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Main thread continues...</span></span>
<span class="line"><span>Result from async task</span></span></code></pre></div><p>ä¸»çº¿ç¨‹æœªé˜»å¡ï¼Œç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</p><hr><h2 id="_3-å“åº”å¼ç¼–ç¨‹" tabindex="-1"><strong>3.<mark>å“åº”å¼ç¼–ç¨‹</mark></strong> <a class="header-anchor" href="#_3-å“åº”å¼ç¼–ç¨‹" aria-label="Permalink to &quot;**3.==å“åº”å¼ç¼–ç¨‹==**&quot;">â€‹</a></h2><h3 id="æ¦‚å¿µ-2" tabindex="-1"><strong>æ¦‚å¿µ</strong> <a class="header-anchor" href="#æ¦‚å¿µ-2" aria-label="Permalink to &quot;**æ¦‚å¿µ**&quot;">â€‹</a></h3><p>å“åº”å¼ç¼–ç¨‹æ˜¯åŸºäº<strong>å¼‚æ­¥æ•°æ®æµå’Œäº‹ä»¶é©±åŠ¨æ¨¡å‹çš„ä¸€ç§ç¼–ç¨‹èŒƒå¼</strong>ã€‚å®ƒä½¿ç”¨éé˜»å¡å¼çš„æ–¹å¼å¤„ç†æ•°æ®æµï¼ŒåŒæ—¶å…è®¸åœ¨æ•°æ®æµçš„å„ä¸ªé˜¶æ®µè¿›è¡Œæ“ä½œå’Œç»„åˆã€‚</p><h3 id="ç‰¹ç‚¹-2" tabindex="-1"><strong>ç‰¹ç‚¹</strong> <a class="header-anchor" href="#ç‰¹ç‚¹-2" aria-label="Permalink to &quot;**ç‰¹ç‚¹**&quot;">â€‹</a></h3><ul><li>åŸºäºäº‹ä»¶é©±åŠ¨å’Œæ•°æ®æµã€‚</li><li>å¼‚æ­¥éé˜»å¡ï¼Œé€‚åˆ I/O å¯†é›†å‹ã€é«˜å¹¶å‘åœºæ™¯ã€‚</li><li>ä½¿ç”¨æµå¼ APIï¼Œä»£ç æ›´å…·å£°æ˜æ€§ã€‚</li></ul><h3 id="æ ¸å¿ƒå·¥å…·" tabindex="-1"><strong>æ ¸å¿ƒå·¥å…·</strong> <a class="header-anchor" href="#æ ¸å¿ƒå·¥å…·" aria-label="Permalink to &quot;**æ ¸å¿ƒå·¥å…·**&quot;">â€‹</a></h3><ul><li><strong>RxJava</strong>ï¼šæä¾› <code>Observable</code> å’Œ <code>Observer</code> æ¨¡å¼ã€‚</li><li><strong>Project Reactor</strong>ï¼šæä¾› <code>Mono</code> å’Œ <code>Flux</code>ï¼Œç”¨äºå•å€¼æˆ–å¤šå€¼æµå¤„ç†ã€‚</li><li><strong>Spring WebFlux</strong>ï¼šSpring çš„å“åº”å¼æ¡†æ¶ã€‚</li></ul><h3 id="java-ä¸­çš„å“åº”å¼ç¼–ç¨‹å·¥å…·" tabindex="-1">Java ä¸­çš„å“åº”å¼ç¼–ç¨‹å·¥å…· <a class="header-anchor" href="#java-ä¸­çš„å“åº”å¼ç¼–ç¨‹å·¥å…·" aria-label="Permalink to &quot;Java ä¸­çš„å“åº”å¼ç¼–ç¨‹å·¥å…·&quot;">â€‹</a></h3><p>Java ä¸­å¸¸ç”¨çš„å“åº”å¼ç¼–ç¨‹åº“åŒ…æ‹¬ï¼š</p><ol><li>RxJavaï¼š <ul><li>RxJava æ˜¯ Java ä¸Šçš„å“åº”å¼æ‰©å±•ï¼ˆReactive Extensionsï¼‰å®ç°ã€‚</li><li>æä¾›ä¸°å¯Œçš„æ“ä½œç¬¦ï¼ˆOperatorsï¼‰ç”¨äºå¤„ç†æ•°æ®æµï¼Œå¦‚è¿‡æ»¤ã€å˜æ¢ã€åˆå¹¶ç­‰ã€‚</li><li>ä½¿ç”¨ <code>Observable</code> å’Œ <code>Observer</code> æ¨¡å‹ã€‚</li></ul></li><li>Project Reactorï¼š <ul><li>Reactor æ˜¯ Spring å®˜æ–¹æ”¯æŒçš„å“åº”å¼åº“ï¼Œé€‚ç”¨äº<strong>æ„å»ºéé˜»å¡çš„åº”ç”¨ç¨‹åº</strong>ã€‚</li><li>æä¾›äº†ä¸¤ç§æ ¸å¿ƒç±»å‹ï¼š<strong><code>Mono</code> å’Œ <code>Flux</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºå•ä¸€æ•°æ®æµå’Œå¤šå…ƒç´ æ•°æ®æµã€‚</strong></li><li>ä¸ Spring WebFlux é›†æˆéå¸¸ç´§å¯†ã€‚</li></ul></li><li>Akka Streamsï¼š <ul><li>æä¾›äº†ä¸€ç§åŸºäº Actor æ¨¡å‹çš„å“åº”å¼æµå¤„ç†æ–¹å¼ï¼Œé€‚åˆé«˜æ€§èƒ½å’Œåˆ†å¸ƒå¼åœºæ™¯ã€‚</li></ul></li></ol><h3 id="æ ¸å¿ƒæ€æƒ³" tabindex="-1">æ ¸å¿ƒæ€æƒ³ <a class="header-anchor" href="#æ ¸å¿ƒæ€æƒ³" aria-label="Permalink to &quot;æ ¸å¿ƒæ€æƒ³&quot;">â€‹</a></h3><ul><li><strong>æ•°æ®æµ</strong>ï¼šæ•°æ®è¢«å»ºæ¨¡ä¸ºæµï¼Œå¯ä»¥éšç€æ—¶é—´å¼‚æ­¥åœ°å‘å‡ºå€¼ã€‚æ•°æ®æµå¯ä»¥æ˜¯é¼ æ ‡äº‹ä»¶æµã€HTTP è¯·æ±‚æµã€æ•°æ®åº“æ›´æ–°æµç­‰ã€‚</li><li><strong>å˜åŒ–ä¼ æ’­</strong>ï¼šå½“æ•°æ®æµçš„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<strong>è®¢é˜…è¿™äº›æµçš„æ¶ˆè´¹è€…ä¼šè‡ªåŠ¨æ”¶åˆ°æ›´æ–°</strong>ï¼Œæ— éœ€æ‰‹åŠ¨æ‹‰å–æ•°æ®ã€‚</li><li><strong>å¼‚æ­¥å’Œéé˜»å¡</strong>ï¼šå“åº”å¼ç¼–ç¨‹å¼ºè°ƒå¼‚æ­¥å¤„ç†ï¼Œé¿å…é˜»å¡çº¿ç¨‹ä»¥æé«˜æ€§èƒ½ï¼Œå°¤å…¶åœ¨å¤„ç†é«˜å¹¶å‘ä»»åŠ¡æ—¶ã€‚</li></ul><h3 id="å“åº”å¼ç¼–ç¨‹çš„å…³é”®æ¦‚å¿µ" tabindex="-1">å“åº”å¼ç¼–ç¨‹çš„å…³é”®æ¦‚å¿µ <a class="header-anchor" href="#å“åº”å¼ç¼–ç¨‹çš„å…³é”®æ¦‚å¿µ" aria-label="Permalink to &quot;å“åº”å¼ç¼–ç¨‹çš„å…³é”®æ¦‚å¿µ&quot;">â€‹</a></h3><ol><li>Publisher å’Œ Subscriberï¼š <ul><li>Publisherï¼ˆå‘å¸ƒè€…ï¼‰è´Ÿè´£äº§ç”Ÿæ•°æ®æµã€‚</li><li>Subscriberï¼ˆè®¢é˜…è€…ï¼‰è´Ÿè´£æ¶ˆè´¹æ•°æ®æµã€‚</li><li>Java æä¾›äº†æ ‡å‡†çš„å“åº”å¼æµæ¥å£ï¼š<code>java.util.concurrent.Flow</code>ã€‚</li></ul></li><li>Backpressureï¼ˆèƒŒå‹ï¼‰ï¼š <ul><li>å½“æ¶ˆè´¹è€…å¤„ç†æ•°æ®çš„é€Ÿåº¦è·Ÿä¸ä¸Šç”Ÿäº§è€…çš„é€Ÿåº¦æ—¶ï¼Œå“åº”å¼ç¼–ç¨‹é€šè¿‡èƒŒå‹æœºåˆ¶æ¥é¿å…æº¢å‡ºæˆ–èµ„æºæ¯ç«­ã€‚</li></ul></li></ol><h3 id="åº”ç”¨åœºæ™¯" tabindex="-1">åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;åº”ç”¨åœºæ™¯&quot;">â€‹</a></h3><ol><li><strong>Web åº”ç”¨ï¼šéé˜»å¡çš„ HTTP è¯·æ±‚å¤„ç†ï¼ˆå¦‚ Spring WebFluxï¼‰</strong>ã€‚</li><li><strong>æ•°æ®æµå¤„ç†ï¼šå®æ—¶æ•°æ®åˆ†æã€æ—¥å¿—å¤„ç†</strong>ã€‚</li><li><strong>æ¶ˆæ¯é©±åŠ¨ç³»ç»Ÿï¼šå¤„ç† Kafka æˆ– RabbitMQ æ¶ˆæ¯æµ</strong>ã€‚</li><li><strong>é«˜å¹¶å‘åœºæ™¯ï¼šå¦‚èŠå¤©å®¤ã€è‚¡ç¥¨äº¤æ˜“ç³»ç»Ÿ</strong>ã€‚</li></ol><h3 id="ç¤ºä¾‹-2" tabindex="-1"><strong>ç¤ºä¾‹</strong> <a class="header-anchor" href="#ç¤ºä¾‹-2" aria-label="Permalink to &quot;**ç¤ºä¾‹**&quot;">â€‹</a></h3><p>ä½¿ç”¨ Project Reactor çš„å“åº”å¼æµï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reactor.core.publisher.Flux;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReactiveExample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Flux&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; flux </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Flux.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">just</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Apple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Orange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Banana&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ•°æ®æµ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toUpperCase)                              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è½¬æ¢ä¸ºå¤§å†™</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fruit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fruit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startsWith</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿‡æ»¤æ¡ä»¶</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        flux.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            fruit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Received: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fruit),    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆåŠŸæ—¶å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.err.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error),       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯æ—¶å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Completed!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æµå®Œæˆæ—¶å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>è¾“å‡º</strong>ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Received: APPLE</span></span>
<span class="line"><span>Completed!</span></span></code></pre></div><p>é€šè¿‡å£°æ˜å¼çš„æµæ“ä½œï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚</p><hr><h2 id="å¯¹æ¯”æ€»ç»“" tabindex="-1"><mark><strong>å¯¹æ¯”æ€»ç»“</strong></mark> <a class="header-anchor" href="#å¯¹æ¯”æ€»ç»“" aria-label="Permalink to &quot;==**å¯¹æ¯”æ€»ç»“**==&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>é˜»å¡å¼ç¼–ç¨‹</strong></th><th><strong>éé˜»å¡å¼ç¼–ç¨‹</strong></th><th><strong>å“åº”å¼ç¼–ç¨‹</strong></th></tr></thead><tbody><tr><td><strong>çº¿ç¨‹çŠ¶æ€</strong></td><td>è¢«æŒ‚èµ·ç›´åˆ°ä»»åŠ¡å®Œæˆ</td><td>ä¸æŒ‚èµ·ï¼Œç«‹å³è¿”å›ç»“æœ</td><td>ä¸æŒ‚èµ·ï¼ŒåŸºäºæ•°æ®æµ</td></tr><tr><td><strong>èµ„æºä½¿ç”¨æ•ˆç‡</strong></td><td>è¾ƒä½</td><td>è¾ƒé«˜</td><td>éå¸¸é«˜</td></tr><tr><td><strong>å¤æ‚åº¦</strong></td><td>ä½</td><td>ä¸­ç­‰</td><td>é«˜</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>ç®€å•ã€ä½å¹¶å‘ä»»åŠ¡</td><td>ä¸­ç­‰å¹¶å‘ä»»åŠ¡</td><td>é«˜å¹¶å‘ã€I/O å¯†é›†å‹ä»»åŠ¡</td></tr><tr><td><strong>å·¥å…·æ”¯æŒ</strong></td><td>å¸¸è§„åŒæ­¥ APIï¼Œå¦‚ <code>readLine</code></td><td><code>CompletableFuture</code></td><td><code>RxJava</code>, <code>Reactor</code></td></tr></tbody></table><p>å“åº”å¼ç¼–ç¨‹ç»“åˆäº†éé˜»å¡çš„ä¼˜åŠ¿å’Œæ•°æ®æµçš„çµæ´»æ€§ï¼Œæ˜¯ç°ä»£é«˜å¹¶å‘ã€å¼‚æ­¥ç³»ç»Ÿè®¾è®¡çš„é¦–é€‰ã€‚</p><h1 id="å››ã€æœåŠ¡ä¿æŠ¤å’Œåˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1">å››ã€æœåŠ¡ä¿æŠ¤å’Œ<mark>åˆ†å¸ƒå¼äº‹åŠ¡</mark> <a class="header-anchor" href="#å››ã€æœåŠ¡ä¿æŠ¤å’Œåˆ†å¸ƒå¼äº‹åŠ¡" aria-label="Permalink to &quot;å››ã€æœåŠ¡ä¿æŠ¤å’Œ==åˆ†å¸ƒå¼äº‹åŠ¡==&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p>åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜å­˜åœ¨å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚</p><p><img src="/assets/image-20241210144740823.BkAK-d8i.png" alt="image-20241210144740823" loading="lazy"></p><p>é¦–å…ˆæ˜¯<strong>ä¸šåŠ¡å¥å£®æ€§</strong>é—®é¢˜ï¼š</p><p>ä¾‹å¦‚åœ¨ä¹‹å‰çš„æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨ä¸šåŠ¡ä¸­ï¼Œè´­ç‰©è½¦æœåŠ¡éœ€è¦æŸ¥è¯¢æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œä¸è´­ç‰©è½¦æ•°æ®åšå¯¹æ¯”ï¼Œæé†’ç”¨æˆ·ã€‚å¤§å®¶è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå•†å“æœåŠ¡æŸ¥è¯¢æ—¶å‘ç”Ÿæ•…éšœï¼ŒæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨åœ¨è°ƒç”¨å•†å“æœ åŠ¡æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿä¼šå¼‚å¸¸ï¼Ÿä»è€Œå¯¼è‡´è´­ç‰©è½¦æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œå³ä¾¿æ˜¯å•†å“æŸ¥è¯¢å¤±è´¥ï¼Œè´­ç‰©è½¦åˆ—è¡¨ä¹Ÿåº”è¯¥æ­£ç¡®å±•ç¤ºå‡ºæ¥ï¼Œå“ªæ€•æ˜¯ä¸åŒ…å«æœ€æ–°çš„å•†å“ä¿¡æ¯ã€‚</p><p>è¿˜æœ‰<strong>çº§è”å¤±è´¥</strong>é—®é¢˜ï¼š</p><p>è¿˜æ˜¯æŸ¥è¯¢è´­ç‰©è½¦çš„ä¸šåŠ¡ï¼Œå‡å¦‚å•†å“æœåŠ¡ä¸šåŠ¡å¹¶å‘è¾ƒé«˜ï¼Œå ç”¨è¿‡å¤š<strong>Tomcatè¿æ¥</strong>ã€‚å¯èƒ½ä¼šå¯¼è‡´<strong>å•†å“æœåŠ¡çš„æ‰€æœ‰æ¥å£å“åº”æ—¶é—´å¢åŠ ï¼Œå»¶è¿Ÿå˜é«˜ï¼Œç”šè‡³æ˜¯é•¿æ—¶é—´é˜»å¡ç›´è‡³æŸ¥è¯¢å¤±è´¥ã€‚</strong></p><p>æ­¤æ—¶æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡éœ€è¦æŸ¥è¯¢å¹¶ç­‰å¾…å•†å“æŸ¥è¯¢ç»“æœï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨ä¸šåŠ¡çš„å“åº”æ—¶é—´ä¹Ÿå˜é•¿ï¼Œç”šè‡³ä¹Ÿé˜»å¡ç›´è‡³æ— æ³•è®¿é—®ã€‚è€Œæ­¤æ—¶å¦‚æœæŸ¥è¯¢è´­ç‰©è½¦çš„è¯·æ±‚è¾ƒå¤šï¼Œå¯èƒ½å¯¼è‡´è´­ç‰©è½¦æœåŠ¡çš„Tomcatè¿æ¥å ç”¨è¾ƒå¤šï¼Œæ‰€æœ‰æ¥å£çš„å“åº”æ—¶é—´éƒ½ä¼šå¢åŠ ï¼Œæ•´ä¸ªæœåŠ¡æ€§èƒ½å¾ˆå·®ï¼Œ ç”šè‡³ä¸å¯ç”¨ã€‚</p><p><img src="/assets/image-20241210144816949.C0a09OEG.png" alt="image-20241210144816949" loading="lazy"></p><p>ä¾æ¬¡ç±»æ¨ï¼Œæ•´ä¸ªå¾®æœåŠ¡ç¾¤ä¸­ä¸è´­ç‰©è½¦æœåŠ¡ã€å•†å“æœåŠ¡ç­‰æœ‰è°ƒç”¨å…³ç³»çš„æœåŠ¡å¯èƒ½éƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªé›†ç¾¤ä¸å¯ç”¨ã€‚</p><p><img src="/assets/image-20241210144453283.D6pda86f.png" alt="image-20241210144453283" loading="lazy"></p><p>è¿™å°±æ˜¯<strong>çº§è”å¤±è´¥é—®é¢˜</strong>ï¼Œæˆ–è€…å«==<strong>é›ªå´©é—®é¢˜</strong>==ã€‚</p><p><img src="/assets/image-20241210144646258.VGCzQ58I.png" alt="image" loading="lazy"></p><p>è¿˜æœ‰è·¨æœåŠ¡çš„äº‹åŠ¡é—®é¢˜ï¼š</p><p>æ¯”å¦‚æ˜¨å¤©è®²åˆ°è¿‡çš„ä¸‹å•ä¸šåŠ¡ï¼Œä¸‹å•çš„è¿‡ç¨‹ä¸­éœ€è¦è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡ï¼š</p><ul><li>å•†å“æœåŠ¡ï¼šæ‰£å‡åº“å­˜</li><li>è®¢å•æœåŠ¡ï¼šä¿å­˜è®¢å•</li><li>è´­ç‰©è½¦æœåŠ¡ï¼šæ¸…ç†è´­ç‰©è½¦</li></ul><p>è¿™äº›ä¸šåŠ¡å…¨éƒ¨éƒ½æ˜¯æ•°æ®åº“çš„<strong>å†™æ“ä½œ</strong>ï¼Œæˆ‘ä»¬å¿…é¡»<strong>ç¡®ä¿æ‰€æœ‰æ“ä½œçš„åŒæ—¶æˆåŠŸæˆ–å¤±è´¥</strong>ã€‚ä½†æ˜¯è¿™äº›æ“ä½œåœ¨<strong>ä¸åŒå¾®æœåŠ¡</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸åŒçš„Tomcat</strong>ï¼Œè¿™æ ·çš„æƒ…å†µå¦‚ä½•**<mark>ç¡®ä¿äº‹åŠ¡ç‰¹æ€§</mark>**å‘¢ï¼Ÿ</p><p>è¿™äº›é—®é¢˜éƒ½ä¼šåœ¨ä»Šå¤©æ‰¾åˆ°ç­”æ¡ˆã€‚</p><p>ä»Šå¤©çš„å†…å®¹ä¼šåˆ†æˆå‡ éƒ¨åˆ†ï¼š</p><ul><li>å¾®æœåŠ¡ä¿æŠ¤ <ul><li>æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ</li><li>è¯·æ±‚é™æµ</li><li>éš”ç¦»å’Œç†”æ–­</li></ul></li><li>åˆ†å¸ƒå¼äº‹åŠ¡ <ul><li>åˆè¯†åˆ†å¸ƒå¼äº‹åŠ¡</li><li>Seata</li></ul></li></ul><p>é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œä½ å°†èƒ½æŒæ¡ä¸‹é¢çš„èƒ½åŠ›ï¼š</p><ul><li>çŸ¥é“é›ªå´©é—®é¢˜äº§ç”ŸåŸå› åŠå¸¸è§è§£å†³æ–¹æ¡ˆ</li><li>èƒ½ä½¿ç”¨Sentinelå®ç°æœåŠ¡ä¿æŠ¤</li><li>ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡äº§ç”Ÿçš„åŸå› </li><li>èƒ½ä½¿ç”¨Seataè§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜</li><li>ç†è§£ATæ¨¡å¼åŸºæœ¬åŸç†</li></ul><h2 id="_1-å¾®æœåŠ¡ä¿æŠ¤" tabindex="-1">1.å¾®æœåŠ¡ä¿æŠ¤ <a class="header-anchor" href="#_1-å¾®æœåŠ¡ä¿æŠ¤" aria-label="Permalink to &quot;1.å¾®æœåŠ¡ä¿æŠ¤&quot;">â€‹</a></h2><p><strong>ä¿è¯æœåŠ¡è¿è¡Œçš„å¥å£®æ€§ï¼Œé¿å…çº§è”å¤±è´¥å¯¼è‡´çš„é›ªå´©é—®é¢˜ï¼Œå°±å±äºå¾®æœåŠ¡ä¿æŠ¤</strong>ã€‚è¿™ç« æˆ‘ä»¬å°±ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹å¾®æœåŠ¡ä¿æŠ¤çš„å¸¸è§æ–¹æ¡ˆä»¥åŠå¯¹åº”çš„æŠ€æœ¯ã€‚</p><h3 id="_1-1-æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ" tabindex="-1">1.1.æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ <a class="header-anchor" href="#_1-1-æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ" aria-label="Permalink to &quot;1.1.æœåŠ¡ä¿æŠ¤æ–¹æ¡ˆ&quot;">â€‹</a></h3><p>å¾®æœåŠ¡ä¿æŠ¤çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š</p><ul><li>è¯·æ±‚é™æµ</li><li>çº¿ç¨‹éš”ç¦»</li><li>æœåŠ¡ç†”æ–­</li></ul><p>è¿™äº›æ–¹æ¡ˆæˆ–å¤šæˆ–å°‘éƒ½ä¼šå¯¼è‡´æœåŠ¡çš„<strong>ä½“éªŒä¸Šç•¥æœ‰ä¸‹é™</strong>ï¼Œæ¯”**<mark>è¯·æ±‚é™æµ</mark>ï¼Œé™ä½äº†å¹¶å‘ä¸Šé™ï¼›<mark>çº¿ç¨‹éš”ç¦»</mark>ï¼Œé™ä½äº†å¯ç”¨èµ„æºæ•°é‡ï¼›<mark>æœåŠ¡ç†”æ–­</mark>ï¼Œé™ä½äº†æœåŠ¡çš„å®Œæ•´åº¦ï¼Œéƒ¨åˆ†æœåŠ¡å˜çš„ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ã€‚<strong>å› æ­¤è¿™äº›æ–¹æ¡ˆéƒ½å±äºæœåŠ¡</strong>é™çº§**çš„æ–¹æ¡ˆã€‚ä½†é€šè¿‡è¿™äº›æ–¹æ¡ˆï¼ŒæœåŠ¡çš„å¥å£®æ€§å¾—åˆ°äº†æå‡ï¼Œ</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€ä¸€äº†è§£è¿™äº›æ–¹æ¡ˆçš„åŸç†ã€‚</p><p><img src="/assets/image-20241210150619467.D9WAuf0G.png" alt="image" loading="lazy"></p><h4 id="_1-1-1-è¯·æ±‚é™æµ" tabindex="-1">1.1.1.è¯·æ±‚é™æµ <a class="header-anchor" href="#_1-1-1-è¯·æ±‚é™æµ" aria-label="Permalink to &quot;1.1.1.è¯·æ±‚é™æµ&quot;">â€‹</a></h4><p>æœåŠ¡æ•…éšœæœ€é‡è¦åŸå› ï¼Œå°±æ˜¯å¹¶å‘å¤ªé«˜ï¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå°±èƒ½é¿å…å¤§éƒ¨åˆ†æ•…éšœã€‚å½“ç„¶ï¼Œæ¥å£çš„å¹¶å‘ä¸æ˜¯ä¸€ç›´å¾ˆé«˜ï¼Œè€Œæ˜¯<strong>çªå‘çš„</strong>ã€‚å› æ­¤è¯·æ±‚é™æµï¼Œå°±æ˜¯<strong>é™åˆ¶æˆ–æ§åˆ¶</strong>æ¥å£è®¿é—®çš„å¹¶å‘æµé‡ï¼Œé¿å…æœåŠ¡å› æµé‡æ¿€å¢è€Œå‡ºç°æ•…éšœã€‚</p><p>è¯·æ±‚é™æµå¾€å¾€ä¼šæœ‰ä¸€ä¸ª<strong>é™æµå™¨</strong>ï¼Œæ•°é‡<strong>é«˜ä½èµ·ä¼</strong>çš„å¹¶å‘è¯·æ±‚æ›²çº¿ï¼Œç»è¿‡é™æµå™¨å°±å˜çš„éå¸¸<strong>å¹³ç¨³</strong>ã€‚è¿™å°±åƒæ˜¯æ°´ç”µç«™çš„å¤§åï¼Œèµ·åˆ°è“„æ°´çš„ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡å¼€å…³æ§åˆ¶æ°´æµå‡ºçš„å¤§å°ï¼Œè®©ä¸‹æ¸¸æ°´æµå§‹ç»ˆç»´æŒåœ¨ä¸€ä¸ªå¹³ç¨³çš„é‡ã€‚</p><p><img src="/assets/image-20241210150201719.CTZ3qnc7.png" alt="image-20241210150201719" loading="lazy"></p><h4 id="_1-1-2-çº¿ç¨‹éš”ç¦»" tabindex="-1">1.1.2.çº¿ç¨‹éš”ç¦» <a class="header-anchor" href="#_1-1-2-çº¿ç¨‹éš”ç¦»" aria-label="Permalink to &quot;1.1.2.çº¿ç¨‹éš”ç¦»&quot;">â€‹</a></h4><p><img src="/assets/image-20241210150407752.DF0S33rz.png" alt="image-20241210150407752" loading="lazy"></p><p>å½“ä¸€ä¸ªä¸šåŠ¡æ¥å£å“åº”æ—¶é—´é•¿ï¼Œè€Œä¸”<strong>å¹¶å‘é«˜æ—¶ï¼Œå°±å¯èƒ½<mark>è€—å°½æœåŠ¡å™¨çš„çº¿ç¨‹èµ„æº</mark>ï¼Œå¯¼è‡´<mark>æœåŠ¡å†…çš„å…¶å®ƒæ¥å£</mark>å—åˆ°å½±å“</strong>ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»æŠŠè¿™ç§å½±å“é™ä½ï¼Œæˆ–è€…<strong>ç¼©å‡å½±å“çš„èŒƒå›´</strong>ã€‚çº¿ç¨‹éš”ç¦»æ­£æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„å¥½åŠæ³•ã€‚</p><p>çº¿ç¨‹éš”ç¦»çš„æ€æƒ³æ¥è‡ªè½®èˆ¹çš„èˆ±å£æ¨¡å¼ï¼š</p><p><img src="/assets/1733754442876-1.BRqZDW-V.png" alt="img" loading="lazy"></p><p>è½®èˆ¹çš„èˆ¹èˆ±ä¼šè¢«éš”æ¿åˆ†å‰²ä¸ºNä¸ªç›¸äº’éš”ç¦»çš„å¯†é—­èˆ±ï¼Œå‡å¦‚è½®èˆ¹è§¦ç¤è¿›æ°´ï¼Œåªæœ‰æŸåçš„éƒ¨åˆ†å¯†é—­èˆ±ä¼šè¿›æ°´ï¼Œè€Œå…¶ä»–èˆ±ç”±äºç›¸äº’éš”ç¦»ï¼Œå¹¶ä¸ä¼šè¿›æ°´ã€‚è¿™æ ·å°±æŠŠè¿›æ°´æ§åˆ¶åœ¨éƒ¨åˆ†èˆ¹ä½“ï¼Œé¿å…äº†æ•´ä¸ªèˆ¹èˆ±è¿›æ°´è€Œæ²‰æ²¡ã€‚</p><p>ä¸ºäº†é¿å…æŸä¸ªæ¥å£æ•…éšœæˆ–å‹åŠ›è¿‡å¤§å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é™å®šæ¯ä¸ªæ¥å£å¯ä»¥ä½¿ç”¨çš„èµ„æºèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å°†å…¶â€œéš”ç¦»â€èµ·æ¥ã€‚</p><p><img src="/assets/image-20241210150342761.W5yrUKkq.png" alt="image-20241210150342761" loading="lazy"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ç»™æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡é™å®šå¯ç”¨çº¿ç¨‹æ•°é‡ä¸Šé™ä¸º20ï¼Œè¿™æ ·å³ä¾¿æŸ¥è¯¢è´­ç‰©è½¦çš„è¯·æ±‚å› ä¸ºæŸ¥è¯¢å•†å“æœåŠ¡è€Œå‡ºç°æ•…éšœï¼Œä¹Ÿä¸ä¼šå¯¼è‡´æœåŠ¡å™¨çš„çº¿ç¨‹èµ„æºè¢«è€—å°½ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒæ¥å£ã€‚</p><h4 id="_1-1-3-æœåŠ¡ç†”æ–­" tabindex="-1">1.1.3.æœåŠ¡ç†”æ–­ <a class="header-anchor" href="#_1-1-3-æœåŠ¡ç†”æ–­" aria-label="Permalink to &quot;1.1.3.æœåŠ¡ç†”æ–­&quot;">â€‹</a></h4><p><img src="/assets/image-20241210150508209.BwUuktQi.png" alt="image-20241210150508209" loading="lazy"></p><p>çº¿ç¨‹éš”ç¦»è™½ç„¶é¿å…äº†é›ªå´©é—®é¢˜ï¼Œä½†**æ•…éšœæœåŠ¡ï¼ˆå•†å“æœåŠ¡ï¼‰ä¾ç„¶ä¼šæ‹–æ…¢è´­ç‰©è½¦æœåŠ¡ï¼ˆæœåŠ¡è°ƒç”¨æ–¹ï¼‰çš„æ¥å£å“åº”é€Ÿåº¦ã€‚**è€Œä¸”å•†å“æŸ¥è¯¢çš„æ•…éšœä¾ç„¶ä¼šå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦åŠŸèƒ½å‡ºç°æ•…éšœï¼Œè´­ç‰©è½¦ä¸šåŠ¡ä¹Ÿå˜çš„ä¸å¯ç”¨äº†ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦åšä¸¤ä»¶äº‹æƒ…ï¼š</p><ul><li><strong>ç¼–å†™æœåŠ¡é™çº§é€»è¾‘</strong>ï¼šå°±æ˜¯æœåŠ¡è°ƒç”¨å¤±è´¥åçš„å¤„ç†é€»è¾‘ï¼Œæ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œå¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥<strong>è¿”å›å‹å¥½æç¤ºæˆ–é»˜è®¤æ•°æ®ã€‚</strong></li><li><strong>å¼‚å¸¸ç»Ÿè®¡å’Œç†”æ–­</strong>ï¼š<strong>ç»Ÿè®¡æœåŠ¡æä¾›æ–¹çš„å¼‚å¸¸æ¯”ä¾‹</strong>ï¼Œå½“æ¯”ä¾‹è¿‡é«˜è¡¨æ˜è¯¥æ¥å£ä¼šå½±å“åˆ°å…¶å®ƒæœåŠ¡ï¼Œåº”è¯¥æ‹’ç»è°ƒç”¨è¯¥æ¥å£ï¼Œè€Œæ˜¯ç›´æ¥<strong>èµ°é™çº§é€»è¾‘</strong>ã€‚</li></ul><p><img src="/assets/image-20241210150552039.C4bz4VQN.png" alt="image-20241210150552039" loading="lazy"></p><h3 id="_1-2-sentinel-å“¨å…µ" tabindex="-1">1.2.<mark>Sentinel-å“¨å…µ</mark> <a class="header-anchor" href="#_1-2-sentinel-å“¨å…µ" aria-label="Permalink to &quot;1.2.==Sentinel-å“¨å…µ==&quot;">â€‹</a></h3><p>å¾®æœåŠ¡ä¿æŠ¤çš„æŠ€æœ¯æœ‰å¾ˆå¤šï¼Œä½†åœ¨ç›®å‰å›½å†…ä½¿ç”¨è¾ƒå¤šçš„è¿˜æ˜¯Sentinelï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ Sentinelçš„ä½¿ç”¨ã€‚</p><p><img src="/assets/image-20241210150730597.DVuEo9Ge.png" alt="image-20241210150730597" loading="lazy"></p><h4 id="_1-2-1-ä»‹ç»å’Œå®‰è£…" tabindex="-1">1.2.1.ä»‹ç»å’Œå®‰è£… <a class="header-anchor" href="#_1-2-1-ä»‹ç»å’Œå®‰è£…" aria-label="Permalink to &quot;1.2.1.ä»‹ç»å’Œå®‰è£…&quot;">â€‹</a></h4><p>Sentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾æœåŠ¡ä¿æŠ¤æ¡†æ¶ï¼Œç›®å‰å·²ç»åŠ å…¥SpringCloudAlibabaä¸­ã€‚å®˜æ–¹ç½‘ç«™ï¼š</p><p><a href="https://sentinelguard.io/zh-cn/" target="_blank" rel="noreferrer">https://sentinelguard.io/zh-cn/</a></p><p><img src="/assets/image-20241210150913282.C706rKb8.png" alt="image-20241210150913282" loading="lazy"></p><p>Sentinel çš„ä½¿ç”¨å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†:</p><ul><li><strong>æ ¸å¿ƒåº“</strong>ï¼ˆJaråŒ…ï¼‰ï¼šä¸ä¾èµ–ä»»ä½•æ¡†æ¶/åº“ï¼Œèƒ½å¤Ÿè¿è¡Œäº Java 8 åŠä»¥ä¸Šçš„ç‰ˆæœ¬çš„è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒæ—¶å¯¹ Dubbo / Spring Cloud ç­‰æ¡†æ¶ä¹Ÿæœ‰è¾ƒå¥½çš„æ”¯æŒã€‚åœ¨é¡¹ç›®ä¸­å¼•å…¥ä¾èµ–å³å¯å®ç°æœåŠ¡é™æµã€éš”ç¦»ã€ç†”æ–­ç­‰åŠŸèƒ½ã€‚</li><li><strong>æ§åˆ¶å°</strong>ï¼ˆDashboardï¼‰ï¼šDashboard ä¸»è¦è´Ÿè´£ç®¡ç†æ¨é€è§„åˆ™ã€ç›‘æ§ã€ç®¡ç†æœºå™¨ä¿¡æ¯ç­‰ã€‚</li></ul><p>ä¸ºäº†æ–¹ä¾¿ç›‘æ§å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å…ˆæŠŠSentinelçš„æ§åˆ¶å°æ­å»ºå‡ºæ¥ã€‚</p><p>1ï¼‰ä¸‹è½½jaråŒ…</p><p>ä¸‹è½½åœ°å€ï¼š</p><p><a href="https://github.com/alibaba/Sentinel/releases" target="_blank" rel="noreferrer">https://github.com/alibaba/Sentinel/releases</a></p><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è¯¾å‰èµ„æ–™æä¾›çš„ç‰ˆæœ¬ï¼š</p><p><img src="/assets/1733754442877-2.DvA8vGiy.png" alt="img" loading="lazy"></p><p>2ï¼‰è¿è¡Œ</p><p>å°†jaråŒ…æ”¾åœ¨ä»»æ„éä¸­æ–‡ã€ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ä¸‹ï¼Œé‡å‘½åä¸º<code>sentinel-dashboard.jar</code>ï¼š</p><p><img src="/assets/1733754442877-3.DpyZfw05.png" alt="img" loading="lazy"></p><p>ç„¶åè¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨æ§åˆ¶å°ï¼š</p><p><code>&lt;h2 id=&quot;Sentinel-æœ¬æœºéƒ¨ç½²&quot;&gt;</code>Sentinel-æœ¬æœºéƒ¨ç½²<code>&lt;/h2&gt;</code></p><div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dserver.port=8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dcsp.sentinel.dashboard.server=localhost:8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dproject.name=sentinel-dashboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sentinel-dashboard.jar</span></span></code></pre></div><p>å…¶å®ƒå¯åŠ¨æ—¶å¯é…ç½®å‚æ•°å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://github.com/alibaba/Sentinel/wiki/%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noreferrer">https://github.com/alibaba/Sentinel/wiki/å¯åŠ¨é…ç½®é¡¹</a></p><p>3ï¼‰è®¿é—®</p><p>è®¿é—®<code>[http://localhost:8090](http://localhost:8080)</code>é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°sentinelçš„æ§åˆ¶å°äº†ï¼š</p><p><img src="/assets/1733754442877-4.B9uuPduw.png" alt="img" loading="lazy"></p><p>éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œé»˜è®¤éƒ½æ˜¯ï¼šsentinel</p><p>ç™»å½•åï¼Œå³å¯çœ‹åˆ°æ§åˆ¶å°ï¼Œé»˜è®¤ä¼šç›‘æ§sentinel-dashboardæœåŠ¡æœ¬èº«ï¼š</p><p><img src="/assets/1733754442878-5.6-rHxDPO.png" alt="img" loading="lazy"></p><h4 id="_1-2-2-å¾®æœåŠ¡æ•´åˆ" tabindex="-1">1.2.2.å¾®æœåŠ¡æ•´åˆ <a class="header-anchor" href="#_1-2-2-å¾®æœåŠ¡æ•´åˆ" aria-label="Permalink to &quot;1.2.2.å¾®æœåŠ¡æ•´åˆ&quot;">â€‹</a></h4><p>æˆ‘ä»¬åœ¨<code>cart-service</code>æ¨¡å—ä¸­æ•´åˆsentinelï¼Œè¿æ¥<code>sentinel-dashboard</code>æ§åˆ¶å°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š 1ï¼‰å¼•å…¥sentinelä¾èµ–</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--é˜¿é‡Œ-sentinel--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-sentinel&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>2ï¼‰é…ç½®æ§åˆ¶å°</p><p>ä¿®æ”¹application.yamlæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      transport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:8090</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #sentinel æ§åˆ¶å°åœ°å€</span></span></code></pre></div><p>3ï¼‰è®¿é—®<code>cart-service</code>çš„ä»»æ„ç«¯ç‚¹</p><p>é‡å¯<code>cart-service</code>ï¼Œç„¶åè®¿é—®æŸ¥è¯¢è´­ç‰©è½¦æ¥å£ï¼Œsentinelçš„å®¢æˆ·ç«¯å°±ä¼šå°†æœåŠ¡è®¿é—®çš„ä¿¡æ¯æäº¤åˆ°<code>sentinel-dashboard</code>æ§åˆ¶å°ã€‚å¹¶å±•ç¤ºå‡ºç»Ÿè®¡ä¿¡æ¯ï¼š</p><p><img src="/assets/1733754442878-6.gU4qWzCB.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»<strong>ç°‡ç‚¹é“¾è·¯èœå•</strong>ï¼Œä¼šçœ‹åˆ°ä¸‹é¢çš„é¡µé¢ï¼š</p><p><img src="/assets/1733754442878-7.B08cipU7.png" alt="img" loading="lazy"></p><p>æ‰€è°“**<mark>ç°‡ç‚¹é“¾è·¯</mark><strong>ï¼Œå°±æ˜¯å•æœºè°ƒç”¨é“¾è·¯ï¼Œæ˜¯</strong>ä¸€æ¬¡è¯·æ±‚è¿›å…¥æœåŠ¡åç»è¿‡çš„æ¯ä¸€ä¸ª<mark>è¢«<code>Sentinel</code>ç›‘æ§çš„èµ„æº</mark>**ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Sentinel</code>ä¼šç›‘æ§<code>SpringMVC</code>çš„<mark>æ¯ä¸€ä¸ª<code>Endpoint</code>ï¼ˆæ¥å£ï¼‰</mark>ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬çœ‹åˆ°**<code>/carts</code>è¿™ä¸ªæ¥å£è·¯å¾„<strong>å°±æ˜¯å…¶ä¸­ä¸€ä¸ª</strong>ç°‡ç‚¹**ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œ<strong>é™æµã€ç†”æ–­ã€éš”ç¦»</strong>ç­‰ä¿æŠ¤æªæ–½ã€‚</p><p>ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„SpringMVCæ¥å£æ˜¯æŒ‰ç…§Restfulé£æ ¼è®¾è®¡ï¼Œå› æ­¤è´­ç‰©è½¦çš„æŸ¥è¯¢ã€åˆ é™¤ã€ä¿®æ”¹ç­‰æ¥å£å…¨éƒ¨éƒ½æ˜¯<code>/carts</code>è·¯å¾„ï¼š</p><p><img src="/assets/1733754442879-8.4TEMYGhq.png" alt="img" loading="lazy"></p><p>é»˜è®¤æƒ…å†µä¸‹Sentinelä¼šæŠŠè·¯å¾„ä½œä¸ºç°‡ç‚¹èµ„æºçš„åç§°ï¼Œ<strong>æ— æ³•åŒºåˆ†è·¯å¾„ç›¸åŒä½†è¯·æ±‚æ–¹å¼ä¸åŒçš„æ¥å£ï¼ŒæŸ¥è¯¢ã€åˆ é™¤ã€ä¿®æ”¹ç­‰éƒ½è¢«è¯†åˆ«ä¸ºä¸€ä¸ªç°‡ç‚¹èµ„æº</strong>ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©**<mark>æ‰“å¼€Sentinelçš„è¯·æ±‚æ–¹å¼å‰ç¼€</mark><strong>ï¼ŒæŠŠ<code>è¯·æ±‚æ–¹å¼ + è¯·æ±‚è·¯å¾„</code>ä½œä¸º</strong>ç°‡ç‚¹èµ„æºå**ï¼š</p><p>é¦–å…ˆï¼Œåœ¨<code>cart-service</code>çš„<code>application.yml</code>ä¸­æ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      transport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:8090</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #sentinel æ§åˆ¶å°åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      http-method-specify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å¼€å¯è¯·æ±‚æ–¹å¼å‰ç¼€ï¼Œå°†è¯·æ±‚æ–¹å¼ä½œä¸ºèµ„æºåç§°</span></span></code></pre></div><p>ç„¶åï¼Œé‡å¯æœåŠ¡ï¼Œé€šè¿‡é¡µé¢è®¿é—®è´­ç‰©è½¦çš„ç›¸å…³æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°sentinelæ§åˆ¶å°çš„ç°‡ç‚¹é“¾è·¯å‘ç”Ÿäº†å˜åŒ–ï¼š</p><p><img src="/assets/1733754442879-9.DCm3Pjob.png" alt="img" loading="lazy"></p><p><img src="/assets/image-20241210161347361.Du00DimI.png" alt="image-20241210161347361" loading="lazy"></p><h3 id="_1-3-è¯·æ±‚é™æµ" tabindex="-1">1.3.<mark>è¯·æ±‚é™æµ</mark> <a class="header-anchor" href="#_1-3-è¯·æ±‚é™æµ" aria-label="Permalink to &quot;1.3.==è¯·æ±‚é™æµ==&quot;">â€‹</a></h3><p>åœ¨ç°‡ç‚¹é“¾è·¯åé¢ç‚¹å‡»æµæ§æŒ‰é’®ï¼Œå³å¯å¯¹å…¶åšé™æµé…ç½®ï¼š</p><p><img src="/assets/1733754442879-10.K9wY_1JX.png" alt="img" loading="lazy"></p><p>åœ¨å¼¹å‡ºçš„èœå•ä¸­è¿™æ ·å¡«å†™ï¼š</p><p><img src="/assets/1733754442879-11.BuXh-wY-.png" alt="img" loading="lazy"></p><p>è¿™æ ·å°±æŠŠæŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨è¿™ä¸ªç°‡ç‚¹èµ„æºçš„æµé‡é™åˆ¶åœ¨äº†æ¯ç§’6ä¸ªï¼Œä¹Ÿå°±æ˜¯æœ€å¤§QPSä¸º6.</p><p>QPSï¼ˆQueries Per Secondï¼Œ<strong>æ¯ç§’æŸ¥è¯¢ç‡</strong>ï¼‰æ˜¯ç”¨æ¥**è¡¡é‡ä¸€ä¸ªç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…èƒ½å¤Ÿå¤„ç†çš„<mark>æŸ¥è¯¢è¯·æ±‚æ•°é‡çš„æŒ‡æ ‡</mark>ã€‚**å®ƒé€šå¸¸ç”¨äºè¯„ä¼°æœåŠ¡å™¨ã€æ•°æ®åº“ã€æœç´¢å¼•æ“æˆ–å…¶ä»–ç³»ç»Ÿçš„æ€§èƒ½å’Œè´Ÿè½½èƒ½åŠ›ã€‚</p><h4 id="qps-çš„ä½œç”¨" tabindex="-1"><strong>QPS çš„ä½œç”¨</strong> <a class="header-anchor" href="#qps-çš„ä½œç”¨" aria-label="Permalink to &quot;**QPS çš„ä½œç”¨**&quot;">â€‹</a></h4><ol><li><strong>è¡¡é‡æ€§èƒ½</strong>ï¼šåæ˜ ç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ï¼Œå¸®åŠ©è¯†åˆ«ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</li><li><strong>å®¹é‡è§„åˆ’</strong>ï¼šé€šè¿‡è®¡ç®—å³°å€¼å’Œå¹³å‡ QPSï¼Œå¯ä»¥å†³å®šæœåŠ¡å™¨çš„æ•°é‡ã€è´Ÿè½½å‡è¡¡ç­–ç•¥ç­‰ã€‚</li><li><strong>ä¼˜åŒ–åŸºç¡€</strong>ï¼šQPS è¾ƒä½æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä¼˜åŒ–ä»£ç æˆ–æ¶æ„ä»¥æé«˜å¤„ç†èƒ½åŠ›ã€‚</li><li><strong>ç›‘æ§å¥åº·çŠ¶æ€</strong>ï¼šç›‘æ§ QPS å˜åŒ–ï¼Œå‘ç°å¼‚å¸¸ï¼ˆå¦‚çªç„¶çš„æµé‡æš´å¢æˆ–ä¸‹é™ï¼‰å¹¶åŠæ—¶å“åº”ã€‚</li></ol><hr><h5 id="è®¡ç®—å…¬å¼" tabindex="-1"><strong>è®¡ç®—å…¬å¼</strong> <a class="header-anchor" href="#è®¡ç®—å…¬å¼" aria-label="Permalink to &quot;**è®¡ç®—å…¬å¼**&quot;">â€‹</a></h5><p><img src="/assets/image-20241214141945260.BWF8S1bO.png" alt="image-20241214141945260" loading="lazy"></p><hr><h5 id="å¸¸è§åœºæ™¯" tabindex="-1"><strong>å¸¸è§åœºæ™¯</strong> <a class="header-anchor" href="#å¸¸è§åœºæ™¯" aria-label="Permalink to &quot;**å¸¸è§åœºæ™¯**&quot;">â€‹</a></h5><ol><li><strong>æœç´¢å¼•æ“</strong>ï¼šå¦‚ Google æˆ–ç™¾åº¦ï¼Œè¡¡é‡æœç´¢è¯·æ±‚çš„å¤„ç†èƒ½åŠ›ã€‚</li><li><strong>API æœåŠ¡</strong>ï¼šä¾‹å¦‚ç”µå•†ç½‘ç«™çš„åº“å­˜æŸ¥è¯¢ã€æ”¯ä»˜æ¥å£è¯·æ±‚ç­‰ã€‚</li><li><strong>æ•°æ®åº“</strong>ï¼šç”¨æ¥è¯„ä¼°æŸ¥è¯¢æ“ä½œçš„ååé‡ã€‚</li><li><strong>Web æœåŠ¡å™¨</strong>ï¼šè¡¡é‡è®¿é—®é¡µé¢çš„èƒ½åŠ›ã€‚</li></ol><hr><h5 id="æé«˜-qps-çš„æ–¹æ³•" tabindex="-1"><strong>æé«˜ QPS çš„æ–¹æ³•</strong> <a class="header-anchor" href="#æé«˜-qps-çš„æ–¹æ³•" aria-label="Permalink to &quot;**æé«˜ QPS çš„æ–¹æ³•**&quot;">â€‹</a></h5><ol><li>ä¼˜åŒ–ä»£ç ï¼š <ul><li>å‡å°‘ä¸å¿…è¦çš„è®¡ç®—ã€‚</li><li>æé«˜ç®—æ³•æ•ˆç‡ã€‚</li></ul></li><li>ç¼“å­˜æœºåˆ¶ï¼š <ul><li>ä½¿ç”¨ç¼“å­˜ï¼ˆå¦‚ Redisï¼‰å‡å°‘é‡å¤è®¡ç®—å’Œæ•°æ®åº“æŸ¥è¯¢ã€‚</li></ul></li><li>è´Ÿè½½å‡è¡¡ï¼š <ul><li>ä½¿ç”¨ Nginxã€HAProxy ç­‰å·¥å…·å°†æµé‡åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ã€‚</li></ul></li><li>å‚ç›´æ‰©å±•ä¸æ°´å¹³æ‰©å±•ï¼š <ul><li>å‚ç›´æ‰©å±•ï¼šæå‡å•æœºæ€§èƒ½ï¼ˆå¦‚å¢åŠ  CPU å’Œå†…å­˜ï¼‰ã€‚</li><li>æ°´å¹³æ‰©å±•ï¼šå¢åŠ æœåŠ¡å™¨æ•°é‡ã€‚</li></ul></li><li>å¼‚æ­¥å¤„ç†ï¼š <ul><li>å°†è€—æ—¶æ“ä½œæ”¾å…¥åå°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ˆå¦‚ä½¿ç”¨ RabbitMQã€Kafkaï¼‰ã€‚</li></ul></li><li>æ•°æ®åº“ä¼˜åŒ–ï¼š <ul><li>ä½¿ç”¨ç´¢å¼•ã€‚</li><li>å‡å°‘å¤æ‚æŸ¥è¯¢ã€‚</li><li>åˆ†åº“åˆ†è¡¨ã€‚</li></ul></li></ol><hr><p>æˆ‘ä»¬åˆ©ç”¨<strong>Jemeteråšé™æµæµ‹è¯•</strong>ï¼Œæˆ‘ä»¬æ¯ç§’å‘å‡º10ä¸ªè¯·æ±‚ï¼š</p><p><img src="/assets/1733754442880-12.DwWGdcEw.png" alt="img" loading="lazy"></p><p>æ·»åŠ çº¿ç¨‹ç»„å³æ·»åŠ ä¸€å †çš„ç”¨æˆ·ï¼Œ<strong>çº¿ç¨‹æ•°ä»£è¡¨ç”¨æˆ·æ•°é‡</strong>ï¼Œ<strong>Ramp-upæ—¶é—´æŒ‡çš„æ˜¯ç”¨æˆ·è®¿é—®æ—¶é—´</strong>ï¼Œ100ç§’ï¼Œè¡¨ç¤º1000ä¸ª<strong>ç”¨æˆ·100ç§’å†…å®Œæˆ</strong>ï¼Œé‚£å°±æ˜¯æ¯ç§’10æ¬¡ï¼Œ<strong><mark>å¹¶å‘é‡å°±æ˜¯æ¯ç§’é’Ÿç”¨æˆ·è¯·æ±‚10ä¸ªå³QPSä¸º10</mark></strong>ã€‚å¾ªç¯æ¬¡æ•°æ„æ€å°±æ˜¯æ¯ä¸ªç”¨æˆ·åªå‘ä¸€æ¬¡è¯·æ±‚ã€‚</p><p>æœ€ç»ˆç›‘æ§ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/assets/1733754442880-13.BWeIVdag.png" alt="img" loading="lazy"></p><p>å¯ä»¥çœ‹å‡º<code>GET:/carts</code>è¿™ä¸ªæ¥å£çš„é€šè¿‡QPSç¨³å®šåœ¨6é™„è¿‘ï¼Œè€Œæ‹’ç»çš„QPSåœ¨4é™„è¿‘ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p><img src="/assets/image-20241210170120934.CA1ePRvp.png" alt="image-20241210170120934" loading="lazy"></p><p>HTTPçŠ¶æ€ç 429è¡¨ç¤º**å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚è¿‡å¤šï¼Œè¶…å‡ºäº†æœåŠ¡å™¨çš„å¤„ç†èƒ½åŠ›æˆ–é™åˆ¶ã€‚**å®ƒæ˜¯ä¸€ç§ååº”é€Ÿç‡é™åˆ¶çš„çŠ¶æ€ç ï¼Œç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ã€‚</p><p><img src="/assets/image-20241210170156063.Ws76NPm8.png" alt="image-20241210170156063" loading="lazy"></p><h3 id="_1-4-çº¿ç¨‹éš”ç¦»" tabindex="-1">1.4.<mark>çº¿ç¨‹éš”ç¦»</mark> <a class="header-anchor" href="#_1-4-çº¿ç¨‹éš”ç¦»" aria-label="Permalink to &quot;1.4.==çº¿ç¨‹éš”ç¦»==&quot;">â€‹</a></h3><p><strong>é™æµå¯ä»¥é™ä½æœåŠ¡å™¨å‹åŠ›</strong>ï¼Œå°½é‡å‡å°‘<strong>å› å¹¶å‘æµé‡å¼•èµ·çš„æœåŠ¡æ•…éšœçš„æ¦‚ç‡</strong>ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨é¿å…æœåŠ¡æ•…éšœã€‚ä¸€æ—¦æŸä¸ªæœåŠ¡å‡ºç°æ•…éšœï¼Œæˆ‘ä»¬å¿…é¡»éš”ç¦»å¯¹è¿™ä¸ªæœåŠ¡çš„è°ƒç”¨ï¼Œé¿å…å‘ç”Ÿé›ªå´©ã€‚</p><p>æ¯”å¦‚ï¼ŒæŸ¥è¯¢è´­ç‰©è½¦çš„æ—¶å€™éœ€è¦æŸ¥è¯¢å•†å“ï¼Œä¸ºäº†é¿å…å› å•†å“æœåŠ¡å‡ºç°æ•…éšœå¯¼è‡´è´­ç‰©è½¦æœåŠ¡çº§è”å¤±è´¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè´­ç‰©è½¦ä¸šåŠ¡ä¸­æŸ¥è¯¢å•†å“çš„éƒ¨åˆ†éš”ç¦»èµ·æ¥ï¼Œé™åˆ¶å¯ç”¨çš„çº¿ç¨‹èµ„æºï¼š</p><p><img src="/assets/image-20241210170933978.xOTRefdQ.png" alt="image-20241210170933978" loading="lazy"></p><p>è¿™æ ·ï¼Œ<strong>å³ä¾¿å•†å“æœåŠ¡å‡ºç°æ•…éšœï¼Œæœ€å¤šå¯¼è‡´<mark>æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡æ•…éšœ</mark>ï¼Œå¹¶ä¸”å¯ç”¨çš„çº¿ç¨‹èµ„æºä¹Ÿè¢«é™å®šåœ¨ä¸€å®šèŒƒå›´</strong>ï¼Œ<mark><strong>ä¸ä¼šå¯¼è‡´æ•´ä¸ªè´­ç‰©è½¦æœåŠ¡å´©æºƒã€‚</strong></mark></p><p>æ¢å¥è¯è¯´ï¼Œ<strong>å°±æ˜¯æŠŠæœåŠ¡<mark>æŒ‰ä¸åŒâ€œä¸‹æ¸¸â€ä¸šåŠ¡è¿›è¡Œçº¿ç¨‹éš”ç¦»</mark>ï¼Œå¦‚æœä¸€æ–¹çš„â€œä¸‹æ¸¸â€æ•…éšœï¼Œç”±äºé™åˆ¶äº†æ¯ä¸ªâ€œä¸‹æ¸¸â€ä¸šåŠ¡çš„å¯ç”¨çº¿ç¨‹èµ„æºï¼Œå¯ä¿è¯è¯¥æœåŠ¡çš„å…¶ä»–â€œä¸‹æ¸¸â€ä¸šåŠ¡ä¸ä¼šå—å…¶å½±å“ã€‚</strong></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å¯¹æŸ¥è¯¢å•†å“çš„FeignClientæ¥å£åšçº¿ç¨‹éš”ç¦»ã€‚</p><p><img src="/assets/image-20241210172331433.ZbFMQGto.png" alt="image" loading="lazy"></p><h4 id="_1-4-1-æ¨¡æ‹Ÿæµ‹è¯•-ä¸ç”¨çº¿ç¨‹éš”ç¦»æ—¶" tabindex="-1">1.4.1.æ¨¡æ‹Ÿæµ‹è¯•(ä¸ç”¨çº¿ç¨‹éš”ç¦»æ—¶) <a class="header-anchor" href="#_1-4-1-æ¨¡æ‹Ÿæµ‹è¯•-ä¸ç”¨çº¿ç¨‹éš”ç¦»æ—¶" aria-label="Permalink to &quot;1.4.1.æ¨¡æ‹Ÿæµ‹è¯•(ä¸ç”¨çº¿ç¨‹éš”ç¦»æ—¶)&quot;">â€‹</a></h4><p><strong>1ã€æŸ¥è¯¢å•†å“æœåŠ¡-æ¨¡æ‹Ÿä¸šåŠ¡å»¶è¿Ÿ</strong></p><p><img src="/assets/image-20241210172901678.B1x9tNNy.png" alt="image-20241210172901678" loading="lazy"></p><p><strong>2ã€ä½¿ç”¨JMeterå¯¹æŸ¥è¯¢è´­ç‰©è½¦æ¥å£è¿›è¡Œå‹åŠ›æµ‹è¯•</strong></p><p><img src="/assets/image-20241210174120666.BH1RtKZl.png" alt="image-20241210174120666" loading="lazy"></p><p><img src="/assets/image-20241210174132476.Co9z6uTR.png" alt="image-20241210174132476" loading="lazy"></p><p><img src="/assets/image-20241210175454683.BpS8ACwh.png" alt="image-20241210175454683" loading="lazy"></p><p><strong>3ã€è´­ç‰©è½¦æœåŠ¡ä¸­å…¶ä»–ä¸šåŠ¡å—å½±å“</strong></p><p><img src="/assets/image-20241210174352418.DzlSVw9u.png" alt="image-20241210174352418" loading="lazy"></p><p><img src="/assets/image-20241210173645735.Cyqam9HA.png" alt="image-20241210173645735" loading="lazy"></p><h4 id="_1-4-2-openfeignæ•´åˆsentinel" tabindex="-1">1.4.2.<mark>OpenFeignæ•´åˆSentinel</mark> <a class="header-anchor" href="#_1-4-2-openfeignæ•´åˆsentinel" aria-label="Permalink to &quot;1.4.2.==OpenFeignæ•´åˆSentinel==&quot;">â€‹</a></h4><p>ä¿®æ”¹cart-serviceæ¨¡å—çš„application.ymlæ–‡ä»¶ï¼Œ<strong>å¼€å¯Feignçš„sentinelåŠŸèƒ½</strong>ï¼š</p><p><img src="/assets/image-20241214153740515.BQKhnX7g.png" alt="image-20241214153740515" loading="lazy"></p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ä¸æ˜¯åœ¨springçº§åˆ«ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">feign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ</span></span></code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹SpringBooté¡¹ç›®çš„<strong>tomcatæœ€å¤§çº¿ç¨‹æ•°æ˜¯200ï¼Œå…è®¸çš„æœ€å¤§è¿æ¥æ˜¯8492ï¼Œå•æœºæµ‹è¯•å¾ˆéš¾æ‰“æ»¡ã€‚</strong></p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸‹cart-serviceæ¨¡å—çš„application.ymlæ–‡ä»¶ï¼Œ<strong>ä¿®æ”¹tomcatè¿æ¥</strong>ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8082</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tomcat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    threads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…è®¸çš„æœ€å¤§çº¿ç¨‹æ•°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    accept-count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœ€å¤§æ’é˜Ÿç­‰å¾…æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    max-connections</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…è®¸çš„æœ€å¤§è¿æ¥</span></span></code></pre></div><p>ç„¶åé‡å¯cart-serviceæœåŠ¡ï¼Œå¯ä»¥çœ‹åˆ°<strong>æŸ¥è¯¢å•†å“çš„FeignClientè‡ªåŠ¨å˜æˆäº†ä¸€ä¸ªç°‡ç‚¹èµ„æº</strong>ï¼š</p><p><img src="/assets/1733754442880-14.DzPr7VCd.png" alt="img" loading="lazy"></p><h4 id="_1-4-3-é…ç½®çº¿ç¨‹éš”ç¦»" tabindex="-1">1.4.3.é…ç½®çº¿ç¨‹éš”ç¦» <a class="header-anchor" href="#_1-4-3-é…ç½®çº¿ç¨‹éš”ç¦»" aria-label="Permalink to &quot;1.4.3.é…ç½®çº¿ç¨‹éš”ç¦»&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œç‚¹å‡»æŸ¥è¯¢å•†å“çš„FeignClientå¯¹åº”çš„ç°‡ç‚¹èµ„æºåé¢çš„æµæ§æŒ‰é’®ï¼š</p><p><img src="/assets/1733754442880-15.FkObSmyA.png" alt="img" loading="lazy"></p><p>åœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™ä¸‹é¢å†…å®¹ï¼š</p><p><img src="/assets/1733754442881-16.rjlpIziE.png" alt="img" loading="lazy"></p><p>æ³¨æ„ï¼Œè¿™é‡Œå‹¾é€‰çš„æ˜¯**<mark>å¹¶å‘çº¿ç¨‹æ•°é™åˆ¶</mark><strong>ï¼Œä¹Ÿå°±æ˜¯è¯´</strong>è¿™ä¸ªæŸ¥è¯¢åŠŸèƒ½æœ€å¤šä½¿ç”¨5ä¸ªçº¿ç¨‹ï¼Œè€Œä¸æ˜¯5QPS**ã€‚<strong>å¦‚æœæŸ¥è¯¢å•†å“çš„æ¥å£æ¯ç§’å¤„ç†2ä¸ªè¯·æ±‚(<mark>ä½¿ç”¨Thread.sleep(500)</mark>)ï¼Œåˆ™5ä¸ªçº¿ç¨‹çš„<mark>å®é™…QPSåœ¨10å·¦å³</mark>ï¼Œè€Œè¶…å‡ºçš„è¯·æ±‚è‡ªç„¶ä¼šè¢«æ‹’ç»ã€‚</strong></p><p><img src="/assets/1733754442881-17.G1q1kAXb.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬åˆ©ç”¨Jemeteræµ‹è¯•ï¼Œæ¯ç§’å‘é€100ä¸ªè¯·æ±‚ï¼š</p><p><img src="/assets/1733754442881-18.DOBQWmuH.png" alt="img" loading="lazy"></p><p>æœ€ç»ˆæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="/assets/1733754442881-19.DM7ufdx6.png" alt="img" loading="lazy"></p><p>è¿›å…¥æŸ¥è¯¢è´­ç‰©è½¦çš„è¯·æ±‚æ¯ç§’å¤§æ¦‚åœ¨100ï¼Œè€Œåœ¨æŸ¥è¯¢å•†å“æ—¶å´åªå‰©ä¸‹æ¯ç§’10å·¦å³ï¼Œç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>æ­¤æ—¶å¦‚æœæˆ‘ä»¬é€šè¿‡é¡µé¢è®¿é—®è´­ç‰©è½¦çš„å…¶å®ƒæ¥å£ï¼Œä¾‹å¦‚æ·»åŠ è´­ç‰©è½¦ã€ä¿®æ”¹è´­ç‰©è½¦å•†å“æ•°é‡ï¼Œå‘ç°ä¸å—å½±å“ï¼š</p><p><img src="/assets/1733754442881-20.CoA482LJ.png" alt="img" loading="lazy"></p><p>å“åº”æ—¶é—´éå¸¸çŸ­ï¼Œè¿™å°±è¯æ˜çº¿ç¨‹éš”ç¦»èµ·åˆ°äº†ä½œç”¨ï¼Œå°½ç®¡æŸ¥è¯¢è´­ç‰©è½¦è¿™ä¸ªæ¥å£å¹¶å‘å¾ˆé«˜ï¼Œä½†æ˜¯å®ƒèƒ½ä½¿ç”¨çš„çº¿ç¨‹èµ„æºè¢«é™åˆ¶äº†ï¼Œå› æ­¤ä¸ä¼šå½±å“åˆ°å…¶å®ƒæ¥å£ã€‚</p><p><img src="/assets/image-20241210174934235.CewlYVIM.png" alt="image-20241210174934235" loading="lazy"></p><h3 id="_1-5-æœåŠ¡ç†”æ–­" tabindex="-1">1.5.<mark>æœåŠ¡ç†”æ–­</mark> <a class="header-anchor" href="#_1-5-æœåŠ¡ç†”æ–­" aria-label="Permalink to &quot;1.5.==æœåŠ¡ç†”æ–­==&quot;">â€‹</a></h3><p>åœ¨ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬åˆ©ç”¨çº¿ç¨‹éš”ç¦»å¯¹æŸ¥è¯¢è´­ç‰©è½¦ä¸šåŠ¡è¿›è¡Œéš”ç¦»ï¼Œä¿æŠ¤äº†è´­ç‰©è½¦æœåŠ¡çš„å…¶å®ƒæ¥å£ã€‚ç”±äºæŸ¥è¯¢å•†å“çš„åŠŸèƒ½è€—æ—¶è¾ƒé«˜ï¼ˆæˆ‘ä»¬æ¨¡æ‹Ÿäº†500æ¯«ç§’å»¶æ—¶ï¼‰ï¼Œå†åŠ ä¸Šçº¿ç¨‹éš”ç¦»é™å®šäº†çº¿ç¨‹æ•°ä¸º5ï¼Œå¯¼è‡´æ¥å£ååèƒ½åŠ›æœ‰é™ï¼Œæœ€ç»ˆQPSåªæœ‰10å·¦å³ã€‚è¿™å°±å¯¼è‡´äº†å‡ ä¸ªé—®é¢˜ï¼š</p><p>ç¬¬ä¸€ï¼Œè¶…å‡ºçš„QPSä¸Šé™çš„è¯·æ±‚å°±åªèƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œä»è€Œå¯¼è‡´è´­ç‰©è½¦çš„æŸ¥è¯¢å¤±è´¥ã€‚ä½†ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œ**å³ä¾¿æ²¡æœ‰æŸ¥è¯¢åˆ°æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œè´­ç‰©è½¦ä¹Ÿåº”è¯¥å±•ç¤ºç»™ç”¨æˆ·ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚<strong>ä¹Ÿå°±æ˜¯ç»™æŸ¥è¯¢å¤±è´¥è®¾ç½®ä¸€ä¸ª</strong><mark>é™çº§å¤„ç†</mark>**é€»è¾‘ã€‚</p><p>ç¬¬äºŒï¼Œç”±äºæŸ¥è¯¢å•†å“çš„å»¶è¿Ÿè¾ƒé«˜ï¼ˆæ¨¡æ‹Ÿçš„500msï¼‰ï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦çš„å“åº”æ—¶é—´ä¹Ÿå˜çš„å¾ˆé•¿ã€‚è¿™æ ·ä¸ä»…æ‹–æ…¢äº†è´­ç‰©è½¦æœåŠ¡ï¼Œæ¶ˆè€—äº†è´­ç‰©è½¦æœåŠ¡çš„æ›´å¤šèµ„æºï¼Œè€Œä¸”ç”¨æˆ·ä½“éªŒä¹Ÿå¾ˆå·®ã€‚å¯¹äºå•†å“æœåŠ¡è¿™ç§ä¸å¤ªå¥åº·çš„æ¥å£ï¼Œæˆ‘ä»¬åº”è¯¥<strong>ç›´æ¥åœæ­¢è°ƒç”¨ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘</strong>ï¼Œé¿å…å½±å“åˆ°å½“å‰æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯å°†å•†å“æŸ¥è¯¢æ¥å£<strong>ç†”æ–­</strong>ã€‚</p><h4 id="_1-5-1-ç¼–å†™é™çº§é€»è¾‘fallback" tabindex="-1">1.5.1.ç¼–å†™é™çº§é€»è¾‘Fallback <a class="header-anchor" href="#_1-5-1-ç¼–å†™é™çº§é€»è¾‘fallback" aria-label="Permalink to &quot;1.5.1.ç¼–å†™é™çº§é€»è¾‘Fallback&quot;">â€‹</a></h4><p><img src="/assets/image-20241214151054674.C18VSQJ0.png" alt="image-20241214151054674" loading="lazy"></p><p>è§¦å‘é™æµæˆ–ç†”æ–­åçš„è¯·æ±‚ä¸ä¸€å®šè¦ç›´æ¥æŠ¥é”™ï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€äº›é»˜è®¤æ•°æ®æˆ–è€…å‹å¥½æç¤ºï¼Œç”¨æˆ·ä½“éªŒä¼šæ›´å¥½ã€‚</p><p>ç»™FeignClientç¼–å†™å¤±è´¥åçš„é™çº§é€»è¾‘æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼šFallbackClassï¼Œæ— æ³•å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†</li><li>æ–¹å¼äºŒï¼šFallbackFactoryï¼Œ<strong>å¯ä»¥å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†</strong>ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©è¿™ç§æ–¹å¼ã€‚</li></ul><p>è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºæ–¹å¼äºŒçš„å¤±è´¥é™çº§å¤„ç†ã€‚</p><p><strong>æ¡ˆä¾‹ï¼š</strong></p><p><img src="/assets/image-20241214151259140.mmW76APj.png" alt="image-20241214151259140" loading="lazy"></p><p><img src="/assets/image-20241214151412759.C9GsCLht.png" alt="image-20241214151412759" loading="lazy"></p><p><img src="/assets/image-20241214151507161.DPgpAYVb.png" alt="image-20241214151507161" loading="lazy"></p><p><strong>æ­¥éª¤ä¸€</strong>ï¼šåœ¨hm-apiæ¨¡å—ä¸­ç»™<code>ItemClient</code>å®šä¹‰é™çº§å¤„ç†ç±»ï¼Œå®ç°<code>FallbackFactory</code>ï¼š</p><p><img src="/assets/1733754442881-21.DWJcAUU0.png" alt="img" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client.fallback;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.client.ItemClient;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.dto.ItemDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.api.dto.OrderDetailDTO;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.exception.BizIllegalException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.common.utils.CollUtils;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lombok.extern.slf4j.Slf4j;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.openfeign.FallbackFactory;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.Collection;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemClientFallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FallbackFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ItemClient </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Throwable </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ItemDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryItemByIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collection&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ids</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿œç¨‹è°ƒç”¨ItemClient#queryItemByIdsæ–¹æ³•å‡ºç°å¼‚å¸¸ï¼Œå‚æ•°ï¼š{}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ids, cause);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // æŸ¥è¯¢è´­ç‰©è½¦å…è®¸å¤±è´¥ï¼ŒæŸ¥è¯¢å¤±è´¥ï¼Œè¿”å›ç©ºé›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CollUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emptyList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deductStock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">OrderDetailDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // åº“å­˜æ‰£å‡ä¸šåŠ¡éœ€è¦è§¦å‘äº‹åŠ¡å›æ»šï¼ŒæŸ¥è¯¢å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cause);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>æ­¥éª¤äºŒ</strong>ï¼šåœ¨<code>hm-api</code>æ¨¡å—ä¸­çš„<code>com.hmall.api.config.DefaultFeignConfig</code>ç±»ä¸­å°†<code>ItemClientFallback</code>æ³¨å†Œä¸ºä¸€ä¸ª<code>Bean</code>ï¼š</p><p><img src="/assets/1733754442881-22.CIQgeIvF.png" alt="img" loading="lazy"></p><p><strong>æ­¥éª¤ä¸‰</strong>ï¼šåœ¨<code>hm-api</code>æ¨¡å—ä¸­çš„<code>ItemClient</code>æ¥å£ä¸­ä½¿ç”¨<code>ItemClientFallbackFactory</code>ï¼š</p><p><img src="/assets/1733754442881-23.BqWdXfQF.png" alt="img" loading="lazy"></p><p>é‡å¯åï¼Œå†æ¬¡æµ‹è¯•ï¼Œå‘ç°è¢«é™æµçš„è¯·æ±‚ä¸å†æŠ¥é”™ï¼Œèµ°äº†é™çº§é€»è¾‘ï¼š</p><p><img src="/assets/1733754442881-24.CYg4Cm3t.png" alt="img" loading="lazy"></p><p>ä½†æ˜¯<strong>æœªè¢«é™æµçš„è¯·æ±‚å»¶æ—¶ä¾ç„¶å¾ˆé«˜</strong>ï¼š</p><p><img src="/assets/1733754442881-25.3cWZBu6M.png" alt="img" loading="lazy"></p><p><img src="/assets/image-20241214154530742.By58E-Cf.png" alt="image-20241214154530742" loading="lazy"></p><p>å¯¼è‡´æœ€ç»ˆçš„å¹³å‡å“åº”æ—¶é—´è¾ƒé•¿ã€‚</p><p><img src="/assets/image-20241214154708230.BeM4PcEK.png" alt="image-20241214154708230" loading="lazy"></p><p><img src="/assets/image-20241214154725589.UDnCBJw5.png" alt="image-20241214154725589" loading="lazy"></p><h4 id="_1-5-2-æœåŠ¡ç†”æ–­" tabindex="-1">1.5.2.æœåŠ¡ç†”æ–­ <a class="header-anchor" href="#_1-5-2-æœåŠ¡ç†”æ–­" aria-label="Permalink to &quot;1.5.2.æœåŠ¡ç†”æ–­&quot;">â€‹</a></h4><p>æŸ¥è¯¢å•†å“çš„RT **ï¼ˆResponse Timeï¼ˆå“åº”æ—¶é—´ï¼‰ï¼‰**è¾ƒé«˜ï¼ˆæ¨¡æ‹Ÿçš„500msï¼‰ï¼Œä»è€Œå¯¼è‡´æŸ¥è¯¢è´­ç‰©è½¦çš„RTä¹Ÿå˜çš„å¾ˆé•¿ã€‚è¿™æ ·ä¸ä»…æ‹–æ…¢äº†è´­ç‰©è½¦æœåŠ¡ï¼Œæ¶ˆè€—äº†è´­ç‰©è½¦æœåŠ¡çš„æ›´å¤šèµ„æºï¼Œè€Œä¸”ç”¨æˆ·ä½“éªŒä¹Ÿå¾ˆå·®ã€‚</p><p>å¯¹äºå•†å“æœåŠ¡è¿™ç§ä¸å¤ªå¥åº·çš„æ¥å£ï¼Œæˆ‘ä»¬<strong>åº”è¯¥åœæ­¢è°ƒç”¨ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ï¼Œé¿å…å½±å“åˆ°å½“å‰æœåŠ¡</strong>ã€‚ä¹Ÿå°±æ˜¯å°†å•†å“æŸ¥è¯¢æ¥å£<strong>ç†”æ–­</strong>ã€‚å½“å•†å“æœåŠ¡æ¥å£æ¢å¤æ­£å¸¸åï¼Œå†å…è®¸è°ƒç”¨ã€‚è¿™å…¶å®å°±æ˜¯<strong>æ–­è·¯å™¨</strong>çš„å·¥ä½œæ¨¡å¼äº†ã€‚</p><p>Sentinelä¸­çš„æ–­è·¯å™¨ä¸ä»…å¯ä»¥ç»Ÿè®¡æŸä¸ªæ¥å£çš„<strong>æ…¢è¯·æ±‚æ¯”ä¾‹</strong>ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡<strong>å¼‚å¸¸è¯·æ±‚æ¯”ä¾‹</strong>ã€‚å½“è¿™äº›æ¯”ä¾‹è¶…å‡ºé˜ˆå€¼æ—¶ï¼Œå°±ä¼š<strong>ç†”æ–­</strong>è¯¥æ¥å£ï¼Œ<strong>å³<mark>æ‹¦æˆª</mark>è®¿é—®è¯¥æ¥å£çš„<mark>ä¸€åˆ‡è¯·æ±‚</mark>ï¼Œ<mark>é™çº§å¤„ç†</mark>ï¼›å½“è¯¥æ¥å£<mark>æ¢å¤æ­£å¸¸æ—¶</mark>ï¼Œå†<mark>æ”¾è¡Œ</mark>å¯¹äºè¯¥æ¥å£çš„è¯·æ±‚ã€‚</strong></p><p><strong>æ–­è·¯å™¨</strong>çš„å·¥ä½œçŠ¶æ€åˆ‡æ¢æœ‰ä¸€ä¸ªçŠ¶æ€æœºæ¥æ§åˆ¶ï¼š</p><p><img src="/assets/image-20241214155048784.CRb9HcxR.png" alt="image-20241214155048784" loading="lazy"></p><p>çŠ¶æ€æœºåŒ…æ‹¬ä¸‰ä¸ªçŠ¶æ€ï¼š</p><ul><li><mark><strong>closed</strong></mark>ï¼šå…³é—­çŠ¶æ€ï¼Œ<strong>æ–­è·¯å™¨æ”¾è¡Œæ‰€æœ‰è¯·æ±‚</strong>ï¼Œå¹¶å¼€å§‹ç»Ÿè®¡å¼‚å¸¸æ¯”ä¾‹ã€æ…¢è¯·æ±‚æ¯”ä¾‹ã€‚<strong>è¶…è¿‡é˜ˆå€¼åˆ™åˆ‡æ¢åˆ°opençŠ¶æ€</strong></li><li><mark><strong>open</strong></mark>ï¼šæ‰“å¼€çŠ¶æ€ï¼ŒæœåŠ¡è°ƒç”¨è¢«<strong>ç†”æ–­</strong>ï¼Œè®¿é—®è¢«ç†”æ–­æœåŠ¡çš„è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œ<strong>å¿«é€Ÿå¤±è´¥ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘</strong>ã€‚OpençŠ¶æ€<strong>æŒç»­ä¸€æ®µæ—¶é—´åä¼šè¿›å…¥half-opençŠ¶æ€</strong></li><li><mark><strong>half-open</strong></mark>ï¼š<strong><mark>åŠå¼€çŠ¶æ€ï¼Œæ”¾è¡Œä¸€æ¬¡è¯·æ±‚</mark></strong>ï¼Œæ ¹æ®æ‰§è¡Œç»“æœæ¥åˆ¤æ–­æ¥ä¸‹æ¥çš„æ“ä½œã€‚ <ul><li>è¯·æ±‚æˆåŠŸï¼šåˆ™åˆ‡æ¢åˆ°closedçŠ¶æ€</li><li>è¯·æ±‚å¤±è´¥ï¼šåˆ™åˆ‡æ¢åˆ°opençŠ¶æ€</li></ul></li></ul><p>æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å°é€šè¿‡ç‚¹å‡»ç°‡ç‚¹åçš„**<code>ç†”æ–­</code>**æŒ‰é’®æ¥é…ç½®ç†”æ–­ç­–ç•¥ï¼š</p><p><img src="/assets/1733754442882-26.CPIietgi.png" alt="img" loading="lazy"></p><p>åœ¨å¼¹å‡ºçš„è¡¨æ ¼ä¸­è¿™æ ·å¡«å†™ï¼š</p><p><img src="/assets/1733754442882-27.tj-2nL81.png" alt="img" loading="lazy"></p><p>è¿™ç§æ˜¯æŒ‰ç…§æ…¢è°ƒç”¨æ¯”ä¾‹æ¥åšç†”æ–­ï¼Œä¸Šè¿°é…ç½®çš„å«ä¹‰æ˜¯ï¼š</p><ul><li>RTè¶…è¿‡200æ¯«ç§’çš„è¯·æ±‚è°ƒç”¨å°±æ˜¯æ…¢è°ƒç”¨</li><li><strong>ç»Ÿè®¡æœ€è¿‘1000mså†…çš„æœ€å°‘5æ¬¡è¯·æ±‚ï¼Œå¦‚æœæ…¢è°ƒç”¨æ¯”ä¾‹ä¸ä½äº0.5ï¼Œåˆ™è§¦å‘ç†”æ–­</strong></li><li><strong>ç†”æ–­æŒç»­æ—¶é•¿20s</strong>ï¼Œ20såå†æ¬¡å°è¯•åˆ¤æ–­</li></ul><p>é…ç½®å®Œæˆåï¼Œå†æ¬¡åˆ©ç”¨Jemeteræµ‹è¯•ï¼Œå¯ä»¥å‘ç°ï¼š</p><p><img src="/assets/1733754442882-28.DBg4CUjn.png" alt="img" loading="lazy"></p><p>åœ¨ä¸€å¼€å§‹ä¸€æ®µæ—¶é—´æ˜¯å…è®¸è®¿é—®çš„ï¼Œåæ¥è§¦å‘ç†”æ–­åï¼ŒæŸ¥è¯¢å•†å“æœåŠ¡çš„æ¥å£é€šè¿‡QPSç›´æ¥ä¸º0ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½è¢«ç†”æ–­äº†ã€‚è€ŒæŸ¥è¯¢è´­ç‰©è½¦çš„æœ¬èº«å¹¶æ²¡æœ‰å—åˆ°å½±å“ã€‚</p><p>æ­¤æ—¶æ•´ä¸ªè´­ç‰©è½¦æŸ¥è¯¢æœåŠ¡çš„å¹³å‡RTå½±å“ä¸å¤§ï¼š</p><p><img src="/assets/1733754442882-29.DwsTgWLN.png" alt="img" loading="lazy"></p><h2 id="_2-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1">2.åˆ†å¸ƒå¼äº‹åŠ¡ <a class="header-anchor" href="#_2-åˆ†å¸ƒå¼äº‹åŠ¡" aria-label="Permalink to &quot;2.åˆ†å¸ƒå¼äº‹åŠ¡&quot;">â€‹</a></h2><p>é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹é¡¹ç›®ä¸­çš„ä¸‹å•ä¸šåŠ¡æ•´ä½“æµç¨‹ï¼š</p><p><img src="/assets/image-20241214160702853.BTnXJlDb.png" alt="image-20241214160702853" loading="lazy"></p><p>ç”±äºè®¢å•ã€è´­ç‰©è½¦ã€å•†å“åˆ†åˆ«åœ¨ä¸‰ä¸ªä¸åŒçš„å¾®æœåŠ¡ï¼Œè€Œæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ï¼Œå› æ­¤ä¸‹å•è¿‡ç¨‹ä¸­å°±ä¼šè·¨å¤šä¸ªæ•°æ®åº“å®Œæˆä¸šåŠ¡ã€‚è€Œæ¯ä¸ªå¾®æœåŠ¡éƒ½ä¼šæ‰§è¡Œè‡ªå·±çš„æœ¬åœ°äº‹åŠ¡ï¼š</p><ul><li>äº¤æ˜“æœåŠ¡ï¼šä¸‹å•äº‹åŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡ï¼šæ¸…ç†è´­ç‰©è½¦äº‹åŠ¡</li><li>åº“å­˜æœåŠ¡ï¼šæ‰£å‡åº“å­˜äº‹åŠ¡</li></ul><p>æ•´ä¸ªä¸šåŠ¡ä¸­ï¼Œå„ä¸ªæœ¬åœ°äº‹åŠ¡æ˜¯æœ‰å…³è”çš„ã€‚å› æ­¤æ¯ä¸ªå¾®æœåŠ¡çš„æœ¬åœ°äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ç§°ä¸º<strong>åˆ†æ”¯äº‹åŠ¡</strong>ã€‚å¤šä¸ªæœ‰å…³è”çš„åˆ†æ”¯äº‹åŠ¡ä¸€èµ·å°±ç»„æˆäº†<strong>å…¨å±€äº‹åŠ¡</strong>ã€‚æˆ‘ä»¬å¿…é¡»ä¿è¯æ•´ä¸ªå…¨å±€äº‹åŠ¡åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ã€‚</p><p><img src="/assets/image-20241214160933051.CcEY40bG.png" alt="image-20241214160933051" loading="lazy"></p><p>æˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡å°±æ˜¯ä¼ ç»Ÿçš„<strong>å•ä½“äº‹åŠ¡</strong>ï¼Œéƒ½å¯ä»¥æ»¡è¶³ACIDç‰¹æ€§ï¼Œä½†å…¨å±€äº‹åŠ¡è·¨è¶Šå¤šä¸ªæœåŠ¡ã€å¤šä¸ªæ•°æ®åº“ï¼Œæ˜¯å¦è¿˜èƒ½æ»¡è¶³å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ¥åšä¸€ä¸ªæµ‹è¯•ï¼Œå…ˆè¿›å…¥è´­ç‰©è½¦é¡µé¢ï¼š</p><p><img src="/assets/1733754442882-30.DszR2e63.png" alt="img" loading="lazy"></p><p>ç›®å‰æœ‰4ä¸ªè´­ç‰©è½¦ï¼Œç„¶ç»“ç®—ä¸‹å•ï¼Œè¿›å…¥è®¢å•ç»“ç®—é¡µé¢ï¼š</p><p><img src="/assets/1733754442882-31.BsIp6IrL.png" alt="img" loading="lazy"></p><p>ç„¶åå°†è´­ç‰©è½¦ä¸­æŸä¸ªå•†å“çš„åº“å­˜ä¿®æ”¹ä¸º<code>0</code>ï¼š</p><p><img src="/assets/1733754442882-32.DLIdPYEs.png" alt="img" loading="lazy"></p><p>ç„¶åï¼Œæäº¤è®¢å•ï¼Œæœ€ç»ˆå› åº“å­˜ä¸è¶³å¯¼è‡´ä¸‹å•å¤±è´¥ï¼š</p><p><img src="/assets/1733754442882-33.ColddB4c.png" alt="img" loading="lazy"></p><p>ç„¶åæˆ‘ä»¬å»æŸ¥çœ‹è´­ç‰©è½¦åˆ—è¡¨ï¼Œå‘ç°è´­ç‰©è½¦æ•°æ®ä¾ç„¶è¢«æ¸…ç©ºäº†ï¼Œå¹¶æœªå›æ»šï¼š</p><p><img src="/assets/1733754442882-34.BHeXvovb.png" alt="img" loading="lazy"></p><p>äº‹åŠ¡å¹¶æœªéµå¾ªACIDçš„åŸåˆ™ï¼Œå½’å…¶åŸå› å°±æ˜¯å‚ä¸äº‹åŠ¡çš„å¤šä¸ªå­ä¸šåŠ¡åœ¨ä¸åŒçš„å¾®æœåŠ¡ï¼Œè·¨è¶Šäº†ä¸åŒçš„æ•°æ®åº“ã€‚è™½ç„¶æ¯ä¸ªå•ç‹¬çš„ä¸šåŠ¡éƒ½èƒ½åœ¨æœ¬åœ°éµå¾ªACIDï¼Œä½†æ˜¯å®ƒä»¬<strong>äº’ç›¸ä¹‹é—´æ²¡æœ‰æ„ŸçŸ¥</strong>ï¼Œä¸çŸ¥é“æœ‰äººå¤±è´¥äº†ï¼Œæ— æ³•ä¿è¯æœ€ç»ˆç»“æœçš„ç»Ÿä¸€ï¼Œä¹Ÿå°±æ— æ³•éµå¾ªACIDçš„äº‹åŠ¡ç‰¹æ€§äº†ã€‚</p><p>è¿™å°±æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå‡ºç°ä»¥ä¸‹æƒ…å†µä¹‹ä¸€å°±å¯èƒ½äº§ç”Ÿåˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼š</p><ul><li><strong>ä¸šåŠ¡è·¨å¤šä¸ªæœåŠ¡å®ç°</strong></li><li><strong>ä¸šåŠ¡è·¨å¤šä¸ªæ•°æ®æºå®ç°</strong></li></ul><p>æ¥ä¸‹æ¥è¿™ä¸€ç« æˆ‘ä»¬å°±ä¸€èµ·æ¥ç ”ç©¶ä¸‹å¦‚ä½•è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</p><h3 id="_2-1-è®¤è¯†seata" tabindex="-1">2.1.è®¤è¯†Seata <a class="header-anchor" href="#_2-1-è®¤è¯†seata" aria-label="Permalink to &quot;2.1.è®¤è¯†Seata&quot;">â€‹</a></h3><p>è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä½†å®ç°èµ·æ¥éƒ½æ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨å¼€æºçš„æ¡†æ¶æ¥è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚åœ¨ä¼—å¤šçš„å¼€æºåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ä¸­ï¼ŒåŠŸèƒ½æœ€å®Œå–„ã€ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯é˜¿é‡Œå·´å·´åœ¨2019å¹´å¼€æºçš„Seataäº†ã€‚</p><p><a href="https://seata.io/zh-cn/docs/overview/what-is-seata.html" target="_blank" rel="noreferrer">https://seata.io/zh-cn/docs/overview/what-is-seata.html</a></p><p>å…¶å®åˆ†å¸ƒå¼äº‹åŠ¡äº§ç”Ÿçš„ä¸€ä¸ªé‡è¦åŸå› ï¼Œå°±æ˜¯<strong>å‚ä¸äº‹åŠ¡çš„å¤šä¸ªåˆ†æ”¯äº‹åŠ¡äº’ç›¸æ— æ„ŸçŸ¥ï¼Œä¸çŸ¥é“å½¼æ­¤çš„æ‰§è¡ŒçŠ¶æ€</strong>ã€‚å› æ­¤è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€æƒ³éå¸¸ç®€å•ï¼š</p><p>å°±æ˜¯æ‰¾ä¸€ä¸ª<mark>ç»Ÿä¸€çš„<strong>äº‹åŠ¡åè°ƒè€…</strong></mark>ï¼Œ<strong>ä¸å¤šä¸ªåˆ†æ”¯äº‹åŠ¡é€šä¿¡ï¼Œæ£€æµ‹æ¯ä¸ªåˆ†æ”¯äº‹åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ï¼Œä¿è¯å…¨å±€äº‹åŠ¡ä¸‹çš„æ¯ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡åŒæ—¶æˆåŠŸæˆ–å¤±è´¥å³å¯</strong>ã€‚å¤§å¤šæ•°çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶éƒ½æ˜¯åŸºäºè¿™ä¸ªç†è®ºæ¥å®ç°çš„ã€‚</p><p><img src="/assets/image-20241214161444297.DK1m05Vs.png" alt="image-20241214161444297" loading="lazy"></p><p>Seataä¹Ÿä¸ä¾‹å¤–ï¼Œåœ¨Seataçš„äº‹åŠ¡ç®¡ç†ä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„è§’è‰²ï¼š</p><ul><li><strong>TC</strong> <strong>(Transaction Coordinator) -</strong> <strong>äº‹åŠ¡åè°ƒè€…ï¼š<strong>ç»´æŠ¤å…¨å±€å’Œåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œ<strong>åè°ƒ</strong>å…¨å±€äº‹åŠ¡</strong>æäº¤æˆ–å›æ»šã€‚</strong></li><li><strong>TM (Transaction Manager) -</strong> <strong>äº‹åŠ¡ç®¡ç†å™¨ï¼š</strong><mark>å®šä¹‰<strong>å…¨å±€äº‹åŠ¡çš„èŒƒå›´</strong></mark>ï¼ˆå¼€å§‹ä¸ç»“æŸï¼‰ã€<strong>å¼€å§‹</strong>å…¨å±€äº‹åŠ¡ã€æäº¤æˆ–å›æ»šå…¨å±€äº‹åŠ¡ã€‚</li><li><strong>RM (Resource Manager) -</strong> <strong>èµ„æºç®¡ç†å™¨ï¼š<strong>ç®¡ç†åˆ†æ”¯äº‹åŠ¡ï¼Œä¸TCäº¤è°ˆä»¥</strong>æ³¨å†Œåˆ†æ”¯äº‹åŠ¡å’ŒæŠ¥å‘Šåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€</strong>ï¼Œå¹¶<strong>é©±åŠ¨</strong>åˆ†æ”¯äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚</li></ul><p>Seataçš„å·¥ä½œæ¶æ„å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/assets/image-20241214161830403.DIS-oSnZ.png" alt="image-20241214161830403" loading="lazy"></p><p><img src="/assets/1733754442883-35.D4tQ5iEH.png" alt="img" loading="lazy"></p><p>å…¶ä¸­ï¼Œ<strong>TM</strong>å’Œ<strong>RM</strong>å¯ä»¥ç†è§£ä¸ºSeataçš„å®¢æˆ·ç«¯éƒ¨åˆ†ï¼Œå¼•å…¥åˆ°å‚ä¸äº‹åŠ¡çš„å¾®æœåŠ¡ä¾èµ–ä¸­å³å¯ã€‚å°†æ¥<strong>TM</strong>å’Œ<strong>RM</strong>å°±ä¼šååŠ©å¾®æœåŠ¡ï¼Œå®ç°æœ¬åœ°åˆ†æ”¯äº‹åŠ¡ä¸<strong>TC</strong>ä¹‹é—´äº¤äº’ï¼Œå®ç°äº‹åŠ¡çš„æäº¤æˆ–å›æ»šã€‚</p><p>è€Œ<strong>TC</strong>æœåŠ¡åˆ™æ˜¯<strong>äº‹åŠ¡åè°ƒä¸­å¿ƒï¼Œæ˜¯ä¸€ä¸ª<mark>ç‹¬ç«‹çš„å¾®æœåŠ¡</mark>ï¼Œéœ€è¦å•ç‹¬éƒ¨ç½²ã€‚</strong></p><h3 id="_2-2-éƒ¨ç½²tcæœåŠ¡" tabindex="-1">2.2.<mark>éƒ¨ç½²TCæœåŠ¡</mark> <a class="header-anchor" href="#_2-2-éƒ¨ç½²tcæœåŠ¡" aria-label="Permalink to &quot;2.2.==éƒ¨ç½²TCæœåŠ¡==&quot;">â€‹</a></h3><p><code>&lt;a id=&quot;éƒ¨ç½²Seata(TCæœåŠ¡)&quot;&gt;``&lt;/a&gt;</code></p><h4 id="_2-2-1-å‡†å¤‡æ•°æ®åº“è¡¨" tabindex="-1">2.2.1.å‡†å¤‡æ•°æ®åº“è¡¨ <a class="header-anchor" href="#_2-2-1-å‡†å¤‡æ•°æ®åº“è¡¨" aria-label="Permalink to &quot;2.2.1.å‡†å¤‡æ•°æ®åº“è¡¨&quot;">â€‹</a></h4><p>Seataæ”¯æŒå¤šç§å­˜å‚¨æ¨¡å¼ï¼Œä½†è€ƒè™‘åˆ°æŒä¹…åŒ–çš„éœ€è¦ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©åŸºäºæ•°æ®åº“å­˜å‚¨ã€‚æ‰§è¡Œè¯¾å‰èµ„æ–™æä¾›çš„<code>ã€Šseata-tc.sqlã€‹</code>ï¼Œå¯¼å…¥æ•°æ®åº“è¡¨ï¼š</p><p><img src="/assets/1733754442883-36.DuybQiJ5.png" alt="img" loading="lazy"></p><h4 id="_2-2-2-å‡†å¤‡é…ç½®æ–‡ä»¶" tabindex="-1">2.2.2.å‡†å¤‡é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_2-2-2-å‡†å¤‡é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;2.2.2.å‡†å¤‡é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>è¯¾å‰èµ„æ–™å‡†å¤‡äº†ä¸€ä¸ªseataç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†seataè¿è¡Œæ—¶æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼š</p><p><img src="/assets/1733754442883-37.BDt1E52d.png" alt="img" loading="lazy"></p><p>å…¶ä¸­åŒ…å«ä¸­æ–‡æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œé˜…è¯»ã€‚</p><p>æˆ‘ä»¬å°†æ•´ä¸ªseataæ–‡ä»¶å¤¹æ‹·è´åˆ°è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•ï¼š</p><p><img src="/assets/1733754442883-38.DjLOBV3F.png" alt="img" loading="lazy"></p><h4 id="_2-2-3-dockeréƒ¨ç½²" tabindex="-1">2.2.3.Dockeréƒ¨ç½² <a class="header-anchor" href="#_2-2-3-dockeréƒ¨ç½²" aria-label="Permalink to &quot;2.2.3.Dockeréƒ¨ç½²&quot;">â€‹</a></h4><p>éœ€è¦æ³¨æ„ï¼Œè¦ç¡®ä¿nacosã€mysqléƒ½åœ¨hm-netç½‘ç»œä¸­ã€‚å¦‚æœæŸä¸ªå®¹å™¨ä¸å†hm-netç½‘ç»œï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„å‘½ä»¤å°†æŸå®¹å™¨åŠ å…¥æŒ‡å®šç½‘ç»œï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [å®¹å™¨å] æŸ¥çœ‹è¯¥å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç½‘ç»œä¿¡æ¯ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ç½‘ç»œå] [å®¹å™¨å]</span></span></code></pre></div><p>åœ¨è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8099:8099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7099:7099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SEATA_IP=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.88.133</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./seata:/seata-server/resources</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--network </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seataio/seata-server:1.5.2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8099:8099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7099:7099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SEATA_IP=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">47.109.155.207</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./seata:/seata-server/resources</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seataio/seata-server:1.5.2</span></span></code></pre></div><p>å…¶ä¸­çš„SEATA_IPéœ€è¦<strong>æ¢æˆè‡ªå·±çš„è™šæ‹Ÿæœºip</strong>ï¼Œnetworkéœ€è¦æ¢æˆä¸nacoså’Œmysqlåœ¨åŒä¸€ç½‘ç»œä¸­ã€‚</p><p>åœ¨ docker ä¸­å¯åŠ¨ seata TC æœåŠ¡æ—¶ï¼Œå‘½ä»¤ä¸­ SEATA_IP é€‰é¡¹è¡¨ç¤ºæŒ‡å®šseata-serverå¯åŠ¨çš„IP, è¯¥IPç”¨äºå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œæ—¶ä½¿ç”¨ã€‚å¦‚æœåœ¨å¯åŠ¨æ—¶å°†è¯¥å‚æ•°è®¾ç½®ä¸º -e SEATA_IP=<code>[localhost](http://localhost/)</code>ï¼Œé‚£ä¹ˆseata-server å‘ nacos æ³¨å†Œä¸­å¿ƒæŠ¥å‘Šçš„åœ°å€åˆ™æ˜¯seata-server åœ¨ docker ä¸­è¿è¡Œçš„åœ°å€ã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬é›†æˆäº† TM å’Œ RM çš„å¾®æœåŠ¡éƒ½éƒ¨ç½²åœ¨ docker å®¹å™¨ä¹‹å¤–ï¼Œæ­¤æ—¶è¿™äº›å¾®æœåŠ¡ä» nacos æ‹¿åˆ°çš„ seata-server çš„ ip åœ°å€(å…¶å®æ˜¯åœ¨ docker ä¸­çš„åœ°å€)ï¼Œé‚£ä¹ˆå®¿ä¸»æœºä¸­çš„å¾®æœåŠ¡æ— æ³•é€šè¿‡è¿™ä¸ªâ€œTC æœåŠ¡åœ¨ docker ä¸­çš„ipåœ°å€:ç«¯å£â€ çš„å½¢å¼è®¿é—® seata-serverï¼ˆTCï¼‰æœåŠ¡ã€‚</p><p>è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦åœ¨ docker ä¸­å¯åŠ¨ seata-server æ—¶è®¾ç½®è¯¥æœåŠ¡å‘ nacos æŠ¥å‘Šçš„ ip åœ°å€ï¼Œå› æ­¤åº”è¯¥å°†å‚æ•°è®¾ç½®ä¸º -e SEATA_IP=å®¿ä¸»æœºåœ°å€ã€‚é‚£ä¹ˆï¼Œæ­¤æ—¶åœ¨å®¿ä¸»æœºä¸­å¾®æœåŠ¡æ‹¿åˆ°çš„å°±æ˜¯å®¿ä¸»æœºåœ°å€ï¼Œå› ä¸º<strong>å®¿ä¸»æœºå’Œ docker å®¹å™¨ä¹‹é—´</strong>å®ç°äº†==<strong>ç«¯å£æ˜ å°„</strong>==ï¼Œæ‰€ä»¥å®¿ä¸»æœºå¯ä»¥é€šè¿‡â€œå®¿ä¸»æœº ip åœ°å€:ç«¯å£â€çš„å½¢å¼è®¿é—®åˆ° TC æœåŠ¡ã€‚</p><p>å¦‚æœé•œåƒä¸‹è½½å›°éš¾ï¼Œä¹Ÿå¯ä»¥æŠŠè¯¾å‰èµ„æ–™æä¾›çš„é•œåƒä¸Šä¼ åˆ°è™šæ‹Ÿæœºå¹¶åŠ è½½ï¼š</p><p><img src="/assets/1733754442883-39.DJx2Wf9T.png" alt="img" loading="lazy"></p><p><img src="/assets/image-20241214164616939.C5SfMp4L.png" alt="image-20241214164616939" loading="lazy"></p><h3 id="_2-3-å¾®æœåŠ¡é›†æˆseata" tabindex="-1">2.3.<mark>å¾®æœåŠ¡é›†æˆSeata</mark> <a class="header-anchor" href="#_2-3-å¾®æœåŠ¡é›†æˆseata" aria-label="Permalink to &quot;2.3.==å¾®æœåŠ¡é›†æˆSeata==&quot;">â€‹</a></h3><p><img src="/assets/image-20241214165242266._KjCe4NQ.png" alt="image" loading="lazy"></p><p><strong>å‚ä¸åˆ†å¸ƒå¼äº‹åŠ¡çš„æ¯ä¸€ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦é›†æˆSeata</strong>ï¼Œæˆ‘ä»¬ä»¥<code>trade-service</code>ä¸ºä¾‹ã€‚</p><h4 id="_2-3-0-è¯¦ç»†æµç¨‹" tabindex="-1"><strong>2.3.0.è¯¦ç»†æµç¨‹</strong> <a class="header-anchor" href="#_2-3-0-è¯¦ç»†æµç¨‹" aria-label="Permalink to &quot;**2.3.0.è¯¦ç»†æµç¨‹**&quot;">â€‹</a></h4><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">seata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  registry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TCæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„é…ç½®ï¼Œå¾®æœåŠ¡æ ¹æ®è¿™äº›ä¿¡æ¯å»æ³¨å†Œä¸­å¿ƒè·å–tcæœåŠ¡åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ³¨å†Œä¸­å¿ƒç±»å‹ nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.88.133:8848</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # namespaceï¼Œé»˜è®¤ä¸ºç©º</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DEFAULT_GROUP</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # åˆ†ç»„ï¼Œé»˜è®¤æ˜¯DEFAULT_GROUP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seata-server</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # seataæœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tx-service-group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # äº‹åŠ¡ç»„åç§°ï¼Œæ ‡è¯†å½“å‰å¾®æœåŠ¡å±äºå“ªä¸ªäº‹åŠ¡ç»„</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    vgroup-mapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äº‹åŠ¡ç»„ä¸tcé›†ç¾¤çš„æ˜ å°„å…³ç³»</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 	#äº‹åŠ¡ç»„ hmall æ˜ å°„åˆ° default TC é›†ç¾¤</span></span></code></pre></div><p>å½“ <strong>Seata äº‹åŠ¡ç®¡ç†</strong> å¯åŠ¨æ—¶-æµç¨‹ï¼š</p><ol><li><strong>å¾®æœåŠ¡å¯åŠ¨</strong>ï¼Œä¼šè¯»å– <code>tx-service-group: hmall</code> ã€‚</li><li><strong>Seata å®¢æˆ·ç«¯</strong> é€šè¿‡ <code>service.vgroup-mapping</code>ï¼ŒæŠŠ <code>hmall</code> æ˜ å°„åˆ° <code>default</code>ï¼Œç„¶åå» Nacos æŸ¥è¯¢ <code>seata-server</code> çš„åœ°å€ã€‚</li><li><strong>Seata å®¢æˆ·ç«¯</strong> é€šè¿‡ <strong>Nacos æ³¨å†Œä¸­å¿ƒ</strong> (<code>seata.registry.nacos</code>) å‘ç° <code>seata-server</code> ã€‚</li><li>Seata äº‹åŠ¡å¤„ç†ï¼š <ul><li>åœ¨å…¨å±€äº‹åŠ¡å¼€å§‹æ—¶ï¼Œå¾®æœåŠ¡å‘ <code>seata-server</code> æ³¨å†Œäº‹åŠ¡ä¿¡æ¯ã€‚</li><li>åœ¨äº‹åŠ¡æäº¤æˆ–å›æ»šæ—¶ï¼Œå¾®æœåŠ¡æ ¹æ® <code>hmall -&gt; default</code> æ‰¾åˆ°å¯¹åº”çš„ <code>seata-server</code> è¿›è¡Œå¤„ç†ã€‚</li></ul></li></ol><h4 id="_2-3-1-å¼•å…¥ä¾èµ–" tabindex="-1">2.3.1.å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_2-3-1-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;2.3.1.å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><p>ä¸ºäº†æ–¹ä¾¿å„ä¸ªå¾®æœåŠ¡é›†æˆseataï¼Œæˆ‘ä»¬éœ€è¦æŠŠseataé…ç½®å…±äº«åˆ°nacosï¼Œå› æ­¤<code>trade-service</code>æ¨¡å—ä¸ä»…ä»…è¦å¼•å…¥seataä¾èµ–ï¼Œè¿˜è¦å¼•å…¥nacosä¾èµ–:</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--ç»Ÿä¸€é…ç½®ç®¡ç†--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--è¯»å–bootstrapå¼•å¯¼æ–‡ä»¶--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--seata--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-seata&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_2-3-2-æ”¹é€ é…ç½®" tabindex="-1">2.3.2.æ”¹é€ é…ç½® <a class="header-anchor" href="#_2-3-2-æ”¹é€ é…ç½®" aria-label="Permalink to &quot;2.3.2.æ”¹é€ é…ç½®&quot;">â€‹</a></h4><p><strong>Nacosä¸­namespaceã€groupã€serviceã€clusterçš„æ¦‚å¿µ</strong> - <a href="#Nacosçš„æ¦‚å¿µ-ç®¡ç†é…ç½®å’ŒæœåŠ¡">è·³è½¬</a></p><p><img src="/assets/image-20241214165242266._KjCe4NQ.png" alt="image-20241214165242266" loading="lazy"></p><p><img src="/assets/image-20241214165415166.Cw9exh9X.png" alt="image-20241214165415166" loading="lazy"></p><p><img src="/assets/image-20241214165542402.DznA3UQq.png" alt="image-20241214165542402" loading="lazy"></p><p><img src="/assets/image-20241214165624873.BzFB8lwH.png" alt="image-20241214165624873" loading="lazy"></p><p>é¦–å…ˆåœ¨nacosä¸Šæ·»åŠ ä¸€ä¸ª==<strong>å…±äº«çš„seataé…ç½®</strong>==ï¼Œå‘½åä¸º<code>shared-seata.yaml</code>ï¼š</p><p><img src="/assets/1733754442883-40.vST6lXfH.png" alt="img" loading="lazy"></p><p>å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">seata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  registry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TCæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„é…ç½®ï¼Œå¾®æœåŠ¡æ ¹æ®è¿™äº›ä¿¡æ¯å»æ³¨å†Œä¸­å¿ƒè·å–tcæœåŠ¡åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ³¨å†Œä¸­å¿ƒç±»å‹ nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">192.168.88.133:8848</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # namespaceï¼Œé»˜è®¤ä¸ºç©º</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DEFAULT_GROUP</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # åˆ†ç»„ï¼Œé»˜è®¤æ˜¯DEFAULT_GROUP</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seata-server</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # seataæœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tx-service-group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # äº‹åŠ¡ç»„åç§°ï¼Œæ ‡è¯†å½“å‰å¾®æœåŠ¡å±äºå“ªä¸ªäº‹åŠ¡ç»„</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    vgroup-mapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äº‹åŠ¡ç»„ä¸tcé›†ç¾¤çš„æ˜ å°„å…³ç³»</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 	#äº‹åŠ¡ç»„ hmall æ˜ å°„åˆ° default TC é›†ç¾¤</span></span></code></pre></div><p>ç„¶åï¼Œæ”¹é€ <code>trade-service</code>æ¨¡å—ï¼Œæ·»åŠ <code>bootstrap.yaml</code>ï¼š</p><p><img src="/assets/1733754442883-41.4M4l-GPk.png" alt="img" loading="lazy"></p><p>å†…å®¹å¦‚ä¸‹:</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">trade-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        file-extension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ–‡ä»¶åç¼€å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        shared-configs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…±äº«é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-jdbc.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«mybatisé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-log.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-swagger.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-seata.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«seataé…ç½®</span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°è¿™é‡ŒåŠ è½½äº†å…±äº«çš„seataé…ç½®ã€‚</p><p>ç„¶åæ”¹é€ application.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8085</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">feign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  okhttp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å¼€å¯OKHttpè¿æ¥æ± æ”¯æŒ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å¼€å¯Feignå¯¹Sentinelçš„æ•´åˆ</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  swagger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">äº¤æ˜“æœåŠ¡æ¥å£æ–‡æ¡£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.trade.controller</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-trade</span></span></code></pre></div><p>å‚è€ƒä¸Šè¿°åŠæ³•åˆ†åˆ«æ”¹é€ <code>hm-cart</code>å’Œ<code>hm-item</code>ä¸¤ä¸ªå¾®æœåŠ¡æ¨¡å—ã€‚</p><h4 id="_2-3-3-æ·»åŠ æ•°æ®åº“è¡¨" tabindex="-1">2.3.3.æ·»åŠ æ•°æ®åº“è¡¨ <a class="header-anchor" href="#_2-3-3-æ·»åŠ æ•°æ®åº“è¡¨" aria-label="Permalink to &quot;2.3.3.æ·»åŠ æ•°æ®åº“è¡¨&quot;">â€‹</a></h4><p>seataçš„å®¢æˆ·ç«¯åœ¨è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™éœ€è¦<strong>è®°å½•ä¸€äº›ä¸­é—´æ•°æ®ï¼Œä¿å­˜åœ¨æ•°æ®åº“ä¸­</strong>ã€‚å› æ­¤æˆ‘ä»¬è¦å…ˆå‡†å¤‡ä¸€ä¸ªè¿™æ ·çš„è¡¨ã€‚</p><p>å°†è¯¾å‰èµ„æ–™çš„<strong>seata-at</strong>.sqlåˆ†åˆ«æ–‡ä»¶å¯¼å…¥hm-tradeã€hm-cartã€hm-item<strong>ä¸‰ä¸ªæ•°æ®åº“</strong>ä¸­ï¼š</p><p><img src="/assets/1733754442883-42.CVYB34GO.png" alt="img" loading="lazy"></p><p>ç»“æœï¼š</p><p><img src="/assets/1733754442883-43.CQJJIfoY.png" alt="img" loading="lazy"></p><p>OKï¼Œè‡³æ­¤ä¸ºæ­¢ï¼Œå¾®æœåŠ¡æ•´åˆçš„å·¥ä½œå°±å®Œæˆäº†ã€‚å¯ä»¥å‚è€ƒä¸Šè¿°æ–¹å¼å¯¹<code>hm-item</code>å’Œ<code>hm-cart</code>æ¨¡å—å®Œæˆæ•´åˆæ”¹é€ ã€‚</p><h4 id="_2-3-4-æµ‹è¯•" tabindex="-1">2.3.4.æµ‹è¯• <a class="header-anchor" href="#_2-3-4-æµ‹è¯•" aria-label="Permalink to &quot;2.3.4.æµ‹è¯•&quot;">â€‹</a></h4><p>æ¥ä¸‹æ¥å°±æ˜¯æµ‹è¯•çš„åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™äº†ã€‚</p><p>æˆ‘ä»¬æ‰¾åˆ°<code>trade-service</code>æ¨¡å—ä¸‹çš„<code>com.hmall.trade.service.impl.OrderServiceImpl</code>ç±»ä¸­çš„<code>createOrder</code>æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸‹å•ä¸šåŠ¡æ–¹æ³•ã€‚</p><p>å°†å…¶ä¸Šçš„<code>@Transactional</code>æ³¨è§£æ”¹ä¸º<strong>Seataæä¾›çš„==<code>@GlobalTransactional</code>==</strong>ï¼š</p><p><img src="/assets/1733754442883-44.YD6qQQ2a.png" alt="img" loading="lazy"></p><p><strong><code>@GlobalTransactional</code>æ³¨è§£</strong>å°±æ˜¯åœ¨<strong>æ ‡è®°äº‹åŠ¡çš„èµ·ç‚¹</strong>ï¼Œå°†æ¥TMå°±ä¼šåŸºäºè¿™ä¸ªæ–¹æ³•<strong>åˆ¤æ–­å…¨å±€äº‹åŠ¡èŒƒå›´</strong>ï¼Œåˆå§‹åŒ–å…¨å±€äº‹åŠ¡ã€‚</p><p>æˆ‘ä»¬é‡å¯<code>trade-service</code>ã€<code>item-service</code>ã€<code>cart-service</code>ä¸‰ä¸ªæœåŠ¡ã€‚å†æ¬¡æµ‹è¯•ï¼Œå‘ç°åˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜è§£å†³äº†ï¼</p><p><strong><mark>æ³¨æ„ï¼š</mark></strong></p><p>item-serviceå’Œcart-serviceæœåŠ¡å¯¹åº”çš„Serviceæ–¹æ³•ä¸­<strong>éœ€è¦æ·»åŠ @Transactionæ³¨è§£</strong></p><p>è¦**<mark>åˆ©ç”¨<code>@GlobalTransactional</code>æ ‡è®°åˆ†å¸ƒå¼äº‹åŠ¡çš„å…¥å£æ–¹æ³•</mark>**ï¼š</p><p><img src="/assets/image-20241214174806121.DrjymcYc.png" alt="image-20241214174806121" loading="lazy"></p><p><img src="/assets/image-20241214174854803.CbRjvUdZ.png" alt="image-20241214174854803" loading="lazy"></p><p><img src="/assets/image-20241214174935261.CgqOky7S.png" alt="image-20241214174935261" loading="lazy"></p><p>é‚£ä¹ˆï¼ŒSeataæ˜¯å¦‚ä½•è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„å‘¢ï¼Ÿ</p><h3 id="_2-4-xaæ¨¡å¼" tabindex="-1">2.4.<mark>XAæ¨¡å¼</mark> <a class="header-anchor" href="#_2-4-xaæ¨¡å¼" aria-label="Permalink to &quot;2.4.==XAæ¨¡å¼==&quot;">â€‹</a></h3><p>Seataæ”¯æŒå››ç§ä¸åŒçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><strong>XA</strong></li><li><strong>TCC</strong></li><li><strong>AT</strong></li><li><strong>SAGA</strong></li></ul><p>è¿™é‡Œæˆ‘ä»¬ä»¥<code>XA</code>æ¨¡å¼å’Œ<code>AT</code>æ¨¡å¼æ¥ç»™å¤§å®¶è®²è§£å…¶å®ç°åŸç†ã€‚</p><p><code>XA</code> è§„èŒƒ æ˜¯<code> X/Open</code> ç»„ç»‡å®šä¹‰çš„**åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼ˆDTPï¼ŒDistributed Transaction Processingï¼‰**æ ‡å‡†ï¼ŒXA è§„èŒƒ æè¿°äº†å…¨å±€çš„<code>TM</code>ä¸å±€éƒ¨çš„<code>RM</code>ä¹‹é—´çš„æ¥å£ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµçš„æ•°æ®åº“éƒ½å¯¹ XA è§„èŒƒ æä¾›äº†æ”¯æŒã€‚</p><p><img src="/assets/image-20241214173524210.XV-__6It.png" alt="image-20241214173524210" loading="lazy"></p><h4 id="_2-4-1-ä¸¤é˜¶æ®µæäº¤" tabindex="-1">2.4.1.ä¸¤é˜¶æ®µæäº¤ <a class="header-anchor" href="#_2-4-1-ä¸¤é˜¶æ®µæäº¤" aria-label="Permalink to &quot;2.4.1.ä¸¤é˜¶æ®µæäº¤&quot;">â€‹</a></h4><p>Aæ˜¯è§„èŒƒï¼Œç›®å‰ä¸»æµæ•°æ®åº“éƒ½å®ç°äº†è¿™ç§è§„èŒƒï¼Œå®ç°çš„åŸç†éƒ½æ˜¯åŸºäº<strong>ä¸¤é˜¶æ®µæäº¤</strong>ã€‚</p><p>æ­£å¸¸æƒ…å†µï¼š</p><p><img src="/assets/1733754442884-45.CANgPpwm.png" alt="img" loading="lazy"></p><p>å¼‚å¸¸æƒ…å†µï¼š</p><p><img src="/assets/1733754442884-46.Dy15qlBK.png" alt="img" loading="lazy"></p><p>ä¸€é˜¶æ®µï¼š</p><ul><li>äº‹åŠ¡åè°ƒè€…é€šçŸ¥æ¯ä¸ªäº‹åŠ¡å‚ä¸è€…<strong>æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</strong></li><li><strong>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®Œæˆå</strong>æŠ¥å‘Šäº‹åŠ¡æ‰§è¡ŒçŠ¶æ€ç»™äº‹åŠ¡åè°ƒè€…ï¼Œæ­¤æ—¶<strong>äº‹åŠ¡ä¸æäº¤</strong>ï¼Œç»§ç»­æŒæœ‰<strong>æ•°æ®åº“é”</strong>ï¼š<mark><strong>é”å®šæ•°æ®åº“èµ„æº</strong></mark>ï¼Œï¼ˆ<strong>å…¶ä»–äº‹åŠ¡æ­¤æ—¶æ— æ³•è®¿é—®</strong>ï¼‰</li></ul><p>æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ-<a href="#æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ">æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ</a></p><p>äºŒé˜¶æ®µï¼š</p><ul><li>äº‹åŠ¡åè°ƒè€…åŸºäºä¸€é˜¶æ®µçš„æŠ¥å‘Šæ¥åˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œ</li><li>å¦‚æœä¸€é˜¶æ®µ<strong>éƒ½æˆåŠŸ</strong>ï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…ï¼Œ<strong>æäº¤äº‹åŠ¡</strong></li><li>å¦‚æœä¸€é˜¶æ®µ<strong>ä»»æ„ä¸€ä¸ªå‚ä¸è€…å¤±è´¥</strong>ï¼Œåˆ™<strong>é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…å›æ»šäº‹åŠ¡</strong></li></ul><h4 id="_2-4-2-seataçš„xaæ¨¡å‹" tabindex="-1">2.4.2.Seataçš„XAæ¨¡å‹ <a class="header-anchor" href="#_2-4-2-seataçš„xaæ¨¡å‹" aria-label="Permalink to &quot;2.4.2.Seataçš„XAæ¨¡å‹&quot;">â€‹</a></h4><p>Seataå¯¹åŸå§‹çš„XAæ¨¡å¼åšäº†ç®€å•çš„å°è£…å’Œæ”¹é€ ï¼Œä»¥é€‚åº”è‡ªå·±çš„äº‹åŠ¡æ¨¡å‹ï¼ŒåŸºæœ¬æ¶æ„å¦‚å›¾ï¼š</p><p><img src="/assets/1733754442884-47.B7qZh1an.png" alt="img" loading="lazy"></p><p><strong><code>RM</code>ä¸€é˜¶æ®µ</strong>çš„å·¥ä½œï¼š</p><ol><li>æ³¨å†Œåˆ†æ”¯äº‹åŠ¡åˆ°<code>TC</code></li><li><strong>æ‰§è¡Œåˆ†æ”¯ä¸šåŠ¡sqlä½†ä¸æäº¤</strong></li><li>æŠ¥å‘Šæ‰§è¡ŒçŠ¶æ€åˆ°<code>TC</code></li></ol><p><strong><code>TC</code>äºŒé˜¶æ®µ</strong>çš„å·¥ä½œï¼š</p><ol><li><code>TC</code>æ£€æµ‹å„åˆ†æ”¯äº‹åŠ¡æ‰§è¡ŒçŠ¶æ€</li><li>å¦‚æœéƒ½æˆåŠŸï¼Œé€šçŸ¥æ‰€æœ‰RMæäº¤äº‹åŠ¡</li><li>å¦‚æœæœ‰å¤±è´¥ï¼Œé€šçŸ¥æ‰€æœ‰RMå›æ»šäº‹åŠ¡</li></ol><p><strong><code>RM</code>äºŒé˜¶æ®µ</strong>çš„å·¥ä½œï¼š</p><ul><li>æ¥æ”¶<code>TC</code>æŒ‡ä»¤ï¼Œæäº¤æˆ–å›æ»šäº‹åŠ¡</li></ul><h4 id="_2-4-3-ä¼˜ç¼ºç‚¹" tabindex="-1">2.4.3.ä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#_2-4-3-ä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;2.4.3.ä¼˜ç¼ºç‚¹&quot;">â€‹</a></h4><p><code>XA</code>æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œæ»¡è¶³ACIDåŸåˆ™</li><li>å¸¸ç”¨æ•°æ®åº“éƒ½æ”¯æŒï¼Œå®ç°ç®€å•ï¼Œå¹¶ä¸”æ²¡æœ‰ä»£ç ä¾µå…¥</li></ul><p><code>XA</code>æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>å› ä¸ºä¸€é˜¶æ®µéœ€è¦==<strong>é”å®šæ•°æ®åº“èµ„æº</strong>==ï¼Œï¼ˆ<strong>å…¶ä»–äº‹åŠ¡æ­¤æ—¶æ— æ³•è®¿é—®</strong>ï¼‰ï¼Œ<strong>ç­‰å¾…äºŒé˜¶æ®µç»“æŸæ‰é‡Šæ”¾ï¼Œ<mark>æ€§èƒ½è¾ƒå·®</mark></strong></li><li>ä¾èµ–å…³ç³»å‹æ•°æ®åº“å®ç°äº‹åŠ¡</li></ul><h4 id="_2-4-4-å®ç°æ­¥éª¤" tabindex="-1">2.4.4.<mark>å®ç°æ­¥éª¤</mark> <a class="header-anchor" href="#_2-4-4-å®ç°æ­¥éª¤" aria-label="Permalink to &quot;2.4.4.==å®ç°æ­¥éª¤==&quot;">â€‹</a></h4><p><img src="/assets/image-20241214174108757.5X-gAwRG.png" alt="image-20241214174108757" loading="lazy"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¦é‡‡ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Nacosä¸­çš„å…±äº«shared-seata.yamlé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">seata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  data-source-proxy-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">XA</span></span></code></pre></div><p><img src="/assets/image-20241214174328639.mubo2CVY.png" alt="image-20241214174328639" loading="lazy"></p><p>å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦åˆ©ç”¨<code>@GlobalTransactional</code>æ ‡è®°åˆ†å¸ƒå¼äº‹åŠ¡çš„å…¥å£æ–¹æ³•ï¼š</p><p><img src="/assets/image-20241214174806121.DrjymcYc.png" alt="image-20241214174806121" loading="lazy"></p><p><img src="/assets/image-20241214174854803.CbRjvUdZ.png" alt="image-20241214174854803" loading="lazy"></p><p><img src="/assets/image-20241214174935261.CgqOky7S.png" alt="image-20241214174935261" loading="lazy"></p><h4 id="_2-4-5-æµ‹è¯•-æäº¤è®¢å•" tabindex="-1">2.4.5.<mark>æµ‹è¯•</mark>-æäº¤è®¢å• <a class="header-anchor" href="#_2-4-5-æµ‹è¯•-æäº¤è®¢å•" aria-label="Permalink to &quot;2.4.5.==æµ‹è¯•==-æäº¤è®¢å•&quot;">â€‹</a></h4><h5 id="_1-ä¸è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ—¶" tabindex="-1">ï¼ˆ1ï¼‰ä¸è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ—¶ <a class="header-anchor" href="#_1-ä¸è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ—¶" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰ä¸è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æ—¶&quot;">â€‹</a></h5><p><strong>æµ‹è¯•æ–¹æ³•-åŠ¨æ€ä¿®æ”¹å•†å“åº“å­˜é‡</strong></p><p><img src="/assets/image-20241214175945693.D5bHda1P.png" alt="image-20241214175945693" loading="lazy"></p><p><img src="/assets/image-20241214180021936.DIvUzA47.png" alt="image-20241214180021936" loading="lazy"></p><p><img src="/assets/image-20241214180109726.AwJ__6UL.png" alt="image-20241214180109726" loading="lazy"></p><p><img src="/assets/image-20241214180349911.BsLUSIGE.png" alt="image-20241214180349911" loading="lazy"></p><p><img src="/assets/image-20241214180505164.Drb7WNMf.png" alt="image-20241214180505164" loading="lazy"></p><p><img src="/assets/image-20241214180544834.Ln1-zcpC.png" alt="image-20241214180544834" loading="lazy"></p><h5 id="_2-ä½¿ç”¨xaæ¨¡å¼è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†" tabindex="-1">ï¼ˆ2ï¼‰ä½¿ç”¨XAæ¨¡å¼è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç† <a class="header-anchor" href="#_2-ä½¿ç”¨xaæ¨¡å¼è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰ä½¿ç”¨XAæ¨¡å¼è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†&quot;">â€‹</a></h5><p><img src="/assets/image-20241214194747533.C0qUAlbl.png" alt="image-20241214194747533" loading="lazy"></p><h3 id="_2-5-atæ¨¡å¼" tabindex="-1">2.5.<mark>ATæ¨¡å¼</mark> <a class="header-anchor" href="#_2-5-atæ¨¡å¼" aria-label="Permalink to &quot;2.5.==ATæ¨¡å¼==&quot;">â€‹</a></h3><p><code>AT</code>æ¨¡å¼åŒæ ·æ˜¯åˆ†é˜¶æ®µæäº¤çš„äº‹åŠ¡æ¨¡å‹ï¼Œä¸è¿‡ç¼ºå¼¥è¡¥äº†<code>XA</code>æ¨¡å‹ä¸­**<mark>èµ„æºé”å®šå‘¨æœŸè¿‡é•¿</mark>çš„ç¼ºé™·**ã€‚</p><p><img src="/assets/image-20241214193923016.CSHAhgSY.png" alt="image-20241214193923016" loading="lazy"></p><h4 id="_2-5-1-seataçš„atæ¨¡å‹" tabindex="-1">2.5.1.Seataçš„ATæ¨¡å‹ <a class="header-anchor" href="#_2-5-1-seataçš„atæ¨¡å‹" aria-label="Permalink to &quot;2.5.1.Seataçš„ATæ¨¡å‹&quot;">â€‹</a></h4><p>åŸºæœ¬æµç¨‹å›¾ï¼š</p><p><img src="/assets/1733754442884-49.DzSkkyk6.png" alt="img" loading="lazy"></p><p>é˜¶æ®µä¸€<code>RM</code>çš„å·¥ä½œï¼š</p><ul><li>æ³¨å†Œåˆ†æ”¯äº‹åŠ¡</li><li><strong>è®°å½•undo-logï¼ˆ<mark>æ•°æ®å¿«ç…§</mark>ï¼‰</strong></li><li>æ‰§è¡Œä¸šåŠ¡sqlå¹¶æäº¤</li><li>æŠ¥å‘Šäº‹åŠ¡çŠ¶æ€</li></ul><p>é˜¶æ®µäºŒæäº¤æ—¶<code>RM</code>çš„å·¥ä½œï¼š</p><ul><li>åˆ é™¤undo-logå³å¯</li></ul><p>é˜¶æ®µäºŒå›æ»šæ—¶<code>RM</code>çš„å·¥ä½œï¼š</p><ul><li><strong>æ ¹æ®undo-logæ¢å¤æ•°æ®åˆ°æ›´æ–°å‰</strong></li></ul><h4 id="_2-5-2-æµç¨‹æ¢³ç†" tabindex="-1">2.5.2.æµç¨‹æ¢³ç† <a class="header-anchor" href="#_2-5-2-æµç¨‹æ¢³ç†" aria-label="Permalink to &quot;2.5.2.æµç¨‹æ¢³ç†&quot;">â€‹</a></h4><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªçœŸå®çš„ä¸šåŠ¡æ¥æ¢³ç†ä¸‹ATæ¨¡å¼çš„åŸç†ã€‚</p><p>æ¯”å¦‚ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œè®°å½•ç”¨æˆ·ä½™é¢ï¼š</p><table tabindex="0"><thead><tr><th style="text-align:left;"><strong>id</strong></th><th style="text-align:left;"><strong>money</strong></th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">100</td></tr></tbody></table><p>å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸šåŠ¡è¦æ‰§è¡Œçš„SQLä¸ºï¼š</p><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tb_account </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> money</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> money</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre></div><p>ATæ¨¡å¼ä¸‹ï¼Œå½“å‰åˆ†æ”¯äº‹åŠ¡æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><p><strong>ä¸€é˜¶æ®µ</strong>ï¼š</p><ol><li><code>TM</code>å‘èµ·å¹¶æ³¨å†Œå…¨å±€äº‹åŠ¡åˆ°<code>TC</code></li><li><code>TM</code>è°ƒç”¨åˆ†æ”¯äº‹åŠ¡</li><li>åˆ†æ”¯äº‹åŠ¡å‡†å¤‡æ‰§è¡Œä¸šåŠ¡SQL</li><li><strong><code>RM</code>æ‹¦æˆªä¸šåŠ¡SQLï¼Œæ ¹æ®whereæ¡ä»¶æŸ¥è¯¢åŸå§‹æ•°æ®ï¼Œ<mark>å½¢æˆå¿«ç…§</mark>ã€‚</strong></li></ol><div class="language-JSON vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;money&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ol><li><code>RM</code>æ‰§è¡Œä¸šåŠ¡SQLï¼Œ<strong>æäº¤æœ¬åœ°äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“é”</strong>ã€‚æ­¤æ—¶ money = 90</li><li><code>RM</code>æŠ¥å‘Šæœ¬åœ°äº‹åŠ¡çŠ¶æ€ç»™<code>TC</code></li></ol><p><strong>äºŒé˜¶æ®µ</strong>ï¼š</p><ol><li><code>TM</code>é€šçŸ¥<code>TC</code>äº‹åŠ¡ç»“æŸ</li><li><strong><code>TC</code>æ£€æŸ¥åˆ†æ”¯äº‹åŠ¡çŠ¶æ€</strong><ol><li>å¦‚æœéƒ½æˆåŠŸï¼Œåˆ™ç«‹å³åˆ é™¤å¿«ç…§</li><li>å¦‚æœæœ‰åˆ†æ”¯äº‹åŠ¡å¤±è´¥ï¼Œ<strong>éœ€è¦å›æ»š</strong>ã€‚è¯»å–å¿«ç…§æ•°æ®ï¼ˆ{&quot;id&quot;: 1, &quot;money&quot;: 100}ï¼‰ï¼Œå°†å¿«ç…§æ¢å¤åˆ°æ•°æ®åº“ã€‚æ­¤æ—¶æ•°æ®åº“å†æ¬¡æ¢å¤ä¸º100</li></ol></li></ol><p>æµç¨‹å›¾ï¼š</p><p><img src="/assets/1733754442884-50.qraPBu0w.png" alt="img" loading="lazy"></p><h4 id="_2-5-3-atä¸xaçš„åŒºåˆ«" tabindex="-1">2.5.3.ATä¸XAçš„åŒºåˆ« <a class="header-anchor" href="#_2-5-3-atä¸xaçš„åŒºåˆ«" aria-label="Permalink to &quot;2.5.3.ATä¸XAçš„åŒºåˆ«&quot;">â€‹</a></h4><p>ç®€è¿°<code>AT</code>æ¨¡å¼ä¸<code>XA</code>æ¨¡å¼æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><img src="/assets/image-20241214194025242.SdxOFVyq.png" alt="image-20241214194025242" loading="lazy"></p><ul><li><code>XA</code>æ¨¡å¼<strong>ä¸€é˜¶æ®µä¸æäº¤äº‹åŠ¡ï¼Œé”å®šèµ„æº</strong>ï¼›<code>AT</code>æ¨¡å¼<strong>ä¸€é˜¶æ®µç›´æ¥æäº¤ï¼Œä¸é”å®šèµ„æº</strong>ï¼ˆ<strong><mark>ä¼šå‡ºç°çŸ­æš‚æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜</mark></strong>ï¼‰ã€‚</li><li><code>XA</code>æ¨¡å¼ä¾èµ–<strong>æ•°æ®åº“æœºåˆ¶å®ç°å›æ»š</strong>ï¼›<code>AT</code>æ¨¡å¼åˆ©ç”¨<strong>æ•°æ®å¿«ç…§å®ç°æ•°æ®å›æ»š</strong>ã€‚</li><li><code>XA</code>æ¨¡å¼<strong>å¼ºä¸€è‡´</strong>ï¼›<code>AT</code>æ¨¡å¼<strong>æœ€ç»ˆä¸€è‡´</strong></li></ul><p>å¯è§ï¼ŒATæ¨¡å¼ä½¿ç”¨èµ·æ¥æ›´åŠ ç®€å•ï¼Œæ— ä¸šåŠ¡ä¾µå…¥ï¼Œæ€§èƒ½æ›´å¥½ã€‚å› æ­¤ä¼ä¸š90%çš„åˆ†å¸ƒå¼äº‹åŠ¡éƒ½å¯ä»¥ç”¨ATæ¨¡å¼æ¥è§£å†³ã€‚</p><h4 id="_2-5-5-å®ç°atæ¨¡å¼" tabindex="-1">2.5.5.<mark>å®ç°ATæ¨¡å¼</mark> <a class="header-anchor" href="#_2-5-5-å®ç°atæ¨¡å¼" aria-label="Permalink to &quot;2.5.5.==å®ç°ATæ¨¡å¼==&quot;">â€‹</a></h4><h5 id="_1-æ·»åŠ å¿«ç…§-æ•°æ®åº“è¡¨" tabindex="-1">ï¼ˆ1ï¼‰æ·»åŠ <mark>å¿«ç…§</mark>-æ•°æ®åº“è¡¨ <a class="header-anchor" href="#_1-æ·»åŠ å¿«ç…§-æ•°æ®åº“è¡¨" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰æ·»åŠ ==å¿«ç…§==-æ•°æ®åº“è¡¨&quot;">â€‹</a></h5><p>seataçš„å®¢æˆ·ç«¯åœ¨è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™éœ€è¦<strong>è®°å½•ä¸€äº›ä¸­é—´æ•°æ®ï¼Œä¿å­˜åœ¨æ•°æ®åº“ä¸­</strong>ã€‚å› æ­¤æˆ‘ä»¬è¦å…ˆå‡†å¤‡ä¸€ä¸ªè¿™æ ·çš„è¡¨ã€‚</p><p>å°†è¯¾å‰èµ„æ–™çš„seata-at.sqlåˆ†åˆ«æ–‡ä»¶å¯¼å…¥hm-tradeã€hm-cartã€hm-itemä¸‰ä¸ªæ•°æ®åº“ä¸­ï¼š</p><p><img src="/assets/1733754442883-42.CVYB34GO.png" alt="img" loading="lazy"></p><p>ç»“æœï¼š</p><p><img src="/assets/1733754442883-43.CQJJIfoY.png" alt="img" loading="lazy"></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- for AT mode you must to init this sql for you business database. the seata server not need it.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `undo_log`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `branch_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;branch transaction id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `xid`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;global transaction id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `context`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;undo_log context,such as serialization&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `rollback_info`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LONGBLOB     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rollback info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `log_status`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    INT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0:normal status,1:defense status&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `log_created`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;create datetime&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `log_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;modify datetime&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> KEY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `ux_undo_log`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`xid`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`branch_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHARSET </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;AT transaction mode undo table&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><img src="/assets/image-20241214194926441.BkfroPny.png" alt="image-20241214194926441" loading="lazy"></p><h5 id="_2-å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºatæ¨¡å¼" tabindex="-1">ï¼ˆ2ï¼‰å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºATæ¨¡å¼ <a class="header-anchor" href="#_2-å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºatæ¨¡å¼" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºATæ¨¡å¼&quot;">â€‹</a></h5><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">seata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  data-source-proxy-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AT</span></span></code></pre></div><p><img src="/assets/image-20241214195442290.Cbe-mh12.png" alt="image-20241214195442290" loading="lazy"></p><h5 id="_3-æ·»åŠ å…¨å±€äº‹åŠ¡æ³¨è§£" tabindex="-1">ï¼ˆ3ï¼‰æ·»åŠ å…¨å±€äº‹åŠ¡æ³¨è§£ <a class="header-anchor" href="#_3-æ·»åŠ å…¨å±€äº‹åŠ¡æ³¨è§£" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰æ·»åŠ å…¨å±€äº‹åŠ¡æ³¨è§£&quot;">â€‹</a></h5><p><img src="/assets/image-20241215162839888.BDTYEK4Q.png" alt="image-20241215162839888" loading="lazy"></p><p><img src="/assets/image-20241214200401138.DcrmsVSW.png" alt="image-20241214200401138" loading="lazy"></p><h4 id="_2-5-6-é«˜å¹¶å‘åœºæ™¯" tabindex="-1">2.5.6.<mark>é«˜å¹¶å‘åœºæ™¯</mark> <a class="header-anchor" href="#_2-5-6-é«˜å¹¶å‘åœºæ™¯" aria-label="Permalink to &quot;2.5.6.==é«˜å¹¶å‘åœºæ™¯==&quot;">â€‹</a></h4><p>æ˜¯çš„ï¼Œ<strong>Seata AT æ¨¡å‹åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°çŸ­æš‚çš„æ•°æ®ä¸ä¸€è‡´</strong>ï¼Œä½†æœ€ç»ˆ Seata ä¼šé€šè¿‡ <strong>Undo Log æœºåˆ¶</strong> å°è¯•å›æ»šï¼Œä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æç«¯æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ <strong>å¹¶å‘æ›´æ–°ã€å†™å…¥å†²çªã€å›æ»šå¤±è´¥</strong>ï¼Œç¡®å®å¯èƒ½å¯¼è‡´æ•°æ®è¢«è¦†ç›–æˆ–éƒ¨åˆ†å›æ»šå¤±è´¥ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p><p><mark><strong>Seata AT é»˜è®¤ä¼šä½¿ç”¨ <code>FOR UPDATE</code> è¿›è¡Œè¡Œé”ä¿æŠ¤</strong></mark>ï¼Œä½†ä»ç„¶éœ€è¦ä¸šåŠ¡é€»è¾‘æ¥é˜²æ­¢æ•°æ®è¦†ç›–ã€‚</p><hr><h6 id="_1-å¹¶å‘é«˜ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ" tabindex="-1"><strong>1. å¹¶å‘é«˜ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ</strong> <a class="header-anchor" href="#_1-å¹¶å‘é«˜ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ" aria-label="Permalink to &quot;**1. å¹¶å‘é«˜ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ**&quot;">â€‹</a></h6><p>åœ¨ Seata AT æ¨¡å‹ä¸­ï¼Œä¸»è¦çš„é£é™©æ˜¯ <strong>å¤šä¸ªåˆ†æ”¯äº‹åŠ¡å¹¶å‘æ‰§è¡Œï¼Œéƒ¨åˆ†æäº¤åå›æ»šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´</strong>ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¯èƒ½çš„åœºæ™¯ï¼š</p><p><strong>æƒ…å†µ 1ï¼šåˆ†æ”¯äº‹åŠ¡æäº¤åï¼Œæ•´ä½“äº‹åŠ¡å›æ»š</strong></p><p><strong>é—®é¢˜æè¿°ï¼š</strong></p><ul><li>äº‹åŠ¡ A ç”±å¤šä¸ªåˆ†æ”¯äº‹åŠ¡ <code>T1</code>ã€<code>T2</code>ã€<code>T3</code> ç»„æˆã€‚</li><li><code>T1</code> å…ˆæäº¤æˆåŠŸï¼Œæ•°æ®åº“æ•°æ®å·²ä¿®æ”¹ã€‚</li><li><code>T2</code>ã€<code>T3</code> ç”±äºæŸç§åŸå› å¤±è´¥ï¼Œå¯¼è‡´æ•´ä¸ªå…¨å±€äº‹åŠ¡éœ€è¦å›æ»šã€‚</li><li>Seata <strong>é€šè¿‡ Undo Log å›æ»š <code>T1</code></strong>ï¼Œä½† <code>T1</code> çš„æ•°æ®å¯èƒ½å·²ç»è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹äº†ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li></ul><p><strong>å¯èƒ½å¯¼è‡´çš„é—®é¢˜ï¼š</strong></p><ul><li><code>T1</code> æäº¤çš„æ•°æ®å¯èƒ½å·²ç»è¢«å…¶ä»–äº‹åŠ¡è¯»å–æˆ–ä¿®æ”¹ï¼Œå›æ»šåå¯èƒ½å½±å“å…¶ä»–äº‹åŠ¡çš„æ­£ç¡®æ€§ã€‚</li></ul><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>ä¹è§‚é”æ§åˆ¶</strong>ï¼šé€šè¿‡ <strong>ç‰ˆæœ¬å·ï¼ˆversionï¼‰æˆ–æ—¶é—´æˆ³</strong> ç¡®ä¿æ•°æ®ä¸ä¼šè¢«å…¶ä»–äº‹åŠ¡é”™è¯¯è¦†ç›–ã€‚</li><li><strong>Seata äº‹åŠ¡é‡è¯•æœºåˆ¶</strong>ï¼šSeata <strong>ä¼šæŒç»­é‡è¯•å›æ»šï¼Œç›´åˆ°æˆåŠŸ</strong>ã€‚</li><li><strong>ä¸šåŠ¡å±‚è¡¥å¿</strong>ï¼šå¦‚æœ Seata å‘ç°æ•°æ®è¢«ç¯¡æ”¹ï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„ä¸šåŠ¡è¡¥å¿é€»è¾‘ï¼Œæ¯”å¦‚ <strong>äººå·¥å®¡æ ¸ã€é€šçŸ¥å›æ»šå¤±è´¥ç­‰</strong>ã€‚</li></ul><hr><p><strong>æƒ…å†µ 2ï¼šå¹¶å‘æ›´æ–°å¯¼è‡´ Undo Log è¦†ç›–</strong></p><p><strong>é—®é¢˜æè¿°ï¼š</strong></p><ul><li>å‡è®¾å¤šä¸ªäº‹åŠ¡ <code>T1</code>ã€<code>T2</code> å¹¶å‘æ›´æ–°åŒä¸€æ¡æ•°æ®ï¼ˆ<code>record_id=100</code>ï¼‰ã€‚</li><li><code>T1</code> ä¿®æ”¹æ•°æ®å¹¶ç”Ÿæˆ <strong>Undo Log</strong>ï¼Œç„¶åæäº¤ã€‚</li><li><code>T2</code> ä¹Ÿä¿®æ”¹äº†ç›¸åŒæ•°æ®ï¼Œå¹¶ç”Ÿæˆ <strong>è‡ªå·±çš„ Undo Log</strong>ï¼Œç„¶åæäº¤ã€‚</li><li>å¦‚æœ <code>T2</code> äº‹åŠ¡æœ€ç»ˆè¢«å›æ»šï¼ŒSeata ä¼šå°è¯•ä½¿ç”¨ <strong>Undo Log å›æ»š <code>T2</code> çš„æ•°æ®</strong>ï¼Œä½† <code>T1</code> å·²ç»ä¿®æ”¹è¿‡æ•°æ®ï¼Œå¯¼è‡´ <code>T2</code> çš„å›æ»šå¯èƒ½è¦†ç›– <code>T1</code> çš„æ•°æ®ã€‚</li></ul><p><strong>å¯èƒ½å¯¼è‡´çš„é—®é¢˜ï¼š</strong></p><ul><li><code>T2</code> çš„å›æ»šå¯èƒ½ä¼šè¦†ç›– <code>T1</code> å·²ç»æäº¤çš„æ­£ç¡®æ•°æ®ï¼Œå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li></ul><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ul><li><strong>è¡Œé”ï¼ˆRow Lockingï¼‰</strong>ï¼šæ•°æ®åº“å±‚é¢åŠ <strong>è¡Œé”(For Update)</strong>ï¼Œé¿å…å¤šä¸ªäº‹åŠ¡åŒæ—¶ä¿®æ”¹åŒä¸€è¡Œæ•°æ®ã€‚</li><li><strong>MVCCï¼ˆå¤šç‰ˆæœ¬æ§åˆ¶ï¼‰</strong>ï¼šæ•°æ®åº“æœ¬èº«çš„ MVCC æœºåˆ¶å¯ä»¥é¿å…äº‹åŠ¡å›æ»šå½±å“å…¶ä»–äº‹åŠ¡ã€‚</li><li><strong>ä¸šåŠ¡é€»è¾‘å¹‚ç­‰</strong>ï¼šå¦‚æœå‘ç”Ÿå¹¶å‘ä¿®æ”¹ï¼Œä¸šåŠ¡é€»è¾‘éœ€è¦ç¡®ä¿æ•°æ®ä¸ä¼šè¢«é”™è¯¯è¦†ç›–ã€‚</li></ul><hr><h6 id="_2-seata-at-å¦‚ä½•é™ä½æ•°æ®ä¸ä¸€è‡´é£é™©" tabindex="-1"><strong>2. Seata AT å¦‚ä½•é™ä½æ•°æ®ä¸ä¸€è‡´é£é™©ï¼Ÿ</strong> <a class="header-anchor" href="#_2-seata-at-å¦‚ä½•é™ä½æ•°æ®ä¸ä¸€è‡´é£é™©" aria-label="Permalink to &quot;**2. Seata AT å¦‚ä½•é™ä½æ•°æ®ä¸ä¸€è‡´é£é™©ï¼Ÿ**&quot;">â€‹</a></h6><p>Seata AT ä¸»è¦ä¾èµ–ä»¥ä¸‹æœºåˆ¶å‡å°‘æ•°æ®ä¸ä¸€è‡´ï¼š</p><ol><li><strong>Undo Log</strong>ï¼š <ul><li>åœ¨ <strong>ç¬¬ä¸€é˜¶æ®µ</strong>ï¼ˆTry é˜¶æ®µï¼‰è®°å½•åŸå§‹æ•°æ®ï¼Œå›æ»šæ—¶å°è¯•æ¢å¤ã€‚</li><li>ä½†å¦‚æœæ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼ŒUndo Log å¯èƒ½æ— æ³•æ­£ç¡®å›æ»šã€‚</li></ul></li><li><strong>å…¨å±€äº‹åŠ¡åè°ƒï¼ˆTCï¼‰</strong>ï¼š <ul><li>Seata çš„ TC äº‹åŠ¡åè°ƒå™¨ä¼šä¸æ–­é‡è¯•æœªå®Œæˆçš„å›æ»šæ“ä½œï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§ã€‚</li><li>ä½†å¦‚æœä¸šåŠ¡æ•°æ®å·²è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼ŒSeata å¯èƒ½æ— æ³•æ­£ç¡®æ¢å¤ã€‚</li></ul></li><li><strong>å†™éš”ç¦»æœºåˆ¶</strong>ï¼š <ul><li><strong>ä½¿ç”¨ <code>FOR UPDATE</code> è¯­å¥</strong>ï¼Œè®©æ•°æ®åº“åŠ é”ï¼Œé¿å…å¹¶å‘æ›´æ–°å¯¼è‡´æ•°æ®è¦†ç›–ã€‚</li><li><strong>ä½¿ç”¨ç‰ˆæœ¬å·ï¼ˆVersioningï¼‰</strong> æœºåˆ¶ï¼Œç¡®ä¿äº‹åŠ¡é¡ºåºæ‰§è¡Œï¼Œé¿å…æ•°æ®ç¯¡æ”¹ã€‚</li></ul></li></ol><hr><h6 id="_3-seata-at-å¹¶å‘é—®é¢˜çš„ä¼˜åŒ–æ–¹æ¡ˆ" tabindex="-1"><strong>3. Seata AT å¹¶å‘é—®é¢˜çš„ä¼˜åŒ–æ–¹æ¡ˆ</strong> <a class="header-anchor" href="#_3-seata-at-å¹¶å‘é—®é¢˜çš„ä¼˜åŒ–æ–¹æ¡ˆ" aria-label="Permalink to &quot;**3. Seata AT å¹¶å‘é—®é¢˜çš„ä¼˜åŒ–æ–¹æ¡ˆ**&quot;">â€‹</a></h6><p><strong>1. ä¸šåŠ¡çº§å¹‚ç­‰æ§åˆ¶</strong></p><ul><li><strong>å¢åŠ å”¯ä¸€æ€§çº¦æŸ</strong>ï¼Œç¡®ä¿äº‹åŠ¡é‡å¤æ‰§è¡Œä¸ä¼šå½±å“æœ€ç»ˆæ•°æ®ã€‚</li><li><strong>æ—¶é—´æˆ³æˆ–ç‰ˆæœ¬å·æ§åˆ¶</strong>ï¼Œé¿å…æ•°æ®è¢«æ„å¤–è¦†ç›–ã€‚</li></ul><p><strong>2. æ•°æ®åº“å±‚ä¼˜åŒ–</strong></p><ul><li><strong>è¡Œé”ï¼ˆRow Lockingï¼‰</strong> é¿å…å¹¶å‘äº‹åŠ¡æ›´æ–°åŒä¸€è¡Œæ•°æ®ã€‚</li><li><strong>ä¹è§‚é”ï¼ˆOptimistic Lockingï¼‰</strong> é¿å…äº‹åŠ¡å›æ»šæ—¶è¦†ç›–æ–°çš„æ•°æ®ã€‚</li></ul><p><strong>3. ä¸šåŠ¡å±‚äº‹åŠ¡è¡¥å¿</strong></p><ul><li>å¦‚æœå‘ç°äº‹åŠ¡ <strong>å›æ»šå¤±è´¥</strong> æˆ– <strong>æ•°æ®å·²è¢«ä¿®æ”¹</strong>ï¼Œå¯ä»¥è¿›è¡Œ<strong>äººå·¥å®¡æ ¸</strong> æˆ– <strong>é¢å¤–è¡¥å¿é€»è¾‘</strong>ã€‚</li></ul><hr><h6 id="_4-ç»“è®º" tabindex="-1"><strong>4. ç»“è®º</strong> <a class="header-anchor" href="#_4-ç»“è®º" aria-label="Permalink to &quot;**4. ç»“è®º**&quot;">â€‹</a></h6><p>Seata AT æ¨¡å‹åœ¨ <strong>é«˜å¹¶å‘åœºæ™¯ä¸‹</strong> å¯èƒ½ä¼šå‡ºç° <strong>æ•°æ®å›æ»šå¤±è´¥ã€Undo Log è¦†ç›–ã€æ•°æ®è¢«ç¯¡æ”¹ç­‰é—®é¢˜</strong>ï¼Œå¯¼è‡´çŸ­æš‚æ•°æ®ä¸ä¸€è‡´ã€‚ä½†å®ƒæœ€ç»ˆä¼šé€šè¿‡ <strong>æŒç»­é‡è¯•å›æ»š</strong> ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>å¦‚æœä¸šåŠ¡å¯¹ <strong>å¼ºä¸€è‡´æ€§</strong> è¦æ±‚å¾ˆé«˜ï¼Œå¯ä»¥è€ƒè™‘ï¼š</p><ul><li><strong>Seata TCC æ¨¡å¼</strong>ï¼Œæ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡è¡¥å¿é€»è¾‘ã€‚</li><li><strong>XA äº‹åŠ¡</strong>ï¼ˆä½†æ€§èƒ½è¾ƒä½ï¼‰ã€‚</li><li><strong>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰çš„äº‹åŠ¡æ–¹æ¡ˆ</strong>ï¼Œç¡®ä¿è·¨æœåŠ¡äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</li></ul><h5 id="_2-5-7-ç‰ˆæœ¬æ§åˆ¶å’Œè¡Œé”" tabindex="-1">2.5.7.ç‰ˆæœ¬æ§åˆ¶å’Œè¡Œé” <a class="header-anchor" href="#_2-5-7-ç‰ˆæœ¬æ§åˆ¶å’Œè¡Œé”" aria-label="Permalink to &quot;2.5.7.ç‰ˆæœ¬æ§åˆ¶å’Œè¡Œé”&quot;">â€‹</a></h5><p>åœ¨ <strong>é«˜å¹¶å‘åœºæ™¯</strong> ä¸‹ï¼Œä¸ºäº†é¿å… <strong>Seata AT æ¨¡å‹</strong> å‡ºç°æ•°æ®è¦†ç›–æˆ–ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ <strong>ç‰ˆæœ¬å·ï¼ˆVersioningï¼‰æœºåˆ¶</strong> å’Œ <strong>è¡Œé”ï¼ˆRow Lockingï¼‰</strong> è¿›è¡Œä¼˜åŒ–ã€‚</p><hr><h6 id="_1-ç‰ˆæœ¬å·-versioning-æœºåˆ¶" tabindex="-1"><strong>1. ç‰ˆæœ¬å·ï¼ˆVersioningï¼‰æœºåˆ¶</strong> <a class="header-anchor" href="#_1-ç‰ˆæœ¬å·-versioning-æœºåˆ¶" aria-label="Permalink to &quot;**1. ç‰ˆæœ¬å·ï¼ˆVersioningï¼‰æœºåˆ¶**&quot;">â€‹</a></h6><p><strong>åŸç†</strong></p><ul><li><strong>åœ¨æ•°æ®åº“è¡¨ä¸­å¢åŠ  <code>version</code> å­—æ®µ</strong>ï¼Œæ¯æ¬¡æ›´æ–°æ•°æ®æ—¶ï¼Œ<code>version</code> é€’å¢ã€‚</li><li><strong>æ›´æ–°æ•°æ®æ—¶å¸¦ä¸Š <code>version</code> ä½œä¸ºæ¡ä»¶</strong>ï¼Œåªæœ‰å½“ <code>version</code> <strong>æœªè¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹æ—¶</strong>ï¼Œæ›´æ–°æ‰ä¼šæˆåŠŸã€‚</li><li><strong>å¦‚æœ <code>version</code> å˜æ›´ï¼Œè¯´æ˜æœ‰å¹¶å‘äº‹åŠ¡ä¿®æ”¹äº†æ•°æ®ï¼Œå½“å‰äº‹åŠ¡åº”å½“å›æ»šæˆ–é‡è¯•</strong>ã€‚</li></ul><p><strong>ç¤ºä¾‹</strong></p><p>å‡è®¾æœ‰ä¸€ä¸ªè®¢å•è¡¨ <code>order_table</code>ï¼š</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> order_table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    order_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>åœ¨äº‹åŠ¡æ›´æ–°æ•°æ®æ—¶ï¼š</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order_table</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;PAID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> AND</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><blockquote><p><strong>å¦‚æœ <code>version = 3</code> ä½†å½“å‰æ•°æ®åº“ä¸­å·²ç»å˜ä¸º <code>4</code>ï¼Œè¯´æ˜åˆ«çš„äº‹åŠ¡å·²æ›´æ–°è¿‡æ•°æ®ï¼Œå½“å‰äº‹åŠ¡ä¼šå¤±è´¥ï¼Œé¿å…æ•°æ®è¦†ç›–ã€‚</strong></p></blockquote><p><strong>Seata ä¸­çš„ä½¿ç”¨</strong></p><p>Seata æœ¬èº«ä¸ä¼šè‡ªåŠ¨ç®¡ç† <code>version</code>ï¼Œä½†å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­æ‰‹åŠ¨å®ç°ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Modifying</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UPDATE Order o SET o.orderStatus = :status, o.version = o.version + 1 WHERE o.id = :id AND o.version = :version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Long id, @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) String status, @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) Integer version);</span></span></code></pre></div><p>å¦‚æœ <code>updateOrder</code> è¿”å› <code>0</code>ï¼Œè¯´æ˜ <strong>ç‰ˆæœ¬å·è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œéœ€è¦é‡è¯•æˆ–å¤„ç†å†²çª</strong>ã€‚</p><hr><h6 id="_2-è¡Œé”-row-locking" tabindex="-1"><strong>2. è¡Œé”ï¼ˆRow Lockingï¼‰</strong> <a class="header-anchor" href="#_2-è¡Œé”-row-locking" aria-label="Permalink to &quot;**2. è¡Œé”ï¼ˆRow Lockingï¼‰**&quot;">â€‹</a></h6><p><strong>åŸç†</strong></p><ul><li><strong>ä½¿ç”¨ <code>SELECT ... FOR UPDATE</code></strong> è¯­å¥ï¼Œåœ¨äº‹åŠ¡ä¸­é”å®šè¡Œæ•°æ®ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åŒæ—¶ä¿®æ”¹ã€‚</li><li><strong>é€‚ç”¨äº Seata AT æ¨¡å¼</strong>ï¼Œå› ä¸º Seata <strong>ä¼šè‡ªåŠ¨åœ¨äº‹åŠ¡ SQL è¯­å¥ä¸ŠåŠ  <code>FOR UPDATE</code></strong> æ¥è·å– <strong>å…¨å±€é”</strong>ã€‚</li></ul><p><strong>ç¤ºä¾‹</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BEGIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order_table </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FOR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order_table </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> order_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;PAID&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COMMIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><blockquote><p><strong>åœ¨äº‹åŠ¡æäº¤å‰ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•ä¿®æ”¹ <code>id = 1</code> çš„æ•°æ®ã€‚</strong></p></blockquote><p><strong>Seata ä¸­çš„ä½¿ç”¨</strong></p><p>Seata <strong>é»˜è®¤ä¼šåœ¨ AT æ¨¡å¼çš„äº‹åŠ¡ SQL é‡Œæ·»åŠ  <code>FOR UPDATE</code></strong>ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Long orderId) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Order order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> orderRepository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderId).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOrderStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PAID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    orderRepository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p><strong>Seata AT ä»£ç†æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨ <code>SELECT</code> è¯­å¥ååŠ  <code>FOR UPDATE</code>ï¼Œé”ä½æ•°æ®ï¼Œé¿å…å¹¶å‘é—®é¢˜ã€‚</strong></p></blockquote><h6 id="è¡Œé”-vs-ç‰ˆæœ¬å·" tabindex="-1"><strong>è¡Œé” vs ç‰ˆæœ¬å·</strong> <a class="header-anchor" href="#è¡Œé”-vs-ç‰ˆæœ¬å·" aria-label="Permalink to &quot;**è¡Œé” vs ç‰ˆæœ¬å·**&quot;">â€‹</a></h6><table tabindex="0"><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th><th><strong>ä¼˜ç‚¹</strong></th><th><strong>ç¼ºç‚¹</strong></th></tr></thead><tbody><tr><td><strong>è¡Œé”ï¼ˆRow Lockingï¼‰</strong></td><td>é€‚ç”¨äºçŸ­äº‹åŠ¡ï¼Œä¿è¯æ•°æ®ä¸è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹</td><td>æ•°æ®ä¸€è‡´æ€§é«˜ï¼Œç®€å•æ˜“ç”¨</td><td>ä¼šå½±å“å¹¶å‘æ€§èƒ½ï¼Œå¯èƒ½å¯¼è‡´é”ç­‰å¾…</td></tr><tr><td><strong>ç‰ˆæœ¬å·ï¼ˆVersioningï¼‰</strong></td><td>é€‚ç”¨äºé«˜å¹¶å‘ä¸šåŠ¡ï¼Œå…è®¸éƒ¨åˆ†äº‹åŠ¡å¤±è´¥é‡è¯•</td><td>ä¸å½±å“å¹¶å‘æ€§èƒ½ï¼Œä¸ä¼šé”è¡Œ</td><td>éœ€è¦é¢å¤–å®ç°é‡è¯•é€»è¾‘</td></tr></tbody></table><hr><h6 id="_3-ç»¼åˆæ–¹æ¡ˆ" tabindex="-1"><strong>3. ç»¼åˆæ–¹æ¡ˆ</strong> <a class="header-anchor" href="#_3-ç»¼åˆæ–¹æ¡ˆ" aria-label="Permalink to &quot;**3. ç»¼åˆæ–¹æ¡ˆ**&quot;">â€‹</a></h6><ul><li><strong>ä½å¹¶å‘</strong>ï¼šç›´æ¥ä½¿ç”¨ <strong>è¡Œé”ï¼ˆ<code>FOR UPDATE</code>ï¼‰</strong>ï¼Œç¡®ä¿äº‹åŠ¡å®Œæ•´æ€§ã€‚</li><li><strong>é«˜å¹¶å‘</strong>ï¼šä½¿ç”¨ <strong>ç‰ˆæœ¬å·æœºåˆ¶</strong>ï¼Œå‡å°‘é”å†²çªï¼Œå¹¶ç»“åˆ <strong>è‡ªåŠ¨é‡è¯•</strong> å¤„ç†äº‹åŠ¡å¤±è´¥ã€‚</li></ul><hr><h6 id="_4-ç»“è®º-1" tabindex="-1"><strong>4. ç»“è®º</strong> <a class="header-anchor" href="#_4-ç»“è®º-1" aria-label="Permalink to &quot;**4. ç»“è®º**&quot;">â€‹</a></h6><ul><li><strong>å¦‚æœå¹¶å‘é‡é«˜ï¼Œæ¨èä½¿ç”¨ç‰ˆæœ¬å·ï¼ˆVersioningï¼‰æœºåˆ¶</strong>ï¼Œé¿å…é”å†²çªã€‚</li><li><strong>å¦‚æœæ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜ï¼Œå¯ä»¥ä½¿ç”¨è¡Œé”ï¼ˆRow Lockingï¼‰</strong>ï¼Œä½†ä¼šé™ä½å¹¶å‘æ€§èƒ½ã€‚</li><li><mark><strong>Seata AT é»˜è®¤ä¼šä½¿ç”¨ <code>FOR UPDATE</code> è¿›è¡Œè¡Œé”ä¿æŠ¤</strong></mark>ï¼Œä½†ä»ç„¶éœ€è¦ä¸šåŠ¡é€»è¾‘æ¥é˜²æ­¢æ•°æ®è¦†ç›–ã€‚</li></ul><h2 id="_3-ç»ƒä¹ " tabindex="-1">3.<mark>ç»ƒä¹ </mark> <a class="header-anchor" href="#_3-ç»ƒä¹ " aria-label="Permalink to &quot;3.==ç»ƒä¹ ==&quot;">â€‹</a></h2><h3 id="_3-1-ç¼–å†™é™çº§é€»è¾‘" tabindex="-1">3.1.ç¼–å†™é™çº§é€»è¾‘ <a class="header-anchor" href="#_3-1-ç¼–å†™é™çº§é€»è¾‘" aria-label="Permalink to &quot;3.1.ç¼–å†™é™çº§é€»è¾‘&quot;">â€‹</a></h3><p>ç»™é»‘é©¬å•†åŸä¸­ç°æœ‰çš„FeignClientéƒ½ç¼–å†™å¯¹åº”çš„é™çº§é€»è¾‘ï¼Œå¹¶ä¸”æ”¹é€ é¡¹ç›®ä¸­æ¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œå°†OpenFeignä¸Sentinelæ•´åˆã€‚</p><h4 id="_3-1-2-é™çº§é€»è¾‘" tabindex="-1">3.1.2.é™çº§é€»è¾‘ <a class="header-anchor" href="#_3-1-2-é™çº§é€»è¾‘" aria-label="Permalink to &quot;3.1.2.é™çº§é€»è¾‘&quot;">â€‹</a></h4><p><img src="/assets/image-20241214201707868.BVQw29Ym.png" alt="image-20241214201707868" loading="lazy"></p><h4 id="_3-1-2-ç®€åŒ–å…¶ä»–å¾®æœåŠ¡é…ç½®" tabindex="-1">3.1.2.ç®€åŒ–å…¶ä»–å¾®æœåŠ¡é…ç½® <a class="header-anchor" href="#_3-1-2-ç®€åŒ–å…¶ä»–å¾®æœåŠ¡é…ç½®" aria-label="Permalink to &quot;3.1.2.ç®€åŒ–å…¶ä»–å¾®æœåŠ¡é…ç½®&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--ç»Ÿä¸€é…ç½®ç®¡ç†--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--è¯»å–bootstrapæ–‡ä»¶--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><img src="/assets/image-20241214202145740.Brjnw5Ga.png" alt="image-20241214202145740" loading="lazy"></p><p><img src="/assets/image-20241214202238872.HNnN-hCE.png" alt="image-20241214202238872" loading="lazy"></p><h4 id="_3-1-3-å°†openfeignä¸sentinelæ•´åˆ" tabindex="-1">3.1.3.å°†OpenFeignä¸Sentinelæ•´åˆ <a class="header-anchor" href="#_3-1-3-å°†openfeignä¸sentinelæ•´åˆ" aria-label="Permalink to &quot;3.1.3.å°†OpenFeignä¸Sentinelæ•´åˆ&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--é˜¿é‡Œ-sentinel--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-sentinel&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p><img src="/assets/image-20241214202536002.CcaFKbsU.png" alt="image-20241214202536002" loading="lazy"></p><p><img src="/assets/image-20241214202719764.C39xFOhH.png" alt="image-20241214202719764" loading="lazy"></p><h3 id="_3-2-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1">3.2.<mark>è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡</mark> <a class="header-anchor" href="#_3-2-è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡" aria-label="Permalink to &quot;3.2.==è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡==&quot;">â€‹</a></h3><p>é™¤äº†ä¸‹å•ä¸šåŠ¡ä»¥å¤–ï¼Œç”¨æˆ·å¦‚æœé€‰æ‹©ä½™é¢æ”¯ä»˜ï¼Œå‰ç«¯ä¼šå°†è¯·æ±‚å‘é€åˆ°pay-serviceæ¨¡å—ã€‚è€Œè¿™ä¸ªæ¨¡å—è¦åšä¸‰ä»¶äº‹æƒ…ï¼š</p><ul><li>ç›´æ¥ä»user-serviceæ¨¡å—è°ƒç”¨æ¥å£ï¼Œæ‰£é™¤ä½™é¢ä»˜æ¬¾</li><li>æ›´æ–°æœ¬åœ°ï¼ˆpay-serviceï¼‰äº¤æ˜“æµæ°´è¡¨çŠ¶æ€</li><li>é€šçŸ¥äº¤æ˜“æœåŠ¡ï¼ˆtrade-serviceï¼‰æ›´æ–°å…¶ä¸­çš„ä¸šåŠ¡è®¢å•çŠ¶æ€</li></ul><p>æµç¨‹å¦‚å›¾ï¼š</p><p><img src="/assets/image-20241214200610886.DmtElah0.png" alt="image-20241214200610886" loading="lazy"></p><p>æ˜¾ç„¶ï¼Œè¿™é‡Œä¹Ÿå­˜åœ¨åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ã€‚</p><p>å¯¹åº”çš„é¡µé¢å¦‚ä¸‹ï¼š</p><p><img src="/assets/1733754442884-51.CTR_7wB1.png" alt="img" loading="lazy"></p><p>å½“æˆ‘ä»¬æäº¤è®¢å•æˆåŠŸåï¼Œè¿›å…¥æ”¯ä»˜é¡µé¢ï¼Œé€‰æ‹©ä½™é¢æ”¯ä»˜ï¼Œè¾“å…¥å¯†ç åç‚¹å‡»ç¡®è®¤æ”¯ä»˜å³å¯ã€‚</p><p>å‰ç«¯ä¼šæäº¤æ”¯ä»˜è¯·æ±‚ï¼Œä¸šåŠ¡æ¥å£çš„å…¥å£åœ¨<code>com.hmall.pay.controller.PayController</code>ç±»çš„<code>tryPayOrderByBalance</code>æ–¹æ³•ï¼š</p><p><img src="/assets/1733754442884-52.CpSOXQPL.png" alt="img" loading="lazy"></p><p>å¯¹åº”çš„serviceæ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryPayOrderByBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrderDTO payOrderDTO) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1.æŸ¥è¯¢æ”¯ä»˜å•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PayOrder po </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2.åˆ¤æ–­çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PayStatus.WAIT_BUYER_PAY.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equalsValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())){</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è®¢å•ä¸æ˜¯æœªæ”¯ä»˜ï¼ŒçŠ¶æ€å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 3.å°è¯•æ‰£å‡ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    userClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deductMoney</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 4.ä¿®æ”¹æ”¯ä»˜å•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> markPayOrderSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payOrderDTO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">success) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BizIllegalException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;äº¤æ˜“å·²æ”¯ä»˜æˆ–å…³é—­ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 5.ä¿®æ”¹è®¢å•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tradeClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markOrderPaySuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åˆ©ç”¨seataè§£å†³è¿™é‡Œçš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå¹¶æ€è€ƒè¿™ä¸ªä¸šåŠ¡å®ç°æœ‰æ²¡æœ‰ä»€ä¹ˆå€¼å¾—æ”¹è¿›çš„åœ°æ–¹</p><h4 id="_3-2-1-å¼•å…¥ä¾èµ–" tabindex="-1">3.2.1.å¼•å…¥ä¾èµ– <a class="header-anchor" href="#_3-2-1-å¼•å…¥ä¾èµ–" aria-label="Permalink to &quot;3.2.1.å¼•å…¥ä¾èµ–&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--ç»Ÿä¸€é…ç½®ç®¡ç†--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-nacos-config&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--è¯»å–bootstrapæ–‡ä»¶--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-bootstrap&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--seata--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-seata&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--é˜¿é‡Œ-sentinel--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.alibaba.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-alibaba-sentinel&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_3-2-2-ä¿®æ”¹yamlé…ç½®" tabindex="-1">3.2.2.<mark>ä¿®æ”¹yamlé…ç½®</mark> <a class="header-anchor" href="#_3-2-2-ä¿®æ”¹yamlé…ç½®" aria-label="Permalink to &quot;3.2.2.==ä¿®æ”¹yamlé…ç½®==&quot;">â€‹</a></h4><h5 id="_1-bootstrap-yamlå¼•å¯¼é…ç½®æ–‡ä»¶" tabindex="-1">ï¼ˆ1ï¼‰<em>bootstrap.yaml</em>å¼•å¯¼é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_1-bootstrap-yamlå¼•å¯¼é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰*bootstrap.yaml*å¼•å¯¼é…ç½®æ–‡ä»¶&quot;">â€‹</a></h5><p><img src="/assets/image-20241215161830712.DrFLJ-Lw.png" alt="image-20241215161830712" loading="lazy"></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#bootstrap.yamlå¼•å¯¼é…ç½®æ–‡ä»¶ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å£°æ˜nacosåœ°å€å’Œå…±äº«é…ç½®åˆ—è¡¨</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pay-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.88.133</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        file-extension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ–‡ä»¶åç¼€å</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        shared-configs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…±äº«é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-jdbc.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«mybatisé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-log.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-swagger.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«æ—¥å¿—é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dataId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">shared-seata.yaml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å…±äº«seataé…ç½®</span></span></code></pre></div><h5 id="_2-æœ¬åœ°yamlæ–‡ä»¶" tabindex="-1">ï¼ˆ2ï¼‰æœ¬åœ°yamlæ–‡ä»¶ <a class="header-anchor" href="#_2-æœ¬åœ°yamlæ–‡ä»¶" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰æœ¬åœ°yamlæ–‡ä»¶&quot;">â€‹</a></h5><p><img src="/assets/image-20241215162035245.C-0WmuEj.png" alt="image-20241215162035245" loading="lazy"></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8086</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å¼€å¯feign è¿æ¥æ± OkHttp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">feign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  okhttp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #å¼€å¯OKHttpåŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    sentinel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      transport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:8090</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #sentinel æ§åˆ¶å°åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      http-method-specify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å¼€å¯è¯·æ±‚æ–¹å¼å‰ç¼€</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">hm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  swagger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é»‘é©¬å•†åŸæ”¯ä»˜ç®¡ç†æ¥å£æ–‡æ¡£&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.hmall.pay.controller</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-pay</span></span></code></pre></div><h4 id="_3-2-3-ä½¿ç”¨atæ¨¡å¼å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1">3.2.3.ä½¿ç”¨ATæ¨¡å¼å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡ <a class="header-anchor" href="#_3-2-3-ä½¿ç”¨atæ¨¡å¼å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡" aria-label="Permalink to &quot;3.2.3.ä½¿ç”¨ATæ¨¡å¼å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡&quot;">â€‹</a></h4><h5 id="_1-æ·»åŠ å¿«ç…§-æ•°æ®åº“è¡¨-1" tabindex="-1">ï¼ˆ1ï¼‰æ·»åŠ <mark>å¿«ç…§</mark>-æ•°æ®åº“è¡¨ <a class="header-anchor" href="#_1-æ·»åŠ å¿«ç…§-æ•°æ®åº“è¡¨-1" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰æ·»åŠ ==å¿«ç…§==-æ•°æ®åº“è¡¨&quot;">â€‹</a></h5><p>seataçš„å®¢æˆ·ç«¯åœ¨è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™éœ€è¦<strong>è®°å½•ä¸€äº›ä¸­é—´æ•°æ®ï¼Œä¿å­˜åœ¨æ•°æ®åº“ä¸­</strong>ã€‚å› æ­¤æˆ‘ä»¬è¦å…ˆå‡†å¤‡ä¸€ä¸ªè¿™æ ·çš„è¡¨ã€‚</p><p>å°†è¯¾å‰èµ„æ–™çš„seata-at.sqlåˆ†åˆ«æ–‡ä»¶å¯¼å…¥hm-tradeã€hm-cartã€hm-itemä¸‰ä¸ªæ•°æ®åº“ä¸­ï¼š</p><p><img src="/assets/1733754442883-42.CVYB34GO.png" alt="img" loading="lazy"></p><p>ç»“æœï¼š</p><p><img src="/assets/image-20241215163138360.D5hqyhkr.png" alt="image-20241215163138360" loading="lazy"></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- for AT mode you must to init this sql for you business database. the seata server not need it.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> EXISTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `undo_log`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `branch_id`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;branch transaction id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `xid`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;global transaction id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `context`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">       VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;undo_log context,such as serialization&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `rollback_info`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LONGBLOB     </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;rollback info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `log_status`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    INT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0:normal status,1:defense status&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `log_created`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;create datetime&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    `log_modified`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;modify datetime&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> KEY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `ux_undo_log`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`xid`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`branch_id`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InnoDB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  AUTO_INCREMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHARSET </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4 COMMENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;AT transaction mode undo table&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h5 id="_2-å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºatæ¨¡å¼-1" tabindex="-1">ï¼ˆ2ï¼‰å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºATæ¨¡å¼ <a class="header-anchor" href="#_2-å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºatæ¨¡å¼-1" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºATæ¨¡å¼&quot;">â€‹</a></h5><p><strong>ä¿®æ”¹nacosä¸Šçš„å…±äº«é…ç½®æ–‡ä»¶shared-seata.yamlï¼ˆæ³¨æ„è¯¥æ–‡ä»¶ä¿®æ”¹åï¼Œå¯¹åº”æ‹‰å–çš„æœåŠ¡<mark>éœ€è¦é‡å¯</mark>ï¼‰</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">seata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  data-source-proxy-mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AT</span></span></code></pre></div><p><img src="/assets/image-20241214195442290.Cbe-mh12.png" alt="image-20241214195442290" loading="lazy"></p><h5 id="_3-æ·»åŠ å…¨å±€-åˆ†æ”¯äº‹åŠ¡æ³¨è§£" tabindex="-1">ï¼ˆ3ï¼‰æ·»åŠ <mark>å…¨å±€/åˆ†æ”¯äº‹åŠ¡æ³¨è§£</mark> <a class="header-anchor" href="#_3-æ·»åŠ å…¨å±€-åˆ†æ”¯äº‹åŠ¡æ³¨è§£" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰æ·»åŠ ==å…¨å±€/åˆ†æ”¯äº‹åŠ¡æ³¨è§£==&quot;">â€‹</a></h5><p><img src="/assets/image-20241215163652599.vf4Zk3Jp.png" alt="image-20241215163652599" loading="lazy"></p><h6 id="_1-ä½¿ç”¨-globaltransactional-å£°æ˜å…¨å±€äº‹åŠ¡" tabindex="-1"><strong>â‘  ä½¿ç”¨ @GlobalTransactional å£°æ˜å…¨å±€äº‹åŠ¡</strong> <a class="header-anchor" href="#_1-ä½¿ç”¨-globaltransactional-å£°æ˜å…¨å±€äº‹åŠ¡" aria-label="Permalink to &quot;**â‘  ä½¿ç”¨ @GlobalTransactional å£°æ˜å…¨å±€äº‹åŠ¡**&quot;">â€‹</a></h6><p>å°†è¯¥ä¸šåŠ¡æ–¹æ³•æ ‡è®°ä¸º Seata çš„å…¨å±€äº‹åŠ¡èµ·ç‚¹ï¼Œæ·»åŠ  <code>@GlobalTransactional</code> æ³¨è§£ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GlobalTransactional</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //å¼€å¯å…¨å±€äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryPayOrderByBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrderFormDTO payOrderFormDTO) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><strong>å…³é”®ç‚¹ï¼š</strong></p><ul><li><code>@GlobalTransactional</code> è¡¨ç¤ºäº‹åŠ¡çš„å‘èµ·è€…ï¼ŒSeata ä¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­<strong>å¼€å¯å…¨å±€äº‹</strong>åŠ¡ï¼Œ<strong>åè°ƒåç»­æ‰€æœ‰çš„åˆ†æ”¯äº‹åŠ¡ã€‚</strong></li><li><code>rollbackFor</code> <strong>æ˜ç¡®å›æ»šçš„å¼‚å¸¸èŒƒå›´</strong>ï¼Œç¡®ä¿å¼‚å¸¸æƒ…å†µä¸‹äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</li></ul><hr><h6 id="_2-ç¡®ä¿åˆ†æ”¯äº‹åŠ¡å‚ä¸-seata" tabindex="-1"><strong>â‘¡ ç¡®ä¿<mark>åˆ†æ”¯äº‹åŠ¡</mark>å‚ä¸ Seata</strong> <a class="header-anchor" href="#_2-ç¡®ä¿åˆ†æ”¯äº‹åŠ¡å‚ä¸-seata" aria-label="Permalink to &quot;**â‘¡ ç¡®ä¿==åˆ†æ”¯äº‹åŠ¡==å‚ä¸ Seata**&quot;">â€‹</a></h6><p>å‚ä¸äº‹åŠ¡çš„ä¸¤ä¸ªå¾®æœåŠ¡ï¼ˆ<code>userClient</code> å’Œ <code>tradeClient</code>ï¼‰éœ€è¦å¯¹å…¶æ–¹æ³•è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒã€‚</p><p><strong>User Service (userClient)ï¼š</strong></p><ol><li>åœ¨ <code>deductMoney</code> æ–¹æ³•ä¸­æ·»åŠ  Seata æ”¯æŒï¼Œç¡®ä¿æ‰£å‡ä½™é¢çš„æ“ä½œèƒ½å¤Ÿè¢« Seata ç®¡ç†ã€‚</li><li>ä½¿ç”¨ <code>@Transactional</code> ç®¡ç†æœ¬åœ°äº‹åŠ¡ã€‚</li></ol><p><img src="/assets/image-20241215163955957.CHQ_xVPn.png" alt="image-20241215163955957" loading="lazy"></p><p><strong>Trade Service (tradeClient)ï¼š</strong></p><p>åŒæ ·ï¼Œåœ¨ <code>markOrderPaySuccess</code> æ–¹æ³•ä¸­åŠ å…¥ Seata æ”¯æŒï¼Œç¡®ä¿è®¢å•çŠ¶æ€æ›´æ–°æ“ä½œå—äº‹åŠ¡ä¿æŠ¤ã€‚</p><p><img src="/assets/image-20241215164039495.e_ZhGHOB.png" alt="image-20241215164039495" loading="lazy"></p><p>ä»¥ä¸Šæ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼ŒSeata ä¼šå°†å®ƒä»¬<strong>æ³¨å†Œä¸ºåˆ†æ”¯äº‹åŠ¡</strong>ï¼Œ<strong>ç»Ÿä¸€ç”±å…¨å±€äº‹åŠ¡ç®¡ç†</strong>ã€‚</p><h4 id="_3-2-4-ä¸šåŠ¡å®ç°çš„æ”¹è¿›ç‚¹" tabindex="-1">3.2.4.ä¸šåŠ¡å®ç°çš„<mark>æ”¹è¿›ç‚¹</mark> <a class="header-anchor" href="#_3-2-4-ä¸šåŠ¡å®ç°çš„æ”¹è¿›ç‚¹" aria-label="Permalink to &quot;3.2.4.ä¸šåŠ¡å®ç°çš„==æ”¹è¿›ç‚¹==&quot;">â€‹</a></h4><h5 id="_1-æ”¯ä»˜çŠ¶æ€çš„å¹‚ç­‰æ€§ä¿è¯" tabindex="-1">ï¼ˆ1ï¼‰<strong>æ”¯ä»˜çŠ¶æ€çš„<mark>å¹‚ç­‰æ€§ä¿è¯</mark></strong> <a class="header-anchor" href="#_1-æ”¯ä»˜çŠ¶æ€çš„å¹‚ç­‰æ€§ä¿è¯" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰**æ”¯ä»˜çŠ¶æ€çš„==å¹‚ç­‰æ€§ä¿è¯==**&quot;">â€‹</a></h5><ul><li><strong>é—®é¢˜</strong>ï¼šå½“å‰ä»£ç ä¸­ <code>markPayOrderSuccess</code> å’Œ <code>tradeClient.markOrderPaySuccess</code> éƒ½å¯èƒ½å› ä¸ºå¹¶å‘æˆ–é‡å¤è°ƒç”¨å¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€‚</li><li><strong>æ”¹è¿›</strong>ï¼šåœ¨è¿™ä¸¤ä¸ªæ“ä½œä¸­<strong>æ·»åŠ å¹‚ç­‰æ€§æ£€æŸ¥</strong>ï¼Œé¿å…é‡å¤å¤„ç†ï¼ˆå¦‚é€šè¿‡**<mark>ä¹è§‚é”æœºåˆ¶</mark><strong>æˆ–</strong><mark>å”¯ä¸€æµæ°´å·æ ¡éªŒ</mark>**å®ç°ï¼‰ã€‚</li></ul><h6 id="_1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" tabindex="-1"><strong>1. ä»€ä¹ˆæ˜¯<mark>å¹‚ç­‰æ€§</mark>ï¼Ÿ</strong> <a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" aria-label="Permalink to &quot;**1. ä»€ä¹ˆæ˜¯==å¹‚ç­‰æ€§==ï¼Ÿ**&quot;">â€‹</a></h6><p><strong>å®šä¹‰ï¼š</strong> å¹‚ç­‰æ€§æ˜¯<strong>æŒ‡ä¸€ä¸ªæ“ä½œæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œå…¶äº§ç”Ÿçš„æ•ˆæœå’Œç»“æœéƒ½æ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šå› ä¸ºå¤šæ¬¡è°ƒç”¨è€Œå‘ç”Ÿå˜åŒ–ã€‚</strong></p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li><strong>å¹‚ç­‰æ€§æ“ä½œ</strong>ï¼šå¤šæ¬¡è°ƒç”¨ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ¯”å¦‚æŸ¥è¯¢æ“ä½œï¼ˆGET è¯·æ±‚ï¼‰ã€‚</li><li><strong>éå¹‚ç­‰æ€§æ“ä½œ</strong>ï¼šé‡å¤è°ƒç”¨å¯èƒ½äº§ç”Ÿé¢å¤–å½±å“ï¼Œæ¯”å¦‚æ‰£æ¬¾ã€ç”Ÿæˆè®¢å•ï¼ˆPOST è¯·æ±‚ï¼‰ã€‚</li></ul><p><strong>ä¾‹å­ï¼š</strong></p><ul><li>å¹‚ç­‰æ“ä½œï¼š<code>æ”¯ä»˜è®¢å•çŠ¶æ€æ›´æ–°</code>ï¼Œå¦‚æœè®¢å•å·²ç»æ”¯ä»˜ï¼Œå†æ¬¡è°ƒç”¨æ—¶ï¼ŒçŠ¶æ€ä¾ç„¶ä¿æŒä¸ºâ€œå·²æ”¯ä»˜â€ï¼Œè€Œä¸ä¼šé‡å¤æ‰£æ¬¾æˆ–æ›´æ–°ã€‚</li><li>éå¹‚ç­‰æ“ä½œï¼šç›´æ¥æ‰£æ¬¾ã€‚å¦‚æœä¸å¤„ç†å¹‚ç­‰æ€§ï¼Œå¤šæ¬¡è°ƒç”¨å¯èƒ½ä¼šå¯¼è‡´ç”¨æˆ·è´¦æˆ·è¢«å¤šæ¬¡æ‰£æ¬¾ã€‚</li></ul><p><strong>å¹‚ç­‰æ€§ä¿è¯</strong>ï¼šæ£€æŸ¥æ”¯ä»˜å•çš„å½“å‰çŠ¶æ€ï¼š</p><ul><li>å¦‚æœçŠ¶æ€æ˜¯â€œå·²æ”¯ä»˜â€ï¼Œç›´æ¥è¿”å›ï¼›</li><li>å¦‚æœçŠ¶æ€æ˜¯â€œæœªæ”¯ä»˜â€ï¼Œæ‰§è¡Œæ”¯ä»˜å¹¶æ›´æ–°çŠ¶æ€ã€‚</li></ul><h6 id="_2-ä»€ä¹ˆæ˜¯ä¹è§‚é”" tabindex="-1"><strong>2. ä»€ä¹ˆæ˜¯<mark>ä¹è§‚é”</mark>ï¼Ÿ</strong> <a class="header-anchor" href="#_2-ä»€ä¹ˆæ˜¯ä¹è§‚é”" aria-label="Permalink to &quot;**2. ä»€ä¹ˆæ˜¯==ä¹è§‚é”==ï¼Ÿ**&quot;">â€‹</a></h6><p><strong>å®šä¹‰ï¼š</strong> ä¹è§‚é”æ˜¯ä¸€ç§<strong>æ§åˆ¶å¹¶å‘æ“ä½œçš„æ•°æ®ä¸€è‡´æ€§æœºåˆ¶</strong>ï¼Œå‡è®¾ä¸ä¼šå‘ç”Ÿå†²çªï¼ˆâ€œä¹è§‚â€ï¼‰ã€‚åœ¨æ“ä½œæ•°æ®æ—¶ä¸ç›´æ¥åŠ é”ï¼Œè€Œæ˜¯é€šè¿‡<strong>ç‰ˆæœ¬å·</strong>æˆ–<strong>å…¶ä»–æ¡ä»¶</strong>æ¥æ£€æµ‹æ•°æ®æ˜¯å¦è¢«ä¿®æ”¹ã€‚</p><p><strong>åŸç†ï¼š</strong></p><ul><li>åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œä¼šå¸¦ä¸Šä¸€ä¸ªç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³ã€‚</li><li>æ•°æ®æ›´æ–°æ—¶ï¼Œæ£€æŸ¥ç‰ˆæœ¬å·æ˜¯å¦ä¸æ•°æ®åº“ä¸­çš„ç‰ˆæœ¬å·ä¸€è‡´ï¼š <ul><li><strong>ä¸€è‡´</strong>ï¼šæ›´æ–°æˆåŠŸï¼Œå¹¶å°†ç‰ˆæœ¬å·åŠ  1ã€‚</li><li><strong>ä¸ä¸€è‡´</strong>ï¼šè¯´æ˜æ•°æ®å·²è¢«å…¶ä»–æ“ä½œä¿®æ”¹ï¼Œæ›´æ–°å¤±è´¥ï¼Œè¿”å›é”™è¯¯æˆ–é‡è¯•ã€‚</li></ul></li></ul><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>åœ¨æ•°æ®åº“è¡¨ä¸­æ·»åŠ  <code>version</code> å­—æ®µï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰ç‰ˆæœ¬å·ã€‚</li><li>æ›´æ–°æ—¶é€šè¿‡ <code>WHERE</code> æ¡ä»¶å°† <code>version</code> ä½œä¸ºæ›´æ–°ä¾æ®ã€‚</li></ol><p><img src="/assets/image-20241215171829431.C1A1JAr8.png" alt="image-20241215171829431" loading="lazy"></p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä¹è§‚é”é€šè¿‡ä»¥ä¸‹é€»è¾‘å®ç°ï¼š</p><ol><li><p><strong>æŒ‡å®šçŠ¶æ€èŒƒå›´ï¼š</strong></p><ul><li><code>in(PayOrder::getStatus, PayStatus.NOT_COMMIT.getValue(), PayStatus.WAIT_BUYER_PAY.getValue())</code></li><li>è¡¨ç¤ºåªæœ‰æ”¯ä»˜çŠ¶æ€æ˜¯ <code>NOT_COMMIT</code> æˆ– <code>WAIT_BUYER_PAY</code> æ—¶ï¼Œæ‰èƒ½æ‰§è¡Œæ›´æ–°æ“ä½œã€‚</li></ul></li><li><p><strong>æ›´æ–°æ“ä½œï¼š</strong></p><ul><li><code>set(PayOrder::getStatus, PayStatus.TRADE_SUCCESS.getValue())</code></li><li>æ›´æ–°æ”¯ä»˜çŠ¶æ€ä¸º <code>TRADE_SUCCESS</code>ï¼Œå¹¶è®°å½•æ”¯ä»˜æˆåŠŸæ—¶é—´ã€‚</li></ul></li><li><p><strong>å¤±è´¥ä¿æŠ¤ï¼š</strong></p><ul><li>å¦‚æœæ”¯ä»˜çŠ¶æ€åœ¨æ“ä½œä¹‹å‰å·²ç»è¢«å…¶ä»–æµç¨‹æ›´æ–°ä¸ºå…¶ä»–å€¼ï¼ˆå¦‚ <code>TRADE_SUCCESS</code> æˆ– <code>CLOSED</code>ï¼‰ï¼Œé‚£ä¹ˆ <code>WHERE</code> æ¡ä»¶å°†ä¸æˆç«‹ï¼Œæ›´æ–°æ“ä½œä¸ä¼šæ‰§è¡Œï¼Œè¿”å› <code>false</code>ã€‚</li></ul></li></ol><h6 id="_3-ä¹è§‚é”çš„å®ç°æ–¹å¼" tabindex="-1"><strong>3.ä¹è§‚é”çš„<mark>å®ç°æ–¹å¼</mark></strong> <a class="header-anchor" href="#_3-ä¹è§‚é”çš„å®ç°æ–¹å¼" aria-label="Permalink to &quot;**3.ä¹è§‚é”çš„==å®ç°æ–¹å¼==**&quot;">â€‹</a></h6><p>ä¹è§‚é”é€šå¸¸é€šè¿‡**==ç‰ˆæœ¬å·ï¼ˆversionï¼‰==æˆ– <mark>æ¡ä»¶åˆ¤æ–­</mark><strong>æ¥å®ç°ï¼Œæœ¬æ–¹æ³•é‡‡ç”¨çš„æ˜¯</strong>æ¡ä»¶åˆ¤æ–­æœºåˆ¶**ã€‚åŸç†æ˜¯ï¼š</p><ol><li><strong>é€šè¿‡æ¡ä»¶é™åˆ¶æ›´æ–°èŒƒå›´ï¼š</strong><ul><li>æ›´æ–°æ“ä½œä»…åœ¨æ”¯ä»˜çŠ¶æ€ä¸º <code>NOT_COMMIT</code> æˆ– <code>WAIT_BUYER_PAY</code> æ—¶æ‰§è¡Œã€‚</li><li>å¦‚æœçŠ¶æ€å·²ç»æ˜¯ <code>TRADE_SUCCESS</code> æˆ–å…¶ä»–çŠ¶æ€ï¼Œåˆ™æ›´æ–°æ“ä½œä¼šè¢«è·³è¿‡ã€‚</li></ul></li><li><strong>æ“ä½œçš„åŸå­æ€§ï¼š</strong><ul><li>æ•°æ®åº“çš„ <code>UPDATE</code> æ“ä½œæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œ<code>WHERE</code> æ¡ä»¶ä¸­çš„æ£€æŸ¥å’Œæ›´æ–°æ˜¯åŒæ—¶å®Œæˆçš„ã€‚</li><li>å¦‚æœ <code>WHERE</code> æ¡ä»¶ä¸æ»¡è¶³ï¼ˆå³æ”¯ä»˜çŠ¶æ€ä¸åœ¨æŒ‡å®šèŒƒå›´å†…ï¼‰ï¼Œæ›´æ–°æ“ä½œä¼šå¤±è´¥ï¼Œè¿”å› <code>false</code>ã€‚</li></ul></li></ol><p>æ•°æ®åº“çš„ <code>UPDATE</code> è¯­å¥å¦‚ä¸‹ï¼š</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pay_order</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;TRADE_SUCCESS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pay_success_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ?</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ? </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  AND</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> IN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;NOT_COMMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;WAIT_BUYER_PAY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><ul><li><p><strong>WHERE æ¡ä»¶ï¼š</strong></p><ul><li>åªæœ‰å½“ <code>status</code> ä¸º <code>NOT_COMMIT</code> æˆ– <code>WAIT_BUYER_PAY</code>ï¼Œä¸” <code>id</code> åŒ¹é…æ—¶ï¼Œæ›´æ–°æ“ä½œæ‰ä¼šæ‰§è¡Œã€‚</li><li>å¦‚æœ <code>status</code> å·²è¢«å…¶ä»–äº‹åŠ¡æ›´æ–°ä¸º <code>TRADE_SUCCESS</code> æˆ– <code>CLOSED</code>ï¼Œåˆ™æ›´æ–°æ“ä½œä¸ä¼šæ‰§è¡Œã€‚</li></ul></li><li><p><strong>åŸå­æ€§ï¼š</strong></p><ul><li><p>SQL çš„</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>UPDATE</span></span></code></pre></div><p>æ“ä½œç”±æ•°æ®åº“ä¿è¯åŸå­æ€§ï¼š</p><ul><li>åˆ¤æ–­æ¡ä»¶ï¼ˆ<code>WHERE</code>ï¼‰ã€‚</li><li>æ»¡è¶³æ¡ä»¶åˆ™æ‰§è¡Œæ›´æ–°ã€‚</li><li>æ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸å¯åˆ†å‰²çš„ã€‚</li></ul></li></ul></li></ul><h6 id="_4-ä¹è§‚é”çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹" tabindex="-1"><strong>4.ä¹è§‚é”çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹</strong> <a class="header-anchor" href="#_4-ä¹è§‚é”çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹" aria-label="Permalink to &quot;**4.ä¹è§‚é”çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹**&quot;">â€‹</a></h6><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li><strong>æ— é”æœºåˆ¶</strong>ï¼šä¸ç”¨åŠ æ•°æ®åº“è¡Œé”ï¼Œæ€§èƒ½é«˜ï¼Œé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ã€‚</li><li><strong>é¿å…æ­»é”</strong>ï¼šå› ä¸ºæ²¡æœ‰å®é™…é”å®šæ•°æ®è¡Œï¼Œä¸å­˜åœ¨æ­»é”çš„é£é™©ã€‚</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li><strong>é«˜å¹¶å‘ä¸‹å¯èƒ½é¢‘ç¹å¤±è´¥</strong>ï¼š <ul><li>å½“å¤šä¸ªè¯·æ±‚åŒæ—¶ä¿®æ”¹åŒä¸€è¡Œæ•°æ®æ—¶ï¼Œå…¶ä¸­ä¸€ä¸ªä¼šæˆåŠŸï¼Œå…¶ä»–çš„ä¼šå› æ¡ä»¶ä¸æ»¡è¶³è€Œå¤±è´¥ï¼Œéœ€è¦å®¢æˆ·ç«¯è¿›è¡Œé‡è¯•ã€‚</li></ul></li><li>ä¸é€‚åˆå†™å¤šåœºæ™¯ï¼š <ul><li><strong>å†™æ“ä½œé¢‘ç¹æ—¶</strong>ï¼Œé¢‘ç¹çš„å¤±è´¥å’Œé‡è¯•ä¼š<strong>å¢åŠ ç³»ç»Ÿå¼€é”€</strong>ã€‚</li></ul></li></ol><hr><p><strong>æ”¹è¿›ç‚¹</strong></p><p>å½“å‰ä»£ç å·²ç»é€šè¿‡æ”¯ä»˜çŠ¶æ€å®ç°äº†ä¹è§‚é”ï¼Œä½†å¯ä»¥è¿›ä¸€æ­¥å¢å¼ºå¹‚ç­‰æ€§å’Œå¯ç»´æŠ¤æ€§ï¼š</p><ol><li><p><strong>å¢åŠ é‡è¯•æœºåˆ¶ï¼š</strong></p><ul><li>å½“æ›´æ–°å¤±è´¥æ—¶ï¼Œå¯ä»¥æ•è·å¤±è´¥æƒ…å†µå¹¶å°è¯•é‡è¯•ã€‚</li></ul></li><li><p><strong>å¼•å…¥<mark>ç‰ˆæœ¬å·æœºåˆ¶</mark>ï¼š</strong></p><ul><li><p>é™¤äº†é€šè¿‡çŠ¶æ€é™åˆ¶æ›´æ–°èŒƒå›´ï¼Œè¿˜å¯ä»¥é€šè¿‡</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>version</span></span></code></pre></div><p>å­—æ®µå¯¹å¹¶å‘ä¿®æ”¹è¿›è¡Œç²¾ç¡®æ§åˆ¶ï¼š</p><ul><li>æ¯æ¬¡æ›´æ–°æ—¶æ ¡éªŒ <code>version</code>ï¼Œåªæœ‰å½“ <code>version</code> æœªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰å…è®¸æ›´æ–°ã€‚</li><li>æ›´æ–°æˆåŠŸåï¼Œå°† <code>version</code> +1ã€‚</li></ul></li><li><p>æ•°æ®åº“è¡¨éœ€è¦æ–°å¢ versionå­—æ®µï¼Œç±»ä¼¼ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lambdaUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getStatus, PayStatus.TRADE_SUCCESS.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getPaySuccessTime, successTime)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getVersion, currentVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ›´æ–°ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getId, id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eq</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PayOrder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getVersion, currentVersion) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ£€æŸ¥ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div></li></ul></li><li><p><strong>ç»Ÿä¸€å¹‚ç­‰æ€§æ£€æŸ¥ï¼š</strong></p><ul><li>åœ¨æ›´æ–°çŠ¶æ€å‰ç»Ÿä¸€æ£€æŸ¥æ˜¯å¦å·²ç»æ”¯ä»˜å®Œæˆï¼Œå‡å°‘æ— æ•ˆæ›´æ–°å°è¯•ã€‚</li></ul></li></ol><h6 id="_5-ä»€ä¹ˆæ˜¯å”¯ä¸€æµæ°´å·æ ¡éªŒ" tabindex="-1"><strong>5.ä»€ä¹ˆæ˜¯<mark>å”¯ä¸€æµæ°´å·</mark>æ ¡éªŒï¼Ÿ</strong> <a class="header-anchor" href="#_5-ä»€ä¹ˆæ˜¯å”¯ä¸€æµæ°´å·æ ¡éªŒ" aria-label="Permalink to &quot;**5.ä»€ä¹ˆæ˜¯==å”¯ä¸€æµæ°´å·==æ ¡éªŒï¼Ÿ**&quot;">â€‹</a></h6><p><strong>å®šä¹‰ï¼š</strong> å”¯ä¸€æµæ°´å·æ ¡éªŒæ˜¯é€šè¿‡ä¸ºæ¯ä¸€æ¬¡è¯·æ±‚ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„æ ‡è¯†ï¼ˆæµæ°´å·ï¼‰æ¥ä¿è¯æ“ä½œçš„å¹‚ç­‰æ€§ã€‚æœåŠ¡ä¼šè®°å½•æ¯ä¸ªæµæ°´å·çš„å¤„ç†çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤å¤„ç†ç›¸åŒè¯·æ±‚ã€‚</p><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å¹¶å‘æ”¯ä»˜ã€ä¸‹å•ã€æ‰£æ¬¾ç­‰åœºæ™¯ï¼Œéœ€è¦é€šè¿‡å”¯ä¸€æ ‡è¯†æ¥ç¡®ä¿è¯·æ±‚åªè¢«æ‰§è¡Œä¸€æ¬¡ã€‚</li></ul><p><strong>å®ç°åŸç†ï¼š</strong></p><ol><li><p><strong>ç”Ÿæˆå”¯ä¸€æµæ°´å·</strong>ï¼šæ¯æ¬¡æ“ä½œå‰ï¼Œç”Ÿæˆä¸€ä¸ªå”¯ä¸€æµæ°´å·ï¼ˆå¦‚è®¢å•å·ã€æ”¯ä»˜å·ç­‰ï¼‰ã€‚</p></li><li><p>è®°å½•æµæ°´å·çŠ¶æ€</p><p>ï¼šç³»ç»Ÿåœ¨å¤„ç†å‰æ£€æŸ¥è¯¥æµæ°´å·æ˜¯å¦å·²å­˜åœ¨ï¼š</p><ul><li>å¦‚æœä¸å­˜åœ¨ï¼šæ‰§è¡Œæ“ä½œï¼Œå¹¶è®°å½•æµæ°´å·çŠ¶æ€ã€‚</li><li>å¦‚æœå·²å­˜åœ¨ï¼šç›´æ¥è¿”å›ä¹‹å‰çš„æ“ä½œç»“æœï¼Œé¿å…é‡å¤æ‰§è¡Œã€‚</li></ul></li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><ul><li>ç”¨æˆ·è¯·æ±‚æ”¯ä»˜ï¼š <ul><li>å®¢æˆ·ç«¯ç”Ÿæˆæ”¯ä»˜æµæ°´å· <code>paymentId</code>ï¼Œå‘é€åˆ°æœåŠ¡ç«¯ã€‚</li><li>æœåŠ¡ç«¯å¤„ç†å‰æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨è¯¥æµæ°´å·ã€‚</li><li>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œæ‰£æ¬¾å¹¶è®°å½•æµæ°´å·ï¼›å¦‚æœå·²å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›æ”¯ä»˜ç»“æœã€‚</li></ul></li></ul><p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> processPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String paymentId, BigDecimal amount) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ£€æŸ¥æµæ°´å·æ˜¯å¦å·²å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (paymentRepository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsByPaymentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(paymentId)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å·²å¤„ç†ï¼Œç›´æ¥è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ‰£æ¬¾æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deducted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accountService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deductBalance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(amount);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (deducted) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¿å­˜æµæ°´å·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        paymentRepository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentRecord</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(paymentId, amount, PaymentStatus.SUCCESS));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deducted;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>å¯¹åº” SQLï¼š</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payment_record (payment_id, amount, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (?, ?, ?)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DUPLICATE </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> UPDATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å…¨å±€å”¯ä¸€æ€§ï¼Œä¿è¯åŒä¸€æ“ä½œä¸ä¼šé‡å¤æ‰§è¡Œã€‚</li><li>å¯ä»¥å°†æµæ°´å·ä¸ä¸šåŠ¡é€»è¾‘å…³è”ï¼Œè¿½è¸ªæ“ä½œçŠ¶æ€ã€‚</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>æµæ°´å·çš„ç”Ÿæˆå’Œå­˜å‚¨éœ€è¦é¢å¤–çš„å¼€å‘å’Œæ•°æ®åº“æ”¯æŒã€‚</li><li>è®¾è®¡ä¸å½“å¯èƒ½å¢åŠ å¤æ‚æ€§ã€‚</li></ul><h5 id="_2-æ‰£æ¬¾å¤±è´¥çš„è¯¦ç»†å¼‚å¸¸ä¿¡æ¯" tabindex="-1">ï¼ˆ2ï¼‰æ‰£æ¬¾å¤±è´¥çš„è¯¦ç»†å¼‚å¸¸ä¿¡æ¯ <a class="header-anchor" href="#_2-æ‰£æ¬¾å¤±è´¥çš„è¯¦ç»†å¼‚å¸¸ä¿¡æ¯" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰æ‰£æ¬¾å¤±è´¥çš„è¯¦ç»†å¼‚å¸¸ä¿¡æ¯&quot;">â€‹</a></h5><ul><li><strong>é—®é¢˜</strong>ï¼šå½“æ‰£å‡ä½™é¢ï¼ˆ<code>userClient.deductMoney</code>ï¼‰å¤±è´¥æ—¶ï¼Œæ²¡æœ‰æ•è·å…·ä½“åŸå› ï¼Œç”¨æˆ·å¯èƒ½æ— æ³•çŸ¥é“å¤±è´¥åŸå› ã€‚</li><li><strong>æ”¹è¿›</strong>ï¼šé€šè¿‡å°è£…è‡ªå®šä¹‰å¼‚å¸¸æˆ–è€…è®°å½•å¤±è´¥åŸå› ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li></ul><p><img src="/assets/image-20241215172632698.F_U51Ccd.png" alt="image-20241215172632698" loading="lazy"></p><p><img src="/assets/image-20241215172709357.n4KOtYuV.png" alt="image-20241215172709357" loading="lazy"></p><h5 id="_3-æ”¯ä»˜è¶…æ—¶æˆ–å¼‚å¸¸æƒ…å†µä¸‹çš„æ¢å¤æœºåˆ¶" tabindex="-1">ï¼ˆ3ï¼‰<strong>æ”¯ä»˜è¶…æ—¶æˆ–å¼‚å¸¸æƒ…å†µä¸‹çš„æ¢å¤æœºåˆ¶</strong> <a class="header-anchor" href="#_3-æ”¯ä»˜è¶…æ—¶æˆ–å¼‚å¸¸æƒ…å†µä¸‹çš„æ¢å¤æœºåˆ¶" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰**æ”¯ä»˜è¶…æ—¶æˆ–å¼‚å¸¸æƒ…å†µä¸‹çš„æ¢å¤æœºåˆ¶**&quot;">â€‹</a></h5><ul><li><strong>é—®é¢˜</strong>ï¼šå¦‚æœåˆ†å¸ƒå¼äº‹åŠ¡å¤±è´¥ï¼ˆä¾‹å¦‚ç½‘ç»œå¼‚å¸¸æˆ–æœåŠ¡å®•æœºï¼‰ï¼Œéœ€è¦é¢å¤–çš„è¡¥å¿æœºåˆ¶ã€‚</li><li><strong>æ”¹è¿›</strong>ï¼šé€šè¿‡ Seata è‡ªå¸¦çš„<mark>äº‹åŠ¡å›æ»šæœºåˆ¶</mark>ï¼Œç¡®ä¿<strong>æ¯ä¸ªåˆ†æ”¯äº‹åŠ¡èƒ½æ­£ç¡®å›æ»š</strong>ã€‚å¦‚æœæ”¯ä»˜æ—¶é—´è¾ƒé•¿ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡ä¸­è®¾ç½®æ”¯ä»˜è¶…æ—¶æ£€æµ‹å’Œæ¢å¤é€»è¾‘ï¼ˆå¦‚å¼‚æ­¥æ£€æŸ¥ä»»åŠ¡ï¼‰ã€‚</li></ul><p><strong>é—®é¢˜ï¼š</strong> å¦‚æœæ”¯ä»˜è¶…æ—¶æˆ–å‡ºç°ç½‘ç»œå¼‚å¸¸ï¼Œå¯èƒ½éœ€è¦è¡¥å¿é€»è¾‘ä»¥æ¢å¤ä¸€è‡´æ€§ã€‚</p><p><strong>æ”¹è¿›ï¼š</strong> åˆ©ç”¨ Seata è‡ªå¸¦çš„äº‹åŠ¡å›æ»šæœºåˆ¶å¤„ç†å¼‚å¸¸ã€‚å¦‚æœè¶…æ—¶æˆ–å¼‚å¸¸é—®é¢˜å¯èƒ½æ— æ³•åŠæ—¶æ¢å¤ï¼Œå¯ä»¥è®¾è®¡å¼‚æ­¥ä»»åŠ¡å®šæœŸæ£€æŸ¥æ”¯ä»˜çŠ¶æ€å¹¶è¿›è¡Œè¡¥å¿ã€‚</p><ul><li>å¢åŠ æ”¯ä»˜è¶…æ—¶å­—æ®µï¼Œä¾‹å¦‚ <code>expired_time</code>ï¼Œåœ¨æ”¯ä»˜å•ä¸­ä¿å­˜æ”¯ä»˜è¶…æ—¶æ—¶é—´ã€‚</li><li>è®¾è®¡å®šæ—¶ä»»åŠ¡ï¼Œæ‰«æè¶…æ—¶æœªæ”¯ä»˜çš„æ”¯ä»˜å•å¹¶è‡ªåŠ¨å…³é—­ï¼š</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Scheduled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fixedRate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> closeExpiredPayOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PayOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; expiredOrders </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payOrderMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findExpiredOrders</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (PayOrder order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> expiredOrders) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (PayStatus.WAIT_BUYER_PAY.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equalsValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            payOrderMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), PayStatus.CLOSED.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ”¯ä»˜è¶…æ—¶ï¼Œå…³é—­è®¢å•: {}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, order.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="_4-å¢å¼ºæ”¯ä»˜å®‰å…¨æ€§" tabindex="-1">ï¼ˆ4ï¼‰<strong>å¢å¼ºæ”¯ä»˜å®‰å…¨æ€§</strong> <a class="header-anchor" href="#_4-å¢å¼ºæ”¯ä»˜å®‰å…¨æ€§" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰**å¢å¼ºæ”¯ä»˜å®‰å…¨æ€§**&quot;">â€‹</a></h5><ul><li><strong>é—®é¢˜</strong>ï¼šæ”¯ä»˜å¯†ç çš„éªŒè¯ä»…åœ¨å®¢æˆ·ç«¯å®Œæˆï¼Œå¯èƒ½å­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ã€‚</li><li><strong>æ”¹è¿›</strong>ï¼šå¯†ç éªŒè¯é€»è¾‘åº”å½“åœ¨æœåŠ¡ç«¯å®ç°ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯çš„ä¸­é—´æš´éœ²ï¼ŒåŒæ—¶å¢åŠ ç™»å½•æ€éªŒè¯ç­‰é˜²æŠ¤æªæ–½ã€‚</li></ul><p><strong>é—®é¢˜ï¼š</strong> æ”¯ä»˜å¯†ç éªŒè¯å­˜åœ¨å®‰å…¨éšæ‚£ã€‚</p><p><strong>æ”¹è¿›ï¼š</strong> å°†æ”¯ä»˜å¯†ç çš„éªŒè¯è¿ç§»åˆ°æœåŠ¡ç«¯ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯åœ¨å®¢æˆ·ç«¯æš´éœ²ã€‚å¢åŠ ç”¨æˆ·ç™»å½•æ€éªŒè¯ä»¥åŠè¯·æ±‚ç­¾åæœºåˆ¶ã€‚</p><ul><li>æ”¯ä»˜å¯†ç åŠ å¯†å­˜å‚¨ï¼ŒéªŒè¯æ—¶è¿›è¡Œè§£å¯†ã€‚</li><li>åœ¨è¯·æ±‚ä¸­å¼•å…¥ç­¾åéªŒè¯ï¼Œç¡®ä¿æ•°æ®æœªè¢«ç¯¡æ”¹ã€‚</li></ul><p>åœ¨ <code>deductMoney</code> æ–¹æ³•ä¸­å¢åŠ å®‰å…¨æ£€æŸ¥ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String inputPassword, Long userId) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String encryptedPassword </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> accountRepository.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPasswordByUserId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> passwordEncoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">matches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(inputPassword, encryptedPassword);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="_5-æ”¯ä»˜æˆåŠŸåçš„é€šçŸ¥æœºåˆ¶" tabindex="-1">ï¼ˆ5ï¼‰<strong>æ”¯ä»˜æˆåŠŸåçš„é€šçŸ¥æœºåˆ¶</strong> <a class="header-anchor" href="#_5-æ”¯ä»˜æˆåŠŸåçš„é€šçŸ¥æœºåˆ¶" aria-label="Permalink to &quot;ï¼ˆ5ï¼‰**æ”¯ä»˜æˆåŠŸåçš„é€šçŸ¥æœºåˆ¶**&quot;">â€‹</a></h5><ul><li><p><strong>é—®é¢˜</strong>ï¼šæ”¯ä»˜æˆåŠŸå<strong>æ²¡æœ‰åç»­é€šçŸ¥é€»è¾‘</strong>ï¼Œæ¯”å¦‚é€šçŸ¥ç”¨æˆ·æˆ–é€šçŸ¥å•†å®¶å‘è´§ã€‚</p></li><li><p>æ”¹ï¼šåœ¨æ”¯ä»˜æˆåŠŸçš„æœ€åä¸€æ­¥æ·»åŠ é€šçŸ¥æœºåˆ¶ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ç»™ç”¨æˆ·å‘é€æ”¯ä»˜æˆåŠŸçš„çŸ­ä¿¡æˆ–é‚®ä»¶ã€‚</li></ul></li><li><p>ç»™å•†å®¶ç³»ç»Ÿå‘é€å‘è´§é€šçŸ¥ã€‚</p></li></ul><p><strong>é—®é¢˜ï¼š</strong> æ”¯ä»˜æˆåŠŸåæ²¡æœ‰åç»­çš„é€šçŸ¥é€»è¾‘ï¼Œæ¯”å¦‚é€šçŸ¥ç”¨æˆ·æˆ–å•†å®¶ã€‚</p><p><strong>æ”¹è¿›ï¼š</strong> åœ¨æ”¯ä»˜æˆåŠŸåï¼Œ<strong>å¢åŠ äº‹ä»¶æœºåˆ¶</strong>æˆ–<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼Œ<strong>å¼‚æ­¥é€šçŸ¥å…¶ä»–æœåŠ¡å¤„ç†åç»­æ“ä½œ</strong>ï¼Œä¾‹å¦‚ï¼š</p><ul><li>é€šçŸ¥ç”¨æˆ·æ”¯ä»˜æˆåŠŸã€‚</li><li>é€šçŸ¥å•†å®¶å‡†å¤‡å‘è´§ã€‚</li><li>æ›´æ–°è®¢å•å†å²çŠ¶æ€ã€‚</li></ul><p>åœ¨ <code>tryPayOrderByBalance</code> æ–¹æ³•ä¸­åŠ å…¥äº‹ä»¶å‘å¸ƒé€»è¾‘ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ”¯ä»˜æˆåŠŸåå‘é€é€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (success) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    eventPublisher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">publishEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentSuccessEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), po.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä½¿ç”¨ Spring çš„äº‹ä»¶æœºåˆ¶æˆ–<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>å¤„ç†åç»­é€šçŸ¥é€»è¾‘ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EventListener</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handlePaymentSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PaymentSuccessEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // é€šçŸ¥å•†å®¶ç³»ç»Ÿå‘è´§</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        notifyMerchant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å‘é€çŸ­ä¿¡é€šçŸ¥ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        notifyUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBizOrderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> notifyMerchant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">orderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è°ƒç”¨å•†å®¶ç³»ç»Ÿæ¥å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> notifyUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">orderNo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, BigDecimal </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è°ƒç”¨çŸ­ä¿¡ç½‘å…³æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h1 id="äº”ã€å®¹å™¨å¯åŠ¨çš„æµç¨‹" tabindex="-1">äº”ã€å®¹å™¨å¯åŠ¨çš„æµç¨‹ <a class="header-anchor" href="#äº”ã€å®¹å™¨å¯åŠ¨çš„æµç¨‹" aria-label="Permalink to &quot;äº”ã€å®¹å™¨å¯åŠ¨çš„æµç¨‹&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><h2 id="_1-éƒ¨ç½²mysql" tabindex="-1">1.éƒ¨ç½²Mysql <a class="header-anchor" href="#_1-éƒ¨ç½²mysql" aria-label="Permalink to &quot;1.éƒ¨ç½²Mysql&quot;">â€‹</a></h2><p>é€šè¿‡docker-compose.ymlæ–‡ä»¶ä¸€é”®éƒ¨ç½²mysqlç­‰å®¹å™¨</p><p><img src="/assets/image-20241215154555600.C8K1OuB5.png" alt="image-20241215154555600" loading="lazy"></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3.8&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3306:3306&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      TZ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/root/mysql/conf:/etc/mysql/conf.d&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/root/mysql/data:/var/lib/mysql&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/root/mysql/init:/docker-entrypoint-initdb.d&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-net</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  hmall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dockerfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080:8080&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-net</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  nginx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nginx</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nginx</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18080:18080&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18081:18081&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/root/nginx/nginx.conf:/etc/nginx/nginx.conf&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/root/nginx/html:/usr/share/nginx/html&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hm-net</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  hm-net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #é€šè¿‡docker-compose.ymlæ–‡ä»¶ä¸€é”®éƒ¨ç½²</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #åœæ­¢</span></span></code></pre></div><p><img src="/assets/image-20241215154800736.D18NOFhM.png" alt="image-20241215154800736" loading="lazy"></p><h2 id="_2-éƒ¨ç½²nacosã€seata" tabindex="-1">2.éƒ¨ç½²nacosã€seata <a class="header-anchor" href="#_2-éƒ¨ç½²nacosã€seata" aria-label="Permalink to &quot;2.éƒ¨ç½²nacosã€seata&quot;">â€‹</a></h2><h3 id="_2-1-éƒ¨ç½²é¡ºåºé—®é¢˜" tabindex="-1">2.1.<mark>éƒ¨ç½²é¡ºåºé—®é¢˜</mark> <a class="header-anchor" href="#_2-1-éƒ¨ç½²é¡ºåºé—®é¢˜" aria-label="Permalink to &quot;2.1.==éƒ¨ç½²é¡ºåºé—®é¢˜==&quot;">â€‹</a></h3><ul><li>ç”±äºnacoséœ€è¦ä½¿ç”¨åˆ°mysqlæ•°æ®åº“ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦<strong>å…ˆéƒ¨ç½²mysqlï¼Œå†éƒ¨ç½²nacos</strong>ï¼›</li><li>åŒæ ·çš„seataå†…éƒ¨éœ€è¦å‘nacosæ³¨å†Œï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦<strong>å…ˆéƒ¨ç½²nacosåœ¨éƒ¨ç½²seata</strong></li></ul><p><img src="/assets/image-20241215155128814.CAZ4j80T.png" alt="image-20241215155128814" loading="lazy"></p><h3 id="_2-2-nacos-é—®é¢˜" tabindex="-1">2.2.nacos-é—®é¢˜ <a class="header-anchor" href="#_2-2-nacos-é—®é¢˜" aria-label="Permalink to &quot;2.2.nacos-é—®é¢˜&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nacos</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #æŸ¥çœ‹nacoså®¹å™¨çš„æ—¥å¿—ä¿¡æ¯</span></span></code></pre></div><p><img src="/assets/image-20241215155510603.D_WRZPY9.png" alt="image" loading="lazy"></p><p><img src="/assets/image-20241216143300550.dKmipuSq.png" alt="image-20241216143300550" loading="lazy"></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre></div><p><img src="/assets/image-20241216143222725.BzNWRXOQ.png" alt="image-20241216143222725" loading="lazy"></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é‡å¯dockeræœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span></code></pre></div><h3 id="_2-3-éƒ¨ç½²seata-tcæœåŠ¡" tabindex="-1">2.3.éƒ¨ç½²seata(TCæœåŠ¡) <a class="header-anchor" href="#_2-3-éƒ¨ç½²seata-tcæœåŠ¡" aria-label="Permalink to &quot;2.3.éƒ¨ç½²seata(TCæœåŠ¡)&quot;">â€‹</a></h3><p><a href="#éƒ¨ç½²Seata(TCæœåŠ¡)">éƒ¨ç½²Seata(TCæœåŠ¡)</a></p><p><img src="/assets/image-20241215154301206.D5cE-IZb.png" alt="image-20241215154301206" loading="lazy"></p><p><img src="/assets/image-20241215154316503.DwU0vJ-b.png" alt="image-20241215154316503" loading="lazy"></p><h1 id="å…­ã€nacosçš„æ¦‚å¿µ-ç®¡ç†é…ç½®å’ŒæœåŠ¡" tabindex="-1">å…­ã€Nacosçš„æ¦‚å¿µ-ç®¡ç†é…ç½®å’ŒæœåŠ¡ <a class="header-anchor" href="#å…­ã€nacosçš„æ¦‚å¿µ-ç®¡ç†é…ç½®å’ŒæœåŠ¡" aria-label="Permalink to &quot;å…­ã€Nacosçš„æ¦‚å¿µ-ç®¡ç†é…ç½®å’ŒæœåŠ¡&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p><code>&lt;a id=&quot;Nacosçš„æ¦‚å¿µ-ç®¡ç†é…ç½®å’ŒæœåŠ¡&quot;&gt;``&lt;/a&gt;</code></p><p>åœ¨ Nacos ä¸­ï¼Œ<strong>Namespace</strong>ã€<strong>Group</strong>ã€<strong>Service</strong> å’Œ <strong>Cluster</strong> æ˜¯ç”¨äº<strong>ç®¡ç†é…ç½®å’ŒæœåŠ¡çš„å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ</strong>ï¼Œå®ƒä»¬æœ‰åŠ©äºç»„ç»‡å’ŒåŒºåˆ†ä¸åŒçš„ç¯å¢ƒã€æœåŠ¡å®ä¾‹å’Œé…ç½®å†…å®¹ã€‚ä»¥ä¸‹æ˜¯æ¯ä¸ªæ¦‚å¿µçš„è¯¦ç»†è§£é‡Šï¼š</p><hr><h3 id="_1-namespace-å‘½åç©ºé—´" tabindex="-1"><strong>1. Namespaceï¼ˆå‘½åç©ºé—´ï¼‰</strong> <a class="header-anchor" href="#_1-namespace-å‘½åç©ºé—´" aria-label="Permalink to &quot;**1. Namespaceï¼ˆå‘½åç©ºé—´ï¼‰**&quot;">â€‹</a></h3><ul><li><strong>ä½œç”¨</strong>ï¼š å‘½åç©ºé—´æ˜¯ Nacos ä¸­æœ€é¡¶å±‚çš„é€»è¾‘éš”ç¦»å•ä½ï¼Œä¸»è¦ç”¨äº<strong>å®ç°èµ„æºçš„éš”ç¦»</strong>ã€‚ä¸åŒçš„å‘½åç©ºé—´ä¹‹é—´çš„æ•°æ®ï¼ˆåŒ…æ‹¬æœåŠ¡å’Œé…ç½®ï¼‰æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚</li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼š <ol><li><strong>å¤šç¯å¢ƒéš”ç¦»</strong>ï¼šå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒåˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å‘½åç©ºé—´ã€‚</li><li><strong>å¤šç§Ÿæˆ·éš”ç¦»</strong>ï¼šå¤šä¸ªé¡¹ç›®æˆ–ç§Ÿæˆ·çš„æ•°æ®ç›¸äº’ç‹¬ç«‹ã€‚</li></ol></li><li><strong>é»˜è®¤å€¼</strong>ï¼š Nacos è‡ªå¸¦ä¸€ä¸ªé»˜è®¤çš„å‘½åç©ºé—´ï¼Œ<code>public</code>ã€‚</li><li><strong>é…ç½®æ–¹æ³•</strong>ï¼š å¯ä»¥åœ¨ Nacos æ§åˆ¶å°çš„ &quot;å‘½åç©ºé—´ç®¡ç†&quot; ä¸­åˆ›å»ºå‘½åç©ºé—´ï¼Œå¹¶åˆ†é…å”¯ä¸€çš„ <code>Namespace ID</code>ã€‚</li></ul><hr><h3 id="_2-group-ç»„" tabindex="-1"><strong>2. Groupï¼ˆç»„ï¼‰</strong> <a class="header-anchor" href="#_2-group-ç»„" aria-label="Permalink to &quot;**2. Groupï¼ˆç»„ï¼‰**&quot;">â€‹</a></h3><ul><li><strong>ä½œç”¨</strong>ï¼š Group æ˜¯æœåŠ¡æˆ–é…ç½®çš„ä¸€ä¸ªåˆ†ç±»ï¼Œç”¨äºå¯¹æœåŠ¡å’Œé…ç½®æ–‡ä»¶è¿›è¡Œé€»è¾‘åˆ†ç»„ç®¡ç†ã€‚å®ƒæ˜¯<strong>å‘½åç©ºé—´å†…çš„å­çº§åˆ’åˆ†</strong>ï¼Œå¹¶ä¸æä¾›ç‰©ç†éš”ç¦»ã€‚</li><li><strong>åº”ç”¨åœºæ™¯</strong>ï¼š <ol><li><strong>æœåŠ¡çš„ä¸šåŠ¡é€»è¾‘åˆ†ç»„</strong>ï¼šå¦‚æŒ‰å¾®æœåŠ¡æ‰€å±çš„ä¸šåŠ¡æ¨¡å—åˆ†ç»„ï¼Œ<code>PAYMENT_GROUP</code>ã€<code>ORDER_GROUP</code> ç­‰ã€‚</li><li><strong>é…ç½®çš„ç¯å¢ƒåˆ†ç»„</strong>ï¼šå¦‚å°†é…ç½®æŒ‰ç¯å¢ƒåˆ’åˆ†ï¼Œ<code>DEV_GROUP</code>ï¼ˆå¼€å‘ï¼‰ã€<code>TEST_GROUP</code>ï¼ˆæµ‹è¯•ï¼‰ã€<code>PROD_GROUP</code>ï¼ˆç”Ÿäº§ï¼‰ã€‚</li></ol></li><li><strong>é»˜è®¤å€¼</strong>ï¼š å¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤çš„ Group æ˜¯ <code>DEFAULT_GROUP</code>ã€‚</li><li><strong>é…ç½®æ–¹æ³•</strong>ï¼š é…ç½®æ–‡ä»¶ä¸Šä¼ æˆ–æœåŠ¡æ³¨å†Œæ—¶å¯ä»¥æŒ‡å®š <code>Group</code>ï¼Œä¾‹å¦‚åœ¨ Spring é…ç½®ä¸­é€šè¿‡ <code>spring.cloud.nacos.config.group</code> æŒ‡å®šã€‚</li></ul><hr><h3 id="_3-service-æœåŠ¡" tabindex="-1"><strong>3. Serviceï¼ˆæœåŠ¡ï¼‰</strong> <a class="header-anchor" href="#_3-service-æœåŠ¡" aria-label="Permalink to &quot;**3. Serviceï¼ˆæœåŠ¡ï¼‰**&quot;">â€‹</a></h3><ul><li><p><strong>ä½œç”¨</strong>ï¼š Service æ˜¯ Nacos ä¸­æ³¨å†Œçš„å¾®æœåŠ¡ï¼Œå®ƒæ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒåŠŸèƒ½çš„æœåŠ¡å®ä¾‹çš„é›†åˆï¼Œé€šå¸¸ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡æœåŠ¡ã€‚</p></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ol><li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šæœåŠ¡å®ä¾‹é€šè¿‡ <code>Service</code> æ³¨å†Œåˆ° Nacosï¼Œç”¨äºå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°ã€‚</li><li><strong>æœåŠ¡ç®¡ç†</strong>ï¼šå¯ä»¥æŸ¥çœ‹æŸä¸ª <code>Service</code> ä¸‹æ‰€æœ‰å®ä¾‹çš„è¿è¡ŒçŠ¶æ€ã€IPã€ç«¯å£ç­‰ä¿¡æ¯ã€‚</li></ol></li><li><p><strong>é…ç½®æ–¹æ³•</strong>ï¼š åœ¨æœåŠ¡æ³¨å†Œæ—¶ï¼ŒæŒ‡å®š <code>Service Name</code>ï¼Œä¾‹å¦‚ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NacosService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;order-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></li><li><p><strong>é»˜è®¤å€¼</strong>ï¼š å¦‚æœæ²¡æœ‰æŒ‡å®šæœåŠ¡åç§°ï¼Œå¯èƒ½ä¼šä»¥åº”ç”¨åç§°æˆ– <code>spring.application.name</code> æ³¨å†Œä¸ºé»˜è®¤æœåŠ¡åç§°ã€‚</p></li></ul><hr><h3 id="_4-cluster-é›†ç¾¤" tabindex="-1"><strong>4. Clusterï¼ˆé›†ç¾¤ï¼‰</strong> <a class="header-anchor" href="#_4-cluster-é›†ç¾¤" aria-label="Permalink to &quot;**4. Clusterï¼ˆé›†ç¾¤ï¼‰**&quot;">â€‹</a></h3><ul><li><p><strong>ä½œç”¨</strong>ï¼š Cluster æ˜¯ Service å†…éƒ¨çš„é€»è¾‘åˆ†ç»„ï¼Œç”¨äºç®¡ç† Service ä¸‹çš„ä¸åŒå®ä¾‹é›†ç¾¤ã€‚ ä¸€ä¸ª Service å¯ä»¥åˆ’åˆ†ä¸ºå¤šä¸ª Clusterï¼Œæ¯ä¸ª Cluster å¯ä»¥è¡¨ç¤ºè¯¥æœåŠ¡çš„ä¸€ä¸ªç‰¹å®šéƒ¨ç½²ç¯å¢ƒæˆ–èŠ‚ç‚¹é›†åˆã€‚</p></li><li><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><ol><li><strong>å¤šæœºæˆ¿éƒ¨ç½²</strong>ï¼šåŒä¸€ä¸ªæœåŠ¡åœ¨ä¸åŒæœºæˆ¿ï¼ˆåŒ—äº¬æœºæˆ¿ã€ä¸Šæµ·æœºæˆ¿ï¼‰å¯ä»¥åˆ’åˆ†ä¸ºä¸åŒçš„ Clusterã€‚</li><li><strong>è´Ÿè½½å‡è¡¡ä¼˜åŒ–</strong>ï¼šæŒ‰ç…§æœºæˆ¿æˆ–ç‰©ç†èŠ‚ç‚¹åˆ’åˆ† Clusterï¼Œå®¢æˆ·ç«¯ä¼˜å…ˆé€‰æ‹©æœ€è¿‘çš„é›†ç¾¤ã€‚</li></ol></li><li><p><strong>é»˜è®¤å€¼</strong>ï¼š å¦‚æœä¸æŒ‡å®šï¼ŒNacos é»˜è®¤ä½¿ç”¨ <code>DEFAULT</code> é›†ç¾¤ã€‚</p></li><li><p><strong>é…ç½®æ–¹æ³•</strong>ï¼š æœåŠ¡æ³¨å†Œæ—¶å¯ä»¥é€šè¿‡ <code>clusterName</code> æŒ‡å®šï¼Œä¾‹å¦‚ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      discovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        cluster-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BEIJING_CLUSTER</span></span></code></pre></div></li></ul><hr><h3 id="å…³ç³»ä¸å±‚çº§" tabindex="-1"><strong>å…³ç³»ä¸å±‚çº§</strong> <a class="header-anchor" href="#å…³ç³»ä¸å±‚çº§" aria-label="Permalink to &quot;**å…³ç³»ä¸å±‚çº§**&quot;">â€‹</a></h3><ul><li>Namespaceï¼šæœ€é¡¶å±‚ï¼Œç”¨äºæ•°æ®çš„ç‰©ç†éš”ç¦»ã€‚ <ul><li>Groupï¼šNamespace å†…çš„é€»è¾‘åˆ†ç»„ã€‚ <ul><li>Serviceï¼šGroup å†…æ³¨å†Œçš„å…·ä½“æœåŠ¡ã€‚ <ul><li><strong>Cluster</strong>ï¼šService çš„å®ä¾‹åˆ†ç»„ã€‚</li></ul></li></ul></li></ul></li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li><p>Namespace:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>production</span></span></code></pre></div><ul><li><p>Group:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PAYMENT_GROUP</span></span></code></pre></div><ul><li><p>Service:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>payment-service</span></span></code></pre></div><ul><li>Cluster: <code>SHANGHAI_CLUSTER</code></li><li>Cluster: <code>BEIJING_CLUSTER</code></li></ul></li></ul></li></ul></li></ul><hr><h3 id="æ€»ç»“å¯¹æ¯”è¡¨" tabindex="-1"><strong><mark>æ€»ç»“å¯¹æ¯”è¡¨</mark></strong> <a class="header-anchor" href="#æ€»ç»“å¯¹æ¯”è¡¨" aria-label="Permalink to &quot;**==æ€»ç»“å¯¹æ¯”è¡¨==**&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>éš”ç¦»æ–¹å¼</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>Namespace</td><td>é¡¶å±‚éš”ç¦»å•ä½ï¼ŒæœåŠ¡å’Œé…ç½®å®Œå…¨éš”ç¦»</td><td>ç‰©ç†éš”ç¦»</td><td>ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰éš”ç¦»</td></tr><tr><td>Group</td><td>æœåŠ¡/é…ç½®çš„é€»è¾‘åˆ†ç»„</td><td>é€»è¾‘éš”ç¦»</td><td>æŒ‰ä¸šåŠ¡æ¨¡å—æˆ–ç¯å¢ƒåˆ†ç»„</td></tr><tr><td>Service</td><td>ä¸€ç»„åŠŸèƒ½ç›¸åŒçš„æœåŠ¡å®ä¾‹</td><td>æ— ï¼ˆå±äº Group çš„ä¸€éƒ¨åˆ†ï¼‰</td><td>è¡¨ç¤ºä¸€ä¸ªå¾®æœåŠ¡</td></tr><tr><td>Cluster</td><td>Service çš„å®ä¾‹åˆ’åˆ†</td><td>é€»è¾‘éš”ç¦»</td><td>æœåŠ¡å®ä¾‹çš„ç‰©ç†ä½ç½®æˆ–è´Ÿè½½ä¼˜åŒ–åˆ†ç»„</td></tr></tbody></table><hr><h3 id="å®é™…ä½¿ç”¨å»ºè®®" tabindex="-1"><strong>å®é™…ä½¿ç”¨å»ºè®®</strong> <a class="header-anchor" href="#å®é™…ä½¿ç”¨å»ºè®®" aria-label="Permalink to &quot;**å®é™…ä½¿ç”¨å»ºè®®**&quot;">â€‹</a></h3><ol><li><strong>å¤šç¯å¢ƒéš”ç¦»ï¼šä½¿ç”¨ Namespace</strong><ul><li>ç”Ÿäº§ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒåˆ†åˆ«ä½¿ç”¨ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œé¿å…æ•°æ®å¹²æ‰°ã€‚</li></ul></li><li><strong>æŒ‰ä¸šåŠ¡åˆ†ç»„ï¼šä½¿ç”¨ Group</strong><ul><li>æ ¹æ®æœåŠ¡æ‰€å±ä¸šåŠ¡åˆ†ä¸ºä¸åŒçš„ç»„ï¼Œä¾‹å¦‚è®¢å•ç›¸å…³çš„æœåŠ¡æ”¾åœ¨ <code>ORDER_GROUP</code>ã€‚</li></ul></li><li><strong>æ³¨å†ŒæœåŠ¡ï¼šæ˜ç¡® Service åç§°</strong><ul><li>ä¸ºæ¯ä¸ªæœåŠ¡å®šä¹‰æ¸…æ™°çš„åç§°ï¼Œä¾‹å¦‚ <code>order-service</code>ã€<code>payment-service</code>ã€‚</li></ul></li><li><strong>å¤šå®ä¾‹ä¼˜åŒ–ï¼šé…ç½® Cluster</strong><ul><li>æŒ‰æœºæˆ¿ã€èŠ‚ç‚¹åˆ’åˆ†é›†ç¾¤ï¼Œä¼˜åŒ–è´Ÿè½½å‡è¡¡ã€‚</li></ul></li></ol><h1 id="ä¸ƒã€æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ" tabindex="-1">ä¸ƒã€æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ <a class="header-anchor" href="#ä¸ƒã€æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ" aria-label="Permalink to &quot;ä¸ƒã€æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p><code>&lt;a id=&quot;æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µ&quot;&gt;</code> <code>&lt;/a&gt;</code></p><p>æ•°æ®åº“é”çš„åŸºæœ¬æ¦‚å¿µå¯ä»¥ç”¨ <strong>â€œå…±äº«å•è½¦ç§Ÿå€Ÿâ€</strong> çš„ä¾‹å­æ¥ç†è§£ã€‚</p><h2 id="_1ã€ä¾‹å­-å…±äº«å•è½¦ç§Ÿå€Ÿ" tabindex="-1"><strong>1ã€ä¾‹å­ï¼šå…±äº«å•è½¦ç§Ÿå€Ÿ</strong> <a class="header-anchor" href="#_1ã€ä¾‹å­-å…±äº«å•è½¦ç§Ÿå€Ÿ" aria-label="Permalink to &quot;**1ã€ä¾‹å­ï¼šå…±äº«å•è½¦ç§Ÿå€Ÿ**&quot;">â€‹</a></h2><p>å‡è®¾ä½ å’Œä½ çš„æœ‹å‹éƒ½æƒ³ç§ŸåŒä¸€è¾†å…±äº«å•è½¦ã€‚</p><ol><li>æ— é”æƒ…å†µä¸‹çš„é—®é¢˜ï¼š <ul><li>ä½ å’Œæœ‹å‹åŒæ—¶åœ¨æ‰‹æœºä¸Šçœ‹åˆ°è¿™è¾†è½¦æ˜¯ <strong>â€œå¯ç”¨â€</strong> çš„ã€‚</li><li>ä½ ç‚¹å‡» <strong>â€œç§Ÿè½¦â€</strong>ï¼Œä½ çš„æœ‹å‹ä¹Ÿç‚¹å‡» <strong>â€œç§Ÿè½¦â€</strong>ã€‚</li><li>å¦‚æœç³»ç»Ÿæ²¡æœ‰é”æœºåˆ¶ï¼Œæ•°æ®åº“å¯èƒ½ä¼šè®©ä¸¤ä¸ªäººéƒ½æˆåŠŸç§Ÿåˆ°åŒä¸€è¾†è½¦ï¼ˆ<strong>è¶…å–é—®é¢˜</strong>ï¼‰ã€‚</li></ul></li><li>åŠ é”è§£å†³é—®é¢˜ï¼š <ul><li>æ’ä»–é”ï¼ˆExclusive Lockï¼Œå†™é”ï¼‰ï¼š <ul><li>å½“ä½ ç‚¹å‡» <strong>â€œç§Ÿè½¦â€</strong> æ—¶ï¼Œç³»ç»Ÿä¼šç»™è¿™è¾†å•è½¦ <strong>åŠ ä¸Šé”</strong>ï¼Œåœ¨ä½ çš„æ“ä½œå®Œæˆä¹‹å‰ï¼Œåˆ«äºº <strong>æ— æ³•ç§Ÿå€Ÿ</strong> è¿™è¾†è½¦ã€‚</li><li>ä½ çš„ç§Ÿå€Ÿæ“ä½œå®Œæˆåï¼Œé”è¢«é‡Šæ”¾ï¼Œå•è½¦çŠ¶æ€æ›´æ–°ä¸º <strong>â€œå·²ç§Ÿâ€</strong>ï¼Œå…¶ä»–äººå°±æ— æ³•å†ç§Ÿã€‚</li></ul></li><li>å…±äº«é”ï¼ˆShared Lockï¼Œè¯»é”ï¼‰ï¼š <ul><li>ä½ å’Œä½ çš„æœ‹å‹éƒ½å¯ä»¥æŸ¥è¯¢è¿™è¾†è½¦çš„çŠ¶æ€ï¼ˆå¯ç”¨/ä¸å¯ç”¨ï¼‰ã€‚</li><li>ä½†å¦‚æœæœ‰äººåŠ äº† <strong>å†™é”ï¼ˆç§Ÿè½¦ï¼‰</strong>ï¼ŒæŸ¥è¯¢çš„äººå¯èƒ½è¦ç­‰åˆ°æ“ä½œå®Œæˆæ‰èƒ½è·å–æœ€æ–°çŠ¶æ€ã€‚</li></ul></li></ul></li></ol><p><strong>å¯¹åº”åˆ°æ•°æ®åº“ï¼š</strong></p><ul><li><strong>è¯»é”ï¼ˆå…±äº«é”ï¼ŒS é”ï¼‰</strong>ï¼šå¤šä¸ªæŸ¥è¯¢å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œä½†ä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</li><li><strong>å†™é”ï¼ˆæ’ä»–é”ï¼ŒX é”ï¼‰</strong>ï¼šå½“ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹æ•°æ®æ—¶ï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½åŒæ—¶è¯»æˆ–å†™è¯¥æ•°æ®ï¼Œç›´åˆ°äº‹åŠ¡å®Œæˆã€‚</li></ul><p><strong>ç°å®åº”ç”¨ï¼š</strong></p><p>å¦‚æœä½ åœ¨ç”µå•†ç³»ç»Ÿä¸­ <strong>è´­ä¹°åº“å­˜æœ‰é™çš„å•†å“</strong>ï¼Œæ•°æ®åº“é”å¯ä»¥é˜²æ­¢å¤šä¸ªç”¨æˆ·åŒæ—¶è´­ä¹°å¯¼è‡´åº“å­˜è¶…å–ã€‚ä¾‹å¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> -- äº‹åŠ¡å¼€å§‹</span></span>
<span class="line"><span> BEGIN;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span> -- æŸ¥è¯¢åº“å­˜ï¼ˆåŠ å…±äº«é”ï¼Œé˜²æ­¢å¹¶å‘æ›´æ–°ï¼‰</span></span>
<span class="line"><span> SELECT stock FROM products WHERE id = 1 FOR UPDATE;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span> -- æ‰£å‡åº“å­˜</span></span>
<span class="line"><span> UPDATE products SET stock = stock - 1 WHERE id = 1;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span> -- äº‹åŠ¡æäº¤</span></span>
<span class="line"><span> COMMIT;</span></span></code></pre></div><p>å…¶ä¸­ <code>FOR UPDATE</code> ç›¸å½“äºåŠ äº†ä¸€ä¸ª <strong>æ’ä»–é”</strong>ï¼Œè®©å…¶ä»–äººä¸èƒ½åŒæ—¶ä¿®æ”¹åº“å­˜æ•°æ®ï¼Œé¿å…è¶…å–ã€‚</p><p>è¿™æ ·ï¼Œä½ çš„è´­ç‰©è½¦ç³»ç»Ÿå°±ä¸ä¼šå› ä¸ºé«˜å¹¶å‘å¯¼è‡´åº“å­˜è®¡ç®—é”™è¯¯ã€‚</p><p>æˆ‘ä»¬ç”¨<strong>å›¾ä¹¦é¦†å€Ÿé˜…</strong>çš„ä¾‹å­æ¥å½¢è±¡ç†è§£ <strong>è¯»é”ï¼ˆå…±äº«é”ï¼ŒS é”ï¼‰</strong>ã€‚</p><h2 id="_2ã€åœºæ™¯-å›¾ä¹¦é¦†çš„ä¹¦ç±å€Ÿé˜…" tabindex="-1"><strong>2ã€åœºæ™¯ï¼šå›¾ä¹¦é¦†çš„ä¹¦ç±å€Ÿé˜…</strong> <a class="header-anchor" href="#_2ã€åœºæ™¯-å›¾ä¹¦é¦†çš„ä¹¦ç±å€Ÿé˜…" aria-label="Permalink to &quot;**2ã€åœºæ™¯ï¼šå›¾ä¹¦é¦†çš„ä¹¦ç±å€Ÿé˜…**&quot;">â€‹</a></h2><p>å‡è®¾ä½ åœ¨å›¾ä¹¦é¦†ï¼Œæƒ³è¦æŸ¥çœ‹ä¸€æœ¬<strong>å‚è€ƒä¹¦</strong>ï¼Œä½†è¿™æœ¬ä¹¦<strong>ä¸èƒ½è¢«å¸¦èµ°æˆ–ä¿®æ”¹</strong>ï¼ˆåªèƒ½åœ¨é˜…è§ˆå®¤é˜…è¯»ï¼‰ã€‚</p><ol><li><strong>å¤šäººåŒæ—¶æŸ¥é˜…ï¼ˆè¯»é”ï¼‰</strong>ï¼š <ul><li>è¿™æœ¬ä¹¦å¯ä»¥è¢« <strong>å¤šä¸ªäººåŒæ—¶é˜…è¯»</strong>ï¼ˆæŸ¥è¯¢ï¼‰ã€‚</li><li>åªè¦å¤§å®¶ <strong>éƒ½åªæ˜¯é˜…è¯»ï¼Œä¸ä¿®æ”¹ä¹¦ç±å†…å®¹</strong>ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</li><li>è¿™ä¸ªå°±åƒ <strong>æ•°æ®åº“çš„å…±äº«é”ï¼ˆS é”ï¼‰</strong>â€”â€”å¤šä¸ªæŸ¥è¯¢ï¼ˆ<code>SELECT</code> è¯­å¥ï¼‰å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œä½†ä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</li></ul></li><li><strong>ç¦æ­¢ä¿®æ”¹ï¼ˆå†™é”å†²çªï¼‰</strong>ï¼š <ul><li>å¦‚æœæœ‰ä¸€ä¸ªäººæƒ³ <strong>ä¿®æ”¹</strong> è¿™æœ¬ä¹¦ï¼ˆæ¯”å¦‚åœ¨ä¹¦ä¸Šåšæ ‡è®°ã€æ’•æ‰æŸä¸€é¡µï¼‰ï¼Œé‚£ä¹ˆä»–<strong>å¿…é¡»ç­‰æ‰€æœ‰è¯»è€…éƒ½æ”¾ä¸‹ä¹¦</strong>ï¼Œæ‰èƒ½å¼€å§‹ä¿®æ”¹ã€‚</li><li>è¿™ç›¸å½“äº <strong>å†™é”ï¼ˆX é”ï¼‰</strong>ï¼Œéœ€è¦ç‹¬å èµ„æºï¼Œä¸èƒ½å’Œè¯»é”ï¼ˆS é”ï¼‰å…±å­˜ã€‚</li><li>åè¿‡æ¥ï¼Œå½“ä¸€æœ¬ä¹¦æ­£åœ¨è¢«äººä¿®æ”¹æ—¶ï¼Œå…¶ä»–äººå°±<strong>ä¸èƒ½å†é˜…è¯»</strong>ï¼Œå¿…é¡»ç­‰ä¿®æ”¹å®Œæˆåæ‰èƒ½ç»§ç»­æŸ¥çœ‹ã€‚</li></ul></li></ol><p><strong>æ•°æ®åº“ä¸­çš„è¯»é”ï¼ˆS é”ï¼‰</strong></p><p>å¯¹åº”åˆ°æ•°æ®åº“ï¼Œå½“ä½ æ‰§è¡Œï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> SELECT * FROM books WHERE id = 1 LOCK IN SHARE MODE;</span></span></code></pre></div><ul><li>è¿™ç›¸å½“äºç»™æŸ¥è¯¢çš„æ•°æ®åŠ äº†ä¸€ä¸ª <strong>å…±äº«é”ï¼ˆS é”ï¼‰</strong>ã€‚</li><li>å…¶ä»–æŸ¥è¯¢ï¼ˆ<code>SELECT</code>ï¼‰å¯ä»¥ç»§ç»­è¯»å–è¿™æ¡æ•°æ®ï¼Œä¸ä¼šæœ‰å½±å“ã€‚</li><li>ä½†å¦‚æœæœ‰äººæƒ³ <strong>æ›´æ–°æˆ–åˆ é™¤</strong> è¿™æ¡æ•°æ®ï¼ˆ<code>UPDATE</code> æˆ– <code>DELETE</code>ï¼‰ï¼Œå°±å¿…é¡»ç­‰æ‰€æœ‰çš„è¯»æ“ä½œç»“æŸã€‚</li></ul><h2 id="_3ã€æ€»ç»“" tabindex="-1"><strong>3ã€æ€»ç»“</strong> <a class="header-anchor" href="#_3ã€æ€»ç»“" aria-label="Permalink to &quot;**3ã€æ€»ç»“**&quot;">â€‹</a></h2><ul><li><strong>è¯»é”ï¼ˆå…±äº«é”ï¼ŒS é”ï¼‰</strong>ï¼šå¤šä¸ªæŸ¥è¯¢ï¼ˆè¯»æ“ä½œï¼‰å¯ä»¥åŒæ—¶è¿›è¡Œï¼Œä½†ä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚</li><li><strong>å†™é”ï¼ˆæ’ä»–é”ï¼ŒX é”ï¼‰</strong>ï¼šä¿®æ”¹æ•°æ®æ—¶ï¼Œéœ€è¦ç‹¬å èµ„æºï¼Œä¸èƒ½æœ‰ä»»ä½•è¯»æˆ–å†™æ“ä½œã€‚</li></ul><p>è¿™æ ·å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé¿å…åœ¨è¯»å–è¿‡ç¨‹ä¸­æ•°æ®è¢«ä¿®æ”¹ï¼Œå¯¼è‡´ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p><h1 id="å…«ã€æœ¬åœ°å¿«é€Ÿè¿è¡Œé¡¹ç›®" tabindex="-1">å…«ã€<mark>æœ¬åœ°å¿«é€Ÿè¿è¡Œé¡¹ç›®</mark> <a class="header-anchor" href="#å…«ã€æœ¬åœ°å¿«é€Ÿè¿è¡Œé¡¹ç›®" aria-label="Permalink to &quot;å…«ã€==æœ¬åœ°å¿«é€Ÿè¿è¡Œé¡¹ç›®==&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><h2 id="_1ã€ä¸€é”®å¯åŠ¨-åç«¯é¡¹ç›®ã€mysqlã€å‰ç«¯" tabindex="-1">1ã€ä¸€é”®å¯åŠ¨-åç«¯é¡¹ç›®ã€Mysqlã€å‰ç«¯ <a class="header-anchor" href="#_1ã€ä¸€é”®å¯åŠ¨-åç«¯é¡¹ç›®ã€mysqlã€å‰ç«¯" aria-label="Permalink to &quot;1ã€ä¸€é”®å¯åŠ¨-åç«¯é¡¹ç›®ã€Mysqlã€å‰ç«¯&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span></code></pre></div><p><img src="/assets/image-20250227225944328.DYfT3myF.png" alt="image-20250227225944328" loading="lazy"></p><h2 id="_2ã€æœ¬åœ°nginxå‰ç«¯" tabindex="-1">2ã€æœ¬åœ°Nginxå‰ç«¯ <a class="header-anchor" href="#_2ã€æœ¬åœ°nginxå‰ç«¯" aria-label="Permalink to &quot;2ã€æœ¬åœ°Nginxå‰ç«¯&quot;">â€‹</a></h2><p><img src="/assets/image-20250227230127515.B2br3xdz.png" alt="image" loading="lazy"></p><p><img src="/assets/image-20250227230238732.BHYms8jn.png" alt="image-20250227230238732" loading="lazy"></p><h2 id="_3ã€å¯åŠ¨å„å®¹å™¨ã€ç»„ä»¶" tabindex="-1">3ã€å¯åŠ¨å„å®¹å™¨ã€ç»„ä»¶ <a class="header-anchor" href="#_3ã€å¯åŠ¨å„å®¹å™¨ã€ç»„ä»¶" aria-label="Permalink to &quot;3ã€å¯åŠ¨å„å®¹å™¨ã€ç»„ä»¶&quot;">â€‹</a></h2><h3 id="_1-nacos-æ³¨å†Œä¸­å¿ƒ" tabindex="-1">(1) Nacos-æ³¨å†Œä¸­å¿ƒ <a class="header-anchor" href="#_1-nacos-æ³¨å†Œä¸­å¿ƒ" aria-label="Permalink to &quot;(1) Nacos-æ³¨å†Œä¸­å¿ƒ&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>docker start nacos</span></span></code></pre></div><p><img src="/assets/image-20250227230531438.BI1Vf1Ne.png" alt="image-20250227230531438" loading="lazy"></p><p><img src="/assets/image-20250227230551431.BOufgBls.png" alt="image-20250227230551431" loading="lazy"></p><h3 id="_2-seata-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1">(2) Seata-åˆ†å¸ƒå¼äº‹åŠ¡ <a class="header-anchor" href="#_2-seata-åˆ†å¸ƒå¼äº‹åŠ¡" aria-label="Permalink to &quot;(2) Seata-åˆ†å¸ƒå¼äº‹åŠ¡&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seata</span></span></code></pre></div><p><img src="/assets/image-20250227230747761.CkCeRQx-.png" alt="image-20250227230747761" loading="lazy"></p><p><img src="/assets/image-20250227230813511.Dmph0Yc6.png" alt="image-20250227230813511" loading="lazy"></p><h3 id="_3-mq-æ¶ˆæ¯é˜Ÿåˆ—" tabindex="-1">(3) MQ-æ¶ˆæ¯é˜Ÿåˆ— <a class="header-anchor" href="#_3-mq-æ¶ˆæ¯é˜Ÿåˆ—" aria-label="Permalink to &quot;(3) MQ-æ¶ˆæ¯é˜Ÿåˆ—&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mq</span></span></code></pre></div><p><img src="/assets/image-20250227230940095.CwnbW-sj.png" alt="image-20250227230940095" loading="lazy"></p><p><img src="/assets/image-20250227230951816.BU7sNRwf.png" alt="image-20250227230951816" loading="lazy"></p><h3 id="_4-sentinelå“¨å…µ-å¾®æœåŠ¡ä¿æŠ¤" tabindex="-1">(4) Sentinelå“¨å…µ-å¾®æœåŠ¡ä¿æŠ¤ <a class="header-anchor" href="#_4-sentinelå“¨å…µ-å¾®æœåŠ¡ä¿æŠ¤" aria-label="Permalink to &quot;(4) Sentinelå“¨å…µ-å¾®æœåŠ¡ä¿æŠ¤&quot;">â€‹</a></h3><p><img src="/assets/image-20250227231413701.DAc08jfB.png" alt="image-20250227231413701" loading="lazy"></p><p><img src="/assets/image-20250227231302887.ChvJEstC.png" alt="image-20250227231302887" loading="lazy"></p><p><img src="/assets/image-20250227231440714.B3nAwYy4.png" alt="image-20250227231440714" loading="lazy"></p><p><strong>1ï¼‰è¿è¡Œ</strong></p><p>å°†jaråŒ…æ”¾åœ¨ä»»æ„éä¸­æ–‡ã€ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„ç›®å½•ä¸‹ï¼Œé‡å‘½åä¸º<code>sentinel-dashboard.jar</code>ï¼š</p><p><img src="/assets/1733754442877-3.DpyZfw05.png" alt="img" loading="lazy"></p><p>ç„¶åè¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨æ§åˆ¶å°ï¼š</p><div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dserver.port=8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dcsp.sentinel.dashboard.server=localhost:8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Dproject.name=sentinel-dashboard</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sentinel-dashboard.jar</span></span></code></pre></div><p>å…¶å®ƒå¯åŠ¨æ—¶å¯é…ç½®å‚æ•°å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://github.com/alibaba/Sentinel/wiki/%E5%90%AF%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9" target="_blank" rel="noreferrer">https://github.com/alibaba/Sentinel/wiki/å¯åŠ¨é…ç½®é¡¹</a></p><p><strong>2ï¼‰è®¿é—®</strong></p><p>è®¿é—®<code>[http://localhost:8090](http://localhost:8080)</code>é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°<strong>sentinelçš„æ§åˆ¶å°</strong>äº†ï¼š</p><p><img src="/assets/1733754442877-4.B9uuPduw.png" alt="img" loading="lazy"></p><p><strong>éœ€è¦è¾“å…¥è´¦å·å’Œå¯†ç ï¼Œé»˜è®¤éƒ½æ˜¯ï¼šsentinel</strong></p><p>ç™»å½•åï¼Œå³å¯çœ‹åˆ°æ§åˆ¶å°ï¼Œé»˜è®¤ä¼šç›‘æ§sentinel-dashboardæœåŠ¡æœ¬èº«ï¼š</p><p><img src="/assets/1733754442878-5.6-rHxDPO.png" alt="img" loading="lazy"></p><h2 id="_4ã€è¿è¡Œæœ¬åœ°javaåç«¯" tabindex="-1">4ã€è¿è¡Œæœ¬åœ°Javaåç«¯ <a class="header-anchor" href="#_4ã€è¿è¡Œæœ¬åœ°javaåç«¯" aria-label="Permalink to &quot;4ã€è¿è¡Œæœ¬åœ°Javaåç«¯&quot;">â€‹</a></h2><p><img src="/assets/image-20250227231637440.ifFV56cX.png" alt="image-20250227231637440" loading="lazy"></p><h1 id="ğŸš€ğŸš€ä¹ã€dockeréƒ¨ç½²ç»å†" tabindex="-1">ğŸš€ğŸš€ä¹ã€<mark>Dockeréƒ¨ç½²ç»å†</mark> <a class="header-anchor" href="#ğŸš€ğŸš€ä¹ã€dockeréƒ¨ç½²ç»å†" aria-label="Permalink to &quot;ğŸš€ğŸš€ä¹ã€==Dockeréƒ¨ç½²ç»å†==&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><h2 id="_1ã€nacos" tabindex="-1">1ã€Nacos <a class="header-anchor" href="#_1ã€nacos" aria-label="Permalink to &quot;1ã€Nacos&quot;">â€‹</a></h2><h3 id="_1-æ³•ä¸€-custom-env" tabindex="-1">ï¼ˆ1ï¼‰æ³•ä¸€ï¼šcustom.env <a class="header-anchor" href="#_1-æ³•ä¸€-custom-env" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰æ³•ä¸€ï¼šcustom.env&quot;">â€‹</a></h3><p><a href="#nacos-Dockeréƒ¨ç½²">nacos-Dockeréƒ¨ç½²</a></p><h3 id="_2-æ³•äºŒ-æ‹·è´æ•°æ®å·" tabindex="-1">ï¼ˆ2ï¼‰æ³•äºŒï¼šæ‹·è´æ•°æ®å· <a class="header-anchor" href="#_2-æ³•äºŒ-æ‹·è´æ•°æ®å·" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰æ³•äºŒï¼šæ‹·è´æ•°æ®å·&quot;">â€‹</a></h3><p><a href="#nacos-Dockeréƒ¨ç½²-2">nacos-Dockeréƒ¨ç½²-2</a></p><hr><h2 id="_2ã€sentinel" tabindex="-1">2ã€Sentinel <a class="header-anchor" href="#_2ã€sentinel" aria-label="Permalink to &quot;2ã€Sentinel&quot;">â€‹</a></h2><h3 id="_1-sentinel-æœ¬æœºéƒ¨ç½²" tabindex="-1">ï¼ˆ1ï¼‰Sentinel-æœ¬æœºéƒ¨ç½² <a class="header-anchor" href="#_1-sentinel-æœ¬æœºéƒ¨ç½²" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰Sentinel-æœ¬æœºéƒ¨ç½²&quot;">â€‹</a></h3><p><a href="#Sentinel-æœ¬æœºéƒ¨ç½²">Sentinel-æœ¬æœºéƒ¨ç½²</a></p><h3 id="_2-sentinel-dockeréƒ¨ç½²" tabindex="-1">ï¼ˆ2ï¼‰Sentinel-Dockeréƒ¨ç½² <a class="header-anchor" href="#_2-sentinel-dockeréƒ¨ç½²" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰Sentinel-Dockeréƒ¨ç½²&quot;">â€‹</a></h3><p><a href="https://blog.51cto.com/u_16099212/8046802" target="_blank" rel="noreferrer">https://blog.51cto.com/u_16099212/8046802</a></p><p><img src="/assets/image-20250328153813328.BFfwEw0K.png" alt="image-20250328153813328" loading="lazy"></p><div class="language-Dockerfile vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Dockerfile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Dockerfileæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#java ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java:8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">##æŒ‚è½½çš„dockerå·</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VOLUME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /root/sentinel-docker/sentinel-volume</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å‰è€…æ˜¯è¦æ“ä½œçš„jaråŒ…  åè€…è‡ªå®šä¹‰jaråŒ…å</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> *.jar sentinel-dashboard.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å®šä¹‰æ—¶åŒºå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#è®¾ç½®æ—¶åŒº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RUN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$TZ&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &gt; /etc/timezone</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#é…ç½®å¯åŠ¨å‘½ä»¤,-Dè¡¨ç¤ºè®¾ç½®JVMå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Dserver.port=8090&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Dcsp.sentinel.dashboard.server=8.137.17.126:8090&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Dproject.name=sentinel-dashboard&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/sentinel-dashboard.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h4 id="_1åˆ¶ä½œé•œåƒ" tabindex="-1">â‘ åˆ¶ä½œé•œåƒ <a class="header-anchor" href="#_1åˆ¶ä½œé•œåƒ" aria-label="Permalink to &quot;â‘ åˆ¶ä½œé•œåƒ&quot;">â€‹</a></h4><p>sentinel-dashboardå°±æ˜¯ä¸€ä¸ªSpringBooté¡¹ç›®ï¼Œç›´æ¥ä½¿ç”¨å‘½ä»¤å¯åŠ¨å³å¯ï¼Œæ‰€æœ‰è‡ªå®šä¹‰é…ç½®dockerå¯åŠ¨ã€‚</p><p>å¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€è¦å¯ä»¥ç›´æ¥ä¸‹è½½jarï¼Œéœ€è¦ä¿®æ”¹æºç åˆ™ä¸‹è½½æºç åŒ…å³å¯ï¼Œä¸‹è½½åœ°å€ï¼š <a href="https://github.com/alibaba/Sentinel/releases%EF%BC%8C%E4%B8%8B%E8%BD%BD%E7%9B%B8%E5%BA%94%E7%89%88%E6%9C%AC%E7%9A%84jar%E5%8C%85%EF%BC%8C%E6%AF%94%E5%A6%82sentinel-dashboard-1.8.1.jar" target="_blank" rel="noreferrer">https://github.com/alibaba/Sentinel/releasesï¼Œä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„jaråŒ…ï¼Œæ¯”å¦‚sentinel-dashboard-1.8.1.jar</a></p><h5 id="_1ã€åˆ›å»ºå·¥ä½œç›®å½•" tabindex="-1">1ã€åˆ›å»ºå·¥ä½œç›®å½•ï¼š <a class="header-anchor" href="#_1ã€åˆ›å»ºå·¥ä½œç›®å½•" aria-label="Permalink to &quot;1ã€åˆ›å»ºå·¥ä½œç›®å½•ï¼š&quot;">â€‹</a></h5><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/docker/sentinel</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div><h5 id="_2ã€æ‹·è´æ–‡ä»¶" tabindex="-1">2ã€æ‹·è´æ–‡ä»¶ï¼š <a class="header-anchor" href="#_2ã€æ‹·è´æ–‡ä»¶" aria-label="Permalink to &quot;2ã€æ‹·è´æ–‡ä»¶ï¼š&quot;">â€‹</a></h5><p>å°†ä»å®˜ç½‘ä¸‹è½½çš„æˆ–è€…æ˜¯è‡ªå®šä¹‰ç¼–è¯‘å¥½çš„jaråŒ…ï¼Œæ‹·è´åˆ°/root/docker/sentinelç›®å½•ä¸‹</p><h5 id="_3ã€dockerfile" tabindex="-1">3ã€Dockerfileï¼š <a class="header-anchor" href="#_3ã€dockerfile" aria-label="Permalink to &quot;3ã€Dockerfileï¼š&quot;">â€‹</a></h5><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vim </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">root</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sentinel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dockerfile</span></span></code></pre></div><p><strong>å†…å®¹å¦‚ä¸‹ï¼š</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#java ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FROM java</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">##æŒ‚è½½çš„dockerå·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VOLUME </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tmp</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#å‰è€…æ˜¯è¦æ“ä½œçš„jaråŒ…  åè€…è‡ªå®šä¹‰jaråŒ…å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ADD </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.jar sentinel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dashboard.jar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#å®šä¹‰æ—¶åŒºå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENV TZ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Asia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Shanghai</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#è®¾ç½®æ—¶åŒº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RUN ln </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">snf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">share</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zoneinfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TZ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localtime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> echo </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;$TZ&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">etc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">timezone</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#é…ç½®å¯åŠ¨å‘½ä»¤,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dè¡¨ç¤ºè®¾ç½®JVMå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ENTRYPOINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;java&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Dserver.port=8080&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Dcsp.sentinel.dashboard.server=162.14.118.19.175:8080&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-Dproject.name=sentinel-dashboard&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/sentinel-dashboard.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h5 id="_4ã€åˆ¶ä½œé•œåƒ" tabindex="-1">4ã€åˆ¶ä½œé•œåƒï¼š <a class="header-anchor" href="#_4ã€åˆ¶ä½œé•œåƒ" aria-label="Permalink to &quot;4ã€åˆ¶ä½œé•œåƒï¼š&quot;">â€‹</a></h5><p>ä¿è¯jarå’ŒDockerfileåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹</p><p><img src="/assets/resize_m_fixed_w_1184.CJ1Q2z8W.webp" alt="sentineléƒ¨ç½²docker dockerå®‰è£…sentinel_gateway" loading="lazy"></p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#sentinel-serverè¡¨ç¤ºé•œåƒåç§°</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sentinel-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><p><img src="/assets/resize_m_fixed_w_1184-1743147709648-3.BybLBzCH.webp" alt="sentineléƒ¨ç½²docker dockerå®‰è£…sentinel_Sentinel_02" loading="lazy"></p><h4 id="_2å¯åŠ¨æµ‹è¯•" tabindex="-1">â‘¡å¯åŠ¨æµ‹è¯• <a class="header-anchor" href="#_2å¯åŠ¨æµ‹è¯•" aria-label="Permalink to &quot;â‘¡å¯åŠ¨æµ‹è¯•&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--name </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sentinel-server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8090:8090</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--restart=always </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sentinel-server</span></span></code></pre></div><hr><h2 id="_3ã€éƒ¨ç½²mq" tabindex="-1">3ã€éƒ¨ç½²mq <a class="header-anchor" href="#_3ã€éƒ¨ç½²mq" aria-label="Permalink to &quot;3ã€éƒ¨ç½²mq&quot;">â€‹</a></h2><p>æˆ‘ä»¬åŒæ ·åŸºäºDockeræ¥å®‰è£…RabbitMQï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š</p><div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RABBITMQ_DEFAULT_USER=itheima</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> RABBITMQ_DEFAULT_PASS=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123321</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mq-plugins:/plugins</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hostname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 15672:15672</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 5672:5672</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hmall</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rabbitmq:3.8-management</span></span></code></pre></div><p>å…¶ä¸­<strong>15672</strong>ç«¯å£<strong>ä¸ºRabbitMQçš„æ§åˆ¶å°ç«¯å£</strong>ï¼Œ<strong>5672</strong>ç«¯å£ä¸º<strong>å„ä¸ªå¾®æœåŠ¡è®¿é—®RabbitMQçš„ç«¯å£</strong></p><p>å¦‚æœæ‹‰å–é•œåƒå›°éš¾çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è¯¾å‰èµ„æ–™ç»™å¤§å®¶å‡†å¤‡çš„é•œåƒï¼Œåˆ©ç”¨docker load -i mq.tarå‘½ä»¤åŠ è½½ï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mq.tar</span></span></code></pre></div><p><img src="/assets/1734264702018-2.B5GHPFa3.png" alt="img" loading="lazy"></p><p>å¯ä»¥çœ‹åˆ°åœ¨å®‰è£…å‘½ä»¤ä¸­æœ‰ä¸¤ä¸ªæ˜ å°„çš„ç«¯å£ï¼š</p><ul><li>15672ï¼šRabbitMQæä¾›çš„ç®¡ç†æ§åˆ¶å°çš„ç«¯å£</li><li>5672ï¼šRabbitMQçš„æ¶ˆæ¯å‘é€å¤„ç†æ¥å£</li></ul><p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬è®¿é—® http://192.168.88.133:15672å³å¯çœ‹åˆ°ç®¡ç†æ§åˆ¶å°ã€‚é¦–æ¬¡è®¿é—®éœ€è¦ç™»å½•ï¼Œé»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç åœ¨é…ç½®æ–‡ä»¶ä¸­å·²ç»æŒ‡å®šäº†ã€‚</p><p>ç™»å½•åå³å¯çœ‹åˆ°ç®¡ç†æ§åˆ¶å°æ€»è§ˆé¡µé¢ï¼š</p><p><img src="/assets/1734264702018-3.BbjD7ClO.png" alt="img" loading="lazy"></p><hr><h2 id="_4ã€éƒ¨ç½²seata" tabindex="-1">4ã€éƒ¨ç½²Seata <a class="header-anchor" href="#_4ã€éƒ¨ç½²seata" aria-label="Permalink to &quot;4ã€éƒ¨ç½²Seata&quot;">â€‹</a></h2><p><a href="#éƒ¨ç½²Seata(TCæœåŠ¡)">éƒ¨ç½²Seata(TCæœåŠ¡)</a></p><p>Seataæ”¯æŒå¤šç§å­˜å‚¨æ¨¡å¼ï¼Œä½†è€ƒè™‘åˆ°æŒä¹…åŒ–çš„éœ€è¦ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©åŸºäºæ•°æ®åº“å­˜å‚¨ã€‚æ‰§è¡Œè¯¾å‰èµ„æ–™æä¾›çš„<code>ã€Šseata-tc.sqlã€‹</code>ï¼Œå¯¼å…¥æ•°æ®åº“è¡¨ï¼š</p><h3 id="_1-åˆ›å»ºseataæ•°æ®åº“" tabindex="-1">ï¼ˆ1ï¼‰åˆ›å»ºseataæ•°æ®åº“ <a class="header-anchor" href="#_1-åˆ›å»ºseataæ•°æ®åº“" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰åˆ›å»ºseataæ•°æ®åº“&quot;">â€‹</a></h3><p><img src="/assets/1733754442883-36.DuybQiJ5.png" alt="img" loading="lazy"></p><h3 id="_2-å‡†å¤‡é…ç½®æ–‡ä»¶" tabindex="-1">ï¼ˆ2ï¼‰å‡†å¤‡<mark>é…ç½®æ–‡ä»¶</mark> <a class="header-anchor" href="#_2-å‡†å¤‡é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å‡†å¤‡==é…ç½®æ–‡ä»¶==&quot;">â€‹</a></h3><p>è¯¾å‰èµ„æ–™å‡†å¤‡äº†ä¸€ä¸ªseataç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†seataè¿è¡Œæ—¶æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼š</p><p><img src="/assets/1733754442883-37.BDt1E52d.png" alt="img" loading="lazy"></p><p>å…¶ä¸­åŒ…å«ä¸­æ–‡æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œé˜…è¯»ã€‚</p><p>ğŸš€ğŸš€**<mark>éœ€è¦å…³æ³¨çš„æ˜¯</mark>ï¼Œè¿™é‡Œé¢mysqlå’Œnacosçš„ipåœ°å€ï¼Œå¦‚æœè¿™ä¸‰ä¸ªéƒ½åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸­å¹¶ä¸”éƒ½åœ¨ä¸€ä¸ªç½‘æ®µä¸‹ï¼Œç›´æ¥ä½¿ç”¨å¯¹åº”çš„å®¹å™¨åå³å¯ã€‚**</p><hr><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7099</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seata-server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">logging</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">classpath:logback-spring.xml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${user.home}/logs/seata</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # extend:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #   logstash-appender:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #     destination: 127.0.0.1:4560</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #   kafka-appender:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #     bootstrap-servers: 127.0.0.1:9092</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #     topic: logback_to_logstash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">admin</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">admin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">seata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # support: nacos, consul, apollo, zk, etcd3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">file</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # nacos:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   server-addr: nacos:8848</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   group : &quot;DEFAULT_GROUP&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   namespace: &quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   dataId: &quot;seataServer.properties&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   username: &quot;nacos&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   password: &quot;nacos&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  registry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # support: nacos, eureka, redis, zk, consul, etcd3, sofa</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nacos</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">seata-server</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8.137.17.126:8848</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEFAULT_GROUP&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nacos&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nacos&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  server:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#    service-port: 8091 #If not configured, the default is &#39;${server.port} + 1000&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  security</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    secretKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SeataSecretKey0c382ef121d778043159209298fd40bf3850a017</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    tokenValidityInMilliseconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1800000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ignore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      urls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-fe/public/**,/api/v1/auth/login</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # service-port: 8091 #If not configured, the default is &#39;${server.port} + 1000&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    max-commit-retry-timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    max-rollback-retry-timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    rollback-retry-timeout-unlock-enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enable-check-auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enable-parallel-request-handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    retry-dead-threshold</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">130000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    xaer-nota-retry-timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enableParallelRequestHandle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    recovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      committing-retry-period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      async-committing-retry-period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      rollbacking-retry-period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      timeout-retry-period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    undo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      log-save-days</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      log-delete-period</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">86400000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      branch-async-queue-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #branch async remove queue size</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      enable-branch-async-remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #enable to asynchronous remove branchSession</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # support: file ã€ db ã€ redis</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">db</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">db</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    lock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">db</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      datasource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">druid</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      db-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mysql</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      driver-class-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jdbc:mysql://mysql:3306/seata?rewriteBatchedStatements=true&amp;serverTimezone=UTC</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      min-conn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      max-conn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      global-table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">global_table</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      branch-table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">branch_table</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      lock-table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lock_table</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      distributed-lock-table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">distributed_lock</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      query-limit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      max-wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # redis:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   mode: single</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   database: 0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   min-conn: 10</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   max-conn: 100</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   password:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   max-total: 100</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   query-limit: 1000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #   single:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #     host: 192.168.150.101</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #     port: 6379</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  metrics</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    registry-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">compact</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    exporter-list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">prometheus</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    exporter-prometheus-port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9898</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  transport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    rpc-tc-request-timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15000</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    enable-tc-server-batch-send-response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    shutdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      wait</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    thread-factory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      boss-thread-prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NettyBoss</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      worker-thread-prefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">NettyServerNIOWorker</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      boss-thread-size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span></code></pre></div><h3 id="_3-æ‹·è´æ•´ä¸ªç›®å½•" tabindex="-1">ï¼ˆ3ï¼‰æ‹·è´æ•´ä¸ªç›®å½• <a class="header-anchor" href="#_3-æ‹·è´æ•´ä¸ªç›®å½•" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰æ‹·è´æ•´ä¸ªç›®å½•&quot;">â€‹</a></h3><p>æˆ‘ä»¬<mark>å°†æ•´ä¸ªseataæ–‡ä»¶å¤¹æ‹·è´åˆ°è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•</mark>ï¼š</p><p><img src="/assets/1733754442883-38.DjLOBV3F.png" alt="img" loading="lazy"></p><h3 id="_4-dockeréƒ¨ç½²" tabindex="-1">ï¼ˆ4ï¼‰Dockeréƒ¨ç½² <a class="header-anchor" href="#_4-dockeréƒ¨ç½²" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰Dockeréƒ¨ç½²&quot;">â€‹</a></h3><p>éœ€è¦æ³¨æ„ï¼Œè¦ç¡®ä¿nacosã€mysqléƒ½åœ¨hm-netç½‘ç»œä¸­ã€‚å¦‚æœæŸä¸ªå®¹å™¨ä¸å†hm-netç½‘ç»œï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„å‘½ä»¤å°†æŸå®¹å™¨åŠ å…¥æŒ‡å®šç½‘ç»œï¼š</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [å®¹å™¨å] æŸ¥çœ‹è¯¥å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç½‘ç»œä¿¡æ¯ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ç½‘ç»œå] [å®¹å™¨å]</span></span></code></pre></div><p>åœ¨è™šæ‹Ÿæœºçš„<code>/root</code>ç›®å½•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-Shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8099:8099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7099:7099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SEATA_IP=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.88.133</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./seata:/seata-server/resources</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--network </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hmall</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seataio/seata-server:1.5.2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seata</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8099:8099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-p </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7099:7099</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SEATA_IP=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">47.109.155.207</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./seata:/seata-server/resources</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--privileged=true </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-d </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">seataio/seata-server:1.5.2</span></span></code></pre></div><p>å…¶ä¸­çš„SEATA_IPéœ€è¦<strong>æ¢æˆè‡ªå·±çš„è™šæ‹Ÿæœºip</strong>ï¼Œnetworkéœ€è¦æ¢æˆä¸nacoså’Œmysqlåœ¨åŒä¸€ç½‘ç»œä¸­ã€‚</p><h2 id="_5ã€éƒ¨ç½²redis" tabindex="-1">5ã€éƒ¨ç½²redis <a class="header-anchor" href="#_5ã€éƒ¨ç½²redis" aria-label="Permalink to &quot;5ã€éƒ¨ç½²redis&quot;">â€‹</a></h2><h3 id="_0-è½½å…¥é•œåƒ" tabindex="-1">ï¼ˆ0ï¼‰è½½å…¥é•œåƒ <a class="header-anchor" href="#_0-è½½å…¥é•œåƒ" aria-label="Permalink to &quot;ï¼ˆ0ï¼‰è½½å…¥é•œåƒ&quot;">â€‹</a></h3><h3 id="_1-åˆ›å»ºç›®å½•" tabindex="-1">ï¼ˆ1ï¼‰åˆ›å»ºç›®å½• <a class="header-anchor" href="#_1-åˆ›å»ºç›®å½•" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰åˆ›å»ºç›®å½•&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis/conf/redis.conf</span></span></code></pre></div><h3 id="_2-redis-conf-é…ç½®æ–‡ä»¶" tabindex="-1">ï¼ˆ2ï¼‰redis.conf é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_2-redis-conf-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰redis.conf é…ç½®æ–‡ä»¶&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç½‘ç»œä¸å®‰å…¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ç¤ºç›‘å¬æ‰€æœ‰å¯ç”¨ç½‘ç»œæ¥å£ï¼ˆåŒ…æ‹¬æœ¬åœ°å›ç¯å’Œå¤–éƒ¨ IPï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#æ˜¯å¦å¯ç”¨ä¿æŠ¤æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">protected-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requirepass</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ›¿æ¢ä¸ºä½ çš„å¼ºå¯†ç </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># èµ„æºé™åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">maxmemory</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2gb</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å†…å­˜è¾¾åˆ°ä¸Šé™æ—¶çš„æ•°æ®æ·˜æ±°ç­–ç•¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">maxmemory-policy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allkeys-lru</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒä¹…åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendonly</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendfsync</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> everysec</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ç¦ç”¨ RDBï¼ˆå¦‚æœåªç”¨ AOFï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ€§èƒ½ä¼˜åŒ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tcp-keepalive</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">timeout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span></span></code></pre></div><h3 id="_3-è¿è¡Œå®¹å™¨" tabindex="-1">ï¼ˆ3ï¼‰è¿è¡Œå®¹å™¨ <a class="header-anchor" href="#_3-è¿è¡Œå®¹å™¨" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰è¿è¡Œå®¹å™¨&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 6379:6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unless-stopped</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/redis/data:/data</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/redis/conf/redis.conf:/etc/redis/redis.conf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  redis:bullseye</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/redis/redis.conf</span></span></code></pre></div><table tabindex="0"><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>â€“name redis</td><td>å¯åŠ¨å®¹å™¨çš„åå­—</td></tr><tr><td>-d</td><td>åå°è¿è¡Œ</td></tr><tr><td>-p 6379:6379</td><td>å°†å®¹å™¨çš„ 6379(åé¢é‚£ä¸ª) ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 6379(å‰é¢é‚£ä¸ª) ç«¯å£</td></tr><tr><td>â€“restart unless-stopped</td><td>å®¹å™¨é‡å¯ç­–ç•¥</td></tr><tr><td>-v /root/redis/data:/data</td><td>å°†Rediså‚¨å­˜æ–‡ä»¶å¤¹æŒ‚åœ¨åˆ°ä¸»æœº</td></tr><tr><td>-v /root/redis/conf/redis.conf:/etc/redis/redis.conf</td><td>å°†é…ç½®æ–‡ä»¶å¤¹æŒ‚åœ¨åˆ°ä¸»æœº</td></tr><tr><td>-d redis:bullseye</td><td>å¯åŠ¨å“ªä¸ªç‰ˆæœ¬çš„ Redis (æœ¬åœ°é•œåƒçš„ç‰ˆæœ¬)</td></tr><tr><td>redis-server /etc/redis/redis.conf</td><td>Redis å®¹å™¨ä¸­è®¾ç½® redis-server æ¯æ¬¡å¯åŠ¨è¯»å– /etc/redis/redis.conf è¿™ä¸ªé…ç½®ä¸ºå‡†</td></tr><tr><td>--appendonly yes</td><td>åœ¨Rediså®¹å™¨å¯åŠ¨redis-serveræœåŠ¡å™¨å¹¶æ‰“å¼€RedisæŒä¹…åŒ–é…ç½®</td></tr><tr><td>\</td><td>shell å‘½ä»¤æ¢è¡Œ</td></tr></tbody></table><h3 id="_4-springé¡¹ç›®å¼•å…¥redis" tabindex="-1">ï¼ˆ4ï¼‰springé¡¹ç›®å¼•å…¥redis <a class="header-anchor" href="#_4-springé¡¹ç›®å¼•å…¥redis" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰springé¡¹ç›®å¼•å…¥redis&quot;">â€‹</a></h3><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--Redisä¾èµ–--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-data-redis&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>é…ç½®æ–‡ä»¶</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  redis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${ics.redis.host:8.137.17.126}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #ä¸»æœºå·</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${ics.redis.port:6379}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${ics.redis.password:123}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">${ics.redis.database:0}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #æ•°æ®åº“</span></span></code></pre></div><h2 id="_6ã€éƒ¨ç½²javaé¡¹ç›®" tabindex="-1">6ã€éƒ¨ç½²javaé¡¹ç›® <a class="header-anchor" href="#_6ã€éƒ¨ç½²javaé¡¹ç›®" aria-label="Permalink to &quot;6ã€éƒ¨ç½²javaé¡¹ç›®&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…jdk" tabindex="-1">ï¼ˆ1ï¼‰å®‰è£…jdk <a class="header-anchor" href="#_1-å®‰è£…jdk" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å®‰è£…jdk&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk:11.0.2</span></span></code></pre></div><h4 id="_1é…ç½®å¯åŠ¨jdk" tabindex="-1">â‘ é…ç½®å¯åŠ¨jdk <a class="header-anchor" href="#_1é…ç½®å¯åŠ¨jdk" aria-label="Permalink to &quot;â‘ é…ç½®å¯åŠ¨jdk&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java-11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk:11.0.2</span></span></code></pre></div><h4 id="_2æŸ¥çœ‹jdkçš„ç¯å¢ƒå˜é‡é…ç½®ç„¶ååˆ é™¤" tabindex="-1">â‘¡æŸ¥çœ‹jdkçš„ç¯å¢ƒå˜é‡é…ç½®ç„¶ååˆ é™¤ <a class="header-anchor" href="#_2æŸ¥çœ‹jdkçš„ç¯å¢ƒå˜é‡é…ç½®ç„¶ååˆ é™¤" aria-label="Permalink to &quot;â‘¡æŸ¥çœ‹jdkçš„ç¯å¢ƒå˜é‡é…ç½®ç„¶ååˆ é™¤&quot;">â€‹</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openjdk:11.0.2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;echo </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">JAVA_HOME &amp;&amp; echo </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PATH &amp;&amp; java -version&quot;</span></span></code></pre></div><p>æ–‡ä»¶ç›®å½•ç»“æ„ç¤ºæ„å›¾</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”œâ”€â”€ ics-agent/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â”œâ”€â”€ Dockerfile</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # ics-agent çš„ Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â”œâ”€â”€ target/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â”‚   â””â”€â”€ ics-agent-1.0.0.jar</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ„å»ºåçš„ JAR åŒ…</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â””â”€â”€ ...</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # å…¶ä»–æºç æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”œâ”€â”€ ics-user/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â”œâ”€â”€ Dockerfile</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # ics-user çš„ Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â”œâ”€â”€ target/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â”‚   â””â”€â”€ ics-user-1.0.0.jar</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # æ„å»ºåçš„ JAR åŒ…</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â”‚   â””â”€â”€ ...</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # å…¶ä»–æºç æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">â””â”€â”€ docker-compose.yml</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # å®¹å™¨ç¼–æ’æ–‡ä»¶</span></span></code></pre></div><h3 id="_2-dockerfile" tabindex="-1">ï¼ˆ2ï¼‰DockerFile <a class="header-anchor" href="#_2-dockerfile" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰DockerFile&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åŸºç¡€é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">FROM openjdk:11.0.2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¾å®šæ—¶åŒº</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ENV TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‹·è´jaråŒ…</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">COPY target/ics-agent-1.0.0.jar /app.jar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¥å£</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]</span></span></code></pre></div><h3 id="_3-docker-compose" tabindex="-1">ï¼ˆ3ï¼‰docker compose <a class="header-anchor" href="#_3-docker-compose" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰docker compose&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ics-agent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./ics-agent</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # æŒ‡å®š Dockerfile æ‰€åœ¨ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dockerfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-agent:latest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #é•œåƒåç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-agent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8081:8081&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # å®¹å™¨æ„å¤–é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-network</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # è‡ªå®šä¹‰ç½‘ç»œï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ics-user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./ics-user</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æŒ‡å®š Dockerfile æ‰€åœ¨ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dockerfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-user:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-user</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8086:8086&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-network</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ics-gateway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./ics-gateway</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æŒ‡å®š Dockerfile æ‰€åœ¨ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      dockerfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-gateway:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-gateway</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080:8080&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ics-network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è‡ªå®šä¹‰ç½‘ç»œï¼ˆç¡®ä¿å®¹å™¨é—´å¯é€šè¿‡æœåŠ¡åé€šä¿¡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  ics-network</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span></code></pre></div><p>è¿›å…¥åˆ°é¡¹ç›®</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›å…¥é¡¹ç›®æ ¹ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ics</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»ºæ‰€æœ‰æœåŠ¡é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #é‡æ–°æ„å»ºé•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #é‡å»ºå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #åˆ é™¤å®¹å™¨</span></span></code></pre></div><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><h1 id="åã€ğŸš€å¾®æœåŠ¡é¢è¯•ç¯‡" tabindex="-1">åã€ğŸš€å¾®æœåŠ¡é¢è¯•ç¯‡ <a class="header-anchor" href="#åã€ğŸš€å¾®æœåŠ¡é¢è¯•ç¯‡" aria-label="Permalink to &quot;åã€ğŸš€å¾®æœåŠ¡é¢è¯•ç¯‡&quot;">â€‹</a></h1><div class="word"><p><svg t="1724572866572" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18131" width="16" height="16"><path d="M168.021333 504.192A343.253333 343.253333 0 0 1 268.629333 268.8a342.229333 342.229333 0 0 1 243.285334-100.778667A341.504 341.504 0 0 1 755.029333 268.8c9.856 9.898667 19.2 20.394667 27.733334 31.402667l-60.16 46.976a8.021333 8.021333 0 0 0 2.986666 14.122666l175.701334 43.008a8.021333 8.021333 0 0 0 9.898666-7.68l0.810667-180.906666a7.936 7.936 0 0 0-12.885333-6.314667L842.666667 253.44a418.858667 418.858667 0 0 0-330.922667-161.493333c-229.12 0-415.488 183.594667-419.797333 411.818666a8.021333 8.021333 0 0 0 8.021333 8.192H160a7.978667 7.978667 0 0 0 8.021333-7.808zM923.946667 512H864a7.978667 7.978667 0 0 0-8.021333 7.808 341.632 341.632 0 0 1-26.88 125.994667 342.186667 342.186667 0 0 1-73.685334 109.397333 342.442667 342.442667 0 0 1-243.328 100.821333 342.229333 342.229333 0 0 1-270.976-132.224l60.16-46.976a8.021333 8.021333 0 0 0-2.986666-14.122666l-175.701334-43.008a8.021333 8.021333 0 0 0-9.898666 7.68l-0.682667 181.034666c0 6.698667 7.68 10.496 12.885333 6.314667L181.333333 770.56a419.072 419.072 0 0 0 330.922667 161.408c229.205333 0 415.488-183.722667 419.797333-411.818667a8.021333 8.021333 0 0 0-8.021333-8.192z" fill="#8a8a8a" p-id="18132"></path></svg> æ›´æ–°: 2025/4/9 <svg t="1724571760788" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6125" width="16" height="16"><path d="M204.8 0h477.866667l273.066666 273.066667v614.4c0 75.093333-61.44 136.533333-136.533333 136.533333H204.8c-75.093333 0-136.533333-61.44-136.533333-136.533333V136.533333C68.266667 61.44 129.706667 0 204.8 0z m307.2 607.573333l68.266667 191.146667c13.653333 27.306667 54.613333 27.306667 61.44 0l102.4-273.066667c6.826667-20.48 0-34.133333-20.48-40.96s-34.133333 0-40.96 13.653334l-68.266667 191.146666-68.266667-191.146666c-13.653333-27.306667-54.613333-27.306667-68.266666 0l-68.266667 191.146666-68.266667-191.146666c-6.826667-13.653333-27.306667-27.306667-47.786666-20.48s-27.306667 27.306667-20.48 47.786666l102.4 273.066667c13.653333 27.306667 54.613333 27.306667 61.44 0l75.093333-191.146667z" fill="#777777" p-id="6126"></path><path d="M682.666667 0l273.066666 273.066667h-204.8c-40.96 0-68.266667-27.306667-68.266666-68.266667V0z" fill="#E0E0E0" opacity=".619" p-id="6127"></path></svg> å­—æ•°: 0 å­— <svg t="1724572797268" class="icon" viewBox="0 0 1060 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15031" width="16" height="16"><path d="M556.726857 0.256A493.933714 493.933714 0 0 0 121.929143 258.998857L0 135.021714v350.390857h344.649143L196.205714 334.482286a406.820571 406.820571 0 1 1-15.908571 312.649143H68.937143A505.819429 505.819429 0 1 0 556.726857 0.256z m-79.542857 269.531429v274.907428l249.197714 150.966857 42.422857-70.070857-212.114285-129.389714V269.787429h-79.542857z" fill="#8a8a8a" p-id="15032"></path></svg> æ—¶é•¿: 0 åˆ†é’Ÿ </p></div><p>å¾®æœåŠ¡åœ¨é¢è¯•æ—¶è¢«é—®åˆ°çš„å†…å®¹ç›¸å¯¹è¾ƒå°‘ï¼Œå¸¸è§çš„é¢è¯•é¢˜å¦‚ä¸‹ï¼š</p><ul><li>SpringCloudæœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶ï¼Ÿåˆ†åˆ«æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ</li><li>æœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</li><li>Eurekaå’ŒNacosæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</li><li>Nacosçš„åˆ†çº§å­˜å‚¨æ¨¡å‹æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</li><li>Ribbonå’ŒSpringCloudLoadBalanceræœ‰ä»€ä¹ˆå·®å¼‚</li><li>ä»€ä¹ˆæ˜¯æœåŠ¡é›ªå´©ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</li><li>Hystixå’ŒSentinelæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ</li><li>é™æµçš„å¸¸è§ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯CAPç†è®ºå’ŒBASEæ€æƒ³ï¼Ÿ</li><li>é¡¹ç›®ä¸­ç¢°åˆ°è¿‡åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ</li><li>ATæ¨¡å¼å¦‚ä½•è§£å†³è„è¯»å’Œè„å†™é—®é¢˜çš„ï¼Ÿ</li><li>TCCæ¨¡å¼ä¸ATæ¨¡å¼å¯¹æ¯”ï¼Œæœ‰å“ªäº›ä¼˜ç¼ºç‚¹</li></ul><p>å¯ä»¥å‘ç°ï¼Œè¿™äº›é—®é¢˜éƒ½æ˜¯å›´ç»•ç€SpringCloudçš„ç›¸å…³ç»„ä»¶çš„ï¼Œå…¶ä¸­æœ‰äº›é—®é¢˜æˆ‘ä»¬åœ¨è¯¾å ‚ä¸Šå·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬é‡ç‚¹è®²è§£ä¸€äº›ä¹‹å‰æ²¡æœ‰è®²è¿‡çš„ï¼Œä¸åº•å±‚å®ç°æœ‰å…³çš„éƒ¨åˆ†ã€‚</p><p>è®²è§£çš„æ€è·¯è¿˜æ˜¯åŸºäºSpringCloudçš„ç»„ä»¶åˆ†ç±»æ¥è®²çš„ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li>åˆ†å¸ƒå¼äº‹åŠ¡</li><li>æ³¨å†Œä¸­å¿ƒ</li><li>è¿œç¨‹è°ƒç”¨</li><li>æœåŠ¡ä¿æŠ¤</li></ul><p>ç­‰å‡ ä¸ªæ–¹é¢</p><h2 id="_1ã€ğŸš€-åˆ†å¸ƒå¼äº‹åŠ¡" tabindex="-1">1ã€ğŸš€==<em>åˆ†å¸ƒå¼äº‹åŠ¡</em>== <a class="header-anchor" href="#_1ã€ğŸš€-åˆ†å¸ƒå¼äº‹åŠ¡" aria-label="Permalink to &quot;1ã€ğŸš€==*åˆ†å¸ƒå¼äº‹åŠ¡*==&quot;">â€‹</a></h2><p><strong>åˆ†å¸ƒå¼</strong>äº‹åŠ¡ï¼Œå°±æ˜¯æŒ‡<strong>ä¸æ˜¯åœ¨å•ä¸ªæœåŠ¡æˆ–å•ä¸ªæ•°æ®åº“æ¶æ„ä¸‹ï¼Œäº§ç”Ÿçš„äº‹åŠ¡</strong>ï¼Œä¾‹å¦‚ï¼š</p><ul><li>è·¨æ•°æ®æºçš„åˆ†å¸ƒå¼äº‹åŠ¡</li><li>è·¨æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡</li><li>ç»¼åˆæƒ…å†µ</li></ul><p>æˆ‘ä»¬ä¹‹å‰è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜æ˜¯ç›´æ¥ä½¿ç”¨<strong>Seataæ¡†æ¶çš„ATæ¨¡å¼</strong>ï¼Œä½†æ˜¯è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜çš„æ–¹æ¡ˆè¿œä¸æ­¢è¿™ä¸€ç§ã€‚</p><h3 id="_1-capå®šç†" tabindex="-1">ï¼ˆ1ï¼‰<mark>CAPå®šç†</mark> <a class="header-anchor" href="#_1-capå®šç†" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰==CAPå®šç†==&quot;">â€‹</a></h3><p><img src="/assets/image-20250406141336115.BCla2o5z.png" alt="image-20250406141336115" loading="lazy"></p><p>è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œéœ€è¦ä¸€äº›åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºç¡€çŸ¥è¯†ä½œä¸ºç†è®ºæŒ‡å¯¼ï¼Œé¦–å…ˆå°±æ˜¯CAPå®šç†ã€‚</p><p>1998å¹´ï¼ŒåŠ å·å¤§å­¦çš„è®¡ç®—æœºç§‘å­¦å®¶ Eric Brewer æå‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæœ‰ä¸‰ä¸ªæŒ‡æ ‡ï¼š</p><ul><li><strong>C</strong>onsistencyï¼ˆä¸€è‡´æ€§ï¼‰</li><li><strong>A</strong>vailabilityï¼ˆå¯ç”¨æ€§ï¼‰</li><li><strong>P</strong>artition tolerance ï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰</li></ul><p>å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå­—æ¯åˆ†åˆ«æ˜¯ <code>C</code>ã€<code>A</code>ã€<code>P</code>ã€‚Eric Brewerè®¤ä¸ºä»»ä½•åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„æ–¹æ¡ˆéƒ½ä¸å¯èƒ½åŒæ—¶æ»¡è¶³è¿™3ä¸ªç›®æ ‡ï¼Œè¿™ä¸ªç»“è®ºå°±å«åš CAP å®šç†ã€‚</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><h4 id="_1ä¸€è‡´æ€§" tabindex="-1">â‘ ä¸€è‡´æ€§ <a class="header-anchor" href="#_1ä¸€è‡´æ€§" aria-label="Permalink to &quot;â‘ ä¸€è‡´æ€§&quot;">â€‹</a></h4><p><code>Consistency</code>ï¼ˆä¸€è‡´æ€§ï¼‰ï¼šç”¨æˆ·è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä»»æ„èŠ‚ç‚¹ï¼Œå¾—åˆ°çš„æ•°æ®å¿…é¡»ä¸€è‡´ã€‚</p><p>æ¯”å¦‚ç°åœ¨åŒ…å«ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­çš„åˆå§‹æ•°æ®æ˜¯ä¸€è‡´çš„ï¼š</p><p><img src="/assets/image-20250406141513344.DZAFosSJ.png" alt="image-20250406141513344" loading="lazy"></p><p>å½“æˆ‘ä»¬ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®æ—¶ï¼Œä¸¤è€…çš„æ•°æ®äº§ç”Ÿäº†å·®å¼‚ï¼š</p><p><img src="/assets/image-20250406141527335.BoL8d2jP.png" alt="image-20250406141527335" loading="lazy"></p><p>è¦æƒ³ä¿ä½ä¸€è‡´æ€§ï¼Œå°±å¿…é¡»å®ç°node01 åˆ° node02çš„æ•°æ® åŒæ­¥ï¼š</p><p><img src="/assets/image-20250406141536765.D-Pay9n4.png" alt="image-20250406141536765" loading="lazy"></p><h4 id="_2å¯ç”¨æ€§" tabindex="-1">â‘¡å¯ç”¨æ€§ <a class="header-anchor" href="#_2å¯ç”¨æ€§" aria-label="Permalink to &quot;â‘¡å¯ç”¨æ€§&quot;">â€‹</a></h4><p><img src="/assets/image-20250406141744956.KpTCVazh.png" alt="image-20250406141744956" loading="lazy"></p><p>Availability ï¼ˆå¯ç”¨æ€§ï¼‰ï¼š<strong>ç”¨æˆ·è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œè¯»æˆ–å†™æ“ä½œæ€»èƒ½æˆåŠŸã€‚</strong></p><p>åªèƒ½è¯»ä¸èƒ½å†™ï¼Œæˆ–è€…åªèƒ½å†™ä¸èƒ½è¯»ï¼Œæˆ–è€…ä¸¤è€…éƒ½ä¸èƒ½æ‰§è¡Œï¼Œå°±è¯´æ˜<strong>ç³»ç»Ÿå¼±å¯ç”¨æˆ–ä¸å¯ç”¨</strong>ã€‚</p><h4 id="_3åˆ†åŒºå®¹é”™" tabindex="-1">â‘¢åˆ†åŒºå®¹é”™ <a class="header-anchor" href="#_3åˆ†åŒºå®¹é”™" aria-label="Permalink to &quot;â‘¢åˆ†åŒºå®¹é”™&quot;">â€‹</a></h4><p><strong><code>Partition</code>ï¼Œå°±æ˜¯åˆ†åŒº</strong>ï¼Œå°±æ˜¯å½“åˆ†å¸ƒå¼ç³»ç»ŸèŠ‚ç‚¹ä¹‹é—´å‡ºç°<strong>ç½‘ç»œæ•…éšœå¯¼è‡´èŠ‚ç‚¹ä¹‹é—´æ— æ³•é€šä¿¡</strong>çš„æƒ…å†µï¼š</p><p><img src="/assets/image-20250406142044575.DJ0n1cWm.png" alt="image-20250406142044575" loading="lazy"></p><p>å¦‚ä¸Šå›¾ï¼Œnode01å’Œnode02ä¹‹é—´ç½‘å…³ç•…é€šï¼Œä½†æ˜¯ä¸node03ä¹‹é—´ç½‘ç»œæ–­å¼€ã€‚äºæ˜¯node03æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œåˆ†åŒºï¼›node01å’Œnode02åœ¨ä¸€ä¸ªç½‘ç»œåˆ†åŒºã€‚</p><p><strong><code>Tolerance</code>ï¼Œå°±æ˜¯å®¹é”™</strong>ï¼Œ<strong>å³ä¾¿æ˜¯ç³»ç»Ÿå‡ºç°ç½‘ç»œåˆ†åŒºï¼Œæ•´ä¸ªç³»ç»Ÿä¹Ÿè¦æŒç»­å¯¹å¤–æä¾›æœåŠ¡</strong>ã€‚</p><h4 id="_4çŸ›ç›¾" tabindex="-1">â‘£<mark>çŸ›ç›¾</mark> <a class="header-anchor" href="#_4çŸ›ç›¾" aria-label="Permalink to &quot;â‘£==çŸ›ç›¾==&quot;">â€‹</a></h4><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ<strong>ç½‘ç»œä¸èƒ½100%ä¿è¯ç•…é€š</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>ç½‘ç»œåˆ†åŒºçš„æƒ…å†µä¸€å®šä¼šå­˜åœ¨</strong>ã€‚è€Œæˆ‘ä»¬çš„ç³»ç»Ÿå¿…é¡»è¦æŒç»­è¿è¡Œï¼Œå¯¹å¤–æä¾›æœåŠ¡ã€‚æ‰€ä»¥åˆ†åŒºå®¹é”™æ€§ï¼ˆ<code>P</code>ï¼‰æ˜¯ç¡¬æ€§æŒ‡æ ‡ï¼Œæ‰€æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½è¦æ»¡è¶³ã€‚è€Œåœ¨è®¾è®¡åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶**è¦å–èˆçš„å°±æ˜¯ä¸€è‡´æ€§ï¼ˆ<code>C</code>ï¼‰å’Œå¯ç”¨æ€§ï¼ˆ<code>A</code>ï¼‰**äº†ã€‚</p><p>å‡å¦‚ç°åœ¨å‡ºç°äº†ç½‘ç»œåˆ†åŒºï¼Œå¦‚å›¾ï¼š</p><p><img src="/assets/image-20250406142044575.DJ0n1cWm.png" alt="image-20250406142136194" loading="lazy"></p><p>ç”±äºç½‘ç»œæ•…éšœï¼Œå½“æˆ‘ä»¬æŠŠæ•°æ®å†™å…¥node01æ—¶ï¼Œå¯ä»¥ä¸node02å®Œæˆæ•°æ®åŒæ­¥ï¼Œä½†æ˜¯æ— æ³•åŒæ­¥ç»™node03ã€‚ç°åœ¨æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p><ul><li><strong>å…è®¸ç”¨æˆ·ä»»æ„è¯»å†™ï¼Œä¿è¯å¯ç”¨æ€§ã€‚<strong>ä½†ç”±äºnode03æ— æ³•å®ŒæˆåŒæ­¥ï¼Œå°±</strong>ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µ</strong>ã€‚æ»¡è¶³AP</li><li><strong>ä¸å…è®¸ç”¨æˆ·å†™ï¼Œå¯ä»¥è¯»</strong>ï¼Œç›´åˆ°ç½‘ç»œæ¢å¤ï¼Œåˆ†åŒºæ¶ˆå¤±ã€‚è¿™æ ·å°±ç¡®ä¿äº†ä¸€è‡´æ€§ï¼Œ<strong>ä½†ç‰ºç‰²äº†å¯ç”¨æ€§</strong>ã€‚æ»¡è¶³CP</li></ul><p>å¯è§ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œ<code>A</code>å’Œ<code>C</code>ä¹‹é—´åªèƒ½æ»¡è¶³ä¸€ä¸ªã€‚</p><h3 id="_2-baseç†è®º" tabindex="-1">ï¼ˆ2ï¼‰BASEç†è®º <a class="header-anchor" href="#_2-baseç†è®º" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰BASEç†è®º&quot;">â€‹</a></h3><p>æ—¢ç„¶åˆ†å¸ƒå¼ç³»ç»Ÿè¦éµå¾ªCAPå®šç†ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘åˆ°åº•æ˜¯è¯¥ç‰ºç‰²ä¸€è‡´æ€§è¿˜æ˜¯å¯ç”¨æ€§å‘¢ï¼Ÿå¦‚æœç‰ºç‰²äº†ä¸€è‡´æ€§ï¼Œå‡ºç°æ•°æ®ä¸ä¸€è‡´è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ</p><p><img src="/assets/image-20250406142548040.CJ4zi46R.png" alt="image-20250406142548040" loading="lazy"></p><p>äººä»¬åœ¨æ€»ç»“ç³»ç»Ÿè®¾è®¡ç»éªŒæ—¶ï¼Œæœ€ç»ˆå¾—åˆ°äº†ä¸€äº›å¿ƒå¾—ï¼š</p><ul><li><strong>B</strong>asically <strong>A</strong>vailable <strong>ï¼ˆåŸºæœ¬å¯ç”¨ï¼‰</strong>ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœæ—¶ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œå³ä¿è¯æ ¸å¿ƒå¯ç”¨ã€‚</li><li><strong>S</strong>oft State**ï¼ˆè½¯çŠ¶æ€ï¼‰ï¼š**åœ¨ä¸€å®šæ—¶é—´å†…ï¼Œå…è®¸å‡ºç°ä¸­é—´çŠ¶æ€ï¼Œæ¯”å¦‚ä¸´æ—¶çš„ä¸ä¸€è‡´çŠ¶æ€ã€‚</li><li><strong>Ev</strong>entually Consistent**ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰**ï¼šè™½ç„¶æ— æ³•ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä½†æ˜¯åœ¨è½¯çŠ¶æ€ç»“æŸåï¼Œæœ€ç»ˆè¾¾åˆ°æ•°æ®ä¸€è‡´ã€‚</li></ul><p>ä»¥ä¸Šå°±æ˜¯BASEç†è®ºã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒBASEç†è®ºå°±æ˜¯ä¸€ç§å–èˆçš„æ–¹æ¡ˆï¼Œä¸å†è¿½æ±‚å®Œç¾ï¼Œè€Œæ˜¯æœ€ç»ˆè¾¾æˆç›®æ ‡ã€‚å› æ­¤è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€æƒ³ä¹Ÿæ˜¯è¿™æ ·ï¼Œæœ‰ä¸¤ä¸ªæ–¹å‘ï¼š</p><ul><li><strong>APæ€æƒ³</strong>ï¼š<strong>å„ä¸ªå­äº‹åŠ¡åˆ†åˆ«æ‰§è¡Œå’Œæäº¤ï¼Œæ— éœ€é”å®šæ•°æ®ã€‚å…è®¸å‡ºç°ç»“æœä¸ä¸€è‡´ï¼Œ<strong>ç„¶åé‡‡ç”¨å¼¥è¡¥æªæ–½æ¢å¤ï¼Œå®ç°æœ€ç»ˆä¸€è‡´å³å¯ã€‚ä¾‹å¦‚==</strong><code>AT</code>æ¨¡å¼</strong>==å°±æ˜¯å¦‚æ­¤</li><li><strong>CPæ€æƒ³</strong>ï¼š<strong>å„ä¸ªå­äº‹åŠ¡æ‰§è¡Œåä¸è¦æäº¤ï¼Œè€Œæ˜¯ç­‰å¾…å½¼æ­¤ç»“æœï¼Œç„¶ååŒæ—¶æäº¤æˆ–å›æ»šã€‚<strong>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é”å®šèµ„æºï¼Œä¸å…è®¸å…¶å®ƒäººè®¿é—®ï¼Œæ•°æ®å¤„äºä¸å¯ç”¨çŠ¶æ€ï¼Œä½†èƒ½ä¿è¯ä¸€è‡´æ€§ã€‚ä¾‹å¦‚</strong><mark><code>XA</code>æ¨¡å¼</mark></strong></li></ul><h3 id="_3-atæ¨¡å¼çš„è„å†™é—®é¢˜" tabindex="-1">ï¼ˆ3ï¼‰ATæ¨¡å¼çš„<mark>è„å†™</mark>é—®é¢˜ <a class="header-anchor" href="#_3-atæ¨¡å¼çš„è„å†™é—®é¢˜" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰ATæ¨¡å¼çš„==è„å†™==é—®é¢˜&quot;">â€‹</a></h3><h4 id="_1atæ¨¡å¼çš„æµç¨‹" tabindex="-1">â‘ ATæ¨¡å¼çš„æµç¨‹ <a class="header-anchor" href="#_1atæ¨¡å¼çš„æµç¨‹" aria-label="Permalink to &quot;â‘ ATæ¨¡å¼çš„æµç¨‹&quot;">â€‹</a></h4><p><img src="/assets/image-20250406142945788.BHN7Rg1I.png" alt="image-20250406142945788" loading="lazy"></p><p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹<strong>ATæ¨¡å¼çš„æµç¨‹</strong>ï¼ŒATæ¨¡å¼ä¹Ÿåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><p>ç¬¬ä¸€é˜¶æ®µæ˜¯<strong>è®°å½•æ•°æ®å¿«ç…§ï¼Œæ‰§è¡Œå¹¶æäº¤äº‹åŠ¡</strong>ï¼š</p><p><img src="/assets/1743866077032-71.W99-gnX2.png" alt="img" loading="lazy"></p><p>ç¬¬äºŒé˜¶æ®µæ ¹æ®é˜¶æ®µä¸€çš„ç»“æœæ¥åˆ¤æ–­ï¼š</p><ul><li>å¦‚æœ<strong>æ¯ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡éƒ½æˆåŠŸ</strong>ï¼Œåˆ™äº‹åŠ¡å·²ç»ç»“æŸï¼ˆå› ä¸ºé˜¶æ®µä¸€å·²ç»æäº¤ï¼‰ï¼Œå› æ­¤<strong>åˆ é™¤é˜¶æ®µä¸€çš„å¿«ç…§</strong>å³å¯</li><li>å¦‚æœ<strong>æœ‰ä»»æ„åˆ†æ”¯äº‹åŠ¡å¤±è´¥</strong>ï¼Œ<strong>åˆ™éœ€è¦æ ¹æ®å¿«ç…§æ¢å¤åˆ°æ›´æ–°å‰æ•°æ®ã€‚ç„¶ååˆ é™¤å¿«ç…§</strong></li></ul><p><img src="/assets/1743866077029-1.CpeOgJ06.png" alt="img" loading="lazy"></p><h4 id="_2è„å†™é—®é¢˜" tabindex="-1">â‘¡<mark>è„å†™é—®é¢˜</mark> <a class="header-anchor" href="#_2è„å†™é—®é¢˜" aria-label="Permalink to &quot;â‘¡==è„å†™é—®é¢˜==&quot;">â€‹</a></h4><p>è¿™ç§æ¨¡å¼åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ˆ99%ï¼‰å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¸è¿‡åœ¨æç«¯æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯<strong>å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ATæ¨¡å¼çš„åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæœ‰å¯èƒ½å‡ºç°<mark>è„å†™é—®é¢˜</mark></strong>ï¼Œå¦‚å›¾ï¼š</p><p><img src="/assets/1743866077030-2.C3bCy4ur.png" alt="img" loading="lazy"></p><p>è§£å†³æ€è·¯å°±æ˜¯å¼•å…¥äº†<strong>å…¨å±€é”çš„æ¦‚å¿µ</strong>ã€‚åœ¨<strong>é‡Šæ”¾DBé”ä¹‹å‰ï¼Œå…ˆæ‹¿åˆ°å…¨å±€é”</strong>ã€‚é¿å…åŒä¸€æ—¶åˆ»æœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ¥æ“ä½œå½“å‰æ•°æ®ã€‚</p><p><img src="/assets/image-20250406144853214.CsyL-Ame.png" alt="image-20250406144853214" loading="lazy"></p><p><mark><strong>æ³¨æ„ï¼š</strong></mark></p><ul><li><p>å¿«ç…§ä¸ä¼šæ¢å¤æ‰€æœ‰å­—æ®µï¼Œåªä¼šæ¢å¤ä½ ä¿®æ”¹çš„ï¼ˆæ¯”å¦‚è¿™é‡Œçš„moneyï¼‰ï¼Œ<strong>å…¨å±€é”ä¹Ÿæ˜¯åªæŒæœ‰æŸä¸€ä¸ªåˆ—çš„</strong>ï¼Œ<strong>ç²¾ç»†åº¦å¾ˆé«˜</strong></p></li><li><p>å…¨å±€é”ï¼Œè®°å½•äº†äº‹åŠ¡æ“ä½œæŸå¼ è¡¨çš„æŸè¡Œæ•°æ®ï¼Œè¯¥è¡Œæ•°æ®åªèƒ½ç”±è¿™ä¸ªäº‹åŠ¡æ“ä½œã€‚å…¨å±€é”å¦‚æœæœªèƒ½è·å–æˆåŠŸï¼Œé»˜è®¤é‡è¯•30æ¬¡ï¼Œæ¯æ¬¡ç­‰10æ¯«ç§’ï¼Œä¸€å…±300æ¯«ç§’ã€‚<strong>è€ŒDBé”çš„ç­‰å¾…å¾€å¾€æ¯”è¾ƒé•¿</strong>ã€‚</p></li><li><p>å’ŒXAæ¨¡å¼ä¸å°±ä¸€æ ·äº†ï¼Ÿä¸éƒ½èµ„æºé”å®šäº†ï¼Ÿ</p><ul><li>ç­”ï¼š<strong>å…¨å±€é”æ˜¯ç”±TCç®¡ç†ï¼Œè€ŒDBé”æ˜¯ç”±æ•°æ®åº“ç®¡ç†ï¼Œé”çš„ç²’åº¦æ˜¯ä¸ä¸€æ ·çš„</strong>ã€‚ <ul><li>DBé”é”ä½çš„è¡Œï¼Œå…¶ä»–äº‹åŠ¡ä¸å¯ä»¥å¢åˆ æ”¹æŸ¥</li><li>è€Œå…¨å±€é”ï¼Œ<strong>å…¶ä»–æ²¡æœ‰è¢«seataç®¡ç†çš„äº‹åŠ¡ï¼Œä»ç„¶å¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥</strong>ï¼Œå¦‚æœå¯¹åŒä¸€è¡Œçš„å…¶ä»–å­—æ®µåšå¤„ç†ï¼Œä¾ç„¶å¯ä»¥ã€‚è¿™æ ·çš„<strong>æ€§èƒ½æ¯”XAæ¨¡å¼é«˜</strong>ã€‚</li></ul></li></ul></li><li><p><strong>æç«¯æƒ…å†µ</strong>ï¼šä¸Šè¿°çš„éš”ç¦»ä¾ç„¶ä¸æ˜¯å¾ˆå½»åº•ï¼Œ<strong>å…¶ä»–æœªè¢«seataç®¡ç†çš„äº‹åŠ¡å¦‚æœä¹Ÿå¯¹åŒä¸€è¡Œæ•°æ®è¿›è¡Œäº†ä¿®æ”¹</strong>ï¼Œä¹Ÿä¼šä¸¢å¤±æ›´æ–°ï¼Ÿ</p><ul><li>è§£å†³åŠæ³•-<mark><strong>ATæ¨¡å¼çš„å†™éš”ç¦»</strong></mark></li><li>seataåœ¨ä¿å­˜å¿«ç…§æ—¶ï¼Œ<strong>ä¿å­˜äº†ä¸¤ä»½</strong>ï¼Œ<strong>ä¸€ä»½æ˜¯æ›´æ–°å‰çš„æ•°æ®ç”¨äºæ¢å¤æ•°æ®ï¼Œä¸€ä»½æ˜¯æ›´æ–°åçš„æ•°æ®</strong>ï¼Œç”¨äºåˆ¤æ–­äº‹åŠ¡ä¸€åœ¨é˜¶æ®µ1å’Œé˜¶æ®µ2è¿™ä¸ªè¿‡ç¨‹ä¸­æ˜¯å¦æœ‰å…¶ä»–äº‹åŠ¡æ“ä½œè¿‡è¿™ä¸ªæ•°æ®ï¼Œ<strong>è‹¥ç»è¿‡å¯¹æ¯”å‘ç°ä¸è‡ªå·±æ›´æ–°åçš„æ•°æ®ä¸åŒï¼Œåˆ™seataæ— æ³•å»å›æ»šäº†</strong>ï¼Œè®°å½•å¼‚å¸¸ï¼Œç”±äººå·¥ä»‹å…¥ã€‚</li></ul></li></ul><h4 id="_3atæ¨¡å¼çš„å†™éš”ç¦»" tabindex="-1">â‘¢ATæ¨¡å¼çš„<mark>å†™éš”ç¦»</mark> <a class="header-anchor" href="#_3atæ¨¡å¼çš„å†™éš”ç¦»" aria-label="Permalink to &quot;â‘¢ATæ¨¡å¼çš„==å†™éš”ç¦»==&quot;">â€‹</a></h4><p>å¦‚æœæ˜¯**<mark>éseataç®¡ç†çš„å…¨å±€äº‹åŠ¡</mark>å¯¹moneyä¿®æ”¹** (å…¶å®<strong>ä¸šåŠ¡ä¸Šå°±åº”è¯¥é¿å…è¿™ç±»æƒ…å†µå‡ºç°</strong>)</p><p><img src="/assets/image-20250406144351427.GiTRUlEx.png" alt="image-20250406144351427" loading="lazy"></p><p>å…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://seata.io/zh-cn/docs/dev/mode/at-mode.html" target="_blank" rel="noreferrer">https://seata.io/zh-cn/docs/dev/mode/at-mode.html</a></p><h3 id="_4-tccæ¨¡å¼" tabindex="-1">ï¼ˆ4ï¼‰<mark>TCCæ¨¡å¼</mark> <a class="header-anchor" href="#_4-tccæ¨¡å¼" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰==TCCæ¨¡å¼==&quot;">â€‹</a></h3><p>TCCæ¨¡å¼ä¸ATæ¨¡å¼éå¸¸ç›¸ä¼¼ï¼Œ<strong>æ¯é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹äº‹åŠ¡</strong>ï¼Œä¸åŒçš„æ˜¯TCC<strong>é€šè¿‡äººå·¥ç¼–ç æ¥å®ç°æ•°æ®æ¢å¤</strong>ã€‚éœ€è¦å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>try</code>ï¼š<strong>èµ„æºçš„æ£€æµ‹å’Œé¢„ç•™</strong>ï¼›</li><li><code>confirm</code>ï¼š<strong>å®Œæˆèµ„æºæ“ä½œä¸šåŠ¡</strong>ï¼›è¦æ±‚ <code>try</code> æˆåŠŸ <code>confirm</code> ä¸€å®šè¦èƒ½æˆåŠŸã€‚</li><li><code>cancel</code>ï¼š<strong>é¢„ç•™èµ„æºé‡Šæ”¾</strong>ï¼Œå¯ä»¥ç†è§£ä¸ºtryçš„åå‘æ“ä½œã€‚</li></ul><h4 id="_1æµç¨‹åˆ†æ" tabindex="-1">â‘ æµç¨‹åˆ†æ <a class="header-anchor" href="#_1æµç¨‹åˆ†æ" aria-label="Permalink to &quot;â‘ æµç¨‹åˆ†æ&quot;">â€‹</a></h4><p>ä¸¾ä¾‹ï¼Œä¸€ä¸ªæ‰£å‡ç”¨æˆ·ä½™é¢çš„ä¸šåŠ¡ã€‚å‡è®¾è´¦æˆ·AåŸæ¥ä½™é¢æ˜¯100ï¼Œéœ€è¦ä½™é¢æ‰£å‡30å…ƒã€‚</p><p><img src="/assets/image-20250406150553368.BRG-czfw.png" alt="image-20250406150553368" loading="lazy"></p><p><strong>é˜¶æ®µä¸€ï¼ˆ Try ï¼‰</strong>ï¼šæ£€æŸ¥ä½™é¢æ˜¯å¦å……è¶³ï¼Œå¦‚æœå……è¶³åˆ™å†»ç»“é‡‘é¢å¢åŠ 30å…ƒï¼Œå¯ç”¨ä½™é¢æ‰£é™¤30</p><p>åˆå§‹ä½™é¢ï¼š</p><p><img src="/assets/1743866077030-4.7PJosZ80.png" alt="img" loading="lazy"></p><p>ä½™é¢å……è¶³ï¼Œå¯ä»¥å†»ç»“ï¼š</p><p><img src="/assets/1743866077030-5.Ddriy0Tl.png" alt="img" loading="lazy"></p><p>æ­¤æ—¶ï¼Œæ€»é‡‘é¢ = å†»ç»“é‡‘é¢ + å¯ç”¨é‡‘é¢ï¼Œæ•°é‡ä¾ç„¶æ˜¯100ä¸å˜ã€‚äº‹åŠ¡ç›´æ¥æäº¤æ— éœ€ç­‰å¾…å…¶å®ƒäº‹åŠ¡ã€‚</p><p><strong>é˜¶æ®µäºŒï¼ˆConfirm)</strong>ï¼šå‡å¦‚è¦æäº¤ï¼ˆConfirmï¼‰ï¼Œä¹‹å‰å¯ç”¨é‡‘é¢å·²ç»æ‰£å‡ï¼Œå¹¶è½¬ç§»åˆ°å†»ç»“é‡‘é¢ã€‚å› æ­¤å¯ç”¨é‡‘é¢ä¸å˜ï¼Œç›´æ¥å†»ç»“é‡‘é¢æ‰£å‡30å³å¯ï¼š</p><p><img src="/assets/1743866077030-6.BepT4XlH.png" alt="img" loading="lazy"></p><p>æ­¤æ—¶ï¼Œæ€»é‡‘é¢ = å†»ç»“é‡‘é¢ + å¯ç”¨é‡‘é¢ = 0 + 70 = 70å…ƒ</p><p><strong>é˜¶æ®µäºŒ(Canncel)</strong>ï¼šå¦‚æœè¦å›æ»šï¼ˆCancelï¼‰ï¼Œåˆ™é‡Šæ”¾ä¹‹å‰å†»ç»“çš„é‡‘é¢ï¼Œä¹Ÿå°±æ˜¯å†»ç»“é‡‘é¢æ‰£å‡30ï¼Œå¯ç”¨ä½™é¢å¢åŠ 30</p><p><img src="/assets/1743866077030-4.7PJosZ80.png" alt="img" loading="lazy"></p><h4 id="_2tccçš„å·¥ä½œæ¨¡å‹" tabindex="-1">â‘¡TCCçš„å·¥ä½œæ¨¡å‹<img src="/assets/image-20250406150657887.Bqh8jYA3.png" alt="image-20250406150657887" loading="lazy"> <a class="header-anchor" href="#_2tccçš„å·¥ä½œæ¨¡å‹" aria-label="Permalink to &quot;â‘¡TCCçš„å·¥ä½œæ¨¡å‹![image-20250406150657887](./å¾®æœåŠ¡SpringCloud-Local.assets/image-20250406150657887.png)&quot;">â€‹</a></h4><h4 id="_3äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š" tabindex="-1">â‘¢äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š <a class="header-anchor" href="#_3äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š" aria-label="Permalink to &quot;â‘¢äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š&quot;">â€‹</a></h4><p>å‡å¦‚ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡ä¸­åŒ…å«ä¸¤ä¸ªåˆ†æ”¯äº‹åŠ¡ï¼Œtryé˜¶æ®µï¼Œ<strong>ä¸€ä¸ªåˆ†æ”¯æˆåŠŸæ‰§è¡Œ</strong>ï¼Œå¦ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡==<strong>é˜»å¡</strong>==ï¼š</p><p><img src="/assets/1743866077030-8.pewBs0vf.png" alt="img" loading="lazy"></p><p>å¦‚æœ<strong>é˜»å¡æ—¶é—´å¤ªé•¿</strong>ï¼Œå¯èƒ½å¯¼è‡´<strong>å…¨å±€äº‹åŠ¡è¶…æ—¶è€Œè§¦å‘äºŒé˜¶æ®µçš„<code>cancel</code>æ“ä½œ</strong>ã€‚<strong><mark>ä¸¤ä¸ªåˆ†æ”¯äº‹åŠ¡éƒ½ä¼šæ‰§è¡Œcancelæ“ä½œ</mark></strong>ï¼š</p><p><img src="/assets/1743866077030-9.DdSn9dKY.png" alt="img" loading="lazy"></p><p>è¦çŸ¥é“ï¼Œ<strong>å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯æ˜¯æœªæ‰§è¡Œ<code>try</code>æ“ä½œçš„ï¼Œç›´æ¥æ‰§è¡Œäº†<code>cancel</code>æ“ä½œ</strong>ï¼Œåè€Œä¼šå¯¼è‡´æ•°æ®é”™è¯¯ã€‚å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œ<strong>å°½ç®¡<code>cancel</code>æ–¹æ³•è¦æ‰§è¡Œï¼Œä½†å…¶ä¸­ä¸èƒ½åšä»»ä½•å›æ»šæ“ä½œ</strong>ï¼Œè¿™å°±æ˜¯==<strong>ç©ºå›æ»š</strong>==ã€‚</p><p>å¯¹äºæ•´ä¸ªç©ºå›æ»šçš„åˆ†æ”¯äº‹åŠ¡ï¼Œ<strong>å°†æ¥tryæ–¹æ³•é˜»å¡ç»“æŸä¾ç„¶ä¼šæ‰§è¡Œ</strong>ã€‚ä½†æ˜¯æ•´ä¸ªå…¨å±€äº‹åŠ¡å…¶å®å·²ç»ç»“æŸäº†ï¼Œå› æ­¤æ°¸è¿œä¸ä¼šå†æœ‰confirmæˆ–cancelï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªäº‹åŠ¡æ‰§è¡Œäº†ä¸€åŠï¼Œå¤„äº==<strong>æ‚¬æŒ‚çŠ¶æ€</strong>==ï¼Œè¿™å°±æ˜¯<strong>ä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜</strong>ã€‚</p><p>ä»¥ä¸Šé—®é¢˜éƒ½éœ€è¦æˆ‘ä»¬åœ¨<strong>ç¼–å†™tryã€cancelæ–¹æ³•æ—¶å¤„ç†</strong>ã€‚</p><h4 id="_4åˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„ç©ºå›æ»šä¸ä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜åˆ†æ" tabindex="-1">â‘£åˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„ç©ºå›æ»šä¸ä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜åˆ†æ <a class="header-anchor" href="#_4åˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„ç©ºå›æ»šä¸ä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜åˆ†æ" aria-label="Permalink to &quot;â‘£åˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„ç©ºå›æ»šä¸ä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜åˆ†æ&quot;">â€‹</a></h4><h5 id="é—®é¢˜æœ¬è´¨" tabindex="-1">é—®é¢˜æœ¬è´¨ <a class="header-anchor" href="#é—®é¢˜æœ¬è´¨" aria-label="Permalink to &quot;é—®é¢˜æœ¬è´¨&quot;">â€‹</a></h5><p>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ä¸‹ï¼ˆå¦‚Seataçš„SAGAæˆ–TCCæ¨¡å¼ï¼‰ï¼Œç©ºå›æ»šå’Œä¸šåŠ¡æ‚¬æŒ‚æ˜¯ä¸¤ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„é—®é¢˜ï¼š</p><h5 id="ç©ºå›æ»š-empty-rollback" tabindex="-1">ç©ºå›æ»šï¼ˆEmpty Rollbackï¼‰ <a class="header-anchor" href="#ç©ºå›æ»š-empty-rollback" aria-label="Permalink to &quot;ç©ºå›æ»šï¼ˆEmpty Rollbackï¼‰&quot;">â€‹</a></h5><ul><li><strong>å®šä¹‰</strong>ï¼šå½“åˆ†æ”¯äº‹åŠ¡çš„<code>try</code>æ“ä½œæœªæ‰§è¡Œï¼Œä½†<code>cancel</code>æ“ä½œå´è¢«è§¦å‘æ‰§è¡Œçš„æƒ…å†µ</li><li><strong>äº§ç”ŸåŸå› </strong>ï¼šå…¨å±€äº‹åŠ¡è¶…æ—¶æˆ–å…¶å®ƒåˆ†æ”¯äº‹åŠ¡å¤±è´¥ï¼Œè§¦å‘å…¨å±€å›æ»šï¼Œè€Œæ­¤æ—¶æŸäº›åˆ†æ”¯çš„<code>try</code>å°šæœªæ‰§è¡Œ</li></ul><h5 id="ä¸šåŠ¡æ‚¬æŒ‚-business-hang" tabindex="-1">ä¸šåŠ¡æ‚¬æŒ‚ï¼ˆBusiness Hangï¼‰ <a class="header-anchor" href="#ä¸šåŠ¡æ‚¬æŒ‚-business-hang" aria-label="Permalink to &quot;ä¸šåŠ¡æ‚¬æŒ‚ï¼ˆBusiness Hangï¼‰&quot;">â€‹</a></h5><ul><li><strong>å®šä¹‰</strong>ï¼š<code>try</code>æ“ä½œåœ¨å…¨å±€äº‹åŠ¡ç»“æŸåæ‰è¢«æ‰§è¡Œï¼Œå¯¼è‡´äº‹åŠ¡&quot;åŠé€”è€ŒåºŸ&quot;çš„çŠ¶æ€</li><li><strong>äº§ç”ŸåŸå› </strong>ï¼š<code>try</code>æ“ä½œå› ç½‘ç»œå»¶è¿Ÿç­‰åŸå› è¢«é˜»å¡ï¼Œåœ¨å…¨å±€äº‹åŠ¡ç»“æŸåæ‰åˆ°è¾¾æœåŠ¡ç«¯</li></ul><h5 id="ä»£ç ç¤ºä¾‹ä¸è§£å†³æ–¹æ¡ˆ" tabindex="-1">ä»£ç ç¤ºä¾‹ä¸è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#ä»£ç ç¤ºä¾‹ä¸è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;ä»£ç ç¤ºä¾‹ä¸è§£å†³æ–¹æ¡ˆ&quot;">â€‹</a></h5><h6 id="å…¸å‹é—®é¢˜åœºæ™¯" tabindex="-1">å…¸å‹é—®é¢˜åœºæ™¯ <a class="header-anchor" href="#å…¸å‹é—®é¢˜åœºæ™¯" aria-label="Permalink to &quot;å…¸å‹é—®é¢˜åœºæ™¯&quot;">â€‹</a></h6><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯çš„å®ç°æ–¹å¼ - å¯èƒ½äº§ç”Ÿç©ºå›æ»šå’Œä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccountService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryDeduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">xid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, BigDecimal </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ‰£å‡ä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        accountDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, amount);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è®°å½•äº‹åŠ¡æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid, userId, amount);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancelDeduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">xid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, BigDecimal </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç›´æ¥å›æ»šä½™é¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        accountDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, amount);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // åˆ é™¤äº‹åŠ¡æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h6 id="æ­£ç¡®è§£å†³æ–¹æ¡ˆ" tabindex="-1">æ­£ç¡®è§£å†³æ–¹æ¡ˆ <a class="header-anchor" href="#æ­£ç¡®è§£å†³æ–¹æ¡ˆ" aria-label="Permalink to &quot;æ­£ç¡®è§£å†³æ–¹æ¡ˆ&quot;">â€‹</a></h6><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccountService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tryDeduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">xid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, BigDecimal </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. é˜²æ­¢ä¸šåŠ¡æ‚¬æŒ‚ï¼šæ£€æŸ¥cancelæ˜¯å¦å·²æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsCancelLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸å†æ‰§è¡Œtryæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. å¹‚ç­‰æ€§æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsTryLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å®é™…ä¸šåŠ¡æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        accountDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, amount);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addTryLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid, userId, amount);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancelDeduct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">xid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, BigDecimal </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. ç©ºå›æ»šå¤„ç†ï¼šæ£€æŸ¥tryæ˜¯å¦å·²æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsTryLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // è®°å½•ç©ºå›æ»šæ—¥å¿—ï¼Œé˜²æ­¢åç»­tryæ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addCancelLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. å¹‚ç­‰æ€§æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsCancelLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å®é™…å›æ»šæ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        accountDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, amount);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        txLogDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addCancelLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xid);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="å…³é”®è§£å†³æªæ–½" tabindex="-1">å…³é”®è§£å†³æªæ–½ <a class="header-anchor" href="#å…³é”®è§£å†³æªæ–½" aria-label="Permalink to &quot;å…³é”®è§£å†³æªæ–½&quot;">â€‹</a></h5><ol><li><p><strong>ç©ºå›æ»šé˜²å¾¡</strong>ï¼š</p><ul><li>åœ¨<code>cancel</code>æ–¹æ³•ä¸­å…ˆæ£€æŸ¥<code>try</code>æ˜¯å¦å·²æ‰§è¡Œ</li><li>å¦‚æœªæ‰§è¡Œï¼Œåˆ™è®°å½•ç©ºå›æ»šæ ‡è®°ï¼Œé¿å…åç»­çœŸæ­£æ‰§è¡Œæ•°æ®å›æ»š</li></ul></li><li><p><strong>ä¸šåŠ¡æ‚¬æŒ‚é¢„é˜²</strong>ï¼š</p><ul><li>åœ¨<code>try</code>æ–¹æ³•ä¸­æ£€æŸ¥æ˜¯å¦å·²æœ‰ç©ºå›æ»šè®°å½•</li><li>å¦‚å·²æœ‰ç©ºå›æ»šè®°å½•ï¼Œåˆ™ä¸å†æ‰§è¡Œä¸šåŠ¡æ“ä½œ</li></ul></li><li><p><strong>å¹‚ç­‰æ€§ä¿è¯</strong>ï¼š</p><ul><li>ä¸¤ç§æ–¹æ³•éƒ½éœ€è¦å®ç°å¹‚ç­‰æ€§</li><li>é€šè¿‡äº‹åŠ¡æ—¥å¿—è¡¨è®°å½•å„é˜¶æ®µçŠ¶æ€</li></ul></li><li><p><strong>äº‹åŠ¡æ—¥å¿—è¡¨è®¾è®¡</strong>ï¼š</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tx_log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  amount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  try_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TINYINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 0æœªæ‰§è¡Œï¼Œ1å·²æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cancel_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TINYINT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 0æœªæ‰§è¡Œï¼Œ1å·²æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  create_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  update_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li></ol><p>é€šè¿‡ä»¥ä¸Šæªæ–½ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…åˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„ç©ºå›æ»šå’Œä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><h4 id="_3æ€»ç»“" tabindex="-1">â‘¢æ€»ç»“ <a class="header-anchor" href="#_3æ€»ç»“" aria-label="Permalink to &quot;â‘¢æ€»ç»“&quot;">â€‹</a></h4><p><img src="/assets/image-20250406151352899.CXztn1qL.png" alt="image-20250406151352899" loading="lazy"></p><p>TCCæ¨¡å¼çš„æ¯ä¸ªé˜¶æ®µæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</p><ul><li>Tryï¼šèµ„æºæ£€æŸ¥å’Œé¢„ç•™</li><li>Confirmï¼šä¸šåŠ¡æ‰§è¡Œå’Œæäº¤</li><li>Cancelï¼šé¢„ç•™èµ„æºçš„é‡Šæ”¾</li></ul><p>**<mark>TCCçš„ä¼˜ç‚¹</mark>**æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ä¸€é˜¶æ®µå®Œæˆç›´æ¥æäº¤äº‹åŠ¡ï¼Œ<strong>é‡Šæ”¾æ•°æ®åº“èµ„æºï¼Œæ€§èƒ½å¥½</strong></li><li>ç›¸æ¯”ATæ¨¡å‹ï¼Œ<strong>æ— éœ€ç”Ÿæˆå¿«ç…§ï¼Œæ— éœ€ä½¿ç”¨å…¨å±€é”ï¼Œæ€§èƒ½æœ€å¼º</strong></li><li><strong>ä¸ä¾èµ–æ•°æ®åº“äº‹åŠ¡ï¼Œè€Œæ˜¯ä¾èµ–è¡¥å¿æ“ä½œï¼Œå¯ä»¥ç”¨äºéäº‹åŠ¡å‹æ•°æ®åº“</strong></li></ul><p><strong>TCCçš„ç¼ºç‚¹</strong>æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li><strong>æœ‰ä»£ç ä¾µå…¥ï¼Œéœ€è¦äººä¸ºç¼–å†™tryã€Confirmå’ŒCancelæ¥å£ï¼Œå¤ªéº»çƒ¦</strong></li><li><strong>è½¯çŠ¶æ€</strong>ï¼Œäº‹åŠ¡æ˜¯æœ€ç»ˆä¸€è‡´</li><li>éœ€è¦è€ƒè™‘Confirmå’ŒCancelçš„å¤±è´¥æƒ…å†µï¼Œ<strong>åšå¥½å¹‚ç­‰å¤„ç†ã€äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»šå¤„ç†</strong></li></ul><h3 id="_5-æœ€å¤§åŠªåŠ›é€šçŸ¥" tabindex="-1">ï¼ˆ5ï¼‰æœ€å¤§åŠªåŠ›é€šçŸ¥ <a class="header-anchor" href="#_5-æœ€å¤§åŠªåŠ›é€šçŸ¥" aria-label="Permalink to &quot;ï¼ˆ5ï¼‰æœ€å¤§åŠªåŠ›é€šçŸ¥&quot;">â€‹</a></h3><p><img src="/assets/image-20250406151923512.BDYsiqVd.png" alt="image-20250406151923512" loading="lazy"></p><h4 id="æœ€å¤§åŠªåŠ›é€šçŸ¥å‹åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£" tabindex="-1">æœ€å¤§åŠªåŠ›é€šçŸ¥å‹åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£ <a class="header-anchor" href="#æœ€å¤§åŠªåŠ›é€šçŸ¥å‹åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£" aria-label="Permalink to &quot;æœ€å¤§åŠªåŠ›é€šçŸ¥å‹åˆ†å¸ƒå¼äº‹åŠ¡è¯¦è§£&quot;">â€‹</a></h4><h4 id="_1æ¦‚å¿µè§£æ" tabindex="-1">â‘ æ¦‚å¿µè§£æ <a class="header-anchor" href="#_1æ¦‚å¿µè§£æ" aria-label="Permalink to &quot;â‘ æ¦‚å¿µè§£æ&quot;">â€‹</a></h4><p><strong>æœ€å¤§åŠªåŠ›é€šçŸ¥</strong>ï¼ˆBest-Effort Deliveryï¼‰æ˜¯ä¸€ç§åŸºäºæ¶ˆæ¯é€šçŸ¥çš„æœ€ç»ˆä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ol><li><strong>é€šçŸ¥æœºåˆ¶</strong>ï¼šé€šè¿‡æ¶ˆæ¯é€šçŸ¥çš„æ–¹å¼é©±åŠ¨å„å‚ä¸è€…å®Œæˆä¸šåŠ¡æ“ä½œ</li><li><strong>å¤šæ¬¡å°è¯•</strong>ï¼šå½“æ‰§è¡Œå¤±è´¥æ—¶ä¼šè¿›è¡Œå¤šæ¬¡é‡è¯•é€šçŸ¥</li><li><strong>æ— ä¸­å¿ƒåè°ƒ</strong>ï¼šä¸éœ€è¦ä¸“é—¨çš„åˆ†å¸ƒå¼äº‹åŠ¡åè°ƒç»„ä»¶ï¼ˆå¦‚Seataï¼‰</li><li><strong>æœ€ç»ˆä¸€è‡´</strong>ï¼šä¸ä¿è¯å®æ—¶ä¸€è‡´æ€§ï¼Œä½†é€šè¿‡é‡è¯•æœºåˆ¶æœ€ç»ˆè¾¾åˆ°ä¸€è‡´çŠ¶æ€</li></ol><h4 id="_2å…¸å‹åº”ç”¨åœºæ™¯" tabindex="-1">â‘¡å…¸å‹åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#_2å…¸å‹åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;â‘¡å…¸å‹åº”ç”¨åœºæ™¯&quot;">â€‹</a></h4><ul><li>æ”¯ä»˜ç»“æœé€šçŸ¥</li><li>è®¢å•çŠ¶æ€åŒæ­¥</li><li>è·¨ç³»ç»Ÿæ•°æ®åŒæ­¥</li><li>ç¬¬ä¸‰æ–¹æœåŠ¡å›è°ƒ</li></ul><h4 id="_3å®ç°åŸç†" tabindex="-1">â‘¢å®ç°åŸç† <a class="header-anchor" href="#_3å®ç°åŸç†" aria-label="Permalink to &quot;â‘¢å®ç°åŸç†&quot;">â€‹</a></h4><h5 id="åŸºæœ¬æµç¨‹" tabindex="-1">åŸºæœ¬æµç¨‹ <a class="header-anchor" href="#åŸºæœ¬æµç¨‹" aria-label="Permalink to &quot;åŸºæœ¬æµç¨‹&quot;">â€‹</a></h5><ol><li>ä¸»ä¸šåŠ¡ç³»ç»Ÿå®Œæˆæœ¬åœ°äº‹åŠ¡</li><li>å°†éœ€è¦é€šçŸ¥çš„æ¶ˆæ¯å†™å…¥æ¶ˆæ¯è¡¨</li><li>å®šæ—¶ä»»åŠ¡è½®è¯¢æ¶ˆæ¯è¡¨ï¼Œå‘é€å¾…é€šçŸ¥æ¶ˆæ¯</li><li>æ¥æ”¶æ–¹å¤„ç†æˆåŠŸåè¿”å›ç¡®è®¤</li><li>æœªæˆåŠŸåˆ™æŒ‰ç…§ç­–ç•¥è¿›è¡Œé‡è¯•ï¼Œç›´åˆ°è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°</li></ol><h5 id="å…³é”®è®¾è®¡è¦ç‚¹" tabindex="-1">å…³é”®è®¾è®¡è¦ç‚¹ <a class="header-anchor" href="#å…³é”®è®¾è®¡è¦ç‚¹" aria-label="Permalink to &quot;å…³é”®è®¾è®¡è¦ç‚¹&quot;">â€‹</a></h5><ul><li><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong>ï¼šæ‰€æœ‰å¾…é€šçŸ¥æ¶ˆæ¯å¿…é¡»æŒä¹…åŒ–å­˜å‚¨</li><li><strong>æ¶ˆæ¯çŠ¶æ€ç®¡ç†</strong>ï¼šè®°å½•æ¶ˆæ¯çš„å‘é€çŠ¶æ€å’Œé‡è¯•æ¬¡æ•°</li><li><strong>å¹‚ç­‰è®¾è®¡</strong>ï¼šæ¥æ”¶æ–¹å¿…é¡»å®ç°å¹‚ç­‰å¤„ç†</li><li><strong>æœ€ç»ˆè¡¥å¿</strong>ï¼šè¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åè¿›å…¥äººå·¥å¤„ç†æµç¨‹</li></ul><h4 id="_4ä»£ç ç¤ºä¾‹" tabindex="-1">â‘£ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#_4ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;â‘£ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h4><h5 id="_1-æ¶ˆæ¯è¡¨è®¾è®¡" tabindex="-1">1. æ¶ˆæ¯è¡¨è®¾è®¡ <a class="header-anchor" href="#_1-æ¶ˆæ¯è¡¨è®¾è®¡" aria-label="Permalink to &quot;1. æ¶ˆæ¯è¡¨è®¾è®¡&quot;">â€‹</a></h5><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> transaction_message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BIGINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¸šåŠ¡æ¶ˆæ¯ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    business_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¸šåŠ¡ç±»å‹&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¶ˆæ¯å†…å®¹&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TINYINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0-å¾…å¤„ç†,1-å¤„ç†ä¸­,2-å¤„ç†æˆåŠŸ,3-å¤„ç†å¤±è´¥&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    retry_count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;é‡è¯•æ¬¡æ•°&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    next_retry_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COMMENT </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¸‹æ¬¡é‡è¯•æ—¶é—´&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    create_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    update_time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    UNIQUE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uk_message_id (message_id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h5 id="_2-ä¸»ä¸šåŠ¡ç³»ç»Ÿ-è®¢å•æœåŠ¡" tabindex="-1">2. ä¸»ä¸šåŠ¡ç³»ç»Ÿï¼ˆè®¢å•æœåŠ¡ï¼‰ <a class="header-anchor" href="#_2-ä¸»ä¸šåŠ¡ç³»ç»Ÿ-è®¢å•æœåŠ¡" aria-label="Permalink to &quot;2. ä¸»ä¸šåŠ¡ç³»ç»Ÿï¼ˆè®¢å•æœåŠ¡ï¼‰&quot;">â€‹</a></h5><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OrderService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OrderDao orderDao;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TransactionMessageDao messageDao;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(OrderDTO </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">orderDTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. åˆ›å»ºè®¢å•ï¼ˆæœ¬åœ°äº‹åŠ¡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Order order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> convertToOrder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(orderDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        orderDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. å‡†å¤‡é€šçŸ¥æ¶ˆæ¯ï¼ˆåŒä¸€äº‹åŠ¡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TransactionMessage message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TransactionMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generateMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setBusinessType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ORDER_CREATED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">buildOrderMessageContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(order));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¾…å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCreateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUpdateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        messageDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_3-æ¶ˆæ¯å‘é€æœåŠ¡" tabindex="-1">3. æ¶ˆæ¯å‘é€æœåŠ¡ <a class="header-anchor" href="#_3-æ¶ˆæ¯å‘é€æœåŠ¡" aria-label="Permalink to &quot;3. æ¶ˆæ¯å‘é€æœåŠ¡&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageSenderService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TransactionMessageDao messageDao;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RestTemplate restTemplate;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Scheduled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fixedRate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¯10ç§’æ‰§è¡Œä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sendPendingMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æŸ¥è¯¢å¾…å‘é€æ¶ˆæ¯ï¼ˆåŒ…æ‹¬éœ€è¦é‡è¯•çš„ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TransactionMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messageDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectPendingMessages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (TransactionMessage message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // å‘é€HTTPé€šçŸ¥ï¼ˆå®é™…å¯èƒ½æ˜¯MQæˆ–å…¶ä»–æ–¹å¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                String url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNotifyUrlByBusinessType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBusinessType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> restTemplate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postForEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    url, message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), String.class);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getStatusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">is2xxSuccessful</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // æ ‡è®°ä¸ºæˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    messageDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // æ ‡è®°ä¸ºå¤±è´¥ï¼Œå‡†å¤‡é‡è¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                    handleFailedMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¶ˆæ¯å‘é€å¤±è´¥: {}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), e);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                handleFailedMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleFailedMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TransactionMessage </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retryCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRetryCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (retryCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æœ€å¤§é‡è¯•æ¬¡æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            messageDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æœ€ç»ˆå¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // è®¡ç®—ä¸‹æ¬¡é‡è¯•æ—¶é—´ï¼ˆæŒ‡æ•°é€€é¿ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nextRetryTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentTimeMillis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, retryCount) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            messageDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateForRetry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¤„ç†ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                retryCount,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(nextRetryTime));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_4-æ¥æ”¶æ–¹æœåŠ¡-åº“å­˜æœåŠ¡" tabindex="-1">4. æ¥æ”¶æ–¹æœåŠ¡ï¼ˆåº“å­˜æœåŠ¡ï¼‰ <a class="header-anchor" href="#_4-æ¥æ”¶æ–¹æœåŠ¡-åº“å­˜æœåŠ¡" aria-label="Permalink to &quot;4. æ¥æ”¶æ–¹æœåŠ¡ï¼ˆåº“å­˜æœåŠ¡ï¼‰&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/inventory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InventoryController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InventoryService inventoryService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/notify/order-created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleOrderCreated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            OrderCreatedMessage message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(content);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¹‚ç­‰å¤„ç†ï¼šæ£€æŸ¥æ˜¯å¦å·²å¤„ç†è¿‡è¯¥æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (inventoryService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isMessageProcessed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;already processed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¤„ç†ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            inventoryService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reduceStock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProductId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getQuantity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                message.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="æ–¹æ¡ˆä¼˜ç¼ºç‚¹" tabindex="-1">æ–¹æ¡ˆä¼˜ç¼ºç‚¹ <a class="header-anchor" href="#æ–¹æ¡ˆä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;æ–¹æ¡ˆä¼˜ç¼ºç‚¹&quot;">â€‹</a></h4><h5 id="ä¼˜ç‚¹" tabindex="-1">ä¼˜ç‚¹ <a class="header-anchor" href="#ä¼˜ç‚¹" aria-label="Permalink to &quot;ä¼˜ç‚¹&quot;">â€‹</a></h5><ol><li><strong>ç®€å•è½»é‡</strong>ï¼šä¸éœ€è¦å¼•å…¥å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶</li><li><strong>æ¾è€¦åˆ</strong>ï¼šå„ç³»ç»Ÿé—´é€šè¿‡æ¶ˆæ¯é€šçŸ¥è§£è€¦</li><li><strong>é«˜å¯ç”¨</strong>ï¼šå³ä½¿éƒ¨åˆ†ç³»ç»Ÿæš‚æ—¶ä¸å¯ç”¨ï¼Œä¹Ÿèƒ½é€šè¿‡é‡è¯•æœ€ç»ˆæˆåŠŸ</li><li><strong>æ€§èƒ½è¾ƒå¥½</strong>ï¼šä¸éœ€è¦å…¨å±€é”ç­‰å½±å“æ€§èƒ½çš„æœºåˆ¶</li></ol><h5 id="ç¼ºç‚¹" tabindex="-1">ç¼ºç‚¹ <a class="header-anchor" href="#ç¼ºç‚¹" aria-label="Permalink to &quot;ç¼ºç‚¹&quot;">â€‹</a></h5><ol><li><strong>å®æ—¶æ€§å·®</strong>ï¼šåªèƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸èƒ½å®æ—¶ä¸€è‡´</li><li><strong>ä¾èµ–é‡è¯•</strong>ï¼šéœ€è¦è®¾è®¡åˆç†çš„é‡è¯•ç­–ç•¥</li><li><strong>éœ€è¦äººå·¥ä»‹å…¥</strong>ï¼šè¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åéœ€è¦äººå·¥å¤„ç†</li><li><strong>æ¶ˆæ¯å¯èƒ½ä¸¢å¤±</strong>ï¼šæç«¯æƒ…å†µä¸‹ä»å¯èƒ½ä¸¢å¤±æ¶ˆæ¯ï¼ˆéœ€è¦é¢å¤–ä¿éšœæœºåˆ¶ï¼‰</li></ol><h4 id="æœ€ä½³å®è·µå»ºè®®" tabindex="-1">æœ€ä½³å®è·µå»ºè®® <a class="header-anchor" href="#æœ€ä½³å®è·µå»ºè®®" aria-label="Permalink to &quot;æœ€ä½³å®è·µå»ºè®®&quot;">â€‹</a></h4><ol><li><strong>æ¶ˆæ¯å»é‡</strong>ï¼šæ¥æ”¶æ–¹å¿…é¡»å®ç°å¹‚ç­‰å¤„ç†</li><li><strong>é‡è¯•ç­–ç•¥</strong>ï¼šå»ºè®®é‡‡ç”¨æŒ‡æ•°é€€é¿ç®—æ³•ï¼ˆExponential Backoffï¼‰</li><li><strong>ç›‘æ§æŠ¥è­¦</strong>ï¼šå¯¹é•¿æ—¶é—´æœªå¤„ç†æˆåŠŸçš„æ¶ˆæ¯è®¾ç½®ç›‘æ§</li><li><strong>äººå·¥å¹²é¢„æ¥å£</strong>ï¼šæä¾›äººå·¥é‡è¯•å’Œä¿®æ­£çš„æ¥å£</li><li><strong>æ¶ˆæ¯è½¨è¿¹</strong>ï¼šè®°å½•å®Œæ•´çš„æ¶ˆæ¯å¤„ç†è½¨è¿¹ä¾¿äºæ’æŸ¥é—®é¢˜</li></ol><p>è¿™ç§æ¨¡å¼éå¸¸é€‚åˆå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œä½†éœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„è·¨ç³»ç»Ÿä¸šåŠ¡åœºæ™¯ã€‚</p><h2 id="_2ã€æ³¨å†Œä¸­å¿ƒ" tabindex="-1">2ã€æ³¨å†Œä¸­å¿ƒ <a class="header-anchor" href="#_2ã€æ³¨å†Œä¸­å¿ƒ" aria-label="Permalink to &quot;2ã€æ³¨å†Œä¸­å¿ƒ&quot;">â€‹</a></h2><p>æœ¬ç« ä¸»è¦å­¦ä¹ Nacosä¸­çš„ä¸€äº›ç‰¹æ€§å’ŒåŸç†ï¼Œä»¥åŠä¸<strong>Eureka</strong>çš„åŠŸèƒ½å¯¹æ¯”ã€‚</p><h3 id="_1-ç¯å¢ƒéš”ç¦»" tabindex="-1">ï¼ˆ1ï¼‰<mark>ç¯å¢ƒéš”ç¦»</mark> <a class="header-anchor" href="#_1-ç¯å¢ƒéš”ç¦»" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰==ç¯å¢ƒéš”ç¦»==&quot;">â€‹</a></h3><p>ä¼ä¸šå®é™…å¼€å‘ä¸­ï¼Œå¾€å¾€ä¼šæ­å»ºå¤šä¸ªè¿è¡Œç¯å¢ƒï¼Œä¾‹å¦‚ï¼š</p><ul><li>å¼€å‘ç¯å¢ƒ</li><li>æµ‹è¯•ç¯å¢ƒ</li><li>é¢„å‘å¸ƒç¯å¢ƒ</li><li>ç”Ÿäº§ç¯å¢ƒ</li></ul><p>è¿™äº›<strong>ä¸åŒç¯å¢ƒä¹‹é—´çš„æœåŠ¡å’Œæ•°æ®ä¹‹é—´éœ€è¦éš”ç¦»</strong>ã€‚</p><p>è¿˜æœ‰çš„ä¼ä¸šä¸­ï¼Œä¼šå¼€å‘å¤šä¸ªé¡¹ç›®ï¼Œ<strong>å…±äº«nacosé›†ç¾¤</strong>ã€‚æ­¤æ—¶ï¼Œè¿™äº›é¡¹ç›®ä¹‹é—´ä¹Ÿéœ€è¦æŠŠæœåŠ¡å’Œæ•°æ®éš”ç¦»ã€‚</p><p>å› æ­¤ï¼ŒNacosæä¾›äº†<strong>åŸºäº<code>namespace</code>çš„ç¯å¢ƒéš”ç¦»åŠŸèƒ½</strong>ã€‚å…·ä½“çš„éš”ç¦»å±‚æ¬¡å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/assets/1743866077030-10.DSiaZ3Uh.png" alt="img" loading="lazy"></p><p>è¯´æ˜ï¼š</p><ul><li>Nacosä¸­<strong>å¯ä»¥é…ç½®å¤šä¸ª<code>namespace</code></strong>ï¼Œç›¸äº’ä¹‹é—´å®Œå…¨éš”ç¦»ã€‚<strong>é»˜è®¤çš„<code>namespace</code>åä¸º<code>public</code></strong></li><li><code>namespace</code>ä¸‹è¿˜å¯ä»¥ç»§ç»­åˆ†ç»„ï¼Œä¹Ÿå°±æ˜¯group ï¼Œç›¸äº’éš”ç¦»ã€‚ é»˜è®¤çš„groupæ˜¯<code>DEFAULT_GROUP</code></li><li><code>group</code>ä¹‹ä¸‹å°±æ˜¯æœåŠ¡å’Œé…ç½®äº†</li></ul><h4 id="_1åˆ›å»ºnamespace" tabindex="-1">â‘ åˆ›å»ºnamespace <a class="header-anchor" href="#_1åˆ›å»ºnamespace" aria-label="Permalink to &quot;â‘ åˆ›å»ºnamespace&quot;">â€‹</a></h4><p>nacosæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„<code>namespace</code>ï¼Œå«åš<code>public</code>ï¼š</p><p><img src="/assets/1743866077030-11.BKHWj1FA.png" alt="img" loading="lazy"></p><p>é»˜è®¤æ‰€æœ‰çš„æœåŠ¡å’Œé…ç½®éƒ½å±äºè¿™ä¸ª<code>namespace</code>ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±<strong>åˆ›å»ºæ–°çš„<code>namespace</code></strong>ï¼š</p><p><img src="/assets/1743866077030-12.BHv9Bx6V.png" alt="img" loading="lazy"></p><p>ç„¶åå¡«å†™è¡¨å•ï¼š</p><p><img src="/assets/1743866077030-13.C7KZyuEx.png" alt="img" loading="lazy"></p><p>æ·»åŠ å®Œæˆåï¼Œå¯ä»¥åœ¨é¡µé¢çœ‹åˆ°æˆ‘ä»¬æ–°å»ºçš„<code>namespace</code>ï¼Œå¹¶ä¸”Nacosä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªå‘½åç©ºé—´idï¼š</p><p><img src="/assets/1743866077030-14.DfMoaowD.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬åˆ‡æ¢åˆ°<strong>é…ç½®åˆ—è¡¨é¡µ</strong>ï¼Œä½ ä¼šå‘ç°**<code>dev</code>è¿™ä¸ªå‘½åç©ºé—´ä¸‹æ²¡æœ‰ä»»ä½•é…ç½®**ï¼š</p><p><img src="/assets/1743866077030-15.CNzlNn3r.png" alt="img" loading="lazy"></p><p>å› ä¸ºä¹‹å‰æˆ‘ä»¬æ·»åŠ çš„æ‰€æœ‰é…ç½®éƒ½åœ¨<code>public</code>ä¸‹ï¼š</p><p><img src="/assets/1743866077030-16.ChQFevdo.png" alt="img" loading="lazy"></p><h4 id="_2å¾®æœåŠ¡é…ç½®namespace" tabindex="-1">â‘¡å¾®æœåŠ¡é…ç½®namespace <a class="header-anchor" href="#_2å¾®æœåŠ¡é…ç½®namespace" aria-label="Permalink to &quot;â‘¡å¾®æœåŠ¡é…ç½®namespace&quot;">â€‹</a></h4><p><img src="/assets/image-20250406153137176.C5kIxA44.png" alt="image-20250406153137176" loading="lazy"></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ç®¡ç†éƒ½æ˜¯èµ°<code>public</code>è¿™ä¸ªå‘½åç©ºé—´ã€‚å¦‚æœè¦æŒ‡å®šå‘½åç©ºé—´åˆ™éœ€è¦ä¿®æ”¹<code>application.yml</code>æ–‡ä»¶ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬ä¿®æ”¹<code>item-service</code>æœåŠ¡çš„<strong>bootstrap.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡å‘ç°é…ç½®ï¼ŒæŒ‡å®šå…¶<code>namespace</code></strong>ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">item-service</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æœåŠ¡åç§°</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  profiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">dev</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      server-addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.150.101</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # nacosåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      discovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœåŠ¡å‘ç°é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        namespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8c468c63-b650-48da-a632-311c75e6d235</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è®¾ç½®namespaceï¼Œå¿…é¡»ç”¨id</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # ã€‚ã€‚ã€‚ç•¥</span></span></code></pre></div><p>å¯åŠ¨<code>item-service</code>ï¼ŒæŸ¥çœ‹æœåŠ¡åˆ—è¡¨ï¼Œä¼šå‘ç°<code>item-service</code>å‡ºç°åœ¨<code>dev</code>ä¸‹ï¼š</p><p><img src="/assets/1743866077030-17.Bk3fR8Hd.png" alt="img" loading="lazy"></p><p>è€Œå…¶å®ƒæœåŠ¡åˆ™å‡ºç°åœ¨<code>public</code>ä¸‹ï¼š</p><p><img src="/assets/1743866077030-18.D00Mkv_h.png" alt="img" loading="lazy"></p><p>æ­¤æ—¶è®¿é—®<code>http://localhost:8082/doc.html</code>ï¼ŒåŸºäº<code>swagger</code>åšæµ‹è¯•ï¼š</p><p><img src="/assets/1743866077030-19.V4ERvnQ6.png" alt="img" loading="lazy"></p><p>ä¼šå‘ç°æŸ¥è¯¢ç»“æœä¸­ç¼ºå°‘å•†å“çš„æœ€æ–°ä»·æ ¼ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬æŸ¥çœ‹æœåŠ¡è¿è¡Œæ—¥å¿—ï¼š</p><p><img src="/assets/1743866077030-20.DYlOeK2c.png" alt="img" loading="lazy"></p><p>ä¼šå‘ç°<code>cart-service</code>æœåŠ¡åœ¨è¿œç¨‹è°ƒç”¨<code>item-service</code>æ—¶ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°å¯ç”¨çš„å®ä¾‹ã€‚è¿™<strong>è¯æ˜ä¸åŒnamespaceä¹‹é—´ç¡®å®æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä¸å¯è®¿é—®ã€‚</strong></p><p>å½“æˆ‘ä»¬æŠŠ<code>namespace</code>åˆ‡æ¢å›<code>public</code>ï¼Œæˆ–è€…ç»Ÿä¸€éƒ½æ˜¯ä»¥<code>dev</code>æ—¶è®¿é—®æ¢å¤æ­£å¸¸ã€‚</p><h3 id="_2-åˆ†çº§æ¨¡å‹" tabindex="-1">ï¼ˆ2ï¼‰åˆ†çº§æ¨¡å‹ <a class="header-anchor" href="#_2-åˆ†çº§æ¨¡å‹" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰åˆ†çº§æ¨¡å‹&quot;">â€‹</a></h3><p>åœ¨ä¸€äº›å¤§å‹åº”ç”¨ä¸­ï¼Œ<strong>åŒä¸€ä¸ªæœåŠ¡å¯ä»¥éƒ¨ç½²å¾ˆå¤šå®ä¾‹</strong>ã€‚è€Œè¿™äº›å®ä¾‹å¯èƒ½åˆ†å¸ƒåœ¨å…¨å›½å„åœ°çš„ä¸åŒæœºæˆ¿ã€‚ç”±äºå­˜åœ¨åœ°åŸŸå·®å¼‚ï¼Œç½‘ç»œä¼ è¾“çš„é€Ÿåº¦ä¼šæœ‰å¾ˆå¤§ä¸åŒï¼Œå› æ­¤<strong>åœ¨åšæœåŠ¡æ²»ç†æ—¶éœ€è¦åŒºåˆ†ä¸åŒæœºæˆ¿çš„å®ä¾‹</strong>ã€‚</p><p>ä¾‹å¦‚item-serviceï¼Œæˆ‘ä»¬å¯ä»¥éƒ¨ç½²3ä¸ªå®ä¾‹ï¼š</p><ul><li>127.0.0.1:8081</li><li>127.0.0.1:8082</li><li>127.0.0.1:8083</li></ul><p>å‡å¦‚è¿™äº›å®ä¾‹åˆ†å¸ƒåœ¨ä¸åŒæœºæˆ¿ï¼Œä¾‹å¦‚ï¼š</p><ul><li>127.0.0.1:8081ï¼Œåœ¨ä¸Šæµ·æœºæˆ¿</li><li>127.0.0.1:8082ï¼Œåœ¨ä¸Šæµ·æœºæˆ¿</li><li>127.0.0.1:8083ï¼Œåœ¨æ­å·æœºæˆ¿</li></ul><p>Nacosä¸­æä¾›äº†**<mark>é›†ç¾¤ï¼ˆ<code>cluster</code>ï¼‰çš„æ¦‚å¿µ</mark>**ï¼Œæ¥å¯¹åº”ä¸åŒæœºæˆ¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>ä¸€ä¸ªæœåŠ¡ï¼ˆ<code>service</code>ï¼‰ä¸‹å¯ä»¥æœ‰å¾ˆå¤šé›†ç¾¤ï¼ˆ<code>cluster</code>ï¼‰ï¼Œè€Œä¸€ä¸ªé›†ç¾¤ï¼ˆ<code>cluster</code>ï¼‰ä¸­ä¸‹åˆå¯ä»¥åŒ…å«å¾ˆå¤šå®ä¾‹ï¼ˆ<code>instance</code>ï¼‰</strong>ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/assets/1743866077030-21.CBgauh--.png" alt="img" loading="lazy"></p><p>å› æ­¤ï¼Œç»“åˆæˆ‘ä»¬ä¸Šä¸€èŠ‚å­¦ä¹ çš„<code>namespace</code>å‘½åç©ºé—´çš„çŸ¥è¯†ï¼Œä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡çš„å®ä¾‹åœ¨æ³¨å†Œåˆ°Nacosæ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä»¥ä¸‹å‡ ä¸ªä¿¡æ¯ï¼Œ<strong>ç”¨æ¥ç¡®è®¤å½“å‰å®ä¾‹çš„èº«ä»½</strong>ï¼Œä»å¤–åˆ°å†…ä¾æ¬¡æ˜¯ï¼š</p><ul><li>namespaceï¼šå‘½åç©ºé—´</li><li>groupï¼šåˆ†ç»„</li><li>serviceï¼šæœåŠ¡å</li><li>clusterï¼šé›†ç¾¤</li><li><strong>instanceï¼šå®ä¾‹ï¼ŒåŒ…å«ipå’Œç«¯å£</strong></li></ul><p>è¿™å°±æ˜¯nacosä¸­çš„<strong>æœåŠ¡åˆ†çº§æ¨¡å‹</strong>ã€‚</p><p>åœ¨Nacoså†…éƒ¨ä¼šæœ‰ä¸€ä¸ª<strong>æœåŠ¡å®ä¾‹çš„æ³¨å†Œè¡¨ï¼Œæ˜¯åŸºäºMapå®ç°çš„</strong>ï¼Œå…¶ç»“æ„ä¸åˆ†çº§æ¨¡å‹çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="/assets/1743866077030-22.B4fNXUpy.png" alt="img" loading="lazy"></p><p>æŸ¥çœ‹nacosæ§åˆ¶å°ï¼Œä¼šå‘ç°<strong>é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰æœåŠ¡çš„é›†ç¾¤éƒ½æ˜¯<mark>default</mark></strong>ï¼š</p><p><img src="/assets/1743866077030-23.lCewxNoN.png" alt="img" loading="lazy"></p><p>å¦‚æœæˆ‘ä»¬è¦<strong>ä¿®æ”¹æœåŠ¡æ‰€åœ¨é›†ç¾¤</strong>ï¼Œåªéœ€è¦ä¿®æ”¹<code>bootstrap.yml</code>å³å¯ï¼š</p><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloud</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    nacos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      discovery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        cluster-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">BJ</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # é›†ç¾¤åç§°ï¼Œè‡ªå®šä¹‰</span></span></code></pre></div><p>æˆ‘ä»¬ä¿®æ”¹<code>item-service</code>çš„<code>bootstrap.yml</code>ï¼Œç„¶åé‡æ–°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼š</p><p><img src="/assets/1743866077031-24.DNJnTqd-.png" alt="img" loading="lazy"></p><p>å†æ¬¡æŸ¥çœ‹nacosï¼š</p><p><img src="/assets/1743866077031-25.B077p-64.png" alt="img" loading="lazy"></p><p>å‘ç°8084è¿™ä¸ªæ–°çš„å®ä¾‹ç¡®å®å±äº<code>BJ</code>è¿™ä¸ªé›†ç¾¤äº†ã€‚</p><h3 id="_3-nacosæºç åˆ†æ" tabindex="-1">ï¼ˆ3ï¼‰nacosæºç åˆ†æ <a class="header-anchor" href="#_3-nacosæºç åˆ†æ" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰nacosæºç åˆ†æ&quot;">â€‹</a></h3><p><a href="E:%5CAAWeb-Learing%5CSpringCloud%5CSpringCloud-MQ%E7%AC%94%E8%AE%B0%5CNacos%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-Local.md" target="_blank" rel="noreferrer">nacosæºç åˆ†æ</a></p><h3 id="_4-eureka" tabindex="-1">ï¼ˆ4ï¼‰Eureka <a class="header-anchor" href="#_4-eureka" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰Eureka&quot;">â€‹</a></h3><p><img src="/assets/image-20250406155139449.C3wF4l6U.png" alt="image-20250406155139449" loading="lazy"></p><p>Eurekaæ˜¯Netflixå…¬å¸å¼€æºçš„ä¸€ä¸ªæœåŠ¡æ³¨å†Œä¸­å¿ƒç»„ä»¶ï¼Œæ—©æœŸç‰ˆæœ¬çš„SpringCloudéƒ½æ˜¯ä½¿ç”¨Eurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒã€‚ç”±äºEurekaå’ŒNacosçš„starterä¸­æä¾›çš„åŠŸèƒ½éƒ½æ˜¯åŸºäºSpringCloudCommonè§„èŒƒï¼Œå› æ­¤ä¸¤è€…ä½¿ç”¨èµ·æ¥å·®åˆ«ä¸å¤§ã€‚</p><p>è¯¾å‰èµ„æ–™ä¸­æä¾›äº†ä¸€ä¸ªEurekaçš„demoï¼š</p><p><img src="/assets/1743866077031-26.zd_-BfVx.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬å¯ä»¥ç”¨ideaæ‰“å¼€æŸ¥çœ‹ä¸€ä¸‹ï¼š</p><p><img src="/assets/1743866077031-27.DECQGVbu.png" alt="img" loading="lazy"></p><p>ç»“æ„è¯´æ˜ï¼š</p><ul><li><code>eureka-server</code>ï¼š<strong>Eurekaçš„æœåŠ¡ç«¯ï¼Œä¹Ÿå°±æ˜¯æ³¨å†Œä¸­å¿ƒã€‚æ²¡é”™ï¼Œ<mark>EurekaæœåŠ¡ç«¯è¦è‡ªå·±åˆ›å»ºé¡¹ç›®</mark></strong></li><li><code>order-service</code>ï¼šè®¢å•æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡è°ƒç”¨è€…ï¼ŒæŸ¥è¯¢è®¢å•çš„æ—¶å€™è¦æŸ¥è¯¢ç”¨æˆ·</li><li><code>user-service</code>ï¼šç”¨æˆ·æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡æä¾›è€…ï¼Œå¯¹å¤–æš´éœ²æŸ¥è¯¢ç”¨æˆ·çš„æ¥å£</li></ul><p>å¯åŠ¨ä»¥åï¼Œè®¿é—®<code>localhost:10086</code>å³å¯æŸ¥çœ‹åˆ°Eurekaçš„æ§åˆ¶å°ï¼Œç›¸å¯¹äºNacosæ¥è¯´ç®€é™‹äº†å¾ˆå¤šï¼š</p><p><img src="/assets/1743866077031-28.C6x-MMkO.png" alt="img" loading="lazy"></p><p>å¾®æœåŠ¡å¼•å…¥Eurekaçš„æ–¹å¼ä¹Ÿæå…¶ç®€å•ï¼Œåˆ†ä¸‰æ­¥ï¼š</p><ul><li><p>å¯åŠ¨EurekaæœåŠ¡</p><p><img src="/assets/image-20250406155411557.5W1vuFYY.png" alt="image-20250406155411557" loading="lazy"></p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-netflix-eureka-server&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><p>å¼•å…¥<code>eureka-client</code>ä¾èµ–</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--eureka-client--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.cloud&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-cloud-starter-netflix-eureka-client&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li><li><p><strong>é…ç½®<code>eureka</code>åœ°å€</strong></p></li></ul><p><img src="/assets/image-20250406155209934.Pm12Fnmx.png" alt="image-20250406155209934" loading="lazy"></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">eureka</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">	client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">		service-url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">			defaultZone:http://127.0.0.1:10086/eureka</span></span></code></pre></div><p>æ¥ä¸‹æ¥å°±æ˜¯ç¼–å†™OpenFeignçš„å®¢æˆ·ç«¯äº†ï¼Œæ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯è·ŸNacosç”¨èµ·æ¥åŸºæœ¬ä¸€è‡´ã€‚</p><h3 id="_4-eurekaå’Œnacoså¯¹æ¯”" tabindex="-1">ï¼ˆ4ï¼‰Eurekaå’ŒNacos<mark>å¯¹æ¯”</mark> <a class="header-anchor" href="#_4-eurekaå’Œnacoså¯¹æ¯”" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰Eurekaå’ŒNacos==å¯¹æ¯”==&quot;">â€‹</a></h3><h4 id="_1å¯¹æ¯”" tabindex="-1">â‘ å¯¹æ¯” <a class="header-anchor" href="#_1å¯¹æ¯”" aria-label="Permalink to &quot;â‘ å¯¹æ¯”&quot;">â€‹</a></h4><p><img src="/assets/image-20250406160428961.C-h-2537.png" alt="image-20250406160428961" loading="lazy"></p><p>Eurekaå’ŒNacoséƒ½èƒ½èµ·åˆ°æ³¨å†Œä¸­å¿ƒçš„ä½œç”¨ï¼Œç”¨æ³•åŸºæœ¬ç±»ä¼¼ã€‚ä½†è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>Nacosæ”¯æŒé…ç½®ç®¡ç†</strong>ï¼Œè€ŒEurekaåˆ™ä¸æ”¯æŒã€‚</li></ul><p>è€Œä¸”æœåŠ¡æ³¨å†Œå‘ç°ä¸Šä¹Ÿæœ‰åŒºåˆ«ï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªå®éªŒï¼š</p><p>æˆ‘ä»¬<strong>åœæ­¢<code>user-service</code>æœåŠ¡</strong>ï¼Œç„¶åè§‚å¯ŸEurekaæ§åˆ¶å°ï¼Œä½ ä¼šå‘ç°å¾ˆé•¿ä¸€æ®µæ—¶é—´è¿‡å»åï¼Œ<strong>EurekaæœåŠ¡ä¾ç„¶æ²¡æœ‰å¯Ÿè§‰<code>user-service</code>çš„å¼‚å¸¸çŠ¶æ€</strong>ã€‚</p><p>è¿™ä¸Eurekaçš„<strong>å¥åº·æ£€æµ‹æœºåˆ¶</strong>æœ‰å…³ã€‚åœ¨Eurekaä¸­ï¼Œå¥åº·æ£€æµ‹çš„åŸç†å¦‚ä¸‹ï¼š</p><ul><li>å¾®æœåŠ¡å¯åŠ¨æ—¶æ³¨å†Œä¿¡æ¯åˆ°Eurekaï¼Œè¿™ç‚¹ä¸Nacosä¸€è‡´ã€‚</li><li>å¾®æœåŠ¡<strong>æ¯éš”30ç§’å‘Eurekaå‘é€å¿ƒè·³è¯·æ±‚</strong>ï¼ŒæŠ¥å‘Šè‡ªå·±çš„å¥åº·çŠ¶æ€ã€‚<strong>Nacosä¸­é»˜è®¤æ˜¯5ç§’ä¸€æ¬¡</strong>ã€‚</li><li>Eurekaå¦‚æœ<strong>90ç§’</strong>æœªæ”¶åˆ°å¿ƒè·³ï¼Œåˆ™è®¤ä¸º<strong>æœåŠ¡ç–‘ä¼¼æ•…éšœ</strong>ï¼Œå¯èƒ½è¢«å‰”é™¤ã€‚Nacosä¸­åˆ™æ˜¯<strong>15ç§’è¶…æ—¶</strong>ï¼Œ30ç§’å‰”é™¤ã€‚</li><li>Eurekaå¦‚æœå‘ç°è¶…è¿‡85%æ¯”ä¾‹çš„æœåŠ¡éƒ½å¿ƒè·³å¼‚å¸¸ï¼Œä¼šè®¤ä¸ºæ˜¯è‡ªå·±çš„ç½‘ç»œå¼‚å¸¸ï¼Œæš‚åœå‰”é™¤æœåŠ¡çš„åŠŸèƒ½ã€‚</li><li>Eureka<strong>æ¯éš”60ç§’æ‰§è¡Œä¸€æ¬¡æœåŠ¡æ£€æµ‹å’Œæ¸…ç†ä»»åŠ¡</strong>ï¼›<strong>Nacosæ˜¯æ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡ã€‚</strong></li></ul><p>ç»¼ä¸Šï¼Œä½ ä¼šå‘ç°Eurekaæ˜¯å°½é‡ä¸å‰”é™¤æœåŠ¡ï¼Œé¿å…â€œè¯¯æ€â€ï¼Œå®å¯æ”¾è¿‡ä¸€åƒï¼Œä¹Ÿä¸é”™æ€ä¸€ä¸ªã€‚è¿™å°±å¯¼è‡´å½“æœåŠ¡çœŸçš„å‡ºç°æ•…éšœæ—¶ï¼Œè¿Ÿè¿Ÿä¸ä¼šè¢«å‰”é™¤ï¼Œç»™æœåŠ¡çš„è°ƒç”¨è€…å¸¦æ¥å›°æ‰°ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œ<strong>å½“Eurekaå‘ç°æœåŠ¡å®•æœºå¹¶ä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤ä»¥åï¼Œå¹¶ä¸ä¼šå°†æœåŠ¡åˆ—è¡¨çš„å˜æ›´æ¶ˆæ¯æ¨é€ç»™æ‰€æœ‰å¾®æœåŠ¡ã€‚è€Œæ˜¯ç­‰å¾…å¾®æœåŠ¡è‡ªå·±æ¥æ‹‰å–æ—¶å‘ç°æœåŠ¡åˆ—è¡¨çš„å˜åŒ–ã€‚<strong>è€Œ</strong>å¾®æœåŠ¡æ¯éš”30ç§’</strong>æ‰ä¼šå»Eurekaæ›´æ–°ä¸€æ¬¡æœåŠ¡åˆ—è¡¨ï¼Œ<strong>è¿›ä¸€æ­¥æ¨è¿Ÿäº†æœåŠ¡å®•æœºæ—¶è¢«å‘ç°çš„æ—¶é—´</strong>ã€‚</p><p>è€ŒNacosä¸­å¾®æœåŠ¡é™¤äº†è‡ªå·±==<strong>å®šæ—¶å»Nacosä¸­æ‹‰å–æœåŠ¡åˆ—è¡¨ä»¥å¤–</strong><mark>ï¼Œ**Nacosè¿˜ä¼š</mark>åœ¨æœåŠ¡åˆ—è¡¨å˜æ›´æ—¶ä¸»åŠ¨æ¨é€æœ€æ–°çš„æœåŠ¡åˆ—è¡¨ç»™æ‰€æœ‰çš„è®¢é˜…è€…ã€‚==**</p><h4 id="_2å°ç»“" tabindex="-1">â‘¡å°ç»“ <a class="header-anchor" href="#_2å°ç»“" aria-label="Permalink to &quot;â‘¡å°ç»“&quot;">â€‹</a></h4><p><img src="/assets/image-20250406160514370.vyNl0ygT.png" alt="image-20250406160514370" loading="lazy"></p><p>ç»¼ä¸Šï¼ŒEurekaå’ŒNacosçš„ç›¸ä¼¼ç‚¹æœ‰ï¼š</p><ul><li>éƒ½æ”¯æŒæœåŠ¡æ³¨å†Œå‘ç°åŠŸèƒ½</li><li>éƒ½æœ‰åŸºäºå¿ƒè·³çš„å¥åº·ç›‘æµ‹åŠŸèƒ½</li><li>éƒ½æ”¯æŒé›†ç¾¤ï¼Œ<strong>é›†ç¾¤é—´æ•°æ®åŒæ­¥é»˜è®¤æ˜¯<mark>APæ¨¡å¼</mark>(å› ä¸ºè‹¥éœ€è¦æ»¡è¶³ä¸€è‡´æ€§<mark>C</mark>ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æ•°æ®åŒæ­¥æ—¶ä¸èƒ½æ³¨å†Œ)ï¼Œå³æœ€å…¨é«˜å¯ç”¨æ€§</strong></li></ul><p>Eurekaå’ŒNacosçš„åŒºåˆ«æœ‰ï¼š</p><ul><li>Eurekaçš„<strong>å¿ƒè·³</strong>æ˜¯30ç§’ä¸€æ¬¡ï¼ŒNacosåˆ™æ˜¯5ç§’ä¸€æ¬¡</li><li>Eurekaå¦‚æœ90ç§’<strong>æœªæ”¶åˆ°å¿ƒè·³</strong>ï¼Œåˆ™è®¤ä¸ºæœåŠ¡ç–‘ä¼¼æ•…éšœï¼Œå¯èƒ½è¢«å‰”é™¤ã€‚Nacosä¸­åˆ™æ˜¯15ç§’è¶…æ—¶ï¼Œ30ç§’å‰”é™¤ã€‚</li><li>Eurekaæ¯éš”60ç§’æ‰§è¡Œä¸€æ¬¡<strong>æœåŠ¡æ£€æµ‹å’Œæ¸…ç†ä»»åŠ¡</strong>ï¼›Nacosæ˜¯æ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡ã€‚</li><li>Eurekaåªèƒ½<strong>ç­‰å¾®æœåŠ¡è‡ªå·±</strong>æ¯éš”30ç§’æ›´æ–°ä¸€æ¬¡æœåŠ¡åˆ—è¡¨ï¼›Nacos**<mark>å³æœ‰å®šæ—¶æ›´æ–°ï¼Œä¹Ÿæœ‰åœ¨æœåŠ¡å˜æ›´æ—¶çš„å¹¿æ’­æ¨é€</mark>**</li><li>Eurekaä»…æœ‰æ³¨å†Œä¸­å¿ƒåŠŸèƒ½ï¼Œè€Œ<strong>NacosåŒæ—¶æ”¯æŒæ³¨å†Œä¸­å¿ƒã€é…ç½®ç®¡ç†</strong></li><li>Eurekaå’ŒNacoséƒ½æ”¯æŒé›†ç¾¤ï¼Œè€Œä¸”é»˜è®¤éƒ½æ˜¯<strong>APæ¨¡å¼</strong></li></ul><h2 id="_3ã€è¿œç¨‹è°ƒç”¨" tabindex="-1">3ã€<mark>è¿œç¨‹è°ƒç”¨</mark> <a class="header-anchor" href="#_3ã€è¿œç¨‹è°ƒç”¨" aria-label="Permalink to &quot;3ã€==è¿œç¨‹è°ƒç”¨==&quot;">â€‹</a></h2><p>æˆ‘ä»¬çŸ¥é“å¾®æœåŠ¡é—´è¿œç¨‹è°ƒç”¨éƒ½æ˜¯æœ‰<strong>OpenFeign</strong>å¸®æˆ‘ä»¬å®Œæˆçš„ï¼Œç”šè‡³å¸®æˆ‘ä»¬å®ç°äº†<strong>æœåŠ¡åˆ—è¡¨ä¹‹é—´çš„è´Ÿè½½å‡è¡¡</strong>ã€‚ä½†<strong>å…·ä½“è´Ÿè½½å‡è¡¡çš„è§„åˆ™</strong>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<strong>ä½•æ—¶åšçš„è´Ÿè½½å‡è¡¡</strong>å‘¢ï¼Ÿ</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥åˆ†æä¸€ä¸‹ã€‚</p><h3 id="_1-è´Ÿè½½å‡è¡¡åŸç†" tabindex="-1">ï¼ˆ1ï¼‰è´Ÿè½½å‡è¡¡åŸç† <a class="header-anchor" href="#_1-è´Ÿè½½å‡è¡¡åŸç†" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰è´Ÿè½½å‡è¡¡åŸç†&quot;">â€‹</a></h3><p>åœ¨SpringCloudçš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œè´Ÿè½½å‡è¡¡éƒ½æ˜¯æœ‰Netflixå…¬å¸å¼€æºçš„<strong>Ribbonç»„ä»¶</strong>æ¥å®ç°çš„ï¼Œç”šè‡³Ribbonè¢«ç›´æ¥é›†æˆåˆ°äº†Eureka-clientå’ŒNacos-Discoveryä¸­ã€‚</p><p>ä½†æ˜¯è‡ªSpringCloud2020ç‰ˆæœ¬å¼€å§‹ï¼Œå·²ç»<strong>å¼ƒç”¨Ribbon</strong>ï¼Œæ”¹ç”¨Springè‡ªå·±å¼€æºçš„Spring Cloud LoadBalanceräº†ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„OpenFeignçš„ä¹Ÿå·²ç»ä¸å…¶æ•´åˆã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡æºç åˆ†æï¼Œæ¥çœ‹çœ‹OpenFeignåº•å±‚æ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ã€‚</p><p><img src="/assets/image-20250406160845785.VCEvO-9o.png" alt="image-20250406160845785" loading="lazy"></p><h4 id="_1æºç è·Ÿè¸ª" tabindex="-1">â‘ æºç è·Ÿè¸ª <a class="header-anchor" href="#_1æºç è·Ÿè¸ª" aria-label="Permalink to &quot;â‘ æºç è·Ÿè¸ª&quot;">â€‹</a></h4><p>è¦å¼„æ¸…æ¥šOpenFeignçš„è´Ÿè½½å‡è¡¡åŸç†ï¼Œæœ€ä½³çš„åŠæ³•è‚¯å®šæ˜¯ä»FeignClientçš„è¯·æ±‚æµç¨‹å…¥æ‰‹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨<code>com.hmall.cart.service.impl.CartServiceImpl</code>ä¸­çš„<code>queryMyCarts</code>æ–¹æ³•ä¸­æ‰“ä¸€ä¸ªæ–­ç‚¹ã€‚ç„¶ååœ¨swaggeré¡µé¢è¯·æ±‚è´­ç‰©è½¦åˆ—è¡¨æ¥å£ã€‚</p><p>è¿›å…¥æ–­ç‚¹åï¼Œè§‚å¯Ÿ<code>ItemClient</code>è¿™ä¸ªæ¥å£ï¼š</p><p><img src="/assets/1743866077031-29.BnxYWeVt.png" alt="img" loading="lazy"></p><p>ä½ ä¼šå‘ç°ItemClientæ˜¯ä¸€ä¸ª<strong>ä»£ç†å¯¹è±¡</strong>ï¼Œè€Œä»£ç†çš„å¤„ç†å™¨åˆ™æ˜¯<code>SentinelInvocationHandler</code>ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­å¼•å…¥äº†<code>Sentinel</code>å¯¼è‡´ã€‚</p><p>æˆ‘ä»¬è¿›å…¥<code>SentinelInvocationHandler</code>ç±»ä¸­çš„<code>invoke</code>æ–¹æ³•çœ‹çœ‹ï¼š</p><p><img src="/assets/1743866077031-30.DWodgZTq.png" alt="img" loading="lazy"></p><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯å…ˆ<strong>è·å–è¢«ä»£ç†çš„æ–¹æ³•çš„å¤„ç†å™¨<code>MethodHandler</code></strong>ï¼Œæ¥ç€ï¼ŒSentinelå°±ä¼šå¼€å¯å¯¹ç°‡ç‚¹èµ„æºçš„ç›‘æ§ï¼š</p><p><img src="/assets/1743866077031-31.CpBqTFgZ.png" alt="img" loading="lazy"></p><p>å¼€å¯Sentinelçš„ç°‡ç‚¹èµ„æºç›‘æ§åï¼Œå°±å¯ä»¥è°ƒç”¨å¤„ç†å™¨äº†ï¼Œæˆ‘ä»¬å°è¯•è·Ÿå…¥ï¼Œä¼šå‘ç°æœ‰ä¸¤ç§å®ç°ï¼š</p><p><img src="/assets/1743866077031-32.BNLdpKdw.png" alt="img" loading="lazy"></p><p>è¿™å…¶å®å°±æ˜¯OpenFeignè¿œç¨‹è°ƒç”¨çš„å¤„ç†å™¨äº†ã€‚ç»§ç»­è·Ÿå…¥ä¼šè¿›å…¥<code>SynchronousMethodHandler</code>è¿™ä¸ªå®ç°ç±»ï¼š</p><p><img src="/assets/1743866077031-33.C8UPRjM6.png" alt="img" loading="lazy"></p><p>åœ¨ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œä¼šå¾ªç¯å°è¯•è°ƒç”¨<code>executeAndDecode()</code>æ–¹æ³•ï¼Œç›´åˆ°æˆåŠŸæˆ–è€…æ˜¯é‡è¯•æ¬¡æ•°è¾¾åˆ°Retryerä¸­é…ç½®çš„ä¸Šé™ã€‚</p><p>æˆ‘ä»¬ç»§ç»­è·Ÿå…¥<code>executeAndDecode()</code>æ–¹æ³•ï¼š</p><p><img src="/assets/1743866077031-34.QWQ3yAK1.png" alt="img" loading="lazy"></p><p><code>executeAndDecode()</code>æ–¹æ³•æœ€ç»ˆä¼šåˆ©ç”¨<code>client</code>å»è°ƒç”¨<code>execute()</code>æ–¹æ³•ï¼Œå‘èµ·è¿œç¨‹è°ƒç”¨ã€‚</p><p>è¿™é‡Œçš„clientçš„ç±»å‹æ˜¯<code>feign.Client</code>æ¥å£ï¼Œå…¶ä¸‹æœ‰å¾ˆå¤šå®ç°ç±»ï¼š</p><p><img src="/assets/1743866077031-35.CIMcAlN8.png" alt="img" loading="lazy"></p><p>ç”±äºæˆ‘ä»¬é¡¹ç›®ä¸­æ•´åˆäº†seataï¼Œæ‰€ä»¥è¿™é‡Œclientå¯¹è±¡çš„ç±»å‹æ˜¯<code>SeataFeignBlockingLoadBalancerClient</code>ï¼Œå†…éƒ¨å®ç°å¦‚ä¸‹ï¼š</p><p><img src="/assets/1743866077031-36.DNk7k71w.png" alt="img" loading="lazy"></p><p>è¿™é‡Œç›´æ¥è°ƒç”¨äº†å…¶çˆ¶ç±»ï¼Œä¹Ÿå°±æ˜¯==<code>FeignBlockingLoadBalancerClient</code>çš„<code>execute</code>==æ–¹æ³•ï¼Œæ¥çœ‹ä¸€ä¸‹ï¼š</p><p><img src="/assets/1743866077031-37.BV-sgNKs.png" alt="img" loading="lazy"></p><p>æ•´æ®µä»£ç ä¸­æ ¸å¿ƒçš„æœ‰4æ­¥ï¼š</p><ul><li><strong>ä»è¯·æ±‚çš„<code>URI</code>ä¸­æ‰¾å‡º<code>serviceId</code></strong></li><li><strong>åˆ©ç”¨<code>loadBalancerClient</code>ï¼Œæ ¹æ®<code>serviceId</code>åšè´Ÿè½½å‡è¡¡ï¼Œé€‰å‡ºä¸€ä¸ªå®ä¾‹<code>ServiceInstance</code></strong></li><li><strong>ç”¨é€‰ä¸­çš„<code>ServiceInstance</code>çš„<code>ip</code>å’Œ<code>port</code>æ›¿ä»£<code>serviceId</code>ï¼Œé‡æ„<code>URI</code></strong></li><li><strong>å‘çœŸæ­£çš„URIå‘é€è¯·æ±‚</strong></li></ul><p>æ‰€ä»¥è´Ÿè½½å‡è¡¡çš„å…³é”®å°±æ˜¯è¿™é‡Œçš„**<mark>loadBalancerClient</mark><strong>ï¼Œç±»å‹æ˜¯<code>org.springframework.cloud.client.loadbalancer.LoadBalancerClient</code>ï¼Œè¿™æ˜¯</strong><code>Spring-Cloud-Common</code>æ¨¡å—ä¸­å®šä¹‰çš„æ¥å£ï¼Œåªæœ‰ä¸€ä¸ªå®ç°ç±»**ï¼š</p><p><img src="/assets/1743866077031-38.lcBCXbSd.png" alt="img" loading="lazy"></p><p>è€Œè¿™é‡Œçš„<code>org.springframework.cloud.client.loadbalancer.BlockingLoadBalancerClient</code>æ­£æ˜¯<code>Spring-Cloud-LoadBalancer</code>æ¨¡å—ä¸‹çš„ä¸€ä¸ªç±»ï¼š</p><p><img src="/assets/1743866077031-39.DzZLWe2T.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬ç»§ç»­è·Ÿå…¥å…¶==<code>BlockingLoadBalancerClient#choose()</code>==æ–¹æ³•ï¼š</p><p><img src="/assets/1743866077031-40.Z5UEl1fb.png" alt="img" loading="lazy"></p><p>å›¾ä¸­ä»£ç çš„æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p><ul><li>æ ¹æ®serviceIdæ‰¾åˆ°è¿™ä¸ªæœåŠ¡é‡‡ç”¨çš„<strong>è´Ÿè½½å‡è¡¡å™¨ï¼ˆ<code>ReactiveLoadBalancer</code>ï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªæœåŠ¡é…ä¸åŒçš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚</li><li>åˆ©ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼ˆ<code>ReactiveLoadBalancer</code>ï¼‰ä¸­çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰å‡ºä¸€ä¸ªæœåŠ¡å®ä¾‹</li></ul><p><code>ReactiveLoadBalancer</code>æ˜¯<code>Spring-Cloud-Common</code>ç»„ä»¶ä¸­å®šä¹‰çš„è´Ÿè½½å‡è¡¡å™¨æ¥å£è§„èŒƒï¼Œè€Œ<code>Spring-Cloud-Loadbalancer</code>ç»„ä»¶ç»™å‡ºäº†ä¸¤ä¸ªå®ç°ï¼š</p><p><img src="/assets/1743866077031-41.BgKafXGj.png" alt="img" loading="lazy"></p><p>é»˜è®¤çš„å®ç°æ˜¯<code>RoundRobinLoadBalancer</code>ï¼Œå³==<strong>è½®è¯¢</strong>è´Ÿè½½å‡è¡¡å™¨==ã€‚è´Ÿè½½å‡è¡¡å™¨çš„æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p><p><img src="/assets/1743866077031-42.DjlaVcvl.png" alt="img" loading="lazy"></p><p>æ ¸å¿ƒæµç¨‹å°±æ˜¯ä¸¤æ­¥ï¼š</p><ul><li>åˆ©ç”¨<code>ServiceInstanceListSupplier#get()</code>æ–¹æ³•æ‹‰å–æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œè¿™ä¸€æ­¥æ˜¯é‡‡ç”¨å“åº”å¼ç¼–ç¨‹</li><li>åˆ©ç”¨æœ¬ç±»ï¼Œä¹Ÿå°±æ˜¯<code>RoundRobinLoadBalancer</code>çš„<code>getInstanceResponse()</code>æ–¹æ³•æŒ‘é€‰ä¸€ä¸ªå®ä¾‹ï¼Œè¿™é‡Œé‡‡ç”¨äº†<strong>è½®è¯¢ç®—æ³•æ¥æŒ‘é€‰</strong>ã€‚</li></ul><p>è¿™é‡Œçš„ServiceInstanceListSupplieræœ‰å¾ˆå¤šå®ç°ï¼š</p><p><img src="/assets/1743866077031-43.DOOw-Q0K.png" alt="img" loading="lazy"></p><p>å…¶ä¸­CachingServiceInstanceListSupplieré‡‡ç”¨äº†è£…é¥°æ¨¡å¼ï¼ŒåŠ äº†æœåŠ¡å®ä¾‹åˆ—è¡¨ç¼“å­˜ï¼Œé¿å…æ¯æ¬¡éƒ½è¦å»æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡å®ä¾‹åˆ—è¡¨ã€‚è€Œå…¶å†…éƒ¨æ˜¯åŸºäº<code>DiscoveryClientServiceInstanceListSupplier</code>æ¥å®ç°çš„ã€‚</p><p>åœ¨è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå°±ä¼šå¼‚æ­¥çš„åŸºäºDiscoveryClientå»æ‹‰å–æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼š</p><p><img src="/assets/1743866077031-44.Cr5s9ofI.png" alt="img" loading="lazy"></p><h4 id="_2æµç¨‹æ¢³ç†" tabindex="-1">â‘¡æµç¨‹æ¢³ç† <a class="header-anchor" href="#_2æµç¨‹æ¢³ç†" aria-label="Permalink to &quot;â‘¡æµç¨‹æ¢³ç†&quot;">â€‹</a></h4><p>æ ¹æ®ä¹‹å‰çš„åˆ†æï¼Œæˆ‘ä»¬ä¼šå‘ç°Springåœ¨æ•´åˆOpenFeignçš„æ—¶å€™ï¼Œå®ç°äº†<code>org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient</code>ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†OpenFeignå‘èµ·è¿œç¨‹è°ƒç”¨çš„æ ¸å¿ƒæµç¨‹ã€‚ä¹Ÿå°±æ˜¯å››æ­¥ï¼š</p><ul><li><p>è·å–è¯·æ±‚ä¸­çš„<code>serviceId</code></p></li><li><p>æ ¹æ®<code>serviceId</code>è´Ÿè½½å‡è¡¡ï¼Œæ‰¾å‡ºä¸€ä¸ªå¯ç”¨çš„æœåŠ¡å®ä¾‹</p></li><li><p>åˆ©ç”¨æœåŠ¡å®ä¾‹çš„<code>ip</code>å’Œ<code>port</code>ä¿¡æ¯é‡æ„url</p><ul><li>è´Ÿè½½å‡è¡¡å™¨å†…éƒ¨ä¼šæ ¹æ®æœåŠ¡idï¼Œä»æ³¨å†Œä¸­å¿ƒæ‹‰å»æœåŠ¡åˆ—è¡¨ï¼Œå¹¶é‡‡<strong>ç”¨é…ç½®çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼ˆé»˜è®¤è½®è¯¢ï¼‰é€‰å‡ºä¸€ä¸ªå®ä¾‹</strong>ï¼Œè·å–è¯¥å®ä¾‹çš„ipå’Œç«¯å£ï¼Œæ›¿æ¢è¯·æ±‚urlä¸­çš„æœåŠ¡æ˜ï¼Œå˜æˆçœŸæ­£å¯çš„urlï¼Œå‘é€è¯·æ±‚ã€‚</li></ul></li><li><p>å‘çœŸæ­£çš„urlå‘èµ·è¯·æ±‚</p></li></ul><p>è€Œå…·ä½“çš„è´Ÿè½½å‡è¡¡åˆ™æ˜¯ä¸æ˜¯ç”±<code>OpenFeign</code>ç»„ä»¶è´Ÿè´£ã€‚è€Œæ˜¯åˆ†æˆäº†<strong>è´Ÿè½½å‡è¡¡çš„æ¥å£è§„èŒƒ</strong>ï¼Œä»¥åŠ<strong>è´Ÿè½½å‡è¡¡çš„å…·ä½“å®ç°</strong>ä¸¤éƒ¨åˆ†ã€‚</p><p>è´Ÿè½½å‡è¡¡çš„æ¥å£è§„èŒƒæ˜¯å®šä¹‰åœ¨**<code>Spring-Cloud-Common</code>æ¨¡å—ä¸­**ï¼ŒåŒ…å«ä¸‹é¢çš„æ¥å£ï¼š</p><ul><li><code>LoadBalancerClient</code>ï¼š<strong>è´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯</strong>ï¼ŒèŒè´£æ˜¯æ ¹æ®serviceIdæœ€ç»ˆè´Ÿè½½å‡è¡¡ï¼Œé€‰å‡ºä¸€ä¸ªæœåŠ¡å®ä¾‹</li><li><code>ReactiveLoadBalancer</code>ï¼š<strong>è´Ÿè½½å‡è¡¡å™¨</strong>ï¼Œè´Ÿè´£å…·ä½“çš„<strong>è´Ÿè½½å‡è¡¡ç®—æ³•</strong></li></ul><p>OpenFeignçš„è´Ÿè½½å‡è¡¡æ˜¯åŸºäº<code>Spring-Cloud-Common</code>æ¨¡å—ä¸­çš„è´Ÿè½½å‡è¡¡è§„åˆ™æ¥å£ï¼Œå¹¶æ²¡æœ‰å†™æ­»å…·ä½“å®ç°ã€‚è¿™å°±æ„å‘³ç€ä»¥åè¿˜å¯ä»¥æ‹“å±•å…¶å®ƒå„ç§è´Ÿè½½å‡è¡¡çš„å®ç°ã€‚</p><p>ä¸è¿‡ç›®å‰<code>SpringCloud</code>ä¸­åªæœ‰<code>Spring-Cloud-Loadbalancer</code>è¿™ä¸€ç§å®ç°ã€‚</p><p><code>Spring-Cloud-Loadbalancer</code>æ¨¡å—ä¸­ï¼Œå®ç°äº†<code>Spring-Cloud-Common</code>æ¨¡å—çš„ç›¸å…³æ¥å£ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>BlockingLoadBalancerClient</code>ï¼šå®ç°äº†<code>LoadBalancerClient</code>ï¼Œä¼šæ ¹æ®serviceIdé€‰å‡ºè´Ÿè½½å‡è¡¡å™¨å¹¶è°ƒç”¨å…¶ç®—æ³•å®ç°è´Ÿè½½å‡è¡¡ã€‚</li><li><code>RoundRobinLoadBalancer</code>ï¼šåŸºäºè½®è¯¢ç®—æ³•å®ç°äº†<code>ReactiveLoadBalancer</code></li><li><code>RandomLoadBalancer</code>ï¼šåŸºäºéšæœºç®—æ³•å®ç°äº†<code>ReactiveLoadBalancer</code>ï¼Œ</li></ul><p>è¿™æ ·ä¸€æ¥ï¼Œæ•´ä½“æ€è·¯å°±éå¸¸æ¸…æ¥šäº†ï¼Œæµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="/assets/image-20250406162722077.1chUCUub.png" alt="image-20250406162722077" loading="lazy"></p><p><img src="/assets/image-20250406162102004.DTHeoru4.png" alt="image-20250406162102004" loading="lazy"></p><h3 id="_2-nacosrule-åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1">ï¼ˆ2ï¼‰<mark>NacosRule</mark>-åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥ <a class="header-anchor" href="#_2-nacosrule-åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰==NacosRule==-åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥&quot;">â€‹</a></h3><p>ä¹‹å‰åˆ†ææºç çš„æ—¶å€™æˆ‘ä»¬å‘ç°è´Ÿè½½å‡è¡¡çš„ç®—æ³•æ˜¯æœ‰<code>ReactiveLoadBalancer</code>æ¥å®šä¹‰çš„ï¼Œæˆ‘ä»¬å‘ç°å®ƒçš„å®ç°ç±»æœ‰ä¸‰ä¸ªï¼š</p><p><img src="/assets/1743866077031-41.BgKafXGj.png" alt="img" loading="lazy"></p><p>å…¶ä¸­<code>RoundRobinLoadBalancer</code>å’Œ<code>RandomLoadBalancer</code>æ˜¯ç”±<code>Spring-Cloud-Loadbalancer</code>æ¨¡å—æä¾›çš„ï¼Œè€Œ<code>NacosLoadBalancer</code>åˆ™æ˜¯ç”±<code>Nacos-Discorvery</code>æ¨¡å—æä¾›çš„ã€‚</p><p>é»˜è®¤é‡‡ç”¨çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ˜¯<code>RoundRobinLoadBalancer</code>ï¼Œé‚£å¦‚æœæˆ‘ä»¬è¦<strong>åˆ‡æ¢è´Ÿè½½å‡è¡¡ç­–ç•¥</strong>è¯¥æ€ä¹ˆåŠï¼Ÿ</p><h4 id="_1ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥" tabindex="-1">â‘ ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥ <a class="header-anchor" href="#_1ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥" aria-label="Permalink to &quot;â‘ ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥&quot;">â€‹</a></h4><p>æŸ¥çœ‹æºç ä¼šå‘ç°ï¼Œ<code>Spring-Cloud-Loadbalancer</code>æ¨¡å—ä¸­<strong>æœ‰ä¸€ä¸ª<mark>è‡ªåŠ¨é…ç½®ç±»</mark></strong>ï¼š</p><p><img src="/assets/1743866077031-46.CvGNyHn8.png" alt="img" loading="lazy"></p><p>å…¶ä¸­<strong>å®šä¹‰äº†é»˜è®¤çš„è´Ÿè½½å‡è¡¡å™¨</strong>ï¼š</p><p><img src="/assets/1743866077031-47.rQyNno7s.png" alt="img" loading="lazy"></p><p>è¿™ä¸ªBeanä¸Šæ·»åŠ äº†<code>@ConditionalOnMissingBean</code>æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬<strong>è‡ªå®šä¹‰äº†è¿™ä¸ªç±»å‹çš„beanï¼Œåˆ™è´Ÿè½½å‡è¡¡çš„ç­–ç•¥å°±ä¼šè¢«æ”¹å˜ã€‚</strong></p><p>æˆ‘ä»¬åœ¨<code>hm-cart</code>æ¨¡å—ä¸­çš„æ·»åŠ ä¸€ä¸ªé…ç½®ç±»ï¼š</p><p><img src="/assets/1743866077031-48.DDup2Nf5.png" alt="img" loading="lazy"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.hmall.cart.config;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.alibaba.cloud.nacos.NacosDiscoveryProperties;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.alibaba.cloud.nacos.loadbalancer.NacosLoadBalancer;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.client.ServiceInstance;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.loadbalancer.core.ReactorLoadBalancer;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.loadbalancer.core.ServiceInstanceListSupplier;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.Bean;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.core.env.Environment;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OpenFeignConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReactorLoadBalancer&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ServiceInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reactorServiceInstanceLoadBalancer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Environment </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, NacosDiscoveryProperties </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">properties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            LoadBalancerClientFactory </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">loadBalancerClientFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> environment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(LoadBalancerClientFactory.PROPERTY_NAME);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NacosLoadBalancer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                loadBalancerClientFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLazyProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name, ServiceInstanceListSupplier.class),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            properties);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>æ³¨æ„</strong>ï¼š</p><p>è¿™ä¸ª<strong>é…ç½®ç±»åƒä¸‡ä¸è¦åŠ <code>@Configuration</code>æ³¨è§£ï¼Œä¹Ÿä¸è¦è¢«SpringBootApplicationæ‰«æåˆ°ã€‚</strong></p><p><strong>ç”±äºè¿™ä¸ªOpenFeignConfigæ²¡æœ‰åŠ <code>@Configuration</code>æ³¨è§£ï¼Œä¹Ÿå°±æ²¡æœ‰è¢«SpringåŠ è½½</strong>ï¼Œå› æ­¤æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬<strong>è¦<mark>åœ¨å¯åŠ¨ç±»ä¸Šé€šè¿‡æ³¨è§£æ¥å£°æ˜è¿™ä¸ªé…ç½®</mark></strong>ã€‚</p><p>æœ‰ä¸¤ç§åšæ³•ï¼š</p><ul><li><strong><mark>å…¨å±€</mark>é…ç½®ï¼šå¯¹æ‰€æœ‰æœåŠ¡ç”Ÿæ•ˆ</strong></li></ul><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LoadBalancerClients</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">defaultConfiguration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenFeignConfig.class)</span></span></code></pre></div><ul><li><strong><mark>å±€éƒ¨</mark>é…ç½®ï¼šåªå¯¹æŸä¸ªæœåŠ¡ç”Ÿæ•ˆ</strong></li></ul><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LoadBalancerClients</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">LoadBalancerClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;item-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">configuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenFeignConfig.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>æˆ‘ä»¬é€‰æ‹©å…¨å±€é…ç½®ï¼š</p><p><img src="/assets/1743866077031-49.DzjyUMpw.png" alt="img" loading="lazy"></p><p>DEBUGé‡å¯åæµ‹è¯•ï¼Œä¼šå‘ç°è´Ÿè½½å‡è¡¡å™¨çš„ç±»å‹ç¡®å®åˆ‡æ¢æˆåŠŸï¼š</p><p><img src="/assets/1743866077031-50.DhVBri2B.png" alt="img" loading="lazy"></p><h4 id="_2é›†ç¾¤ä¼˜å…ˆ" tabindex="-1">â‘¡<mark>é›†ç¾¤ä¼˜å…ˆ</mark> <a class="header-anchor" href="#_2é›†ç¾¤ä¼˜å…ˆ" aria-label="Permalink to &quot;â‘¡==é›†ç¾¤ä¼˜å…ˆ==&quot;">â€‹</a></h4><p><code>RoundRobinLoadBalancer</code>æ˜¯è½®è¯¢ç®—æ³•ï¼Œ<code>RandomLoadBalancer</code>æ˜¯éšæœºç®—æ³•ï¼Œé‚£ä¹ˆ<code>NacosLoadBalancer</code>æ˜¯ä»€ä¹ˆè´Ÿè½½å‡è¡¡ç®—æ³•å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬é€šè¿‡æºç æ¥åˆ†æä¸€ä¸‹ï¼Œå…ˆçœ‹ç¬¬ä¸€éƒ¨åˆ†ï¼š</p><p><img src="/assets/1743866077031-51.CaodaHfP.png" alt="img" loading="lazy"></p><p>è¿™éƒ¨åˆ†ä»£ç çš„å¤§æ¦‚æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>é€šè¿‡<code>ServiceInstanceListSupplier</code>è·å–æœåŠ¡å®ä¾‹åˆ—è¡¨</li><li>è·å–<code>NacosDiscoveryProperties</code>ä¸­çš„<code>clusterName</code>ï¼Œä¹Ÿå°±æ˜¯ymlæ–‡ä»¶ä¸­çš„é…ç½®ï¼Œä»£è¡¨å½“å‰æœåŠ¡å®ä¾‹æ‰€åœ¨é›†ç¾¤ä¿¡æ¯ï¼ˆå‚è€ƒ<code>2.2</code>å°èŠ‚ï¼Œåˆ†çº§æ¨¡å‹ï¼‰</li><li>ç„¶ååˆ©ç”¨streamçš„filterè¿‡æ»¤æ‰¾åˆ°è¢«è°ƒç”¨çš„æœåŠ¡å®ä¾‹ä¸­ä¸å½“å‰æœåŠ¡å®ä¾‹<code>clusterName</code>ä¸€è‡´çš„ã€‚ç®€å•æ¥è¯´å°±æ˜¯<strong>æœåŠ¡è°ƒç”¨è€…ä¸æœåŠ¡æä¾›è€…è¦åœ¨ä¸€ä¸ªé›†ç¾¤</strong></li></ul><p>ä¸ºä»€ä¹ˆï¼Ÿ</p><p>å‡å¦‚æˆ‘ç°åœ¨æœ‰ä¸¤ä¸ªæœºæˆ¿ï¼Œéƒ½éƒ¨ç½²æœ‰<code>item-service</code>å’Œ<code>cart-service</code>æœåŠ¡ï¼š</p><p><img src="/assets/1743866077031-52.DuNmpKrt.png" alt="img" loading="lazy"></p><p>å‡å¦‚è¿™äº›æœåŠ¡å®ä¾‹å…¨éƒ¨éƒ½æ³¨å†Œåˆ°äº†åŒä¸€ä¸ªNacosã€‚ç°åœ¨ï¼Œæ­å·æœºæˆ¿çš„<code>cart-service</code>è¦è°ƒç”¨<code>item-service</code>ï¼Œä¼šæ‹‰å–åˆ°æ‰€æœ‰æœºæˆ¿çš„item-serviceçš„å®ä¾‹ã€‚è°ƒç”¨æ—¶ä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š</p><ul><li>ç›´æ¥è°ƒç”¨å½“å‰æœºæˆ¿çš„<code>item-service</code></li><li>è°ƒç”¨å…¶å®ƒæœºæˆ¿çš„<code>item-service</code></li></ul><p>æœ¬æœºæˆ¿è°ƒç”¨å‡ ä¹æ²¡æœ‰ç½‘ç»œå»¶è¿Ÿï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚è€Œè·¨æœºæˆ¿è°ƒç”¨ï¼Œå¦‚æœä¸¤ä¸ªæœºæˆ¿ç›¸è·å¾ˆè¿œï¼Œä¼šå­˜åœ¨è¾ƒå¤§çš„ç½‘ç»œå»¶è¿Ÿã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½é¿å…è·¨æœºæˆ¿è°ƒç”¨ï¼Œä¼˜å…ˆæœ¬åœ°é›†ç¾¤è°ƒç”¨ï¼š</p><p><img src="/assets/1743866077031-53.zdI_s6d1.png" alt="img" loading="lazy"></p><p>ç°åœ¨çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š</p><ul><li><code>cart-service</code>æ‰€åœ¨é›†ç¾¤æ˜¯<code>default</code></li><li><code>item-service</code>çš„8081ã€8083æ‰€åœ¨é›†ç¾¤çš„<code>default</code></li><li><code>item-service</code>çš„8084æ‰€åœ¨é›†ç¾¤æ˜¯<code>BJ</code></li></ul><p><code>cart-service</code>è®¿é—®<code>item-service</code>æ—¶ï¼Œåº”è¯¥ä¼˜å…ˆè®¿é—®8081å’Œ8082ï¼Œæˆ‘ä»¬é‡å¯<code>cart-service</code>ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š</p><p><img src="/assets/1743866077031-54.qVBIBZrI.png" alt="img" loading="lazy"></p><p>å¯ä»¥çœ‹åˆ°åŸæœ¬æ˜¯3ä¸ªå®ä¾‹ï¼Œç»è¿‡ç­›é€‰åè¿˜å‰©ä¸‹2ä¸ªå®ä¾‹ã€‚</p><p>æŸ¥çœ‹Debugæ§åˆ¶å°ï¼š</p><p><img src="/assets/1743866077031-55.DzrO3_Wt.png" alt="img" loading="lazy"></p><p>åŒé›†ç¾¤çš„å®ä¾‹è¿˜å‰©ä¸‹ä¸¤ä¸ªï¼Œæ¥ä¸‹æ¥å°±éœ€è¦åšè´Ÿè½½å‡è¡¡äº†ï¼Œå…·ä½“ç”¨çš„æ˜¯ä»€ä¹ˆç®—æ³•å‘¢ï¼Ÿ</p><h4 id="_3æƒé‡é…ç½®" tabindex="-1">â‘¢<mark>æƒé‡é…ç½®</mark> <a class="header-anchor" href="#_3æƒé‡é…ç½®" aria-label="Permalink to &quot;â‘¢==æƒé‡é…ç½®==&quot;">â€‹</a></h4><p>æˆ‘ä»¬ç»§ç»­è·Ÿè¸ª<code>NacosLoadBalancer</code>æºç ï¼š</p><p><img src="/assets/1743866077031-56.NHPP0Sp2.png" alt="img" loading="lazy"></p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ è¿™ä¸ªæƒé‡æ˜¯æ€ä¹ˆé…çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ‰“å¼€nacosæ§åˆ¶å°ï¼Œè¿›å…¥<code>item-service</code>çš„æœåŠ¡è¯¦æƒ…é¡µï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªå®ä¾‹åé¢éƒ½æœ‰ä¸€ä¸ª<strong>ç¼–è¾‘</strong>æŒ‰é’®ï¼š</p><p><img src="/assets/1743866077031-57.O7yQW-dv.png" alt="img" loading="lazy"></p><p>ç‚¹å‡»ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªç¼–è¾‘è¡¨å•ï¼š</p><p><img src="/assets/1743866077031-58.ClDcmudf.png" alt="img" loading="lazy"></p><p>æˆ‘ä»¬å°†è¿™é‡Œçš„æƒé‡ä¿®æ”¹ä¸º5ï¼š</p><p><img src="/assets/1743866077032-59.oMBMts9M.png" alt="img" loading="lazy"></p><p>è®¿é—®10æ¬¡è´­ç‰©è½¦æ¥å£ï¼Œå¯ä»¥å‘ç°å¤§å¤šæ•°è¯·æ±‚éƒ½è®¿é—®åˆ°äº†8083è¿™ä¸ªå®ä¾‹ã€‚</p><h2 id="_4ã€ğŸš€-æœåŠ¡ä¿æŠ¤" tabindex="-1">4ã€ğŸš€==<em>æœåŠ¡ä¿æŠ¤</em>== <a class="header-anchor" href="#_4ã€ğŸš€-æœåŠ¡ä¿æŠ¤" aria-label="Permalink to &quot;4ã€ğŸš€==*æœåŠ¡ä¿æŠ¤*==&quot;">â€‹</a></h2><p>åœ¨SpringCloudçš„æ—©æœŸç‰ˆæœ¬ä¸­é‡‡ç”¨çš„<strong>æœåŠ¡ä¿æŠ¤æŠ€æœ¯å«åš<code>Hystix</code></strong>ï¼Œä¸è¿‡åæ¥è¢«æ·˜æ±°ï¼Œæ›¿æ¢ä¸º<code>Spring Cloud Circuit Breaker</code>ï¼Œå…¶åº•å±‚å®ç°å¯ä»¥æ˜¯<code>Spring Retry</code>å’Œ<code>Resilience4J</code>ã€‚</p><p>ä¸è¿‡åœ¨å›½å†…ä½¿ç”¨è¾ƒå¤šè¿˜æ˜¯**<code>SpringCloudAlibaba</code>ä¸­çš„<code>Sentinel</code>ç»„ä»¶**ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åˆ†æä¸€ä¸‹<code>Sentinel</code>ç»„ä»¶çš„ä¸€äº›åŸºæœ¬å®ç°åŸç†ä»¥åŠå®ƒä¸<code>Hystix</code>çš„å·®å¼‚ã€‚</p><h3 id="_1-çº¿ç¨‹éš”ç¦»" tabindex="-1">ï¼ˆ1ï¼‰çº¿ç¨‹éš”ç¦» <a class="header-anchor" href="#_1-çº¿ç¨‹éš”ç¦»" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰çº¿ç¨‹éš”ç¦»&quot;">â€‹</a></h3><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹çº¿ç¨‹éš”ç¦»åŠŸèƒ½ï¼Œæ— è®ºæ˜¯Hystixè¿˜æ˜¯Sentinel<strong>éƒ½æ”¯æŒçº¿ç¨‹éš”ç¦»</strong>ã€‚ä¸è¿‡å…¶å®ç°æ–¹å¼ä¸åŒã€‚</p><h4 id="_1çº¿ç¨‹éš”ç¦»çš„ä¸¤ç§æ–¹å¼" tabindex="-1">â‘ çº¿ç¨‹éš”ç¦»çš„ä¸¤ç§æ–¹å¼ <a class="header-anchor" href="#_1çº¿ç¨‹éš”ç¦»çš„ä¸¤ç§æ–¹å¼" aria-label="Permalink to &quot;â‘ çº¿ç¨‹éš”ç¦»çš„ä¸¤ç§æ–¹å¼&quot;">â€‹</a></h4><p>çº¿ç¨‹éš”ç¦»æœ‰ä¸¤ç§æ–¹å¼å®ç°ï¼š</p><ul><li><strong>çº¿ç¨‹æ± </strong>éš”ç¦»ï¼š<strong>ç»™æ¯ä¸ªæœåŠ¡è°ƒç”¨ä¸šåŠ¡åˆ†é…ä¸€ä¸ª<mark>çº¿ç¨‹æ± </mark></strong>ï¼Œåˆ©ç”¨çº¿ç¨‹æ± æœ¬èº«å®ç°éš”ç¦»æ•ˆæœ</li><li><strong>ä¿¡å·é‡</strong>éš”ç¦»ï¼šä¸åˆ›å»ºçº¿ç¨‹æ± ï¼Œè€Œæ˜¯**<mark>è®¡æ•°å™¨æ¨¡å¼</mark>ï¼Œè®°å½•ä¸šåŠ¡ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡ï¼Œè¾¾åˆ°ä¿¡å·é‡ä¸Šé™æ—¶ï¼Œç¦æ­¢æ–°çš„è¯·æ±‚**</li></ul><p>å¦‚å›¾ï¼š</p><p><img src="/assets/image-20250406164144306.BjupG6EN.png" alt="image-20250406164144306" loading="lazy"></p><p><img src="/assets/1743866077032-60.B79HYyop.jpeg" alt="img" loading="lazy"></p><p>ä¸¤è€…çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p><p><img src="/assets/1743866077032-61.C8h_rW8W.png" alt="img" loading="lazy"></p><p><strong>Sentinelçš„çº¿ç¨‹éš”ç¦»å°±æ˜¯åŸºäºä¿¡å·é‡éš”ç¦»å®ç°</strong>çš„ï¼Œè€ŒHystixä¸¤ç§éƒ½æ”¯æŒï¼Œä½†é»˜è®¤æ˜¯åŸºäºçº¿ç¨‹æ± éš”ç¦»ã€‚</p><h4 id="_2sentinelå’Œhystixçš„åŒºåˆ«" tabindex="-1">â‘¡Sentinelå’ŒHystixçš„åŒºåˆ« <a class="header-anchor" href="#_2sentinelå’Œhystixçš„åŒºåˆ«" aria-label="Permalink to &quot;â‘¡Sentinelå’ŒHystixçš„åŒºåˆ«&quot;">â€‹</a></h4><p><img src="/assets/image-20250406164327094.Co-Rtcrb.png" alt="image-20250406164327094" loading="lazy"></p><h3 id="_2-ğŸš€-æ»‘åŠ¨çª—å£ç®—æ³•" tabindex="-1">ï¼ˆ2ï¼‰ğŸš€==<em>æ»‘åŠ¨çª—å£ç®—æ³•</em>== <a class="header-anchor" href="#_2-ğŸš€-æ»‘åŠ¨çª—å£ç®—æ³•" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰ğŸš€==*æ»‘åŠ¨çª—å£ç®—æ³•*==&quot;">â€‹</a></h3><p>åœ¨ç†”æ–­åŠŸèƒ½ä¸­ï¼Œéœ€è¦<strong>ç»Ÿè®¡å¼‚å¸¸è¯·æ±‚æˆ–æ…¢è¯·æ±‚æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯è®¡æ•°</strong>ã€‚åœ¨é™æµçš„æ—¶å€™ï¼Œè¦<strong>ç»Ÿè®¡æ¯ç§’é’Ÿçš„QPS</strong>ï¼ŒåŒæ ·æ˜¯è®¡æ•°ã€‚å¯è§<strong>è®¡æ•°ç®—æ³•</strong>åœ¨ç†”æ–­é™æµä¸­çš„åº”ç”¨éå¸¸å¤šã€‚sentinelä¸­é‡‡ç”¨çš„è®¡æ•°å™¨ç®—æ³•å°±æ˜¯<strong>æ»‘åŠ¨çª—å£è®¡æ•°ç®—æ³•</strong>ã€‚</p><h4 id="_1å›ºå®šçª—å£è®¡æ•°" tabindex="-1">â‘ <mark>å›ºå®š</mark>çª—å£è®¡æ•° <a class="header-anchor" href="#_1å›ºå®šçª—å£è®¡æ•°" aria-label="Permalink to &quot;â‘ ==å›ºå®š==çª—å£è®¡æ•°&quot;">â€‹</a></h4><p>è¦äº†è§£æ»‘åŠ¨çª—å£è®¡æ•°ç®—æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçŸ¥é“å›ºå®šçª—å£è®¡æ•°ç®—æ³•ï¼Œå…¶åŸºæœ¬åŸç†å¦‚å›¾ï¼š</p><p><img src="/assets/1743866077032-62.D20eXe28.png" alt="img" loading="lazy"></p><p>è¯´æ˜ï¼š</p><ul><li>å°†<strong>æ—¶é—´åˆ’åˆ†ä¸ºå¤šä¸ªçª—å£</strong>ï¼Œçª—å£æ—¶é—´è·¨åº¦ç§°ä¸º==<code>Interval</code>==ï¼Œæœ¬ä¾‹ä¸­ä¸º1000msï¼›</li><li>æ¯ä¸ªçª—å£ç»´æŠ¤1ä¸ªè®¡æ•°å™¨ï¼Œæ¯æœ‰1æ¬¡è¯·æ±‚å°±å°†è®¡æ•°å™¨<code>+1</code>ã€‚é™æµå°±æ˜¯è®¾ç½®è®¡æ•°å™¨é˜ˆå€¼ï¼Œæœ¬ä¾‹ä¸º3ï¼Œå›¾ä¸­çº¢çº¿æ ‡è®°</li><li>å¦‚æœ<strong>è®¡æ•°å™¨è¶…è¿‡äº†é™æµé˜ˆå€¼ï¼Œåˆ™è¶…å‡ºé˜ˆå€¼çš„è¯·æ±‚éƒ½è¢«ä¸¢å¼ƒ</strong>ã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><p><img src="/assets/1743866077032-63.BfW_HQTD.png" alt="img" loading="lazy"></p><p>è¯´æ˜ï¼š</p><ul><li>ç¬¬1ã€2ç§’ï¼Œè¯·æ±‚æ•°é‡éƒ½å°äº3ï¼Œæ²¡é—®é¢˜</li><li>ç¬¬3ç§’ï¼Œè¯·æ±‚æ•°é‡ä¸º5ï¼Œè¶…è¿‡é˜ˆå€¼ï¼Œè¶…å‡ºçš„è¯·æ±‚è¢«æ‹’ç»</li></ul><p>ä½†æ˜¯æˆ‘ä»¬è€ƒè™‘ä¸€ç§ç‰¹æ®Šåœºæ™¯ï¼Œå¦‚å›¾ï¼š</p><p><img src="/assets/1743866077032-64.CRetD9E6.png" alt="img" loading="lazy"></p><p>è¯´æ˜ï¼š</p><ul><li><strong>å‡å¦‚åœ¨ç¬¬5ã€6ç§’ï¼Œè¯·æ±‚æ•°é‡éƒ½ä¸º3ï¼Œæ²¡æœ‰è¶…è¿‡é˜ˆå€¼ï¼Œå…¨éƒ¨æ”¾è¡Œ</strong></li><li>ä½†æ˜¯ï¼Œå¦‚æœç¬¬5ç§’çš„ä¸‰æ¬¡è¯·æ±‚éƒ½æ˜¯åœ¨4.5~5ç§’ä¹‹é—´è¿›æ¥ï¼›ç¬¬6ç§’çš„è¯·æ±‚æ˜¯åœ¨5~5.5ä¹‹é—´è¿›æ¥ã€‚é‚£ä¹ˆ<strong>ä»ç¬¬4.5~5.ä¹‹é—´å°±æœ‰6æ¬¡è¯·æ±‚ï¼ä¹Ÿå°±æ˜¯è¯´æ¯ç§’çš„QPSè¾¾åˆ°äº†6ï¼Œ<mark>è¿œè¶…é˜ˆå€¼</mark></strong>ã€‚</li></ul><p>è¿™å°±æ˜¯å›ºå®šçª—å£è®¡æ•°ç®—æ³•çš„é—®é¢˜ï¼Œå®ƒåªèƒ½ç»Ÿè®¡å½“å‰æŸ1ä¸ªæ—¶é—´çª—çš„è¯·æ±‚æ•°é‡æ˜¯å¦åˆ°è¾¾é˜ˆå€¼ï¼Œ<strong>æ— æ³•ç»“åˆå‰åçš„æ—¶é—´çª—çš„æ•°æ®åšç»¼åˆç»Ÿè®¡</strong>ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å°±éœ€è¦æ»‘åŠ¨æ—¶é—´çª—å£ç®—æ³•æ¥è§£å†³ã€‚</p><h4 id="_2æ»‘åŠ¨çª—å£è®¡æ•°" tabindex="-1">â‘¡<mark>æ»‘åŠ¨</mark>çª—å£è®¡æ•° <a class="header-anchor" href="#_2æ»‘åŠ¨çª—å£è®¡æ•°" aria-label="Permalink to &quot;â‘¡==æ»‘åŠ¨==çª—å£è®¡æ•°&quot;">â€‹</a></h4><p>å›ºå®šæ—¶é—´çª—å£ç®—æ³•ä¸­çª—å£æœ‰å¾ˆå¤šï¼Œå…¶è·¨åº¦å’Œä½ç½®æ˜¯ä¸æ—¶é—´åŒºé—´ç»‘å®šï¼Œå› æ­¤æ˜¯å¾ˆå¤šå›ºå®šä¸åŠ¨çš„çª—å£ã€‚è€Œæ»‘åŠ¨æ—¶é—´çª—å£ç®—æ³•ä¸­åªåŒ…å«1ä¸ªå›ºå®šè·¨åº¦çš„çª—å£ï¼Œ<strong>ä½†çª—å£æ˜¯å¯ç§»åŠ¨åŠ¨çš„ï¼Œä¸æ—¶é—´åŒºé—´æ— å…³ã€‚</strong></p><p>å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>çª—å£æ—¶é—´è·¨åº¦<code>Interval</code>å¤§å°å›ºå®šï¼Œä¾‹å¦‚1ç§’</li><li><strong><mark>æ—¶é—´åŒºé—´è·¨åº¦</mark><strong>ä¸º</strong><code>Interval / n</code> ï¼Œä¾‹å¦‚n=2</strong>ï¼Œåˆ™æ—¶é—´åŒºé—´è·¨åº¦ä¸º500ms</li><li>çª—å£ä¼šéšç€å½“å‰è¯·æ±‚æ‰€åœ¨æ—¶é—´<code>currentTime</code>ç§»åŠ¨ï¼Œçª—å£èŒƒå›´ä»<code>currentTime-Interval</code>æ—¶åˆ»ä¹‹åçš„ç¬¬ä¸€ä¸ªæ—¶åŒºå¼€å§‹ï¼Œåˆ°<code>currentTime</code>æ‰€åœ¨æ—¶åŒºç»“æŸã€‚</li></ul><p>å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/assets/1743866077032-65.DeIuj7qD.png" alt="img" loading="lazy"></p><p><strong>é™æµé˜ˆå€¼ä¾ç„¶ä¸º3</strong>ï¼Œç»¿è‰²å°å—å°±æ˜¯è¯·æ±‚ï¼Œä¸Šé¢çš„æ•°å­—æ˜¯å…¶<code>currentTime</code>å€¼ã€‚</p><ul><li>åœ¨ç¬¬1300msæ—¶æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå…¶æ‰€åœ¨æ—¶åŒºå°±æ˜¯1000~1500</li><li>æŒ‰ç…§è§„åˆ™ï¼ŒcurrentTime-Intervalå€¼ä¸º300msï¼Œ300msä¹‹åçš„ç¬¬ä¸€ä¸ªæ—¶åŒºæ˜¯500~1000ï¼Œå› æ­¤çª—å£èŒƒå›´åŒ…å«ä¸¤ä¸ªæ—¶åŒºï¼š500~1000ã€1000~1500ï¼Œä¹Ÿå°±æ˜¯ç²‰çº¢è‰²æ–¹æ¡†éƒ¨åˆ†</li><li>ç»Ÿè®¡çª—å£å†…çš„è¯·æ±‚æ€»æ•°ï¼Œå‘ç°æ˜¯3ï¼Œæœªè¾¾åˆ°ä¸Šé™ã€‚</li></ul><p>è‹¥ç¬¬1400msåˆæ¥ä¸€ä¸ªè¯·æ±‚ï¼Œä¼šè½åœ¨1000~1500æ—¶åŒºï¼Œè™½ç„¶è¯¥æ—¶åŒºè¯·æ±‚æ€»æ•°æ˜¯3ï¼Œ<strong>ä½†æ»‘åŠ¨çª—å£å†…æ€»æ•°å·²ç»è¾¾åˆ°4ï¼Œå› æ­¤è¯¥è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼š</strong></p><p><img src="/assets/1743866077032-66.DD2Im5e2.png" alt="img" loading="lazy"></p><p>å‡å¦‚ç¬¬1600msåˆæ¥çš„ä¸€ä¸ªè¯·æ±‚ï¼Œå¤„äº1500~2000æ—¶åŒºï¼Œæ ¹æ®ç®—æ³•ï¼Œæ»‘åŠ¨çª—å£ä½ç½®åº”è¯¥æ˜¯1000~1500å’Œ1500~2000è¿™ä¸¤ä¸ªæ—¶åŒºï¼Œä¹Ÿå°±æ˜¯å‘åç§»åŠ¨ï¼š</p><p><img src="/assets/1743866077032-67.BpgzMJhk.png" alt="img" loading="lazy"></p><p>è¿™å°±æ˜¯æ»‘åŠ¨çª—å£è®¡æ•°çš„åŸç†ï¼Œè§£å†³äº†æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„é—®é¢˜ã€‚è€Œä¸”**<mark>æ»‘åŠ¨çª—å£å†…åˆ’åˆ†çš„æ—¶åŒºè¶Šå¤šï¼Œè¿™ç§ç»Ÿè®¡å°±è¶Šå‡†ç¡®ã€‚</mark>**</p><h3 id="_3-ä»¤ç‰Œæ¡¶ç®—æ³•" tabindex="-1">ï¼ˆ3ï¼‰ä»¤ç‰Œæ¡¶ç®—æ³• <a class="header-anchor" href="#_3-ä»¤ç‰Œæ¡¶ç®—æ³•" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰ä»¤ç‰Œæ¡¶ç®—æ³•&quot;">â€‹</a></h3><p>é™æµçš„å¦ä¸€ç§å¸¸è§ç®—æ³•æ˜¯<strong>ä»¤ç‰Œæ¡¶ç®—æ³•</strong>ã€‚Sentinelä¸­çš„<strong>çƒ­ç‚¹å‚æ•°é™æµæ­£æ˜¯åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•</strong>å®ç°çš„ã€‚å…¶åŸºæœ¬æ€è·¯å¦‚å›¾ï¼š</p><p><img src="/assets/1743866077032-68.ChpHl2qN.png" alt="img" loading="lazy"></p><p>è¯´æ˜ï¼š</p><ul><li><strong>ä»¥å›ºå®šçš„é€Ÿç‡ç”Ÿæˆä»¤ç‰Œï¼Œå­˜å…¥ä»¤ç‰Œæ¡¶ä¸­ï¼Œå¦‚æœä»¤ç‰Œæ¡¶æ»¡äº†ä»¥åï¼Œå¤šä½™ä»¤ç‰Œä¸¢å¼ƒ</strong></li><li>è¯·æ±‚è¿›å…¥åï¼Œå¿…é¡»<strong>å…ˆå°è¯•ä»æ¡¶ä¸­è·å–ä»¤ç‰Œï¼Œè·å–åˆ°ä»¤ç‰Œåæ‰å¯ä»¥è¢«å¤„ç†</strong></li><li>å¦‚æœä»¤ç‰Œæ¡¶ä¸­æ²¡æœ‰ä»¤ç‰Œï¼Œåˆ™è¯·æ±‚ç­‰å¾…æˆ–ä¸¢å¼ƒ</li></ul><p>åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œ<strong>æ¯ç§’äº§ç”Ÿçš„ä»¤ç‰Œæ•°é‡åŸºæœ¬å°±æ˜¯QPSä¸Šé™</strong>ã€‚</p><p>å½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>æŸä¸€ç§’ä»¤ç‰Œæ¡¶ä¸­äº§ç”Ÿäº†å¾ˆå¤šä»¤ç‰Œ</strong>ï¼Œè¾¾åˆ°ä»¤ç‰Œæ¡¶ä¸Šé™Nï¼Œ<strong>ç¼“å­˜åœ¨ä»¤ç‰Œæ¡¶ä¸­ï¼Œ<mark>ä½†æ˜¯è¿™ä¸€ç§’æ²¡æœ‰è¯·æ±‚è¿›å…¥</mark></strong>ã€‚</li><li>ä¸‹ä¸€ç§’çš„<strong>å‰åŠç§’æ¶Œå…¥äº†è¶…è¿‡2Nä¸ªè¯·æ±‚</strong>ï¼Œä¹‹å‰ç¼“å­˜çš„ä»¤ç‰Œæ¡¶çš„ä»¤ç‰Œè€—å°½ï¼Œ<strong>åŒæ—¶è¿™ä¸€ç§’åˆç”Ÿæˆäº†Nä¸ªä»¤ç‰Œ</strong>ï¼Œäºæ˜¯æ€»å…±æ”¾è¡Œäº†2Nä¸ªè¯·æ±‚ã€‚<strong>è¶…å‡ºäº†æˆ‘ä»¬è®¾å®šçš„QPSé˜ˆå€¼</strong>ã€‚</li></ul><p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•æ—¶ï¼Œå°½é‡ä¸è¦å°†ä»¤ç‰Œä¸Šé™è®¾å®šåˆ°æœåŠ¡èƒ½æ‰¿å—çš„QPSä¸Šé™ã€‚è€Œæ˜¯<strong>é¢„ç•™ä¸€å®šçš„æ³¢åŠ¨ç©ºé—´</strong>ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½åº”å¯¹çªå‘æµé‡ã€‚</p><h3 id="_4-æ¼æ¡¶ç®—æ³•-é˜Ÿåˆ—" tabindex="-1">ï¼ˆ4ï¼‰æ¼æ¡¶ç®—æ³•-<mark>é˜Ÿåˆ—</mark> <a class="header-anchor" href="#_4-æ¼æ¡¶ç®—æ³•-é˜Ÿåˆ—" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰æ¼æ¡¶ç®—æ³•-==é˜Ÿåˆ—==&quot;">â€‹</a></h3><p>æ¼æ¡¶ç®—æ³•ä¸ä»¤ç‰Œæ¡¶ç›¸ä¼¼ï¼Œä½†åœ¨è®¾è®¡ä¸Šæ›´é€‚åˆåº”å¯¹**<mark>å¹¶å‘æ³¢åŠ¨è¾ƒå¤§çš„åœºæ™¯</mark>**ï¼Œä»¥è§£å†³ä»¤ç‰Œæ¡¶ä¸­çš„é—®é¢˜ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯è¯·æ±‚åˆ°è¾¾åä¸æ˜¯ç›´æ¥å¤„ç†ï¼Œ<strong>è€Œæ˜¯å…ˆæ”¾å…¥ä¸€ä¸ª<mark>é˜Ÿåˆ—</mark>ã€‚è€Œåä»¥å›ºå®šçš„é€Ÿç‡ä»é˜Ÿåˆ—ä¸­å–å‡ºå¹¶å¤„ç†è¯·æ±‚ã€‚ä¹‹æ‰€ä»¥å«æ¼æ¡¶ç®—æ³•</strong>ï¼Œå°±æ˜¯æŠŠè¯·æ±‚çœ‹åšæ°´ï¼Œé˜Ÿåˆ—çœ‹åšæ˜¯ä¸€ä¸ªæ¼äº†çš„æ¡¶ã€‚</p><p>å¦‚å›¾ï¼š</p><p><img src="/assets/1743866077032-69.CWDzlCUn.png" alt="img" loading="lazy"></p><p>è¯´æ˜ï¼š</p><ul><li>å°†æ¯ä¸ªè¯·æ±‚è§†ä½œ&quot;æ°´æ»´&quot;æ”¾å…¥&quot;æ¼æ¡¶&quot;è¿›è¡Œå­˜å‚¨ï¼›</li><li>&quot;<strong>æ¼æ¡¶&quot;ä»¥å›ºå®šé€Ÿç‡å‘å¤–&quot;æ¼&quot;å‡ºè¯·æ±‚æ¥æ‰§è¡Œï¼Œå¦‚æœ&quot;æ¼æ¡¶&quot;ç©ºäº†åˆ™åœæ­¢&quot;æ¼æ°´â€</strong>ï¼›</li><li>å¦‚æœ&quot;æ¼æ¡¶&quot;æ»¡äº†åˆ™å¤šä½™çš„&quot;æ°´æ»´&quot;ä¼šè¢«ç›´æ¥ä¸¢å¼ƒã€‚</li></ul><p>æ¼æ¡¶çš„ä¼˜åŠ¿å°±æ˜¯<strong>æµé‡æ•´å‹</strong>ï¼Œæ¡¶å°±åƒæ˜¯ä¸€ä¸ªå¤§åï¼Œè¯·æ±‚å°±æ˜¯æ°´ã€‚å¹¶å‘é‡ä¸æ–­æ³¢åŠ¨ï¼Œå°±å¦‚å›¾æ°´æµæ—¶å¤§æ—¶å°ï¼Œä½†éƒ½ä¼šè¢«å¤§åæ‹¦ä½ã€‚è€Œåå¤§åæŒ‰ç…§å›ºå®šçš„é€Ÿåº¦æ”¾æ°´ï¼Œé¿å…ä¸‹æ¸¸è¢«æ´ªæ°´æ·¹æ²¡ã€‚</p><p>å› æ­¤ï¼Œä¸ç®¡å¹¶å‘é‡å¦‚ä½•æ³¢åŠ¨ï¼Œç»è¿‡æ¼æ¡¶å¤„ç†åçš„è¯·æ±‚ä¸€å®šæ˜¯ç›¸å¯¹å¹³æ»‘çš„æ›²çº¿ï¼š</p><p><img src="/assets/1743866077032-70.DWGoWfg5.png" alt="img" loading="lazy"></p><p>sentinelä¸­çš„é™æµä¸­çš„æ’é˜Ÿç­‰å¾…åŠŸèƒ½æ­£æ˜¯åŸºäºæ¼æ¡¶ç®—æ³•å®ç°çš„ã€‚</p><p><img src="/assets/image-20250406165808119.xMtzr_hy.png" alt="image-20250406165808119" loading="lazy"></p><p><img src="/assets/image-20250406165944907.C0a9JviF.png" alt="image-20250406165944907" loading="lazy"></p><h3 id="_5-sentinelå’Œgatewayçš„é™æµåŒºåˆ«" tabindex="-1">ï¼ˆ5ï¼‰Sentinelå’ŒGatewayçš„é™æµåŒºåˆ« <a class="header-anchor" href="#_5-sentinelå’Œgatewayçš„é™æµåŒºåˆ«" aria-label="Permalink to &quot;ï¼ˆ5ï¼‰Sentinelå’ŒGatewayçš„é™æµåŒºåˆ«&quot;">â€‹</a></h3><p><img src="/assets/image-20250406170541444.TdfD0Fbt.png" alt="image-20250406170541444" loading="lazy"></p><h2 id="_5ã€ğŸš€ä½œä¸š" tabindex="-1">5ã€ğŸš€<mark>ä½œä¸š</mark> <a class="header-anchor" href="#_5ã€ğŸš€ä½œä¸š" aria-label="Permalink to &quot;5ã€ğŸš€==ä½œä¸š==&quot;">â€‹</a></h2><p>å°è¯•ç”¨è‡ªå·±çš„è¯­è¨€å›ç­”ä¸‹åˆ—é¢è¯•é¢˜ï¼š</p><ul><li>SpringCloudæœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶ï¼Ÿåˆ†åˆ«æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ</li><li>æœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</li><li>Eurekaå’ŒNacosæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</li><li>Nacosçš„åˆ†çº§å­˜å‚¨æ¨¡å‹æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</li><li>OpenFeignæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯æœåŠ¡é›ªå´©ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</li><li>Hystixå’ŒSentinelæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ</li><li>é™æµçš„å¸¸è§ç®—æ³•æœ‰å“ªäº›ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯CAPç†è®ºå’ŒBASEæ€æƒ³ï¼Ÿ</li><li>é¡¹ç›®ä¸­ç¢°åˆ°è¿‡åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ</li><li>ATæ¨¡å¼å¦‚ä½•è§£å†³è„è¯»å’Œè„å†™é—®é¢˜çš„ï¼Ÿ</li><li>TCCæ¨¡å¼ä¸ATæ¨¡å¼å¯¹æ¯”ï¼Œæœ‰å“ªäº›ä¼˜ç¼ºç‚¹</li><li>RabbitMQæ˜¯å¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§çš„ï¼Ÿ</li><li>RabbitMQæ˜¯å¦‚ä½•è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜çš„ï¼Ÿ</li></ul><h3 id="springcloudé¢è¯•é¢˜è§£ç­”" tabindex="-1">SpringCloudé¢è¯•é¢˜è§£ç­” <a class="header-anchor" href="#springcloudé¢è¯•é¢˜è§£ç­”" aria-label="Permalink to &quot;SpringCloudé¢è¯•é¢˜è§£ç­”&quot;">â€‹</a></h3><hr><h4 id="_1-springcloudæœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶-åˆ†åˆ«æ˜¯ä»€ä¹ˆä½œç”¨" tabindex="-1">1. SpringCloudæœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶ï¼Ÿåˆ†åˆ«æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ <a class="header-anchor" href="#_1-springcloudæœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶-åˆ†åˆ«æ˜¯ä»€ä¹ˆä½œç”¨" aria-label="Permalink to &quot;1. SpringCloudæœ‰å“ªäº›å¸¸ç”¨ç»„ä»¶ï¼Ÿåˆ†åˆ«æ˜¯ä»€ä¹ˆä½œç”¨ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>Eureka</strong>ï¼šæœåŠ¡æ³¨å†Œä¸å‘ç°</li><li><strong>Ribbon</strong>ï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡</li><li><strong>Feign/OpenFeign</strong>ï¼šå£°æ˜å¼HTTPå®¢æˆ·ç«¯ï¼ˆç®€åŒ–æœåŠ¡è°ƒç”¨ï¼‰</li><li><strong>Hystrix</strong>ï¼šæœåŠ¡ç†”æ–­ä¸é™çº§</li><li><strong>Zuul/Gateway</strong>ï¼šAPIç½‘å…³ï¼ˆè·¯ç”±ã€é‰´æƒã€é™æµï¼‰</li><li><strong>Config</strong>ï¼šç»Ÿä¸€é…ç½®ä¸­å¿ƒ</li><li><strong>Nacos</strong>ï¼šæ³¨å†Œä¸­å¿ƒ+é…ç½®ä¸­å¿ƒï¼ˆæ›¿ä»£Eureka+Configï¼‰</li><li><strong>Sentinel</strong>ï¼šæµé‡æ§åˆ¶ä¸ç³»ç»Ÿä¿æŠ¤</li></ul><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š SpringCloudå°±åƒå¼€é¤é¦†çš„â€œå…¨å®¶æ¡¶å¥—é¤â€ï¼š</p><ul><li><strong>Eureka</strong>æ˜¯â€œç”µè¯ç°¿â€ï¼Œè®°å½•æ‰€æœ‰åˆ†åº—çš„ä½ç½®ï¼ˆæœåŠ¡æ³¨å†Œï¼‰ã€‚</li><li><strong>Ribbon</strong>æ˜¯â€œæ™ºèƒ½ç‚¹é¤å‘˜â€ï¼Œè‡ªåŠ¨é€‰æœ€è¿‘çš„å¨æˆ¿åšèœï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ã€‚</li><li><strong>Feign</strong>æ˜¯â€œå¤–å–å°å“¥â€ï¼Œå¸®ä½ æ‰“ç”µè¯å«é¤ï¼ˆå°è£…HTTPè°ƒç”¨ï¼‰ã€‚</li><li><strong>Hystrix</strong>æ˜¯â€œä¿é™©ä¸â€ï¼ŒæŸä¸ªå¨æˆ¿ç€ç«ç«‹åˆ»æ–­ç”µï¼ˆç†”æ–­ï¼‰ã€‚</li><li><strong>Gateway</strong>æ˜¯â€œå‰å°ä¿å®‰â€ï¼Œæ£€æŸ¥æ¯ä¸ªå®¢äººå¥åº·ç ï¼ˆè·¯ç”±é‰´æƒï¼‰ã€‚</li></ul><hr><h4 id="_2-æœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬æµç¨‹æ˜¯æ€æ ·çš„" tabindex="-1">2. æœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ <a class="header-anchor" href="#_2-æœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬æµç¨‹æ˜¯æ€æ ·çš„" aria-label="Permalink to &quot;2. æœåŠ¡æ³¨å†Œå‘ç°çš„åŸºæœ¬æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ol><li>æœåŠ¡å¯åŠ¨æ—¶å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªèº«ä¿¡æ¯ï¼ˆIPã€ç«¯å£ï¼‰ã€‚</li><li>æ¶ˆè´¹è€…ä»æ³¨å†Œä¸­å¿ƒæ‹‰å–æœåŠ¡åˆ—è¡¨å¹¶ç¼“å­˜ã€‚</li><li>é€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©ç›®æ ‡æœåŠ¡å®ä¾‹ã€‚</li><li>å®šæ—¶å¿ƒè·³æ£€æµ‹ï¼Œå‰”é™¤å¤±æ•ˆèŠ‚ç‚¹ã€‚</li></ol><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š æƒ³è±¡ä½ å»å•†åœºæ‰¾å¥¶èŒ¶åº—ï¼š</p><ol><li>å¥¶èŒ¶åº—å¼€ä¸šæ—¶åœ¨å•†åœºæœåŠ¡å°ç™»è®°ï¼ˆæ³¨å†Œï¼‰ã€‚</li><li>ä½ åˆ°æœåŠ¡å°é—®â€œå“ªæœ‰å¥¶èŒ¶åº—ï¼Ÿâ€ï¼ˆæ‹‰å–æœåŠ¡åˆ—è¡¨ï¼‰ã€‚</li><li>æœåŠ¡å°æ¨è3æ¥¼é‚£å®¶ä¸ç”¨æ’é˜Ÿçš„ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ã€‚</li><li>å¦‚æœå¥¶èŒ¶åº—å…³é—¨ï¼ŒæœåŠ¡å°ç«‹åˆ»åˆ’æ‰å®ƒçš„åå­—ï¼ˆå¿ƒè·³æ£€æµ‹ï¼‰ã€‚</li></ol><hr><h4 id="_3-eurekaå’Œnacosæœ‰å“ªäº›åŒºåˆ«" tabindex="-1">3. Eurekaå’ŒNacosæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#_3-eurekaå’Œnacosæœ‰å“ªäº›åŒºåˆ«" aria-label="Permalink to &quot;3. Eurekaå’ŒNacosæœ‰å“ªäº›åŒºåˆ«ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><table tabindex="0"><thead><tr><th></th><th>Eureka</th><th>Nacos</th></tr></thead><tbody><tr><td>ä¸€è‡´æ€§</td><td>APæ¨¡å‹ï¼ˆé«˜å¯ç”¨ï¼‰</td><td>AP + CPï¼ˆå¯åˆ‡æ¢ï¼‰</td></tr><tr><td>åŠŸèƒ½</td><td>ä»…æœåŠ¡æ³¨å†Œå‘ç°</td><td>æœåŠ¡+é…ç½®ä¸­å¿ƒ+åŠ¨æ€DNS</td></tr><tr><td>å¥åº·æ£€æŸ¥</td><td>å®¢æˆ·ç«¯å¿ƒè·³</td><td>TCP/HTTP/MYSQLå¤šæ¨¡å¼æ£€æŸ¥</td></tr><tr><td>æ˜“ç”¨æ€§</td><td>éœ€é…åˆå…¶ä»–ç»„ä»¶</td><td>å¼€ç®±å³ç”¨</td></tr></tbody></table><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š</p><ul><li><strong>Eureka</strong>åƒâ€œåŠŸèƒ½æœºâ€ï¼šåªèƒ½æ‰“ç”µè¯å‘çŸ­ä¿¡ï¼ˆæœåŠ¡æ³¨å†Œï¼‰ã€‚</li><li><strong>Nacos</strong>åƒâ€œæ™ºèƒ½æ‰‹æœºâ€ï¼šè¿˜èƒ½æ‹ç…§ã€å¯¼èˆªã€å«å¤–å–ï¼ˆæœåŠ¡+é…ç½®ç®¡ç†ï¼‰ã€‚</li></ul><hr><h4 id="_4-nacosçš„åˆ†çº§å­˜å‚¨æ¨¡å‹æ˜¯ä»€ä¹ˆæ„æ€" tabindex="-1">4. Nacosçš„åˆ†çº§å­˜å‚¨æ¨¡å‹æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ <a class="header-anchor" href="#_4-nacosçš„åˆ†çº§å­˜å‚¨æ¨¡å‹æ˜¯ä»€ä¹ˆæ„æ€" aria-label="Permalink to &quot;4. Nacosçš„åˆ†çº§å­˜å‚¨æ¨¡å‹æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š å°†æœåŠ¡å®ä¾‹æŒ‰åœ°åŸŸã€æœºæˆ¿ç­‰åˆ’åˆ†ä¸ºä¸åŒé›†ç¾¤ï¼Œä¼˜å…ˆè®¿é—®åŒé›†ç¾¤å®ä¾‹ï¼Œé™ä½è·¨ç½‘ç»œå»¶è¿Ÿã€‚</p><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š å°±åƒå¿«é€’åˆ†ä»“ï¼š</p><ul><li>ä½ åœ¨åŒ—äº¬ä¹°ä¹¦ï¼Œä¼˜å…ˆä»â€œååŒ—ä»“â€å‘è´§ï¼ˆåŒé›†ç¾¤ï¼‰ã€‚</li><li>ååŒ—ä»“æ²¡è´§äº†ï¼Œæ‰ä»â€œåå—ä»“â€è°ƒè´§ï¼ˆè·¨é›†ç¾¤ï¼‰ã€‚</li></ul><hr><h4 id="_5-openfeignæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„" tabindex="-1">5. OpenFeignæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„ï¼Ÿ <a class="header-anchor" href="#_5-openfeignæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„" aria-label="Permalink to &quot;5. OpenFeignæ˜¯å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡çš„ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š é›†æˆRibbonï¼Œé€šè¿‡<code>@FeignClient</code>ç”ŸæˆåŠ¨æ€ä»£ç†ï¼Œè°ƒç”¨æ—¶æ ¹æ®ç­–ç•¥ï¼ˆå¦‚è½®è¯¢ã€éšæœºï¼‰é€‰æ‹©æœåŠ¡å®ä¾‹ã€‚</p><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š Feignåƒâ€œæ™ºèƒ½å¤–å–APPâ€ï¼š</p><ul><li>ä½ ç‚¹å¥¶èŒ¶æ—¶ï¼ŒAPPè‡ªåŠ¨é€‰è¯„åˆ†æœ€é«˜ä¸”æœ€è¿‘çš„åº—é“ºï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ã€‚</li><li>èƒŒåå·å·ç”¨äº†Ribbonçš„â€œé€‰åº—ç®—æ³•â€ã€‚</li></ul><hr><h4 id="_6-ä»€ä¹ˆæ˜¯æœåŠ¡é›ªå´©-å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›" tabindex="-1">6. ä»€ä¹ˆæ˜¯æœåŠ¡é›ªå´©ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ <a class="header-anchor" href="#_6-ä»€ä¹ˆæ˜¯æœåŠ¡é›ªå´©-å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›" aria-label="Permalink to &quot;6. ä»€ä¹ˆæ˜¯æœåŠ¡é›ªå´©ï¼Œå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š æœåŠ¡é›ªå´©ï¼šä¸€ä¸ªæœåŠ¡æ•…éšœå¼•å‘è¿é”ååº”ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚ è§£å†³æ–¹æ¡ˆï¼š</p><ol><li><strong>ç†”æ–­</strong>ï¼ˆHystrixï¼‰ï¼šå¿«é€Ÿå¤±è´¥ï¼Œé¿å…ç§¯å‹è¯·æ±‚ã€‚</li><li><strong>é™çº§</strong>ï¼šè¿”å›å…œåº•æ•°æ®ï¼ˆå¦‚â€œç¨åå†è¯•â€ï¼‰ã€‚</li><li><strong>é™æµ</strong>ï¼ˆSentinelï¼‰ï¼šæ§åˆ¶å¹¶å‘è¯·æ±‚é‡ã€‚</li><li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼šé¿å…çº¿ç¨‹é•¿æœŸé˜»å¡ã€‚</li></ol><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š é›ªå´©å°±åƒâ€œå¤šç±³è¯ºéª¨ç‰Œâ€ï¼š</p><ul><li><strong>ç†”æ–­</strong>ï¼šåŠæ—¶ç æ–­éª¨ç‰Œé“¾ï¼ˆå¿«é€Ÿå¤±è´¥ï¼‰ã€‚</li><li><strong>é™çº§</strong>ï¼šæ¢æˆå¡‘æ–™éª¨ç‰Œï¼ˆè¿”å›é»˜è®¤å€¼ï¼‰ã€‚</li><li><strong>é™æµ</strong>ï¼šä¸€æ¬¡åªæ¨ä¸€å—éª¨ç‰Œï¼ˆæ§åˆ¶æµé‡ï¼‰ã€‚</li></ul><hr><h4 id="_7-hystrixå’Œsentinelæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»" tabindex="-1">7. Hystrixå’ŒSentinelæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ <a class="header-anchor" href="#_7-hystrixå’Œsentinelæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»" aria-label="Permalink to &quot;7. Hystrixå’ŒSentinelæœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>Hystrix</strong>ï¼šNetflixå¼€æºï¼Œä¸“æ³¨ç†”æ–­é™çº§ï¼Œç¤¾åŒºå·²åœæ›´ã€‚</li><li><strong>Sentinel</strong>ï¼šé˜¿é‡Œå¼€æºï¼Œæ”¯æŒæµé‡æ§åˆ¶ã€ç†”æ–­ã€ç³»ç»Ÿä¿æŠ¤ï¼Œå¯è§†åŒ–å¼ºã€‚</li></ul><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š</p><ul><li><strong>Hystrix</strong>æ˜¯â€œç­ç«å™¨â€ï¼šåªèƒ½ç­å°ç«ï¼ˆç†”æ–­ï¼‰ã€‚</li><li><strong>Sentinel</strong>æ˜¯â€œæ™ºèƒ½æ¶ˆé˜²ç³»ç»Ÿâ€ï¼šèƒ½é¢„è­¦ã€å–·æ°´ã€ç–æ•£äººç¾¤ï¼ˆæµé‡æ§åˆ¶+ç†”æ–­+ç›‘æ§ï¼‰ã€‚</li></ul><hr><h4 id="_8-é™æµçš„å¸¸è§ç®—æ³•æœ‰å“ªäº›" tabindex="-1">8. é™æµçš„å¸¸è§ç®—æ³•æœ‰å“ªäº›ï¼Ÿ <a class="header-anchor" href="#_8-é™æµçš„å¸¸è§ç®—æ³•æœ‰å“ªäº›" aria-label="Permalink to &quot;8. é™æµçš„å¸¸è§ç®—æ³•æœ‰å“ªäº›ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>è®¡æ•°å™¨ç®—æ³•</strong>ï¼šå›ºå®šçª—å£è®¡æ•°ï¼ˆå¦‚1ç§’å†…æœ€å¤š100æ¬¡ï¼‰ã€‚</li><li><strong>æ»‘åŠ¨çª—å£</strong>ï¼šæ›´å¹³æ»‘çš„æ—¶é—´çª—å£ç»Ÿè®¡ã€‚</li><li><strong>æ¼æ¡¶ç®—æ³•</strong>ï¼šæ’å®šé€Ÿç‡å¤„ç†è¯·æ±‚ï¼ˆæ¡¶æ»¡åˆ™æ‹’ç»ï¼‰ã€‚</li><li><strong>ä»¤ç‰Œæ¡¶ç®—æ³•</strong>ï¼šæŒ‰é€Ÿç‡ç”Ÿæˆä»¤ç‰Œï¼Œçªå‘æµé‡å¯å€Ÿç”¨ä»¤ç‰Œã€‚</li></ul><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š</p><ul><li><strong>æ¼æ¡¶</strong>ï¼šåƒæ°´é¾™å¤´ï¼ŒåŒ€é€Ÿæ»´æ°´ï¼ˆå›ºå®šé€Ÿç‡å¤„ç†ï¼‰ã€‚</li><li><strong>ä»¤ç‰Œæ¡¶</strong>ï¼šåƒæ¸¸ä¹åœºé—¨ç¥¨ï¼Œæ”’å¤Ÿç¥¨æ‰èƒ½ç©ï¼ˆå…è®¸çªå‘æµé‡ï¼‰ã€‚</li></ul><hr><h4 id="_9-ä»€ä¹ˆæ˜¯capç†è®ºå’Œbaseæ€æƒ³" tabindex="-1">9. ä»€ä¹ˆæ˜¯CAPç†è®ºå’ŒBASEæ€æƒ³ï¼Ÿ <a class="header-anchor" href="#_9-ä»€ä¹ˆæ˜¯capç†è®ºå’Œbaseæ€æƒ³" aria-label="Permalink to &quot;9. ä»€ä¹ˆæ˜¯CAPç†è®ºå’ŒBASEæ€æƒ³ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>CAP</strong>ï¼šä¸€è‡´æ€§ï¼ˆCï¼‰ã€å¯ç”¨æ€§ï¼ˆAï¼‰ã€åˆ†åŒºå®¹é”™æ€§ï¼ˆPï¼‰ï¼Œä¸‰è€…åªèƒ½æ»¡è¶³ä¸¤ä¸ªã€‚</li><li><strong>BASE</strong>ï¼šåŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ã€è½¯çŠ¶æ€ï¼ˆSoft Stateï¼‰ã€æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventually Consistentï¼‰ã€‚</li></ul><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š</p><ul><li><strong>CAP</strong>ï¼šæ‰¾å¯¹è±¡æ—¶ï¼Œå¸…ã€æœ‰é’±ã€ä¸“ä¸€ï¼Œæœ€å¤šé€‰ä¸¤ä¸ªã€‚</li><li><strong>BASE</strong>ï¼šæš‚æ—¶å‡‘åˆè¿‡ï¼Œæœ€ç»ˆä¼šå˜å¥½ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ã€‚</li></ul><hr><h4 id="_10-é¡¹ç›®ä¸­ç¢°åˆ°è¿‡åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜å—-æ€ä¹ˆè§£å†³çš„" tabindex="-1">10. é¡¹ç›®ä¸­ç¢°åˆ°è¿‡åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ <a class="header-anchor" href="#_10-é¡¹ç›®ä¸­ç¢°åˆ°è¿‡åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜å—-æ€ä¹ˆè§£å†³çš„" aria-label="Permalink to &quot;10. é¡¹ç›®ä¸­ç¢°åˆ°è¿‡åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š ä½¿ç”¨Seataçš„ATæ¨¡å¼ï¼šé€šè¿‡å…¨å±€é”+åå‘SQLæ—¥å¿—å®ç°è‡ªåŠ¨è¡¥å¿ã€‚</p><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š å°±åƒâ€œç½‘è´­ä»˜æ¬¾â€ï¼š</p><ul><li>å¦‚æœæ‰£æ¬¾æˆåŠŸä½†åº“å­˜æ²¡å‡ï¼Œç³»ç»Ÿè‡ªåŠ¨é€€æ¬¾ï¼ˆATæ¨¡å¼è‡ªåŠ¨å›æ»šï¼‰ã€‚</li></ul><hr><h4 id="_11-atæ¨¡å¼å¦‚ä½•è§£å†³è„è¯»å’Œè„å†™é—®é¢˜çš„" tabindex="-1">11. ATæ¨¡å¼å¦‚ä½•è§£å†³è„è¯»å’Œè„å†™é—®é¢˜çš„ï¼Ÿ <a class="header-anchor" href="#_11-atæ¨¡å¼å¦‚ä½•è§£å†³è„è¯»å’Œè„å†™é—®é¢˜çš„" aria-label="Permalink to &quot;11. ATæ¨¡å¼å¦‚ä½•è§£å†³è„è¯»å’Œè„å†™é—®é¢˜çš„ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ul><li><strong>è„è¯»</strong>ï¼šé€šè¿‡å…¨å±€é”ï¼Œå…¶ä»–äº‹åŠ¡è¯»å–æ•°æ®å‰å¿…é¡»ç­‰å¾…å½“å‰äº‹åŠ¡æäº¤ã€‚</li><li><strong>è„å†™</strong>ï¼šåœ¨äº‹åŠ¡æäº¤æ—¶æ£€æŸ¥æ•°æ®ç‰ˆæœ¬ï¼Œè‹¥è¢«ä¿®æ”¹åˆ™å›æ»šã€‚</li></ul><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š ATMå–é’±æ—¶ï¼Œç³»ç»Ÿä¼šé”ä½ä½ çš„è´¦æˆ·ï¼Œé˜²æ­¢åˆ«äººåŒæ—¶æ“ä½œï¼ˆå…¨å±€é”ï¼‰ã€‚</p><hr><h4 id="_12-tccæ¨¡å¼ä¸atæ¨¡å¼å¯¹æ¯”-æœ‰å“ªäº›ä¼˜ç¼ºç‚¹" tabindex="-1">12. TCCæ¨¡å¼ä¸ATæ¨¡å¼å¯¹æ¯”ï¼Œæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ <a class="header-anchor" href="#_12-tccæ¨¡å¼ä¸atæ¨¡å¼å¯¹æ¯”-æœ‰å“ªäº›ä¼˜ç¼ºç‚¹" aria-label="Permalink to &quot;12. TCCæ¨¡å¼ä¸ATæ¨¡å¼å¯¹æ¯”ï¼Œæœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><table tabindex="0"><thead><tr><th></th><th>TCC</th><th>AT</th></tr></thead><tbody><tr><td>ä¾µå…¥æ€§</td><td>é«˜ï¼ˆéœ€å®ç°try/confirm/cancelï¼‰</td><td>ä½ï¼ˆè‡ªåŠ¨ç”Ÿæˆå›æ»šSQLï¼‰</td></tr><tr><td>çµæ´»æ€§</td><td>é«˜ï¼ˆå¯è‡ªå®šä¹‰è¡¥å¿é€»è¾‘ï¼‰</td><td>ä½ï¼ˆä¾èµ–æ•°æ®åº“èƒ½åŠ›ï¼‰</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå·®ï¼ˆç½‘ç»œè°ƒç”¨å¤šï¼‰</td><td>è¾ƒå¥½ï¼ˆæœ¬åœ°äº‹åŠ¡ï¼‰</td></tr></tbody></table><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š</p><ul><li><strong>TCC</strong>åƒâ€œæ‰‹åŠ¨æŒ¡â€ï¼šç²¾å‡†æ§åˆ¶æ¯ä¸ªæ­¥éª¤ï¼Œä½†æ“ä½œå¤æ‚ã€‚</li><li><strong>AT</strong>åƒâ€œè‡ªåŠ¨æŒ¡â€ï¼šè¸©æ²¹é—¨å°±èµ°ï¼Œä½†æ— æ³•æ¼‚ç§»ï¼ˆçµæ´»æ€§ä½ï¼‰ã€‚</li></ul><hr><h4 id="_13-rabbitmqå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§" tabindex="-1">13. RabbitMQå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§ï¼Ÿ <a class="header-anchor" href="#_13-rabbitmqå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§" aria-label="Permalink to &quot;13. RabbitMQå¦‚ä½•ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ol><li><strong>ç”Ÿäº§è€…ç¡®è®¤</strong>ï¼ˆConfirmæœºåˆ¶ï¼‰ã€‚</li><li><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong>ï¼ˆé˜Ÿåˆ—å’Œæ¶ˆæ¯å­˜ç£ç›˜ï¼‰ã€‚</li><li><strong>æ¶ˆè´¹è€…æ‰‹åŠ¨ACK</strong>ï¼ˆå¤„ç†å®Œå†ç¡®è®¤ï¼‰ã€‚</li></ol><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š å°±åƒå‘å¿«é€’ï¼š</p><ul><li>é¡ºä¸°å°å“¥ç¡®è®¤åŒ…è£¹æ”¶åˆ°ï¼ˆConfirmï¼‰ã€‚</li><li>åŒ…è£¹æ”¾ä¿é™©æŸœï¼ˆæŒä¹…åŒ–ï¼‰ã€‚</li><li>æ”¶ä»¶äººå¿…é¡»ç­¾å­—ï¼ˆæ‰‹åŠ¨ACKï¼‰ã€‚</li></ul><hr><h4 id="_14-rabbitmqå¦‚ä½•è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜" tabindex="-1">14. RabbitMQå¦‚ä½•è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜ï¼Ÿ <a class="header-anchor" href="#_14-rabbitmqå¦‚ä½•è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜" aria-label="Permalink to &quot;14. RabbitMQå¦‚ä½•è§£å†³æ¶ˆæ¯å †ç§¯é—®é¢˜ï¼Ÿ&quot;">â€‹</a></h4><p><strong>å®˜æ–¹æ¦‚å¿µ</strong>ï¼š</p><ol><li>å¢åŠ æ¶ˆè´¹è€…ï¼ˆæ°´å¹³æ‰©å±•ï¼‰ã€‚</li><li>è®¾ç½®é˜Ÿåˆ—æœ€å¤§é•¿åº¦ï¼ˆæ­»ä¿¡é˜Ÿåˆ—è½¬ç§»ï¼‰ã€‚</li><li>æ‰¹é‡æ¶ˆè´¹ï¼ˆPrefetchè°ƒå¤§ï¼‰ã€‚</li></ol><p><strong>é€šä¿—è§£é‡Š</strong>ï¼š å µè½¦è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>å¤šå¼€å‡ ä¸ªæ”¶è´¹ç«™ï¼ˆåŠ æ¶ˆè´¹è€…ï¼‰ã€‚</li><li>æŠŠè½¦åˆ†æµåˆ°å¤‡ç”¨è½¦é“ï¼ˆæ­»ä¿¡é˜Ÿåˆ—ï¼‰ã€‚</li><li>ä¸€æ¬¡æ”¾10è¾†è½¦é€šè¿‡ï¼ˆæ‰¹é‡æ¶ˆè´¹ï¼‰ã€‚</li></ul><hr><p>ä»¥ä¸Šç­”æ¡ˆæ—¢æ»¡è¶³é¢è¯•å®˜çš„æŠ€æœ¯è€ƒå¯Ÿï¼Œåˆç”¨ç”Ÿæ´»åŒ–ç±»æ¯”å¸®åŠ©è®°å¿†ï¼Œçµæ´»åº”å¯¹ä¸åŒé¢è¯•é£æ ¼ï¼</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--[--><!--[--><!--[--><div style="" class="vitepress-backTop-main" title="è¿”å›é¡¶éƒ¨" data-v-c5bc8dd2><svg t="1720595052079" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4279" width="200" height="200" data-v-c5bc8dd2><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#FFF" p-id="4280" data-v-c5bc8dd2></path></svg></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-1bcd8184><!----><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>æœ€åæ›´æ–°äº: <time datetime="2025-04-09T13:08:55.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/Java%E5%90%8E%E7%AB%AF/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/Project-TakeOut-Local.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>ä¸Šä¸€ç¯‡</span><span class="title" data-v-1bcd8184><svg t="1744289966142" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11297" width="16" height="16"><path d="M938.2 325.5c0 35.7-28.9 64.6-64.6 64.6H693.4c-35.7 0-64.6-28.9-64.6-64.6V225.3c0-35.7 28.9-64.6 64.6-64.6h180.1c35.7 0 64.6 28.9 64.6 64.6v100.2z" fill="#5FE0A3" p-id="11298"></path><path d="M966.6 488.8H742.9c-106.1 0-166.9 52.4-200.3 112.5h-10.2c-185 0-182.9-141.6-182.9-187.6V313.6c0-56.9-28.9-64.6-64.6-64.6h-50.6c-35.7 0-54.8 23.4-64.6 64.6S89.7 652 89.7 652v89.4h876.9V488.8z" fill="#FFE91F" p-id="11299"></path><path d="M197.4 741.4m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z" fill="#5FE0A3" p-id="11300"></path><path d="M826.6 741.4m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z" fill="#5FE0A3" p-id="11301"></path><path d="M966.6 467.8H742.8c-48.8 0-92.3 10.5-129.1 31.3-31.7 17.9-58.5 43.3-79.5 75.4-1.3 1.9-2.5 3.9-3.7 5.8-38-0.2-69.7-6.9-94-19.9-19.7-10.5-35.1-25.5-45.9-44.6-20.1-35.8-20.1-77.9-20.1-100.5V313.6c0-33.2-8.9-56.2-27.1-70.2-17.5-13.6-39.4-15.4-58.5-15.4h-50.6c-43.7 0-72.4 27.2-85.1 80.8-9 38-70.1 296.7-78.9 334-21.2 27.3-33.9 61.5-33.9 98.6 0 88.8 72.2 161 161 161 81.7 0 149.3-61.1 159.6-140h309.9c10.3 78.9 78 140 159.6 140 88.8 0 161-72.2 161-161V488.8c0.1-11.6-9.3-21-20.9-21zM190.1 318.5c10.1-42.6 27.2-48.5 44.2-48.5h50.6c16.8 0 26.9 2 32.8 6.6 7.2 5.5 10.8 18 10.8 37v101.7c0 24.6 0 75.8 25.5 121.2 14.7 26.2 35.8 46.7 62.7 61.1 25.7 13.7 56.9 21.8 92.9 24.1-14.1 34.4-21.3 69.5-23.6 98.8H357c-10.3-78.9-78-140-159.6-140-26.4 0-51.4 6.4-73.5 17.8 21.1-89 59.2-250.4 66.2-279.8z m7.3 541.9c-65.6 0-119-53.4-119-119s53.4-119 119-119 119 53.4 119 119-53.3 119-119 119z m629.2 0c-65.6 0-119-53.4-119-119s53.4-119 119-119 119 53.4 119 119-53.4 119-119 119z m0-280c-81.7 0-149.3 61.1-159.6 140H528.2c3.3-36.6 15.3-83.3 41.2-122.9 38-58.2 96.4-87.7 173.5-87.7h202.7V633c-29.5-32.3-71.9-52.6-119-52.6zM197.4 163.6h154c11.6 0 21-9.4 21-21s-9.4-21-21-21h-154c-11.6 0-21 9.4-21 21s9.4 21 21 21z" fill="#333333" p-id="11302"></path><path d="M197.4 709.1c-17.8 0-32.3 14.5-32.3 32.3 0 17.8 14.5 32.3 32.3 32.3 17.8 0 32.3-14.5 32.3-32.3 0-17.9-14.4-32.3-32.3-32.3zM826.6 709.1c-17.8 0-32.3 14.5-32.3 32.3 0 17.8 14.5 32.3 32.3 32.3 17.8 0 32.3-14.5 32.3-32.3 0-17.9-14.5-32.3-32.3-32.3zM693.4 411.1h180.1c47.2 0 85.6-38.4 85.6-85.6V225.3c0-47.2-38.4-85.6-85.6-85.6H693.4c-47.2 0-85.6 38.4-85.6 85.6v100.2c0 47.2 38.4 85.6 85.6 85.6z m-43.6-185.8c0-24.1 19.6-43.6 43.6-43.6h180.1c24 0 43.6 19.6 43.6 43.6v100.2c0 24.1-19.6 43.6-43.6 43.6H693.4c-24 0-43.6-19.6-43.6-43.6V225.3z" fill="#333333" p-id="11303"></path><path d="M703.4 242.2h155.1v42H703.4z" fill="#333333" p-id="11304"></path></svg> è‹ç©¹å¤–å–</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/%E5%BE%AE%E6%9C%8D%E5%8A%A1/RabbitMQ/MQ-Local.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-1bcd8184><svg t="1744204382720" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29407" width="16" height="16"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E84738" p-id="29408"></path><path d="M743.68 463.776h-149.92a24.576 24.576 0 0 1-21.12-24.64v-158.72a24.48 24.48 0 0 0-7.04-17.28A24.064 24.064 0 0 0 548.48 256H496a24.32 24.32 0 0 0-24.192 24.416v160.384a24.8 24.8 0 0 1-22.432 22.976h-39.264a24.64 24.64 0 0 1-21.248-22.976V280.416A24.32 24.32 0 0 0 364.672 256h-52.48A24.32 24.32 0 0 0 288 280.416v463.168c0 13.536 10.88 24.416 24.192 24.416h431.616a24.32 24.32 0 0 0 24.192-24.416v-255.392a24.384 24.384 0 0 0-24.32-24.416z m-69.056 175.136a24.32 24.32 0 0 1-24.192 24.416h-52.448c-6.4 0-12.576-2.56-17.12-7.136a24.512 24.512 0 0 1-7.072-17.28v-49.92a24.32 24.32 0 0 1 24.192-24.448h52.48a24.32 24.32 0 0 1 24.16 24.416v49.952z" fill="#FFFFFF" p-id="29409"></path></svg> RabbitMQ</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>Released under the MIT License.</p><p class="copyright" data-v-566314d4>Copyright Â© 2025 <a href="https://beian.miit.gov.cn/" target="_blank">æ¸ICPå¤‡2025054279å·</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"Ub6GCb04\",\"dockerå­¦ä¹ _docker-learning-local.md\":\"BhkoRZGT\",\"gitå­¦ä¹ ç¬”è®°_git-learning-local.md\":\"q1khJQPv\",\"index.md\":\"6JSrYE7z\",\"javaåç«¯_javawebå­¦ä¹ _web-learning-local.md\":\"Bjq9Pm5x\",\"javaåç«¯_è‹ç©¹å¤–å–_project-takeout-local.md\":\"B5o-PGX3\",\"javaåŸºç¡€_file_file-local.md\":\"7nPA9YKK\",\"javaåŸºç¡€_io_ioæµ-local.md\":\"Dr7mnP28\",\"javaåŸºç¡€_java-learning-local.md\":\"CmNQRxXq\",\"javaåŸºç¡€_log_logæ—¥å¿—-local.md\":\"d-bJllOh\",\"javaåŸºç¡€_stream_streamæµ-local.md\":\"Oh5SZQWc\",\"javaåŸºç¡€_xml_xml-local.md\":\"BlX7QK0N\",\"javaåŸºç¡€_å•å…ƒæµ‹è¯•_å•å…ƒæµ‹è¯•-local.md\":\"DH73MEQq\",\"javaåŸºç¡€_åå°„å’ŒåŠ¨æ€ä»£ç†_åå°„å’ŒåŠ¨æ€ä»£ç†-local.md\":\"BkBnN387\",\"javaåŸºç¡€_å¤šçº¿ç¨‹_å¤šçº¿ç¨‹-local.md\":\"D-PWuOI0\",\"javaåŸºç¡€_å¼‚å¸¸_å¼‚å¸¸-local.md\":\"DEJWPAHD\",\"javaåŸºç¡€_æ–¹æ³•å¼•ç”¨_æ–¹æ³•å¼•ç”¨-local.md\":\"DUMqGjqG\",\"javaåŸºç¡€_æ³¨è§£_æ³¨è§£-local.md\":\"CqRI_vCQ\",\"javaåŸºç¡€_ç±»åŠ è½½å™¨_ç±»åŠ è½½å™¨-local.md\":\"Ba5hmnIi\",\"javaåŸºç¡€_ç½‘ç»œç¼–ç¨‹_ç½‘ç»œç¼–ç¨‹-local.md\":\"Bbt0W3tJ\",\"javaåŸºç¡€_é›†åˆ_é›†åˆ-local.md\":\"BS0iGjfQ\",\"linuxå­¦ä¹ _linux-learning-local.md\":\"CMgiiTRO\",\"markdown-examples.md\":\"BUDrWkA9\",\"ä¸­é—´ä»¶_elasticsearch_elasticsearch-local.md\":\"BUUd5aOy\",\"å‰ç«¯å­¦ä¹ _html_css_ç§»åŠ¨web_html_css_ç§»åŠ¨ç«¯web-learning-local.md\":\"CnNiMHBg\",\"å‰ç«¯å­¦ä¹ _vue_vue-è¿›é˜¶å­¦ä¹ -local.md\":\"VJn4dR8o\",\"å¾®æœåŠ¡_nacosæºç åˆ†æ_nacosæºç åˆ†æ-local.md\":\"BXvqghF7\",\"å¾®æœåŠ¡_rabbitmq_mq-local.md\":\"Cbee2noS\",\"å¾®æœåŠ¡_rabbitmq_test.md\":\"DyfRLq1o\",\"å¾®æœåŠ¡_sentinelæºç åˆ†æ_sentinelæºç åˆ†æ-local.md\":\"CXJ_pJfP\",\"å¾®æœåŠ¡_springcloud_å¾®æœåŠ¡springcloud-local.md\":\"BKZhJSPB\",\"æ•°æ®åº“å­¦ä¹ _ä¸­é—´ä»¶_mybatisplus_mybatisplus-learning-local.md\":\"BTxKl_31\",\"è‡ªæˆ‘ä»‹ç»_self-introduction-2.md\":\"DTAgl-eG\",\"è‡ªæˆ‘ä»‹ç»_self-introduction.md\":\"Bh4Dh6pO\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"å°é¹çš„Notes\",\"description\":\"A VitePress Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°äº\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"returnToTopLabel\":\"è¿”å›é¡¶éƒ¨\",\"outlineTitle\":\"ç›®å½•\",\"outline\":{\"level\":[1,3]},\"logo\":\"/blog-logo.png\",\"nav\":[{\"text\":\"<svg t=\\\"1744292309892\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"19890\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M1010.992 474.558h-55.764v-16.32h47.604v-35.476L648.576 147.766H386.446l-93.214 72.362a8.16 8.16 0 0 1-13.164-6.444V16.32H126.772v329.03c0 2.536-1.18 4.93-3.192 6.474l-102.41 78.564v27.85h48.926v16.32H13.008a8.162 8.162 0 0 1-8.16-8.16v-40.034c0-2.536 1.18-4.93 3.192-6.474l102.41-78.564V8.16A8.16 8.16 0 0 1 118.61 0h169.616a8.162 8.162 0 0 1 8.16 8.16v188.86l82.26-63.858a8.16 8.16 0 0 1 5.004-1.714h267.718a8.16 8.16 0 0 1 5.004 1.714l359.62 279.158a8.154 8.154 0 0 1 3.156 6.446v47.632a8.156 8.156 0 0 1-8.156 8.16z\\\" fill=\\\"#4A555F\\\" p-id=\\\"19891\\\"></path><path d=\\\"M261.03 231.658V35.358H145.812v285.834z\\\" fill=\\\"#F58E6F\\\" p-id=\\\"19892\\\"></path><path d=\\\"M926.318 1024H636.784a8.162 8.162 0 0 1-8.16-8.16V682.63H397.14V1015.84a8.16 8.16 0 0 1-8.16 8.16H104.38a8.162 8.162 0 0 1-8.16-8.16V412.348c0-2.524 1.168-4.904 3.16-6.45L394.462 177.304a8.168 8.168 0 0 1 4.998-1.71h231.78c1.812 0 3.564 0.602 4.998 1.71l295.076 228.594a8.168 8.168 0 0 1 3.16 6.45V1015.84a8.154 8.154 0 0 1-8.156 8.16z m-281.376-16.32H918.16V416.348L628.454 191.914H402.25L112.54 416.348V1007.68h268.28V674.47a8.16 8.16 0 0 1 8.16-8.16h247.802a8.162 8.162 0 0 1 8.16 8.16V1007.68z\\\" fill=\\\"#4A555F\\\" p-id=\\\"19893\\\"></path><path d=\\\"M621.914 210.946H408.784L131.572 425.708v562.91h230.212V647.272h302.18v341.346h235.162V425.708L621.914 210.946z m-106.564 328.998c-58.968 0-106.782-47.816-106.782-106.782 0-58.968 47.816-106.786 106.782-106.786s106.784 47.816 106.784 106.786c-0.002 58.966-47.818 106.782-106.784 106.782z\\\" fill=\\\"#71CCE0\\\" p-id=\\\"19894\\\"></path><path d=\\\"M515.35 548.098c-63.376 0-114.932-51.558-114.932-114.932 0-63.372 51.556-114.932 114.932-114.932s114.936 51.558 114.936 114.932c0 63.372-51.56 114.932-114.936 114.932z m0-213.546c-54.376 0-98.612 44.236-98.612 98.612s44.236 98.614 98.612 98.614 98.618-44.238 98.618-98.614-44.242-98.612-98.618-98.612z\\\" fill=\\\"#4A555F\\\" p-id=\\\"19895\\\"></path><path d=\\\"M515.352 512.738c-43.874 0-79.572-35.698-79.572-79.574s35.698-79.572 79.572-79.572 79.572 35.696 79.572 79.572-35.698 79.574-79.572 79.574z\\\" fill=\\\"#FFD452\\\" p-id=\\\"19896\\\"></path><path d=\\\"M507.19 326.392h16.32v213.544h-16.32z\\\" fill=\\\"#4A555F\\\" p-id=\\\"19897\\\"></path><path d=\\\"M408.578 425.004h213.544v16.32H408.578zM13.008 1007.672H104.38v16.32H13.008zM926.318 1007.672h91.376v16.32h-91.376z\\\" fill=\\\"#4A555F\\\" p-id=\\\"19898\\\"></path></svg>é¦–é¡µ\",\"link\":\"/\"},{\"text\":\"<svg t=\\\"1744291383879\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"14002\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M879.567281 77.507554v66.841866H211.18062a66.745875 66.745875 0 0 0-66.841866 66.841865V935.274169H77.507554A66.916526 66.916526 0 0 1 10.665688 868.421638V77.507554A66.895194 66.895194 0 0 1 77.507554 10.665688H812.725416a66.895194 66.895194 0 0 1 66.841865 66.841866z\\\" fill=\\\"#02C9ED\\\" p-id=\\\"14003\\\"></path><path d=\\\"M912.982881 133.673066h-22.749912V77.507554C890.232969 34.770142 855.462827 0 812.725416 0H77.507554C34.770142 0 0 34.770142 0 77.507554v790.914084c0 42.737411 34.770142 77.507554 77.507554 77.507553h56.176178v0.479956c0 42.737411 34.770142 77.507554 77.507553 77.507554h261.213362a10.665688 10.665688 0 1 0 0-21.331376H211.18062a56.240172 56.240172 0 0 1-56.176178-56.176178V211.18062a56.240172 56.240172 0 0 1 56.176178-56.176178h701.802261a56.240172 56.240172 0 0 1 56.176178 56.176178v120.127642a10.665688 10.665688 0 1 0 21.331376 0V211.18062c-0.010666-42.737411-34.780808-77.507554-77.507554-77.507554z m-701.802261 0c-42.737411 0-77.507554 34.770142-77.507554 77.507554v713.417196H77.507554A56.250838 56.250838 0 0 1 21.331376 868.421638V77.507554A56.240172 56.240172 0 0 1 77.507554 21.331376H812.725416a56.240172 56.240172 0 0 1 56.176178 56.176178v56.176178H211.18062zM979.814082 489.203105a10.665688 10.665688 0 0 1-10.665688-10.665687v-62.4796a10.665688 10.665688 0 1 1 21.331376 0v62.4796a10.665688 10.665688 0 0 1-10.665688 10.665687z\\\" fill=\\\"#333333\\\" p-id=\\\"14004\\\"></path><path d=\\\"M628.923616 641.029172H391.270759a10.665688 10.665688 0 1 1 0-21.331376h237.652857a10.665688 10.665688 0 1 1 0 21.331376zM320.717234 641.029172h-71.577431a10.665688 10.665688 0 1 1 0-21.331376h71.577431a10.665688 10.665688 0 1 1 0 21.331376zM523.098661 821.908573H249.139803a10.665688 10.665688 0 1 1 0-21.331376h273.958858a10.665688 10.665688 0 1 1 0 21.331376z\\\" fill=\\\"#333333\\\" p-id=\\\"14005\\\"></path><path d=\\\"M716.243603 958.909333L577.26969 1013.240347l21.064734-147.719777 154.428494-194.979439 117.90918 93.388763zM884.281515 746.74747l-117.909179-93.388763L809.525709 598.878374a33.596917 33.596917 0 0 1 47.195669-5.482164l65.231347 51.664592a33.596917 33.596917 0 0 1 5.482164 47.195669l-43.153374 54.490999z\\\" fill=\\\"#02C9ED\\\" p-id=\\\"14006\\\"></path><path d=\\\"M971.238869 636.688237l-65.220682-51.664592a44.305267 44.305267 0 0 0-62.191626 7.220671l-43.153373 54.480334-168.048578 212.161863a10.804342 10.804342 0 0 0-2.197132 5.108864l-21.064733 147.730443a10.697685 10.697685 0 0 0 14.452007 11.454949l138.973913-54.34168a10.623025 10.623025 0 0 0 4.479589-3.317029l168.037912-212.161863 43.153373-54.480334a44.326599 44.326599 0 0 0-7.22067-62.191626zM752.336291 950.01415l-119.274388 46.630387 18.078341-126.772366 159.622685-201.538838 99.638856 78.915425 1.546525 1.226554-159.612019 201.538838z m209.39945-264.381071l-36.529981 46.118434-101.185381-80.141978 36.529981-46.118435a22.963226 22.963226 0 0 1 32.221043-3.743656l65.220681 51.664592c4.79956 3.796985 7.839281 9.247151 8.543216 15.337259a22.781909 22.781909 0 0 1-4.799559 16.883784zM1013.240347 1012.760391H818.30357a10.665688 10.665688 0 1 1 0-21.331375H1013.240347a10.665688 10.665688 0 1 1 0 21.331375zM1013.240347 894.595236h-83.544333a10.665688 10.665688 0 1 1 0-21.331376H1013.240347a10.665688 10.665688 0 1 1 0 21.331376zM250.387688 482.419728a10.665688 10.665688 0 0 1-6.538066-19.091581l172.453507-133.673066a10.623025 10.623025 0 0 1 15.273265 2.32512l72.42002 103.457172 286.779016-162.321104a10.665688 10.665688 0 0 1 14.601327 4.138287l61.263711 111.392444a10.655022 10.655022 0 1 1-18.686285 10.271058l-56.069522-101.931979-285.819103 161.766488a10.665688 10.665688 0 0 1-13.993383-3.16771l-71.556099-102.219952-163.600987 126.815028a10.591028 10.591028 0 0 1-6.527401 2.239795z\\\" fill=\\\"#333333\\\" p-id=\\\"14007\\\"></path><path d=\\\"M988.879916 70.212223a8.009932 8.009932 0 0 1-0.181316-15.998532l21.107396-0.479956h0.181317a8.009932 8.009932 0 0 1 0.181316 15.998532l-21.107396 0.479956h-0.181317zM919.510282 71.769414a7.999266 7.999266 0 0 1-0.181316-15.998532l21.107396-0.46929h0.181317a7.999266 7.999266 0 0 1 0.181316 15.998531l-21.107396 0.469291h-0.181317zM964.188849 46.619722a8.009932 8.009932 0 0 1-7.999266-7.81795l-0.479956-21.09673a8.009932 8.009932 0 0 1 7.817949-8.180583h0.181317c4.330269 0 7.892609 3.466349 7.999266 7.817949l0.479956 21.107397a8.009932 8.009932 0 0 1-7.817949 8.180582l-0.181317-0.010665zM965.767371 115.989356a8.009932 8.009932 0 0 1-7.999266-7.81795l-0.479956-21.107396a8.009932 8.009932 0 0 1 7.817949-8.180583h0.181317c4.330269 0 7.892609 3.466349 7.999266 7.81795l0.479956 21.107396a8.009932 8.009932 0 0 1-7.81795 8.180583h-0.181316z\\\" fill=\\\"#FD5308\\\" p-id=\\\"14008\\\"></path><path d=\\\"M257.725682 911.436357a7.999266 7.999266 0 0 1-5.652815-13.662746l14.931963-14.921298a7.999266 7.999266 0 1 1 11.316295 11.316295l-14.931963 14.921297a7.977935 7.977935 0 0 1-5.66348 2.346452zM208.663517 960.509187a7.999266 7.999266 0 0 1-5.652814-13.662747l14.921297-14.921297a7.999266 7.999266 0 1 1 11.316295 11.316295l-14.921297 14.921297a8.020597 8.020597 0 0 1-5.663481 2.346452zM223.59548 911.436357a7.935272 7.935272 0 0 1-5.652814-2.346452l-14.921297-14.921297a7.999266 7.999266 0 1 1 11.316294-11.316295l14.921298 14.921298a7.999266 7.999266 0 0 1-5.663481 13.662746zM272.657645 960.509187a7.935272 7.935272 0 0 1-5.652815-2.346452l-14.931963-14.921297a7.999266 7.999266 0 1 1 11.316295-11.316295l14.931963 14.921297a7.999266 7.999266 0 0 1-5.66348 13.662747z\\\" fill=\\\"#FEB908\\\" p-id=\\\"14009\\\"></path></svg> ç¬”è®°æ±‡æ€»\",\"link\":\"/è‡ªæˆ‘ä»‹ç»/self-introduction.md\"},{\"text\":\"<svg t=\\\"1744291776214\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"15357\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M19.398 511.991a476.817 476.817 0 1 0 953.634 0 476.817 476.817 0 1 0-953.634 0z\\\" fill=\\\"#FFDB6C\\\" p-id=\\\"15358\\\"></path><path d=\\\"M598.392 918.425c-263.338 0-476.815-213.477-476.815-476.814 0-140.691 60.946-267.132 157.865-354.408C125.075 166.129 19.398 326.723 19.398 512c0 263.338 213.477 476.815 476.815 476.815 122.647 0 234.463-46.322 318.95-122.403-65.037 33.25-138.711 52.012-216.771 52.012z\\\" fill=\\\"#FFB04C\\\" p-id=\\\"15359\\\"></path><path d=\\\"M291.304 518.837c-35.41 0-64.119 28.706-64.119 64.114h128.233c0.004-35.41-28.702-64.114-64.114-64.114z m559.263 0c-35.41 0-64.118 28.706-64.118 64.114H914.68c0-35.41-28.706-64.114-64.114-64.114z\\\" fill=\\\"#F9A880\\\" p-id=\\\"15360\\\"></path><path d=\\\"M221.761 253.95c124.501-28.575 225.288-18.74 336.93 7.278 16.556 3.856 34.044 8.158 52.517 8.722 30.76 0.942 65.338-6.714 95.15-14.205 117.7-29.566 209.645-14.188 298.248 4.745l-6.546 52.36c-13.832 0.306-18.182 6.756-22.134 19.346-20.68 65.89-3.068 179.261-155.957 165.93-100.58-8.77-129.385-36.327-177.321-157.492-4.078-10.306-6.73-27.338-30.022-26.708-13.152 0.354-24.915 2.68-29.017 25.53-7.646 42.576-65.786 158.259-183.83 158.13-104.265-0.111-144.04-54.231-148.788-173.486-0.59-14.806-13.492-17.618-21.234-17.792l-7.996-52.359z\\\" fill=\\\"#56586F\\\" p-id=\\\"15361\\\"></path><path d=\\\"M402.564 237.47l-72.812 248.31c19.162 7.885 42.292 11.777 70.028 11.805 0.488 0 0.97-0.018 1.458-0.02l74.08-252.636c-24.227-3.664-48.35-6.228-72.754-7.46z m452.795 2.011c-24.232-0.776-49.386 0-75.806 2.95L714.55 464.107c17.776 14.928 38.762 23.598 66.469 28.894l74.34-253.52z\\\" fill=\\\"#737891\\\" p-id=\\\"15362\\\"></path><path d=\\\"M595.54 861.317c-106.593 0-193.006-86.412-193.006-193.005h386.01c0.003 106.593-86.41 193.005-193.005 193.005z\\\" fill=\\\"#7F184C\\\" p-id=\\\"15363\\\"></path><path d=\\\"M449.627 668.308v30.128c0 12.704 10.298 23 23 23H718.45c12.704 0 23-10.298 23-23v-30.128H449.627z\\\" fill=\\\"#F2F2F2\\\" p-id=\\\"15364\\\"></path><path d=\\\"M599.592 781.243c-52.173-24.24-110.067-20.717-157.015 4.422 35.278 45.98 90.754 75.65 153.186 75.65a192.281 192.281 0 0 0 77.345-16.17c-17.376-26.886-42.292-49.394-73.516-63.902z\\\" fill=\\\"#FC4C59\\\" p-id=\\\"15365\\\"></path><path d=\\\"M1008.658 241.52c-92.633-19.79-185.813-35.035-307.03-4.587-30.182 7.584-61.994 14.474-89.83 13.63-15.553-0.476-31.053-4.096-46.043-7.602l-2.664-0.624c-97.266-22.67-206.465-39.242-345.672-7.294a19.398 19.398 0 0 0-14.836 21.835l8 52.36a19.396 19.396 0 0 0 18.74 16.462c0.95 0.02 1.73 0.116 2.328 0.23 2.75 66.008 15.936 111.137 41.477 141.965 27.314 32.968 68.734 49.026 126.628 49.086h0.218c71.189 0 119.585-37.84 147.655-69.604 31.478-35.619 50.343-78.149 55.075-104.499 1.238-6.892 2.956-8.602 2.964-8.61 0.282-0.184 1.66-0.8 7.49-0.956 6.04-0.158 6.262-0.162 9.702 9.646 0.592 1.688 1.164 3.308 1.758 4.806 23.394 59.132 43.932 101.2 73.998 128.193 31.794 28.546 70.837 37.23 119.673 41.488 8.802 0.768 17.228 1.154 25.284 1.154 48.494 0 83.572-13.95 106.79-42.338 0.59-0.722 1.123-1.47 1.689-2.2a463.86 463.86 0 0 1 1.578 37.938c0 252.221-205.198 457.417-457.417 457.417S38.794 764.222 38.794 512 243.99 54.584 496.21 54.584c101.06 0 196.847 32.29 277.004 93.38 8.52 6.495 20.694 4.85 27.184-3.67 6.494-8.521 4.852-20.693-3.67-27.187-86.97-66.28-190.89-101.317-300.52-101.317C222.599 15.788 0 238.39 0 512.001s222.6 496.213 496.209 496.213c273.614 0 496.213-222.6 496.213-496.213 0-36.18-3.96-72.218-11.682-107.253 1.916-8.998 3.5-17.934 5.014-26.564 2.584-14.68 5.022-28.548 8.674-40.178 0.988-3.142 1.696-4.792 2.12-5.628 0.44-0.06 1.074-0.118 1.938-0.138a19.396 19.396 0 0 0 18.818-16.986l6.544-52.36a19.388 19.388 0 0 0-15.19-21.375z m-28.152 55.36c-15.966 6.82-20.744 22.038-23.09 29.508-4.404 14.042-7.058 29.116-9.864 45.078-1.282 7.29-2.552 14.458-3.95 21.428a19.32 19.32 0 0 0-2.494 11.466c-11.195 47.157-33.233 81.96-119.455 74.445-91.15-7.948-115.22-29.676-160.97-145.305-0.413-1.048-0.805-2.18-1.217-3.36-3.764-10.738-12.478-35.624-45.532-35.624-0.6 0-1.212 0.008-1.828 0.026-11.034 0.298-40.337 1.086-47.587 41.49-6.546 36.456-59.75 142.163-164.55 142.163h-0.169c-89.856-0.098-124.934-42.07-129.424-154.86-0.62-15.657-9.54-27.72-23.465-33.197l-3.22-21.074c123.265-24.95 222.042-9.574 310.598 11.062l2.64 0.616c16.058 3.756 34.26 8.01 53.685 8.604 32.644 0.99 67.57-6.514 100.47-14.78 105.683-26.549 189.731-15.626 272.06 1.25l-2.638 21.064z\\\" p-id=\\\"15366\\\"></path><path d=\\\"M807.943 668.308c0-10.712-8.682-19.398-19.398-19.398h-386.01a19.396 19.396 0 0 0-19.399 19.398c0 117.12 95.283 212.403 212.403 212.403s212.404-95.282 212.404-212.403z m-384.935 19.398h345.065c-9.673 86.635-83.359 154.21-172.532 154.21s-162.86-67.575-172.533-154.21zM813.247 174.241a19.398 19.398 0 1 0 38.796 0 19.398 19.398 0 1 0-38.796 0z\\\" p-id=\\\"15367\\\"></path></svg> Funny Web\",\"items\":[{\"text\":\"ğŸ“± 3Dç¿»ç›–æ‰‹æœº\",\"link\":\"https://chaz.fun/phone/n93i/\"},{\"text\":\"ğŸ¬ Siena Film\",\"link\":\"https://www.siena.film/\"},{\"text\":\"âœ¨ è®¾è®¡åŠ¨æ•ˆ\",\"link\":\"https://www.jiejoe.com/home\"},{\"text\":\"ğŸ² ç–¯ç‹‚ 3D æ¸¸æˆåº“\",\"link\":\"https://www.crazygames.com/\",\"desc\":\"å…è´¹ 3D æ¸¸æˆåˆé›†ï¼Œå«å°„å‡»/ç«é€Ÿ/è§£è°œç­‰ç±»å‹\"}]},{\"text\":\"<svg t=\\\"1744296872060\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"20947\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M0 556.416C0 602.816 4.352 644.8 13.024 682.336 21.696 719.904 33.728 752.544 49.088 780.224 64.416 807.936 83.968 832.32 107.648 853.344 131.36 874.368 157.056 891.552 184.768 904.928 212.48 918.272 244.096 929.12 279.648 937.472 315.2 945.824 351.52 951.648 388.576 955.008 425.632 958.336 466.336 960 510.752 960 555.488 960 596.384 958.336 633.44 955.008 670.496 951.648 706.88 945.824 742.592 937.472 778.304 929.12 810.112 918.272 837.984 904.928 865.856 891.552 891.712 874.368 915.584 853.344 939.456 832.32 959.168 807.936 974.688 780.224 990.208 752.544 1002.304 719.904 1010.976 682.336 1019.648 644.8 1024 602.816 1024 556.416 1024 473.632 996.288 402.016 940.896 341.6 943.872 333.568 946.624 324.48 949.152 314.304 951.648 304.128 953.984 289.6 956.16 270.752 958.336 251.872 957.504 230.112 953.664 205.408 949.824 180.704 942.72 155.488 932.352 129.792L924.864 128.288C919.52 127.296 910.752 127.52 898.56 129.024 886.368 130.528 872.192 133.536 856 138.048 839.808 142.56 818.944 151.232 793.408 164.096 767.872 176.928 740.928 193.056 712.544 212.416 663.808 199.04 596.864 192.384 511.744 192.384 426.944 192.384 360.192 199.04 311.456 212.416 283.072 193.056 255.968 176.928 230.08 164.096 204.224 151.232 183.616 142.56 168.256 138.048 152.896 133.536 138.528 130.624 125.184 129.28 111.84 127.936 103.392 127.52 99.904 128.032 96.384 128.544 93.632 129.12 91.648 129.792 81.28 155.488 74.176 180.672 70.368 205.408 66.528 230.112 65.696 251.872 67.84 270.752 70.016 289.6 72.352 304.128 74.848 314.304 77.376 324.48 80.128 333.568 83.136 341.6 27.712 402.016 0 473.632 0 556.416ZM125.696 682.08C125.696 634.016 147.552 589.952 191.296 549.888 204.288 537.888 219.488 528.8 236.832 522.592 254.208 516.448 273.824 512.928 295.68 512.096 317.536 511.264 338.496 511.424 358.528 512.608 378.56 513.76 403.264 515.36 432.64 517.344 462.016 519.36 487.392 520.352 508.736 520.352 530.112 520.352 555.488 519.36 584.864 517.344 614.24 515.36 638.944 513.76 658.976 512.608 679.008 511.424 699.936 511.264 721.792 512.096 743.68 512.928 763.296 516.448 780.64 522.592 798.016 528.768 813.184 537.888 826.208 549.888 869.952 589.28 891.808 633.344 891.808 682.08 891.808 710.816 888.224 736.256 881.024 758.464 873.856 780.672 864.672 799.264 853.504 814.304 842.304 829.312 826.784 842.08 806.944 852.608 787.072 863.104 767.712 871.2 748.832 876.896 729.984 882.56 705.792 886.976 676.224 890.144 646.688 893.312 620.32 895.232 597.12 895.904 573.92 896.576 544.448 896.928 508.736 896.928 473.024 896.928 443.552 896.576 420.352 895.904 397.152 895.232 370.784 893.312 341.248 890.144 311.712 886.976 287.52 882.56 268.64 876.896 249.792 871.2 230.432 863.104 210.56 852.608 190.688 842.08 175.168 829.312 164 814.304 152.8 799.264 143.616 780.672 136.448 758.464 129.28 736.256 125.696 710.816 125.696 682.08ZM640 672A2 3 2520 1 0 768 672 2 3 2520 1 0 640 672zM256 672A2 3 2520 1 0 384 672 2 3 2520 1 0 256 672z\\\" fill=\\\"#000000\\\" p-id=\\\"20948\\\"></path></svg> Githubä»“åº“\",\"link\":\"https://github.com/XiaoPeng03182/blogs-vitepress\"},{\"text\":\"<svg t=\\\"1744354778687\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"2486\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"2487\\\"></path><path d=\\\"M685.6 306.4H350.4L499.2 176c11.2-9.6 27.2-9.6 38.4 0l148 130.4z m-268-25.6h200L520 195.2c-1.6-0.8-3.2-0.8-4 0L417.6 280.8z\\\" fill=\\\"#333333\\\" p-id=\\\"2488\\\"></path><path d=\\\"M208 288h624c17.6 0 32 14.4 32 32v464c0 17.6-14.4 32-32 32H208c-17.6 0-32-14.4-32-32V320c0-17.6 14.4-32 32-32z\\\" fill=\\\"#09C45E\\\" p-id=\\\"2489\\\"></path><path d=\\\"M832 827.2H208c-24 0-43.2-19.2-43.2-43.2V320c0-24 19.2-43.2 43.2-43.2h624c24 0 43.2 19.2 43.2 43.2v464c0 24-19.2 43.2-43.2 43.2z m-624-528c-11.2 0-20.8 8.8-20.8 20.8v464c0 11.2 8.8 20.8 20.8 20.8h624c11.2 0 20.8-8.8 20.8-20.8V320c0-11.2-8.8-20.8-20.8-20.8H208z\\\" fill=\\\"#333333\\\" p-id=\\\"2490\\\"></path><path d=\\\"M744 452.8H536c-7.2 0-12.8-5.6-12.8-12.8s5.6-12.8 12.8-12.8h208c7.2 0 12.8 5.6 12.8 12.8s-5.6 12.8-12.8 12.8zM744 512.8H536c-7.2 0-12.8-5.6-12.8-12.8s5.6-12.8 12.8-12.8h208c7.2 0 12.8 5.6 12.8 12.8s-5.6 12.8-12.8 12.8zM664 576.8H536c-7.2 0-12.8-5.6-12.8-12.8s5.6-12.8 12.8-12.8h128c7.2 0 12.8 5.6 12.8 12.8s-5.6 12.8-12.8 12.8zM288 752h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H288c-17.6 0-32-14.4-32-32s14.4-32 32-32z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"2491\\\"></path><path d=\\\"M384 827.2H288c-24 0-43.2-19.2-43.2-43.2s19.2-43.2 43.2-43.2h96c24 0 43.2 19.2 43.2 43.2s-19.2 43.2-43.2 43.2z m-96-64c-11.2 0-20.8 8.8-20.8 20.8s8.8 20.8 20.8 20.8h96c11.2 0 20.8-8.8 20.8-20.8s-8.8-20.8-20.8-20.8H288z\\\" fill=\\\"#333333\\\" p-id=\\\"2492\\\"></path><path d=\\\"M520 216m-24 0a24 24 0 1 0 48 0 24 24 0 1 0-48 0Z\\\" fill=\\\"#333333\\\" p-id=\\\"2493\\\"></path></svg> ç•™è¨€æ¿\",\"link\":\"https://wordpress.xiaopeng.online/ç•™è¨€æ¿/\"},{\"text\":\"<svg t=\\\"1744357628539\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"6714\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M197.333333 154.666667m-17.066666 0a17.066667 17.066667 0 1 0 34.133333 0 17.066667 17.066667 0 1 0-34.133333 0Z\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6715\\\"></path><path d=\\\"M810.666667 125.866667m-23.466667 0a23.466667 23.466667 0 1 0 46.933333 0 23.466667 23.466667 0 1 0-46.933333 0Z\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6716\\\"></path><path d=\\\"M250.666667 870.4m-21.333334 0a21.333333 21.333333 0 1 0 42.666667 0 21.333333 21.333333 0 1 0-42.666667 0Z\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6717\\\"></path><path d=\\\"M396.8 136.533333m-10.666667 0a10.666667 10.666667 0 1 0 21.333334 0 10.666667 10.666667 0 1 0-21.333334 0Z\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6718\\\"></path><path d=\\\"M150.4 790.4m-10.666667 0a10.666667 10.666667 0 1 0 21.333334 0 10.666667 10.666667 0 1 0-21.333334 0Z\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6719\\\"></path><path d=\\\"M231.466667 86.4m-7.466667 0a7.466667 7.466667 0 1 0 14.933333 0 7.466667 7.466667 0 1 0-14.933333 0Z\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6720\\\"></path><path d=\\\"M104.533333 104.533333L117.333333 84.266667c1.066667-2.133333 1.066667-5.333333-1.066666-6.4-2.133333-1.066667-5.333333-1.066667-6.4 1.066666L97.066667 99.2 77.866667 86.4c-2.133333-1.066667-5.333333-1.066667-6.4 1.066667s-1.066667 5.333333 1.066666 6.4L91.733333 106.666667l-12.8 20.266666c-1.066667 2.133333-1.066667 5.333333 1.066667 6.4 2.133333 1.066667 5.333333 1.066667 6.4-1.066666l12.8-20.266667 19.2 12.8c2.133333 1.066667 5.333333 1.066667 6.4-1.066667s1.066667-5.333333-1.066667-6.4L104.533333 104.533333zM929.066667 100.266667l-17.066667 2.133333-1.066667-17.066667c0-2.133333-2.133333-3.2-3.2-3.2-2.133333 0-3.2 2.133333-3.2 3.2l1.066667 17.066667-17.066667 2.133333c-2.133333 0-3.2 2.133333-3.2 3.2 0 2.133333 2.133333 3.2 3.2 3.2l17.066667-2.133333 1.066667 17.066667c0 2.133333 2.133333 3.2 3.2 3.2 2.133333 0 3.2-2.133333 3.2-3.2l-1.066667-17.066667 17.066667-2.133333c2.133333 0 3.2-2.133333 3.2-3.2 0-2.133333-1.066667-3.2-3.2-3.2zM172.8 874.666667l-17.066667-2.133334 2.133334-17.066666c0-2.133333-1.066667-3.2-3.2-3.2-2.133333 0-3.2 1.066667-3.2 3.2l-2.133334 17.066666-17.066666-2.133333c-2.133333 0-3.2 1.066667-3.2 3.2 0 2.133333 1.066667 3.2 3.2 3.2l17.066666 2.133333-2.133333 17.066667c0 2.133333 1.066667 3.2 3.2 3.2 2.133333 0 3.2-1.066667 3.2-3.2l2.133333-17.066667 17.066667 2.133334c2.133333 0 3.2-1.066667 3.2-3.2s-1.066667-3.2-3.2-3.2zM871.466667 334.933333v-19.2c0-27.733333-22.4-50.133333-49.066667-50.133333h-576c-26.666667 0-49.066667 22.4-49.066667 50.133333v365.866667c0 27.733333 22.4 50.133333 49.066667 50.133333h25.6v19.2c0 27.733333 22.4 50.133333 49.066667 50.133334h397.866666l5.333334 62.933333 86.4-62.933333h85.333333c26.666667 0 49.066667-22.4 49.066667-50.133334V385.066667c0-27.733333-22.4-50.133333-49.066667-50.133334\\\" fill=\\\"#71BCFF\\\" p-id=\\\"6721\\\"></path><path d=\\\"M848 281.6h-9.6v-3.2c0-36.266667-28.8-66.133333-65.066667-66.133333h-576c-36.266667 0-65.066667 29.866667-65.066666 66.133333v365.866667c0 36.266667 28.8 66.133333 65.066666 66.133333h9.6v3.2c0 36.266667 28.8 66.133333 65.066667 66.133333h382.933333l4.266667 48c0 5.333333 4.266667 10.666667 9.6 12.8 2.133333 1.066667 4.266667 1.066667 6.4 1.066667 3.2 0 6.4-1.066667 9.6-3.2l82.133333-59.733333h82.133334c36.266667 0 65.066667-29.866667 65.066666-66.133334V347.733333c-1.066667-36.266667-30.933333-66.133333-66.133333-66.133333z m-650.666667 396.8c-18.133333 0-33.066667-14.933333-33.066666-34.133333V278.4c0-19.2 14.933333-34.133333 33.066666-34.133333h576c18.133333 0 33.066667 14.933333 33.066667 34.133333v3.2H272c-36.266667 0-65.066667 29.866667-65.066667 66.133333v330.666667h-9.6z m683.733334 35.2c0 19.2-14.933333 34.133333-33.066667 34.133333h-86.4c-3.2 0-6.4 1.066667-9.6 3.2l-62.933333 45.866667-3.2-34.133333c-1.066667-8.533333-7.466667-14.933333-16-14.933334H272c-18.133333 0-33.066667-14.933333-33.066667-34.133333V347.733333c0-19.2 14.933333-34.133333 33.066667-34.133333h576c18.133333 0 33.066667 14.933333 33.066667 34.133333v365.866667z\\\" fill=\\\"#3A3A3A\\\" p-id=\\\"6722\\\"></path><path d=\\\"M723.2 425.6H325.333333c-8.533333 0-16-7.466667-16-16s7.466667-16 16-16h396.8c8.533333 0 16 7.466667 16 16s-6.4 16-14.933333 16z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"6723\\\"></path><path d=\\\"M648.533333 530.133333H325.333333c-8.533333 0-16-7.466667-16-16s7.466667-16 16-16h322.133334c8.533333 0 16 7.466667 16 16s-6.4 16-14.933334 16z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"6724\\\"></path><path d=\\\"M535.466667 636.8H325.333333c-8.533333 0-16-7.466667-16-16s7.466667-16 16-16h209.066667c8.533333 0 16 7.466667 16 16s-6.4 16-14.933333 16z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"6725\\\"></path></svg> è¯´è¯´\",\"link\":\"https://wordpress.xiaopeng.online/ç¢ç¢å¿µ/\"},{\"text\":\"<svg t=\\\"1744362861554\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"3517\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M885.01925 941.423455l-42.756639 69.619901-42.756639-69.619901h85.513278z\\\" fill=\\\"#06C7CA\\\" p-id=\\\"3518\\\"></path><path d=\\\"M914.387447 45.347951v35.760098H768.669365V45.347951a31.700377 31.700377 0 0 1 30.663853-32.391394h84.303999a31.786754 31.786754 0 0 1 30.75023 32.391394z\\\" fill=\\\"#FF8875\\\" p-id=\\\"3519\\\"></path><path d=\\\"M914.30107 81.108049v57.181606h-72.383967L768.669365 138.203278V81.108049h145.631705z\\\" fill=\\\"#FFDB93\\\" p-id=\\\"3520\\\"></path><path d=\\\"M915.078463 138.289655v754.071636l-73.16136-52.344491V138.289655h73.16136zM841.917103 138.289655v701.727145l-73.247738 52.344491V138.203278l73.247738 0.086377z\\\" fill=\\\"#06C7CA\\\" p-id=\\\"3521\\\"></path><path d=\\\"M605.589497 644.20003v362.783605L108.921467 509.624588 605.589497 12.956557v631.243473z m-140.362704 23.149049V352.245605L307.675056 509.624588z\\\" fill=\\\"#FFDB93\\\" p-id=\\\"3522\\\"></path><path d=\\\"M540.115694 186.228917h65.646557v25.913115h-65.646557zM540.115694 275.283655h65.646557v25.913114h-65.646557zM540.115694 364.252015h65.646557v25.913114h-65.646557zM540.115694 453.220375h65.646557v25.913115h-65.646557zM540.202071 542.275112h65.56018v25.913115h-65.56018zM540.202071 631.243473h65.56018v25.913114h-65.56018zM540.202071 720.211833h65.56018v25.913115h-65.56018zM540.202071 809.26657h65.56018v25.913115h-65.56018z\\\" fill=\\\"#18252F\\\" p-id=\\\"3523\\\"></path><path d=\\\"M605.589497 1019.249176a12.956557 12.956557 0 0 1-9.155967-3.80059L99.765499 518.953309a12.956557 12.956557 0 0 1 0-17.966426L596.951792 3.80059a12.956557 12.956557 0 0 1 21.767017 9.155967v993.336062A12.956557 12.956557 0 0 1 605.589497 1019.249176zM127.233401 509.624588l465.572293 465.485916V44.225049z\\\" fill=\\\"#18252F\\\" p-id=\\\"3524\\\"></path><path d=\\\"M465.226793 680.305636a12.956557 12.956557 0 0 1-9.155967-3.80059L298.519089 518.953309a12.956557 12.956557 0 0 1 0-18.311934l157.551737-157.551737a12.956557 12.956557 0 0 1 22.112524 9.155967v315.103474a12.956557 12.956557 0 0 1-12.956557 12.956557zM325.98699 509.624588l126.283246 126.455999V383.514097zM768.669365 905.317849a12.956557 12.956557 0 0 1-12.956557-12.956558V138.203278h25.913115v728.935915L834.4023 829.219669l15.029606 21.075999-73.247737 52.344492a12.956557 12.956557 0 0 1-7.514804 2.677689z\\\" fill=\\\"#18252F\\\" p-id=\\\"3525\\\"></path><path d=\\\"M828.960546 138.289655h25.913114v701.727145h-25.913114zM928.03502 892.361291h-25.913114V138.203278h12.611049v-12.956557a13.647574 13.647574 0 0 1 13.302065 12.956557z\\\" fill=\\\"#18252F\\\" p-id=\\\"3526\\\"></path><path d=\\\"M914.30107 151.246212H768.669365a12.956557 12.956557 0 0 1-12.956557-12.956557V81.108049h25.913115v44.138672h119.718589V81.108049h25.913115V138.203278a12.956557 12.956557 0 0 1-12.956557 13.042934z\\\" fill=\\\"#18252F\\\" p-id=\\\"3527\\\"></path><path d=\\\"M914.30107 94.064606H768.669365a12.956557 12.956557 0 0 1-12.956557-12.956557V45.347951a44.570557 44.570557 0 0 1 43.188525-45.347951h84.303999a44.743311 44.743311 0 0 1 43.706787 45.261574v35.846475a12.956557 12.956557 0 0 1-12.611049 12.956557z m-132.675147-25.913114h119.718589V45.347951A18.74382 18.74382 0 0 0 883.637217 25.913115h-84.303999a18.916574 18.916574 0 0 0-17.27541 19.434836zM842.262611 1023.999914a12.956557 12.956557 0 0 1-11.056262-6.132771l-72.815852-118.682065a12.956557 12.956557 0 0 1 3.455082-17.27541l72.470344-52.689999a12.956557 12.956557 0 0 1 15.115983 0l73.16136 52.344491a12.956557 12.956557 0 0 1 3.541459 17.27541l-72.815852 118.682065a12.956557 12.956557 0 0 1-11.056262 6.478279zM786.9813 895.816373l55.454065 90.43677 55.454065-90.43677-55.972327-39.819819z\\\" fill=\\\"#18252F\\\" p-id=\\\"3528\\\"></path><path d=\\\"M885.01925 954.380012h-85.513278l-0.777394-25.913114h86.290672v25.913114z\\\" fill=\\\"#18252F\\\" p-id=\\\"3529\\\"></path></svg> å·¥å…·\",\"items\":[{\"text\":\"<svg t=\\\"1744363204448\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"5676\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M989.884071 853.441363H853.441745v136.442326a34.116311 34.116311 0 0 1-68.221163 0V853.441363h-579.874156a34.116311 34.116311 0 0 1-34.116311-34.116312v-579.874155H34.741949a34.116311 34.116311 0 1 1 0-68.221163h136.442326V34.741567a34.116311 34.116311 0 1 1 68.221163 0v136.442326h579.874155a34.116311 34.116311 0 0 1 34.116312 34.116311v579.874156h136.488166a34.116311 34.116311 0 0 1 0 68.221163z m-204.674949-614.024847H239.416898v545.792224h545.792224z m0 0\\\" p-id=\\\"5677\\\" fill=\\\"#1296db\\\"></path><path d=\\\"M684.338523 614.386523q-52.131374-102.314555-151.271519-51.501076-27.813332-33.852732-66.570928-100.286141t-71.235134-153.506212q3.965147 83.119116 30.861682 136.373566c26.873615 53.208611 120.490057 209.717333 160.16445 240.727995s128.294292 16.043949 98.051449-71.796672z m-96.538733 19.871577c-34.43719-41.255869-33.715213-54.091028-13.190418-61.287885s41.656967-0.217739 65.230112 23.848184 28.558229 52.349113 13.511297 65.390552-31.136721 13.316478-65.573911-27.950851z m0 0\\\" p-id=\\\"5678\\\" fill=\\\"#1296db\\\"></path><path d=\\\"M513.092287 537.157829l19.02354 26.243316c-33.669373 53.50657-70.432936 106.165102-91.679709 122.77059-39.662934 31.010661-128.294292 16.043949-98.051448-71.796672q52.165754-102.280175 151.271519-51.478156 9.110671-11.093245 19.413178-25.727618z m20.226836-30.254304q12.72056-19.974716 26.919454-44.304219 38.769057-66.467789 71.223674-153.494752-3.965147 83.119116-30.838762 136.373566c-9.649289 19.080839-27.870631 51.455236-49.117404 86.545645z m-94.40718 127.354575c34.46011-41.255869 33.738133-54.091028 13.213338-61.287885s-41.679887-0.217739-65.253032 23.848184-28.535309 52.349113-13.511297 65.390552 31.136721 13.316478 65.573911-27.950851z m0 0\\\" p-id=\\\"5679\\\" fill=\\\"#1296db\\\"></path></svg> ç”µè„‘æˆªå±å·¥å…·Snipaste\",\"link\":\"https://www.ilanzou.com/s/ghc0BURP\"},{\"text\":\"<svg t=\\\"1744363240121\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"6834\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M901.850593 926.476283a48.761858 48.761858 0 0 1-48.761859 48.761859H170.422718a48.761858 48.761858 0 0 1-48.761858-48.761859V48.762834a48.761858 48.761858 0 0 1 48.761858-48.761859h418.864363a48.761858 48.761858 0 0 1 34.620919 14.140939l263.801654 263.801654a48.761858 48.761858 0 0 1 14.140939 34.620919V926.476283z\\\" fill=\\\"#EBECF0\\\" p-id=\\\"6835\\\"></path><path d=\\\"M901.850593 926.476283v48.761859a48.761858 48.761858 0 0 1-48.761859 48.761858H170.422718a48.761858 48.761858 0 0 1-48.761858-48.761858v-48.761859a48.761858 48.761858 0 0 0 48.761858 48.761859h682.666016a48.761858 48.761858 0 0 0 48.761859-48.761859z\\\" fill=\\\"#C1C7D0\\\" p-id=\\\"6836\\\"></path><path d=\\\"M24.137143 536.381417h975.237166v243.809291a48.761858 48.761858 0 0 1-48.761858 48.761859H72.899001a48.761858 48.761858 0 0 1-48.761858-48.761859v-243.809291z\\\" fill=\\\"#FF5630\\\" p-id=\\\"6837\\\"></path><path d=\\\"M121.66086 536.381417V438.8577l-97.523717 97.523717h97.523717zM901.850593 536.381417l0.975237-97.523717 97.036098 97.523717H901.850593z\\\" fill=\\\"#DE350B\\\" p-id=\\\"6838\\\"></path><path d=\\\"M267.946434 585.143275h84.845634a57.051374 57.051374 0 0 1 41.935198 15.603795 55.1009 55.1009 0 0 1 16.091413 40.959961 55.588518 55.588518 0 0 1-16.091413 40.959961 59.001849 59.001849 0 0 1-43.398054 16.091413h-48.761858v76.556118H267.946434z m32.670446 81.919922h43.885672a42.422817 42.422817 0 0 0 25.843785-6.339041 23.893311 23.893311 0 0 0 7.801897-19.992362q0-24.868548-32.670445-24.868548h-44.860909zM434.71199 588.068987H511.755726a73.142787 73.142787 0 0 1 58.51423 25.356166 100.937047 100.937047 0 0 1 21.942836 68.266602 110.689418 110.689418 0 0 1-20.967599 69.729457A71.679932 71.679932 0 0 1 511.755726 780.190708H434.71199z m32.670445 158.963658H511.755726a43.398054 43.398054 0 0 0 36.083775-17.066651A75.093262 75.093262 0 0 0 560.517584 682.666992a70.704695 70.704695 0 0 0-13.65332-48.761859 48.761858 48.761858 0 0 0-37.546631-16.579031h-41.935198zM755.565018 618.788957h-100.937047v45.348529H755.565018v31.207589h-100.937047v81.919922h-32.670445v-190.171248H755.565018z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"6839\\\"></path><path d=\\\"M901.850593 312.564487v6.82666h-263.801654a48.761858 48.761858 0 0 1-48.761858-48.761858V0.000975a48.761858 48.761858 0 0 1 34.620919 14.140939l264.289272 263.801654a48.761858 48.761858 0 0 1 13.653321 34.620919z\\\" fill=\\\"#C1C7D0\\\" p-id=\\\"6840\\\"></path></svg> PDFå·¥å…·\",\"link\":\"https://www.ilovepdf.com/zh-cn\"},{\"text\":\"<svg t=\\\"1744363274309\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"7988\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M829.64898 849.502041H194.35102c-43.885714 0-79.412245-35.526531-79.412244-79.412245V253.910204c0-43.885714 35.526531-79.412245 79.412244-79.412245h635.29796c43.885714 0 79.412245 35.526531 79.412244 79.412245v516.179592c0 43.885714-35.526531 79.412245-79.412244 79.412245z\\\" fill=\\\"#D2F4FF\\\" p-id=\\\"7989\\\"></path><path d=\\\"M909.061224 656.195918l-39.706122-48.065306L626.416327 365.714286c-19.330612-19.330612-50.677551-19.330612-70.008164 0L419.526531 502.073469c-2.612245 2.612245-5.22449 3.134694-6.791837 3.134694-1.567347 0-4.702041-0.522449-6.791837-3.134694L368.326531 464.979592c-19.330612-19.330612-50.677551-19.330612-70.008164 0l-143.673469 143.673469-39.706122 48.065306v113.893878c0 43.885714 35.526531 79.412245 79.412244 79.412245h635.29796c43.885714 0 79.412245-35.526531 79.412244-79.412245v-114.416327\\\" fill=\\\"#16C4AF\\\" p-id=\\\"7990\\\"></path><path d=\\\"M273.763265 313.469388m-49.632653 0a49.632653 49.632653 0 1 0 99.265306 0 49.632653 49.632653 0 1 0-99.265306 0Z\\\" fill=\\\"#E5404F\\\" p-id=\\\"7991\\\"></path><path d=\\\"M644.179592 768h-365.714286c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.897959h365.714286c11.493878 0 20.897959 9.404082 20.897959 20.897959s-9.404082 20.897959-20.897959 20.897959zM461.322449 670.82449h-182.857143c-11.493878 0-20.897959-9.404082-20.897959-20.897959s9.404082-20.897959 20.897959-20.89796h182.857143c11.493878 0 20.897959 9.404082 20.897959 20.89796s-9.404082 20.897959-20.897959 20.897959z\\\" fill=\\\"#0B9682\\\" p-id=\\\"7992\\\"></path></svg> ç¼–è¾‘å›¾ç‰‡\",\"link\":\"https://www.iloveimg.com/zh-cn\"},{\"text\":\"<svg t=\\\"1744363365791\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"10997\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M376.967 345.239h56.905v258.789h-56.905zM540.793 511.24h59.805c16.186 0 29.958-2.356 41.319-7.067 11.354-4.712 20.597-10.93 27.727-18.667 7.125-7.73 12.323-16.61 15.586-26.64 3.262-10.024 4.893-20.235 4.893-30.627 0-10.63-1.631-20.897-4.893-30.808-3.263-9.905-8.461-18.723-15.586-26.459-7.13-7.73-16.372-13.954-27.727-18.666-11.361-4.712-25.134-7.068-41.319-7.068H483.889v258.789h56.904V511.24z m0-121.782h44.219c6.524 0 12.805 0.487 18.848 1.45 6.037 0.969 11.354 2.843 15.948 5.618 4.587 2.781 8.273 6.705 11.055 11.779 2.774 5.075 4.168 11.723 4.168 19.935 0 8.217-1.394 14.86-4.168 19.935-2.781 5.074-6.468 9.004-11.055 11.78-4.594 2.78-9.911 4.655-15.948 5.618-6.043 0.968-12.323 1.45-18.848 1.45h-44.219v-77.565z\\\" fill=\\\"#f5c875\\\" p-id=\\\"10998\\\"></path><path d=\\\"M864 128.542H159c-17.673 0-32 14.327-32 32v598.979c0 17.673 14.327 32 32 32h321v115.522c0 17.673 14.327 32 32 32 17.673 0 32-14.327 32-32V791.521h320c17.673 0 32-14.327 32-32V160.542c0-17.673-14.327-32-32-32z m-32 598.979H191V192.542h641v534.979z\\\" fill=\\\"#f5c875\\\" p-id=\\\"10999\\\"></path></svg> ipè§£æ\",\"link\":\"https://zh-hans.ipshu.com/\"},{\"text\":\"<svg t=\\\"1744363424697\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"12325\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M718.489072 363.678351a256.844536 256.844536 0 1 1-256.844536-256.844537 256.844536 256.844536 0 0 1 256.844536 256.844537z\\\" fill=\\\"#FFD800\\\" p-id=\\\"12326\\\"></path><path d=\\\"M554.754639 515.800412a8.445361 8.445361 0 0 1-6.33402-2.850309L389.225567 343.198351a8.762062 8.762062 0 0 1 0-12.351341 8.656495 8.656495 0 0 1 12.35134 0l159.61732 170.174021a8.867629 8.867629 0 0 1-6.439588 14.779381zM554.860206 612.28866a9.18433 9.18433 0 0 1-6.439587-2.744742l-2.955877-3.167011a8.762062 8.762062 0 0 1 12.773609-12.034639l2.955876 3.16701a8.867629 8.867629 0 0 1-6.334021 14.779382z m-42.226804-44.654846a8.762062 8.762062 0 0 1-6.334021-2.744742l-2.955876-3.16701a8.762062 8.762062 0 0 1 12.668041-12.034639l3.061444 3.272577a8.656495 8.656495 0 0 1 0 12.245773 8.234227 8.234227 0 0 1-6.122887 2.428041z m-42.226804-44.654845a8.762062 8.762062 0 0 1-6.334021-2.744742l-3.061443-3.167011a8.762062 8.762062 0 0 1 0-12.35134 8.656495 8.656495 0 0 1 12.35134 0l2.955877 3.272578a8.656495 8.656495 0 0 1 0 12.35134 8.762062 8.762062 0 0 1-5.172784 2.639175z\\\" fill=\\\"\\\" p-id=\\\"12327\\\"></path><path d=\\\"M468.189691 519.811959a9.18433 9.18433 0 0 1-6.439588-2.744743l-158.350515-169.540618a8.656495 8.656495 0 0 1 0-12.35134 8.762062 8.762062 0 0 1 12.35134 0L475.051546 505.032577a8.867629 8.867629 0 0 1-6.33402 14.779382z\\\" fill=\\\"\\\" p-id=\\\"12328\\\"></path><path d=\\\"M854.248247 699.803711a8.762062 8.762062 0 0 1-8.762061-8.762062V307.411134a4.117113 4.117113 0 0 0-4.011547-4.117113H216.940206a4.117113 4.117113 0 0 0-4.011546 4.117113v383.630515a8.762062 8.762062 0 0 1-17.524124 0V307.411134a21.113402 21.113402 0 0 1 21.113402-21.113402h624.956701a21.113402 21.113402 0 0 1 21.113402 21.113402v383.630515a8.762062 8.762062 0 0 1-8.339794 8.762062z\\\" fill=\\\"\\\" p-id=\\\"12329\\\"></path><path d=\\\"M811.599175 699.803711H246.710103a8.762062 8.762062 0 0 1-8.656495-8.762062V337.181031a8.762062 8.762062 0 0 1 8.656495-8.762062h564.889072a8.762062 8.762062 0 0 1 8.762062 8.762062v353.860618a8.762062 8.762062 0 0 1-8.762062 8.762062zM255.472165 682.279588h547.364948V345.943093H255.472165z\\\" fill=\\\"\\\" p-id=\\\"12330\\\"></path><path d=\\\"M529.207423 329.052371A12.35134 12.35134 0 1 1 541.453196 316.701031a12.35134 12.35134 0 0 1-12.245773 12.35134z m0-17.524124a5.172784 5.172784 0 0 0-5.172784 5.172784 5.172784 5.172784 0 1 0 10.556701 0 5.172784 5.172784 0 0 0-5.383917-5.172784zM869.555464 751.214845H188.859381a24.491546 24.491546 0 0 1-23.541443-19.952165l-4.328247-26.180618a19.318763 19.318763 0 0 1 19.318763-22.802474h697.797938A19.318763 19.318763 0 0 1 897.319588 705.082062l-4.433815 26.180618a24.280412 24.280412 0 0 1-23.330309 19.952165z m-689.24701-51.411134a2.11134 2.11134 0 0 0-1.689073 0.633402 1.794639 1.794639 0 0 0 0 1.79464L182.630928 728.412371a6.861856 6.861856 0 0 0 6.228453 5.278351h680.696083A6.861856 6.861856 0 0 0 876.206186 728.412371l4.328247-26.180618a2.428041 2.428041 0 0 0 0-1.79464 2.11134 2.11134 0 0 0-1.689072-0.633402zM630.762887 829.862268H372.334845a8.762062 8.762062 0 1 1 0-17.524124h258.428042a8.762062 8.762062 0 0 1 0 17.524124zM308.150103 829.862268h-4.433814a8.762062 8.762062 0 1 1 0-17.524124h4.433814a8.762062 8.762062 0 0 1 0 17.524124z m-61.228866 0H242.804124A8.762062 8.762062 0 0 1 242.804124 812.865979h4.328247a8.762062 8.762062 0 1 1 0 17.524124zM827.539794 829.862268H823.42268A8.762062 8.762062 0 0 1 823.42268 812.865979h4.433815a8.762062 8.762062 0 0 1 0 17.524124z m-61.228866 0h-4.328248a8.762062 8.762062 0 1 1 0-17.524124h4.328248a8.762062 8.762062 0 0 1 0 17.524124z m-61.228866 0h-4.328248a8.762062 8.762062 0 0 1 0-17.524124h4.328248a8.762062 8.762062 0 1 1 0 17.524124z\\\" fill=\\\"\\\" p-id=\\\"12331\\\"></path></svg> ç”µè„‘å±å¹•æ£€æµ‹\",\"link\":\"https://screen.bmcx.com/#welcome\"},{\"text\":\"<svg t=\\\"1744363573513\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"16328\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M985.088 677.888L908.8 568.32c-3.584-6.144-17.92-29.184-44.032-29.184-18.432 0-35.84 16.384-38.912 19.456l-84.992 105.472-0.512 0.512c-2.56 3.584-8.704 13.824-6.144 25.088 2.048 8.704 7.68 15.36 17.408 20.48 4.096 2.048 8.192 3.072 12.8 3.072 6.144 0 15.36-2.048 25.088-12.8l37.376-45.568c0 2.56 0.512 5.632 0.512 8.704 0.512 4.608 0.512 8.192 0.512 10.24 0 17.408-3.072 32.256-6.144 49.152l-0.512 2.56c-0.512 2.56-1.024 5.12-1.536 8.192-12.8 47.616-37.376 88.576-51.712 96.256h-0.512l-1.536 1.024-0.512 1.024c-26.112 31.232-57.856 53.76-66.56 53.76h-2.56c-24.576 8.704-44.544 12.8-70.144 16.896-27.136 2.56-36.352 20.992-35.84 35.328 0.512 15.36 12.288 31.232 31.744 31.232h17.92c9.728-1.536 20.48-3.584 33.28-6.656l4.096-1.024c8.192-2.048 11.264-2.56 13.312-4.096 54.784-17.408 100.864-50.688 140.8-101.376 40.448-55.296 60.928-114.176 60.928-175.104v-6.656-10.24l42.496 56.832c1.024 1.024 7.168 6.656 16.896 6.656 7.68 0 15.36-3.584 23.04-11.264 22.528-20.48 10.24-37.888 10.24-38.4zM424.448 87.552c-17.408 0-34.816 0-52.224 4.608-49.152 8.704-97.792 33.28-139.776 72.192-43.52 45.056-70.656 90.624-82.432 139.776-5.12 25.088-8.192 50.176-8.704 75.776v7.68l-42.496-56.32c-1.024-1.024-7.168-6.656-16.896-6.656-7.68 0-15.36 3.584-23.04 11.264-21.504 22.016-9.216 39.424-9.216 39.424l71.68 113.152c1.536 3.584 15.872 30.208 44.544 30.208 18.432 0 35.84-16.384 38.912-19.456l84.992-105.472v-0.512c5.632-8.192 7.68-16.896 6.144-25.088-2.048-8.192-7.68-15.36-17.408-19.968-4.096-2.048-8.192-3.072-12.8-3.072-6.144 0-15.36 2.048-25.088 12.8l-33.792 40.96c0-1.536 0-2.56-0.512-4.096-0.512-3.072-0.512-6.656-0.512-9.728v-4.096c0-25.6 4.608-49.152 5.12-51.2v-0.512l0.512-1.536 0.512-3.072c7.68-35.328 22.528-61.952 28.672-71.168l2.048 2.048 4.608-6.656c27.136-36.864 56.32-60.416 94.72-76.8 19.968-8.192 40.448-12.288 59.904-16.384l2.048-0.512c28.16-3.072 36.864-23.04 35.84-40.96 0-13.312-5.632-26.624-15.36-26.624z\\\" fill=\\\"#F59D0D\\\" p-id=\\\"16329\\\"></path><path d=\\\"M377.344 585.216H136.192C66.56 585.216 10.24 643.584 10.24 715.264v141.312c0 71.68 56.32 130.048 125.952 130.048h241.152c69.632 0 125.952-58.368 125.952-130.048v-141.312c0-71.68-56.32-130.048-125.952-130.048z m52.736 271.36c0 29.696-23.552 54.272-52.224 54.272H136.192c-28.672 0-52.224-24.064-52.224-54.272v-141.312c0-29.696 23.552-54.272 52.224-54.272h241.152c28.672 0 52.224 24.064 52.224 54.272v141.312zM877.568 74.752h-241.152C566.784 74.752 510.464 133.12 510.464 204.8v141.312c0 71.68 56.32 130.048 125.952 130.048h241.152C947.2 476.16 1003.52 417.792 1003.52 346.112V204.8c0-71.68-56.32-130.048-125.952-130.048z m52.224 271.36c0 29.696-23.552 54.272-52.224 54.272h-241.152c-28.672 0-52.224-24.064-52.224-54.272V204.8c0-29.696 23.552-54.272 52.224-54.272h241.152c28.672 0 52.224 24.064 52.224 54.272v141.312z\\\" fill=\\\"#343399\\\" p-id=\\\"16330\\\"></path></svg> æ–‡ä»¶æ ¼å¼è½¬æ¢\",\"link\":\"https://www.alltoall.net/\"}]}],\"sidebar\":[{\"text\":\"è‡ªæˆ‘ä»‹ç»\",\"collapsed\":true,\"items\":[{\"text\":\"ğŸ‘¨ã€Œä»£ç ç‚¼é‡‘æœ¯å£«ã€\",\"link\":\"/è‡ªæˆ‘ä»‹ç»/self-introduction-2.md\"},{\"text\":\"ğŸŒã€Œè¯—çš„æµªæ¼«æå®¢ã€\",\"link\":\"/è‡ªæˆ‘ä»‹ç»/self-introduction.md\"}]},{\"text\":\"<svg t=\\\"1744176581923\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"25703\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M725.952 170.048c-29.248 20.096-56.704 38.4-87.808 62.208-23.744 18.24-65.792 45.696-67.648 78.592-3.648 53.056 78.656 102.4 34.752 170.048-16.448 25.6-43.904 36.608-78.592 53.056-3.712-7.296 9.088-14.656 14.592-21.952 54.848-78.656-56.704-104.256-42.048-201.152 14.656-96.896 124.352-128 226.752-140.8z\\\" fill=\\\"#FF1515\\\" p-id=\\\"25704\\\"></path><path d=\\\"M563.2 0c16.448 16.448 29.248 47.552 29.248 78.656 0 96.896-102.4 151.744-151.744 215.744-11.008 14.656-25.6 36.544-25.6 60.352 0 52.992 54.848 111.552 74.944 153.6C457.152 486.4 415.104 455.296 384 420.48 354.752 384 323.648 327.296 351.104 276.096c40.192-74.944 162.688-120.64 206.592-201.152 11.008-20.096 20.096-51.2 5.504-74.944z\\\" fill=\\\"#FF1515\\\" p-id=\\\"25705\\\"></path><path d=\\\"M353.6 500.544c9.728-2.752 19.072-5.376 26.752-8.64a124.544 124.544 0 0 0-28.288 0.832c-4.672 0.512-8.768 0.96-11.968 0.96l-10.048 0.768c-50.56 3.84-150.72 11.328-149.056 52.288 0 36.544 93.312 45.696 133.504 49.344 120.704 7.36 296.256-3.648 352.896-45.696 9.152-5.504 25.6-16.448 21.952-23.744-89.6 16.448-219.392 25.6-325.44 20.096-25.6 0-53.056 0-71.36-14.656 12.8-17.92 38.208-25.088 61.056-31.552zM327.04 609.856c3.328-3.072 5.888-5.504 0.256-6.4-21.952 5.44-71.296 18.24-69.504 45.696 1.856 21.952 49.408 36.544 76.8 42.048 107.904 21.952 254.208 5.504 329.152-29.248-10.368-1.728-19.52-9.216-28.8-16.832-10.368-8.384-20.864-16.96-33.344-17.92-7.296-1.216-15.36 1.6-24.32 4.736a162.56 162.56 0 0 1-14.08 4.416c-65.856 12.8-199.296 25.6-241.408-16.448-1.728-3.584 2.112-7.104 5.248-10.048zM360.192 711.68c2.112-2.24 4.48-4.736 0-5.824l-10.752 2.816c-29.568 7.552-58.112 14.912-53.248 55.68 78.656 60.352 270.656 40.192 351.104-7.296-10.624-2.496-18.688-10.048-27.008-17.92-10.24-9.6-20.8-19.52-36.992-20.48-7.808-1.28-15.68 2.048-23.488 5.376-3.2 1.344-6.272 2.688-9.408 3.712-56.704 12.8-170.048 27.456-192-12.8-0.704-0.64 0.512-1.92 1.792-3.328z\\\" fill=\\\"#2365C4\\\" p-id=\\\"25706\\\"></path><path d=\\\"M264.064 783.36c9.728-0.576 18.56-1.088 24.832-2.56-42.048-36.544-177.344-20.096-179.2 36.544-1.792 32.96 40.256 56.704 75.008 67.712 107.84 36.544 279.744 38.4 418.752 23.744 64-7.296 221.248-34.752 213.888-104.256-3.648-18.24-20.096-31.04-38.4-32.896 14.656 64-102.4 84.096-164.544 91.456-135.296 14.592-298.048 10.944-378.496-20.16-14.656-5.44-36.608-20.096-34.752-32.896 2.688-22.848 36.032-24.96 62.912-26.624z\\\" fill=\\\"#2365C4\\\" p-id=\\\"25707\\\"></path><path d=\\\"M499.2 987.456c-93.248-11.008-182.848-23.808-257.856-56.704 197.504 47.552 486.4 43.904 625.408-56.704 1.984-1.472 4.032-3.392 6.016-5.376 5.44-5.12 11.136-10.56 17.728-9.216-30.912 92.8-140.224 108.8-245.184 124.032-12.8 1.92-25.6 3.776-38.208 5.76 0-1.792-107.904-1.792-107.904-1.792zM852.096 565.056c-1.792-75.008-89.6-91.456-140.8-47.552 40.256-9.152 75.008 9.152 82.304 36.544 11.968 58.304-42.048 101.952-79.168 131.904-8.32 6.72-15.744 12.672-21.376 18.048 69.44-3.648 162.688-53.056 159.04-138.944z\\\" fill=\\\"#2365C4\\\" p-id=\\\"25708\\\"></path></svg> JavaåŸºç¡€å­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744175497991\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"3892\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512 0C228.061867 0 0 228.061867 0 512s228.061867 512 512 512 512-228.061867 512-512S795.938133 0 512 0z m238.267733 116.48v16.059733c0 48.213333 3.5328 94.0544-5.6832 139.912534-32.477867 6.843733-51.5584 34.372267-51.5584 66.5088 0 18.312533 8.977067 36.744533 22.9376 48.213333-16.247467 36.744533-31.453867 73.3696-54.6304 107.758933A687.837867 687.837867 0 0 1 494.933333 141.653333c53.265067-32.136533 103.355733-57.309867 163.669334-73.386666 34.645333 11.4688 91.665067 27.528533 91.665066 48.213333zM669.3888 580.266667c41.147733 40.635733 84.650667 76.475733 132.744533 105.181866-48.093867 9.591467-98.440533 14.2848-151.022933 14.2848-22.869333 0-45.738667-2.338133-68.608-2.338133 0-4.8128 0-9.608533-2.235733-14.301867 31.9488-31.0272 61.661867-66.986667 89.122133-102.826666zM518.638933 51.2c26.146133 0 52.4288 2.269867 78.6944 6.9632-33.399467 13.909333-66.6624 27.938133-100.061866 44.2368C494.933333 86.101333 494.933333 69.7856 494.933333 53.469867 501.947733 51.2 511.505067 51.2 518.638933 51.2zM631.466667 537.736533c-25.105067 34.850133-52.565333 65.006933-82.3808 95.300267-11.434667-9.335467-25.105067-13.892267-41.130667-13.892267A66.6112 66.6112 0 0 0 443.9552 665.6C352.494933 642.372267 265.5232 607.5392 187.733333 558.677333a723.8144 723.8144 0 0 1 98.4064-218.368c4.590933 0 9.198933 2.269867 16.0256 2.269867a68.113067 68.113067 0 0 0 45.6192-16.913067c14.216533-12.612267 22.971733-31.300267 22.971734-52.753066 0-9.335467-2.235733-18.568533-4.590934-27.904 27.460267-27.886933 54.920533-51.114667 84.616534-74.3424C475.904 310.033067 540.0064 435.490133 631.466667 537.736533zM121.821867 768c0-70.946133-68.4032-151.415467-70.621867-238.933333 27.2896 23.637333 55.808 47.291733 85.333333 66.2016-9.130667 52.036267-14.711467 106.410667-14.711466 160.904533V768z m23.517866-221.866667C110.916267 522.461867 81.117867 496.349867 51.2 468.036267 74.1376 254.856533 234.871467 84.394667 439.125333 51.2c0 25.992533 2.2528 49.783467 4.608 75.776a1058.7136 1058.7136 0 0 0-110.2336 92.3648 63.5392 63.5392 0 0 0-34.4064-9.506133c-23.210667 0-43.1616 10.871467-55.517866 28.16-8.430933 11.776-13.312 26.538667-13.312 42.8544 0 16.5888 6.8608 30.754133 16.0768 45.021866C200.448 392.1408 165.922133 465.595733 145.339733 546.133333z m30.071467 282.999467c-2.304-26.180267-4.744533-52.48-4.744533-81.117867 0-45.3632 4.744533-90.709333 14.114133-133.614933 84.992 50.141867 177.032533 88.251733 273.698133 109.7728 0 2.338133 0 2.338133 2.321067 4.795733-82.568533 54.818133-177.032533 90.692267-278.459733 107.298134-4.5056-2.338133-4.5056-4.795733-6.929067-7.133867zM518.331733 972.8c-113.493333 0-215.432533-41.489067-296.465066-108.3904a703.488 703.488 0 0 0 264.106666-108.3904c9.3184 6.894933 20.8896 9.2672 32.477867 9.2672 23.159467 0 41.642667-11.52 55.6032-27.682133 27.818667 2.2528 55.620267 4.625067 83.438933 4.625066 74.103467 0 145.954133-9.2672 215.415467-25.429333 16.2304 6.894933 32.4608 16.162133 48.6912 20.804267A460.970667 460.970667 0 0 1 518.331733 972.8z m354.4064-307.2c-63.6928-32.648533-122.9312-74.5472-173.0048-125.7984 24.9856-39.611733 45.5168-81.732267 63.6928-121.122133h6.8096c38.7072 0 68.266667-32.648533 68.266667-72.260267a72.072533 72.072533 0 0 0-38.7072-64.0512A599.552 599.552 0 0 0 813.397333 153.6C911.342933 239.786667 972.8 365.3632 972.8 507.4944c0 46.574933-6.8096 88.354133-18.176 130.372267-24.8832 11.52-52.206933 20.770133-81.885867 27.733333z\\\" fill=\\\"#23B8FC\\\" p-id=\\\"3893\\\"></path></svg> JavaåŸºç¡€çŸ¥è¯†\",\"link\":\"/JavaåŸºç¡€/Java-Learning-Local.md\"},{\"text\":\"<svg t=\\\"1744175562545\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"5002\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M519.3216 744.2432a109.056 109.056 0 0 1-52.3264-13.312L116.2752 537.6a38.0928 38.0928 0 0 1-15.0016-52.736 40.4992 40.4992 0 0 1 54.3232-14.592l350.72 193.1264a27.136 27.136 0 0 0 26.1632 0l346.0096-192.8704a40.448 40.448 0 0 1 54.3744 14.2848 38.144 38.144 0 0 1-14.6944 52.7872l-346.0096 193.024a108.7488 108.7488 0 0 1-52.8384 13.6192z\\\" fill=\\\"#F5504E\\\" p-id=\\\"5003\\\"></path><path d=\\\"M519.3216 909.824a108.544 108.544 0 0 1-52.3264-13.3632l-350.72-193.1264a38.144 38.144 0 0 1-15.0016-52.7872 40.4992 40.4992 0 0 1 54.3232-14.592l350.72 193.1776a27.136 27.136 0 0 0 26.1632 0l346.0096-192.9728A40.4992 40.4992 0 0 1 932.864 650.24a38.144 38.144 0 0 1-14.6944 52.8384L572.16 896a108.7488 108.7488 0 0 1-52.8384 13.824z\\\" fill=\\\"#F5504E\\\" p-id=\\\"5004\\\"></path><path d=\\\"M884.1728 300.5952l-322.1504-187.5456a84.9408 84.9408 0 0 0-86.4768 0.6144L164.3008 300.9536a50.0224 50.0224 0 0 0 0.9216 86.272l311.8592 178.688a84.9408 84.9408 0 0 0 83.3536 0.5632l322.816-178.8928a50.0224 50.0224 0 0 0 0.9216-86.9888z m-432.896-41.4208L307.456 349.3376a25.2928 25.2928 0 0 1-13.568 3.9424 25.6 25.6 0 0 1-13.6192-47.3088l143.7696-90.1632a25.6 25.6 0 1 1 27.2384 43.3664z\\\" fill=\\\"#FF5A5A\\\" p-id=\\\"5005\\\"></path><path d=\\\"M811.4688 258.2528l-249.4464-145.2032a84.9408 84.9408 0 0 0-86.4768 0.6144L164.3008 300.9536a50.0224 50.0224 0 0 0 0.9216 86.272l311.8592 178.688a84.9408 84.9408 0 0 0 83.3536 0.5632l158.72-88.064a479.1808 479.1808 0 0 0 92.3136-220.16z m-360.192 0.9216L307.456 349.3376a25.2928 25.2928 0 0 1-13.568 3.9424 25.6 25.6 0 0 1-13.6192-47.3088l143.7696-90.1632a25.6 25.6 0 1 1 27.2384 43.3664z\\\" fill=\\\"#F66A68\\\" p-id=\\\"5006\\\"></path><path d=\\\"M903.68 465.92a40.3456 40.3456 0 0 0-25.1904 4.7616L532.48 663.5008a27.136 27.136 0 0 1-26.1632 0l-350.72-193.0752a40.4992 40.4992 0 0 0-54.3232 14.592A38.0928 38.0928 0 0 0 116.2752 537.6l350.72 193.1776a109.4144 109.4144 0 0 0 105.1648-0.3072l295.6288-164.864A475.7504 475.7504 0 0 0 903.68 465.92z\\\" fill=\\\"#FF5A5A\\\" p-id=\\\"5007\\\"></path><path d=\\\"M155.5968 470.4256a40.4992 40.4992 0 0 0-54.3232 14.592A38.0928 38.0928 0 0 0 116.2752 537.6l237.6192 130.8672q16.5888-0.6144 33.3824-2.3552a484.8128 484.8128 0 0 0 90.4192-18.4832z\\\" fill=\\\"#F66A68\\\" p-id=\\\"5008\\\"></path><path d=\\\"M238.2848 515.9424l-82.688-45.5168a40.4992 40.4992 0 0 0-54.3232 14.592 37.1712 37.1712 0 0 0-5.12 15.872 477.184 477.184 0 0 0 142.1312 15.0528zM675.84 179.2l-113.8176-66.1504a84.9408 84.9408 0 0 0-86.4768 0.6144L164.3008 300.9536a50.0224 50.0224 0 0 0 0.9216 86.272l190.3104 109.056A480.5632 480.5632 0 0 0 675.84 179.2zM272.1792 341.2992a25.6 25.6 0 0 1 8.0896-35.328l143.7696-90.1632a25.6 25.6 0 1 1 27.2384 43.3664L307.456 349.3376a25.2928 25.2928 0 0 1-13.568 3.9424 25.6 25.6 0 0 1-21.7088-11.9808z\\\" fill=\\\"#F67271\\\" p-id=\\\"5009\\\"></path><path d=\\\"M475.5456 113.664L164.3008 300.9536a49.8688 49.8688 0 0 0-22.9888 53.8112q17.7152-0.4608 35.84-2.3552A438.3232 438.3232 0 0 0 268.8 332.8a25.6 25.6 0 0 1 11.4688-26.6752l143.7696-90.3168a25.6 25.6 0 0 1 26.88 0 439.7056 439.7056 0 0 0 76.8-113.7152 84.8384 84.8384 0 0 0-52.1728 11.5712z\\\" fill=\\\"#F67B7A\\\" p-id=\\\"5010\\\"></path><path d=\\\"M506.88 829.44l-0.6656-0.3072-350.72-193.1776a40.4992 40.4992 0 0 0-54.3232 14.592 38.144 38.144 0 0 0 15.0016 52.7872l218.6752 120.4224a478.7712 478.7712 0 0 0 152.5248 8.1408c6.656-0.6656 13.1584-1.536 19.5072-2.4576zM778.24 692.0704l-233.7792 130.3552A477.6448 477.6448 0 0 0 778.24 692.0704z\\\" fill=\\\"#FF5A5A\\\" p-id=\\\"5011\\\"></path></svg> Javaé›†åˆ\",\"link\":\"/JavaåŸºç¡€/é›†åˆ/é›†åˆ-Local.md\"},{\"text\":\"<svg t=\\\"1744175632364\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"8062\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M153.594336 307.211712a153.594336 153.594336 0 1 1 144.82666-204.792449h498.413621a224.82371 224.82371 0 0 1 10.879599 449.455427l-10.879599 0.25599H238.967188a133.563075 133.563075 0 0 0-8.447688 266.806162l8.447688 0.25599h486.51006a153.658334 153.658334 0 1 1 0 102.396224H239.031186a235.959299 235.959299 0 0 1-10.815601-471.662607l10.815601-0.191993h557.867428a122.427485 122.427485 0 0 0 8.319694-244.662978l-8.319694-0.255991H298.420996A153.658334 153.658334 0 0 1 153.594336 307.211712z m716.773569 511.98112a51.198112 51.198112 0 1 0 0 102.396224 51.198112 51.198112 0 0 0 0-102.396224zM153.594336 102.419263a51.198112 51.198112 0 1 0 0 102.396224 51.198112 51.198112 0 0 0 0-102.396224z\\\" fill=\\\"#326BFB\\\" p-id=\\\"8063\\\"></path></svg> IOæµ\",\"link\":\"/JavaåŸºç¡€/IO/IOæµ-Local.md\"},{\"text\":\"<svg t=\\\"1744175680494\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1025 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"9344\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M27.2 984h280v-51.2H27.2v51.2zM401.6 984h280v-51.2H401.6v51.2zM921.6 764.8V532.8H552v-46.4h190.4V49.6h-432v436.8h190.4v46.4h-368v230.4H27.2V816h280v-51.2h-124.8V585.6h318.4v179.2H400V816h280v-51.2h-129.6V585.6h318.4v179.2h-124.8V816H1024v-51.2h-102.4z m-560-664h331.2v334.4H361.6V100.8zM745.6 984h280v-51.2H745.6v51.2z\\\" p-id=\\\"9345\\\" fill=\\\"#1296db\\\"></path></svg> å¤šçº¿ç¨‹\",\"link\":\"/JavaåŸºç¡€/å¤šçº¿ç¨‹/å¤šçº¿ç¨‹-Local.md\"},{\"text\":\"<svg t=\\\"1744175718572\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"10667\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M853.333333 960H170.666667V64h469.333333l213.333333 213.333333z\\\" fill=\\\"#90CAF9\\\" p-id=\\\"10668\\\"></path><path d=\\\"M821.333333 298.666667H618.666667V96z\\\" fill=\\\"#E1F5FE\\\" p-id=\\\"10669\\\"></path></svg> Fileæ–‡ä»¶\",\"link\":\"/JavaåŸºç¡€/File/File-Local.md\"},{\"text\":\"<svg t=\\\"1744175761793\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"11916\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512 0.00617a376.829937 376.829937 0 0 0-265.214956 107.007982 365.565939 365.565939 0 0 0-108.542982 259.069957v499.708917h743.419877v-499.709917a363.00594 363.00594 0 0 0-109.055982-259.069957A375.293938 375.293938 0 0 0 511.999 0.00717z m-30.719995 745.979876L470.528007 503.810086H287.233037L527.869997 200.197137l20.479997 195.582967 174.079971 6.143999-243.19996 344.061943zM0.003085 968.192009a55.807991 55.807991 0 0 1 55.806991-56.31999H968.189924a57.34399 57.34399 0 0 1 39.423994 16.384997 58.36799 58.36799 0 0 1 16.382997 39.934993A55.807991 55.807991 0 0 1 968.189924 1024H55.810076A55.807991 55.807991 0 0 1 0.003085 968.192009z m0 0\\\" p-id=\\\"11917\\\" fill=\\\"#f4ea2a\\\"></path></svg> å¼‚å¸¸\",\"link\":\"/JavaåŸºç¡€/å¼‚å¸¸/å¼‚å¸¸-Local.md\"},{\"text\":\"<svg t=\\\"1744175814942\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"15365\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M909.989 343.281c-21.76-51.446-52.904-97.643-92.568-137.307-39.663-39.664-85.86-70.808-137.306-92.568-53.28-22.536-109.858-33.962-168.164-33.962S397.067 90.87 343.787 113.406c-51.446 21.76-97.643 52.904-137.307 92.568-39.664 39.664-70.808 85.86-92.568 137.307-22.536 53.28-33.962 109.858-33.962 168.164s11.426 114.884 33.962 168.164c21.76 51.445 52.904 97.643 92.568 137.306 39.664 39.664 85.86 70.809 137.307 92.568 53.28 22.535 109.858 33.962 168.164 33.962s114.884-11.427 168.164-33.962c51.445-21.76 97.643-52.904 137.306-92.568 39.664-39.663 70.809-85.86 92.568-137.306 22.535-53.28 33.962-109.858 33.962-168.164s-11.427-114.884-33.962-168.164zM543.951 376.03c17.57-0.243 35.095-0.683 52.536-1.368a1990.762 1990.762 0 0 0 91.131-5.678c10.157 34.378 16.643 71.314 19.389 110.46H543.951V376.03z m0-64.069V163.41c17.617 12.176 39.372 29.845 61.074 54.197 23.42 26.28 43.109 56.138 58.784 89.019-41.937 3.147-82.117 4.783-119.858 5.335z m-64-144.763v144.705a2038.572 2038.572 0 0 1-103.41-4.309 1929.6 1929.6 0 0 1-11.183-0.786c15.195-31.915 34.175-60.991 56.676-86.711 20.284-23.185 40.722-40.49 57.917-52.899zM370.842 371.354a2124.301 2124.301 0 0 0 109.109 4.606v103.484H322.25c2.742-39.079 9.208-75.96 19.335-110.285 9.453 0.776 19.21 1.512 29.257 2.195z m-112.731 108.09H145.342c3.916-45.757 16.208-89.778 36.139-130.276 20.257 3.578 52.836 8.759 95.407 13.641-9.902 36.699-16.182 75.682-18.777 116.635z m-0.859 64c1.975 39.144 9.712 78.242 23.101 116.799-44.093 4.976-77.797 10.319-98.621 13.992-20.08-40.64-32.458-84.841-36.39-130.792h111.91z m64.098 0h158.601v104.048c-36.37 0.602-72.818 2.13-109.109 4.601-8.41 0.573-16.612 1.182-24.609 1.821-14.322-36.523-22.659-73.543-24.883-110.47z m158.601 168.103v131.712c-16.974-15.877-36.574-35.962-56.038-59.735-18.064-22.064-33.892-44.698-47.379-67.668a2038.38 2038.38 0 0 1 103.417-4.309z m64 136.665V711.487c34.387 0.503 70.782 1.903 108.68 4.527-13.467 22.915-29.263 45.496-47.286 67.509-21.547 26.32-43.262 48.119-61.394 64.689z m52.536-199.426a2063.187 2063.187 0 0 0-52.536-1.384V543.444h163.958c-2.227 36.975-10.582 74.045-24.939 110.615a1994.972 1994.972 0 0 0-86.483-5.273z m175.521-105.342H878.56c-3.928 45.898-16.283 90.051-36.322 130.652a1822.84 1822.84 0 0 0-93.476-13.439c13.478-38.691 21.264-77.929 23.246-117.213z m-0.859-64c-2.605-41.111-8.924-80.238-18.891-117.061a1821.491 1821.491 0 0 0 90.233-13.075c19.89 40.46 32.158 84.432 36.07 130.136H771.149z m1.017-228.215a373.188 373.188 0 0 1 34.046 39.155 1772.853 1772.853 0 0 1-75.117 9.98c-19.529-46.785-45.825-88.91-78.291-125.338a423.863 423.863 0 0 0-5.386-5.927c46.185 18.263 88.573 45.955 124.748 82.13zM384.81 165.923a420.788 420.788 0 0 0-8.355 9.102c-32.552 36.525-58.904 78.775-78.449 125.71-32.357-3.484-59.48-7.244-80.226-10.469a373.386 373.386 0 0 1 33.956-39.037c38.338-38.338 83.654-67.152 133.074-85.306zM251.736 771.659a373.444 373.444 0 0 1-33.584-38.548c22.526-3.498 52.529-7.614 88.626-11.328 18.229 35.542 41.31 70.356 68.867 103.808a678.068 678.068 0 0 0 35.727 39.995c-59.757-16.875-114.524-48.814-159.636-93.927z m368.249 91.745a677.032 677.032 0 0 0 33.629-37.814c27.469-33.344 50.487-68.043 68.689-103.466a1780.315 1780.315 0 0 1 83.528 10.88 373.34 373.34 0 0 1-33.665 38.654c-43.23 43.232-95.324 74.373-152.181 91.746z\\\" fill=\\\"#1296db\\\" p-id=\\\"15366\\\"></path></svg> ç½‘ç»œç¼–ç¨‹\",\"link\":\"/JavaåŸºç¡€/ç½‘ç»œç¼–ç¨‹/ç½‘ç»œç¼–ç¨‹-Local.md\"},{\"text\":\"<svg t=\\\"1744176100568\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"16452\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M209.6 0h604.8Q1024 0 1024 209.6v604.8q0 209.6-209.6 209.6H209.6Q0 1024 0 814.4V209.6Q0 0 209.6 0z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"16453\\\"></path><path d=\\\"M228.48 32h567.04Q992 32 992 228.48v567.04Q992 992 795.52 992H228.48Q32 992 32 795.52V228.48Q32 32 228.48 32z\\\" fill=\\\"#6DBAA2\\\" p-id=\\\"16454\\\"></path><path d=\\\"M270.08 480q-64-54.4-124.16-96l26.56-32q57.28 40 128 93.76zM165.76 840q52.16-128 94.08-272.64a366.72 366.72 0 0 0 40.64 16.32q-34.56 96-92.16 273.6z m140.8-557.12Q247.68 232 180.48 182.4l27.84-32q64 45.76 128 96z m78.72 224h202.24V304h-224v-39.68h247.36q-6.08-20.48-34.88-92.48l-12.48-32L600.64 128q20.8 46.08 53.44 123.52l-37.76 13.44h238.72V304h-224v201.6H832V544H629.76v235.84h249.92v39.68H315.52v-39.36h272.32V544H384z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"16455\\\"></path></svg> æ³¨è§£\",\"link\":\"/JavaåŸºç¡€/æ³¨è§£/æ³¨è§£-Local.md\"},{\"text\":\"<svg t=\\\"1744176167579\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"17621\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M346.656 64c-64.144 62.544-101.44 136.144-111.872 220.8-15.664 126.976 10.016 167.488 40.288 357.344 20.16 126.56-40.8 232.528-182.88 317.856 36.352-100.64 45.44-197.328 27.264-290.08-27.248-139.152-92.768-272.368-27.248-419.36C135.888 152.576 220.688 90.4 346.656 64z m306.672 0c-64.144 62.544-101.44 136.144-111.872 220.8-15.664 126.976 10.032 167.488 40.288 357.344 20.16 126.56-40.8 232.528-182.88 317.856 36.352-100.64 45.44-197.328 27.264-290.08-27.248-139.152-92.768-272.368-27.248-419.36C442.56 152.576 527.36 90.4 653.328 64zM960 64c-64.144 62.544-101.44 136.144-111.872 220.8-15.664 126.976 10.032 167.488 40.288 357.344 20.16 126.56-40.784 232.528-182.864 317.856 36.336-100.64 45.424-197.328 27.248-290.08-27.248-139.152-92.768-272.368-27.248-419.36C749.232 152.576 834.048 90.4 960 64z\\\" fill=\\\"#0078FF\\\" p-id=\\\"17622\\\"></path></svg> Streamæµ\",\"link\":\"/JavaåŸºç¡€/Stream/Streamæµ-Local.md\"},{\"text\":\"<svg t=\\\"1744176188625\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"18747\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M112 16h736v992H112z\\\" fill=\\\"#AED796\\\" p-id=\\\"18748\\\"></path><path d=\\\"M320 640h320v256H320z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"18749\\\"></path><path d=\\\"M320 544h320v96H320z\\\" fill=\\\"#F48284\\\" p-id=\\\"18750\\\"></path><path d=\\\"M896 128h-32V32a32 32 0 0 0-32-32H128a32 32 0 0 0-32 32v960a32 32 0 0 0 32 32h704a32 32 0 0 0 32-32V416h32a32 32 0 0 0 32-32V160a32 32 0 0 0-32-32z m-64 0H448a32 32 0 0 0-32 32v224a32 32 0 0 0 32 32h384v576H128V32h704v96zM560 720H400a16 16 0 1 0 0 32h160a16 16 0 1 0 0-32zM336 912h288a32 32 0 0 0 32-32V560a32 32 0 0 0-32-32h-32v-16a16 16 0 1 0-32 0v16h-32v-16a16 16 0 1 0-32 0v16h-32v-16a16 16 0 1 0-32 0v16h-32v-16a16 16 0 1 0-32 0v16h-32a32 32 0 0 0-32 32v320a32 32 0 0 0 32 32z m0-352h32v16a16 16 0 1 0 32 0v-16h32v16a16 16 0 1 0 32 0v-16h32v16a16 16 0 1 0 32 0v-16h32v16a16 16 0 1 0 32 0v-16h32v64H336v-64z m0 96h288v224H336V656z m224 128H400a16 16 0 1 0 0 32h160a16 16 0 1 0 0-32z\\\" fill=\\\"#2B3139\\\" p-id=\\\"18751\\\"></path><path d=\\\"M448 160h448v224H448z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"18752\\\"></path><path d=\\\"M499.472 213.824h35.184v84.912h50.528V328h-85.712v-114.176zM654.8 211.104c34.704 0 57.888 24.944 57.888 59.792s-23.184 59.808-57.888 59.808-57.888-24.96-57.888-59.808 23.184-59.792 57.888-59.792z m0 91.152c8.96 0 22.704-5.904 22.704-31.344 0-25.424-13.744-31.344-22.704-31.344s-22.704 5.92-22.704 31.344 13.744 31.344 22.704 31.344zM811.264 316.336c-7.84 10.08-20 14.384-32.464 14.384-33.728 0-54.528-26.224-54.528-58.688 0-43.504 30.544-60.928 56.304-60.928 29.088 0 47.488 15.824 52.608 42.688h-33.744c-1.28-8.32-8.32-14.24-16.624-14.24-24.16 0-23.344 25.44-23.344 33.264 0 10.72 4.32 29.424 25.728 29.424 8.16 0 16.48-4.16 18.24-12.624h-15.52v-24.464h46.704V328h-22.24l-1.12-11.664z\\\" fill=\\\"#2B3139\\\" p-id=\\\"18753\\\"></path></svg> logæ—¥å¿—\",\"link\":\"/JavaåŸºç¡€/log/Logæ—¥å¿—-Local.md\"},{\"text\":\"<svg t=\\\"1744176207600\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"19885\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M145.6 0C100.8 0 64 35.2 64 80v862.4C64 987.2 100.8 1024 145.6 1024h732.8c44.8 0 81.6-36.8 81.6-81.6V324.8L657.6 0h-512z\\\" fill=\\\"#FC7B24\\\" p-id=\\\"19886\\\"></path><path d=\\\"M960 326.4v16H755.2s-100.8-20.8-99.2-108.8c0 0 4.8 92.8 97.6 92.8H960z\\\" fill=\\\"#FB5C1B\\\" p-id=\\\"19887\\\"></path><path d=\\\"M657.6 0v233.6c0 25.6 17.6 92.8 97.6 92.8H960L657.6 0z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"19888\\\"></path><path d=\\\"M374.4 860.8c-3.2 0-6.4 0-9.6-3.2l-59.2-80-59.2 80c-3.2 3.2-6.4 3.2-9.6 3.2-6.4 0-11.2-4.8-11.2-11.2 0-1.6 0-4.8 1.6-6.4l62.4-81.6-57.6-78.4c-1.6-1.6-1.6-3.2-1.6-6.4 0-4.8 4.8-11.2 11.2-11.2 3.2 0 6.4 1.6 9.6 4.8l54.4 73.6 54.4-73.6c3.2-3.2 6.4-4.8 9.6-4.8 6.4 0 11.2 4.8 11.2 11.2 0 3.2 0 4.8-1.6 6.4l-57.6 76.8 62.4 83.2c1.6 1.6 1.6 4.8 1.6 6.4 0 6.4-4.8 11.2-11.2 11.2z m230.4 0c-6.4 0-11.2-4.8-11.2-11.2v-148.8l-64 156.8c-1.6 1.6-3.2 3.2-6.4 3.2s-4.8-1.6-6.4-3.2l-64-156.8v148.8c0 6.4-4.8 11.2-11.2 11.2-8 0-12.8-4.8-12.8-11.2V684.8c0-9.6 9.6-19.2 20.8-19.2 8 0 16 4.8 19.2 12.8l54.4 134.4 54.4-134.4c3.2-8 11.2-12.8 19.2-12.8 11.2 0 20.8 9.6 20.8 19.2v164.8c0 6.4-4.8 11.2-12.8 11.2z m169.6-1.6h-88c-9.6 0-17.6-8-17.6-17.6V676.8c0-6.4 6.4-11.2 12.8-11.2s11.2 4.8 11.2 11.2v161.6h81.6c4.8 0 9.6 4.8 9.6 9.6 0 6.4-4.8 11.2-9.6 11.2z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"19889\\\"></path></svg> XML\",\"link\":\"/JavaåŸºç¡€/Xml/XML-Local.md\"},{\"text\":\"<svg t=\\\"1744176255358\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"21020\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M976.4864 740.693333L565.111467 24.917333a8.328533 8.328533 0 0 0-0.750934-1.2288L564.224 23.620267c-0.341333-0.682667-0.887467-1.365333-1.2288-1.911467 0 0 0-0.136533-0.136533-0.136533L561.3568 19.797333 561.288533 19.729067c-0.477867-0.682667-1.092267-1.160533-1.570133-1.706667L559.650133 17.885867C558.967467 17.408 558.557867 16.930133 557.943467 16.384L557.738667 16.384l-1.774934-1.365333C555.895467 14.7456 555.895467 14.7456 555.758933 14.7456L553.915733 13.585067 553.642667 13.5168 551.7312 12.424533C551.662933 12.424533 551.662933 12.288 551.594667 12.288L549.546667 11.400533 549.410133 11.332267C548.727467 10.922667 547.908267 10.786133 547.2256 10.513067c-0.136533 0-0.136533 0-0.2048-0.136534L544.768 9.8304h-0.136533C543.880533 9.557333 543.061333 9.489067 542.3104 9.4208h-0.136533a18.8416 18.8416 0 0 0-2.321067-0.2048h-2.730667l-2.184533 0.2048h-0.2048A17.885867 17.885867 0 0 0 532.48 9.8304h-0.2048L529.954133 10.24h-0.068266l-1.160534 0.273067c-0.4096 0.136533-0.682667 0.341333-1.092266 0.4096h-0.136534l-2.116266 0.887466s-0.136533 0-0.136534 0.136534a20.6848 20.6848 0 0 0-2.048 1.092266l-0.068266 0.068267-2.048 1.2288v0.068267l-1.911467 1.365333h-0.136533l-1.8432 1.6384a13.5168 13.5168 0 0 0-1.6384 1.706667L515.413333 19.319467l-1.501866 1.774933-0.136534 0.2048a12.765867 12.765867 0 0 0-1.365333 1.911467c0 0.068267 0 0.2048-0.136533 0.2048a35.362133 35.362133 0 0 0-1.160534 2.048h-0.136533L31.197867 903.168l-0.068267 0.068267a12.014933 12.014933 0 0 0-0.8192 1.6384l-0.2048 0.4096a6.144 6.144 0 0 0-0.477867 1.160533l-0.273066 0.682667-0.4096 0.955733a1.4336 1.4336 0 0 0-0.2048 0.682667l-0.4096 1.365333-0.068267 0.341333-0.4096 1.706667-0.068267 0.4096c-0.136533 0.477867-0.2048 0.887467-0.2048 1.365333 0 0.136533 0 0.341333-0.136533 0.4096l-0.2048 1.6384v0.136534a36.727467 36.727467 0 0 0 0.136533 5.7344v0.068266l0.273067 1.911467a22.528 22.528 0 0 0 1.024 3.8912l0.477867 1.501867 0.2048 0.546133 0.477866 1.160533 0.2048 0.546134 0.2048 0.273066 0.273067 0.477867 0.273067 0.682667 0.341333 0.546133a2.184533 2.184533 0 0 0 0.477867 0.8192l0.6144 0.955733a9.216 9.216 0 0 1 0.477866 0.8192l0.546134 0.887467 0.6144 0.887467 0.477866 0.682666 1.570134 1.706667 0.6144 0.682667 0.887466 0.750933 0.682667 0.6144 0.887467 0.682667 0.8192 0.6144 0.750933 0.6144 1.024 0.682666c0.136533 0.2048 0.477867 0.273067 0.682667 0.477867a5.256533 5.256533 0 0 0 1.2288 0.682667l0.546133 0.341333c1.2288 0.682667 2.525867 1.160533 3.822933 1.706667l0.273067 0.068266 1.706667 0.6144 0.546133 0.2048 1.501867 0.4096 0.682666 0.068267a5.666133 5.666133 0 0 0 1.297067 0.2048l0.750933 0.136533 0.477867 0.068267 570.5728 64.7168h0.136533l1.2288 0.068267h2.048l2.048-0.068267h0.546134l2.048-0.2048h0.2048c0.6144-0.136533 1.297067-0.2048 1.911466-0.4096l0.477867-0.068267 1.979733-0.546133 0.341334-0.068267a31.675733 31.675733 0 0 0 1.706666-0.6144l0.4096-0.2048 1.8432-0.8192 0.4096-0.2048 1.774934-0.887466 0.2048-0.068267 1.774933-1.2288 0.2048-0.068267 320.512-226.5088a31.9488 31.9488 0 0 0 9.0112-41.915733zM112.503467 890.197333c0.955733 2.2528 1.570133 4.5056 2.8672 6.826667l-6.826667-0.6144 3.959467-6.212267z m52.565333 8.465067a31.9488 31.9488 0 0 0 2.730667-31.607467 31.061333 31.061333 0 0 0-35.976534-17.408l370.414934-677.751466c4.642133 4.778667 10.786133 8.192 17.885866 9.147733l2.730667 28.330667a31.402667 31.402667 0 0 0-40.5504 26.2144 31.675733 31.675733 0 0 0 31.061333 35.771733 30.037333 30.037333 0 0 0 15.018667-3.959467l43.008 444.757334a32.017067 32.017067 0 0 0 5.461333 57.821866l17.066667 177.3568-428.8512-48.674133z m718.0288-133.666133a31.607467 31.607467 0 0 0-27.170133-44.578134 31.5392 31.5392 0 0 0-32.699734 30.242134 31.607467 31.607467 0 0 0 29.832534 33.1776h1.501866l1.8432-0.068267-201.5232 142.404267-21.640533-224.938667-50.107733-518.9632 324.881066 565.111467-24.917333 17.6128zM464.6912 630.9888a31.470933 31.470933 0 0 0 34.952533-27.511467 31.675733 31.675733 0 0 0-27.0336-35.498666 31.402667 31.402667 0 0 0-34.952533 27.511466 31.675733 31.675733 0 0 0 27.0336 35.498667z m11.264-89.975467a31.470933 31.470933 0 0 0 34.952533-27.511466 31.675733 31.675733 0 0 0-27.101866-35.498667 31.402667 31.402667 0 0 0-34.952534 27.511467 31.675733 31.675733 0 0 0 27.101867 35.498666z m11.195733-90.043733a31.470933 31.470933 0 0 0 34.952534-27.511467 31.675733 31.675733 0 0 0-27.0336-35.498666 31.402667 31.402667 0 0 0-34.952534 27.511466 31.607467 31.607467 0 0 0 27.0336 35.498667z m19.0464-152.917333a31.402667 31.402667 0 0 0-34.952533 27.4432 31.675733 31.675733 0 0 0 30.993067 35.771733 31.470933 31.470933 0 0 0 30.993066-27.784533 31.675733 31.675733 0 0 0-27.0336-35.498667z m257.706667 481.621333h1.4336a31.470933 31.470933 0 0 0 31.197867-30.242133 31.607467 31.607467 0 0 0-29.832534-33.245867 31.5392 31.5392 0 0 0-32.631466 30.3104 31.5392 31.5392 0 0 0 29.832533 33.1776zM499.029333 703.829333a30.037333 30.037333 0 0 0-15.701333 3.413334 31.470933 31.470933 0 0 0 5.12-13.858134 31.675733 31.675733 0 0 0-27.101867-35.498666 31.402667 31.402667 0 0 0-34.884266 27.511466 31.675733 31.675733 0 0 0 27.0336 35.498667 30.5152 30.5152 0 0 0 18.2272-3.2768 31.607467 31.607467 0 0 0 24.439466 49.629867h1.4336a31.470933 31.470933 0 0 0 31.197867-30.378667 31.402667 31.402667 0 0 0-29.696-33.041067z m175.581867 71.748267h1.4336a31.470933 31.470933 0 0 0 31.197867-30.3104 31.607467 31.607467 0 0 0-29.764267-33.1776 31.5392 31.5392 0 0 0-32.768 30.3104 31.675733 31.675733 0 0 0 29.9008 33.1776z m-305.083733-38.229333a32.017067 32.017067 0 0 0-15.223467 42.052266 31.197867 31.197867 0 0 0 41.437867 15.496534 32.017067 32.017067 0 0 0 15.223466-42.1888 30.9248 30.9248 0 0 0-41.437866-15.428267z m-162.133334 76.1856a32.017067 32.017067 0 0 0-15.223466 42.052266 31.197867 31.197867 0 0 0 41.437866 15.496534 32.017067 32.017067 0 0 0 15.223467-42.052267 30.9248 30.9248 0 0 0-41.437867-15.496533z m81.032534-38.161067a32.017067 32.017067 0 0 0-15.291734 42.120533 31.197867 31.197867 0 0 0 41.437867 15.496534 32.017067 32.017067 0 0 0 15.291733-42.120534 30.856533 30.856533 0 0 0-41.437866-15.496533z\\\" p-id=\\\"21021\\\" fill=\\\"#1296db\\\"></path></svg> åå°„å’ŒåŠ¨æ€ä»£ç†\",\"link\":\"/JavaåŸºç¡€/åå°„å’ŒåŠ¨æ€ä»£ç†/åå°„å’ŒåŠ¨æ€ä»£ç†-Local.md\"},{\"text\":\"<svg t=\\\"1744176289502\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"22127\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M277.942857 416.914286h285.257143V204.8H219.428571v51.2h292.571429V365.714286H219.428571v219.428571h292.571429c0 87.771429-7.314286 146.285714-14.628571 168.228572-7.314286 21.942857-36.571429 36.571429-95.085715 36.571428h-73.142857l14.628572 51.2h65.828571c80.457143 0 124.342857-21.942857 131.657143-65.828571 21.942857-36.571429 29.257143-117.028571 29.257143-234.057143h-292.571429V416.914286zM950.857143 0H73.142857C36.571429 0 0 36.571429 0 73.142857v877.714286c0 36.571429 36.571429 73.142857 73.142857 73.142857h877.714286c36.571429 0 73.142857-36.571429 73.142857-73.142857V73.142857c0-36.571429-36.571429-73.142857-73.142857-73.142857z m21.942857 950.857143c0 14.628571-7.314286 21.942857-21.942857 21.942857H73.142857c-14.628571 0-21.942857-7.314286-21.942857-21.942857V73.142857C51.2 58.514286 58.514286 51.2 73.142857 51.2h877.714286c14.628571 0 21.942857 7.314286 21.942857 21.942857v877.714286zM731.428571 848.457143h51.2V175.542857H731.428571v672.914286z\\\" p-id=\\\"22128\\\" fill=\\\"#1296db\\\"></path></svg> æ–¹æ³•å¼•ç”¨\",\"link\":\"/JavaåŸºç¡€/æ–¹æ³•å¼•ç”¨/æ–¹æ³•å¼•ç”¨-Local.md\"},{\"text\":\"<svg t=\\\"1744176330800\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"23250\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M0 73.14432C0 32.74752 32.74752 0 73.14432 0h877.71136C991.25248 0 1024 32.74752 1024 73.14432v877.71136c0 40.3968-32.74752 73.14432-73.14432 73.14432H73.14432C32.74752 1024 0 991.25248 0 950.85568V73.14432z m73.14432-24.38144a24.38144 24.38144 0 0 0-24.38144 24.38144v877.71136a24.38144 24.38144 0 0 0 24.38144 24.38144h877.71136a24.38144 24.38144 0 0 0 24.38144-24.38144V73.14432a24.38144 24.38144 0 0 0-24.38144-24.38144H73.14432z\\\" fill=\\\"#1afa29\\\" p-id=\\\"23251\\\"></path><path d=\\\"M1024 307.2H0v51.2h1024V307.2zM177.664 113.3568a15.98976 15.98976 0 0 1-2.048 22.51776l-54.80448 45.6704 54.80448 45.6704a15.98976 15.98976 0 1 1-20.46976 24.56064l-57.7536-48.128c-13.80352-11.49952-13.80352-32.70656 0-44.2112l57.7536-48.128a15.98976 15.98976 0 0 1 22.51776 2.048zM339.456 113.3568a15.98976 15.98976 0 0 0 2.048 22.51776l54.80448 45.6704-54.80448 45.6704a15.98976 15.98976 0 0 0 20.46976 24.56064l57.7536-48.128c13.80352-11.49952 13.80352-32.70656 0-44.2112l-57.7536-48.128a15.98976 15.98976 0 0 0-22.51776 2.048zM289.3824 109.09184a15.98976 15.98976 0 0 1 7.82336 21.21216L238.25408 258.20672a15.98976 15.98976 0 0 1-29.04064-13.38368l58.9568-127.90272a15.98976 15.98976 0 0 1 21.21216-7.82848zM860.75904 528.37376v68.35712h53.92896v36.0192h-53.92896v122.79808c0 5.72928 1.37216 9.82016 4.11648 12.68736 2.7392 2.4576 6.85568 4.096 12.79488 4.096h31.0784v36.0192h-38.85056c-20.10624 0-35.18976-4.9152-44.32896-14.32576-9.1392-9.00608-13.25056-21.69344-13.25056-38.4768v-122.79808h-43.87328v-36.0192h43.87328v-50.35008l48.44032-18.00704zM710.64064 512c9.59488 0 17.82272 2.4576 24.2176 8.18688 6.4 5.31968 9.6 12.27776 9.6 20.87424 0 8.59648-3.65568 15.55456-10.05568 21.28384-6.4 5.3248-14.62272 8.18688-23.76192 8.18688-9.6 0-17.36704-2.86208-23.76704-8.18688-6.4-5.72928-9.59488-13.09696-9.59488-21.28384 0-8.59648 3.19488-15.55456 9.59488-20.87424 6.4-5.72928 14.16704-8.18688 23.76704-8.18688z m-24.22272 84.73088h48.44032v211.61984h-48.44032v-211.61984zM544.2048 591.0016c58.50112 0 88.20736 28.65152 88.20736 86.77376v130.57536h-48.44544v-126.88896c0-36.02432-18.7392-54.03136-55.30112-54.03136-13.70624 0-26.04544 4.09088-36.10112 13.09696-10.96704 9.82528-17.82272 23.33184-19.65056 40.5248v127.29856h-48.44544v-211.61984h48.44544v26.19392c9.1392-10.63936 19.65056-18.41664 31.53408-23.74144 11.8784-5.72928 25.13408-8.18176 39.7568-8.18176zM107.52 516.09088h49.8176v181.73952c0 26.19904 6.4 45.43488 20.10624 58.12736 13.71136 12.68736 35.18976 19.23584 64.896 19.23584 29.25056 0 50.72896-6.54848 64.44032-19.23584 13.25056-12.69248 20.10624-31.92832 20.10624-58.12736v-181.73952h49.8176v180.92032c0 38.0672-11.88352 67.13344-35.18976 87.18848-23.31136 19.64544-56.2176 29.88032-99.1744 29.88032-43.4176 0-76.32384-9.82528-99.1744-29.47072C119.40352 764.14464 107.52 735.0784 107.52 697.0112v-180.92032z\\\" fill=\\\"#1afa29\\\" p-id=\\\"23252\\\"></path></svg> å•å…ƒæµ‹è¯•\",\"link\":\"/JavaåŸºç¡€/å•å…ƒæµ‹è¯•/å•å…ƒæµ‹è¯•-Local.md\"},{\"text\":\"<svg t=\\\"1744176379492\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"24645\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512.085333 1024c-10.453333 0-20.778667-2.602667-30.037333-7.552L98.005333 812.16A64 64 0 0 1 64 755.498667V269.738667c0-23.722667 13.056-45.482667 34.005333-56.618667l384-204.586667c18.816-10.069333 41.386667-10.069333 60.202667 0l383.786667 204.586667c20.906667 11.093333 34.005333 32.896 34.005333 56.618667v485.802666a64 64 0 0 1-34.005333 56.618667l-383.829334 204.288c-9.258667 4.949333-19.584 7.509333-30.08 7.509333zM496.981333 36.778667l15.018667 28.245333-384 204.586667v485.888l384.042667 204.373333 383.957333-204.330667V269.738667l-383.872-204.672-15.146667-28.245334z\\\" fill=\\\"#878CA5\\\" p-id=\\\"24646\\\"></path><path d=\\\"M501.418667 263.722667l-207.786667 156.16a16.128 16.128 0 0 0 9.642667 29.013333h415.616c15.488 0 22.016-19.669333 9.685333-29.013333l-207.786667-156.16a16.085333 16.085333 0 0 0-19.370666 0zM502.101333 518.613333l-207.786666 156.16a16.128 16.128 0 0 0 9.642666 29.013334h415.573334c15.488 0 22.058667-19.669333 9.685333-29.013334l-207.786667-156.16a16.085333 16.085333 0 0 0-19.328 0z\\\" fill=\\\"#878CA5\\\" p-id=\\\"24647\\\"></path></svg> ç±»åŠ è½½å™¨\",\"link\":\"/JavaåŸºç¡€/ç±»åŠ è½½å™¨/ç±»åŠ è½½å™¨-Local.md\"}]},{\"text\":\"<svg t=\\\"1744290043017\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"12505\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M824.888889 383.146667L703.431111 332.8A28.444444 28.444444 0 1 0 682.666667 386.37037l60.112592 24.367408L682.666667 438.328889a28.444444 28.444444 0 0 0-14.601482 37.357037 28.918519 28.918519 0 0 0 25.979259 16.213333 15.454815 15.454815 0 0 0 11.377778-3.223703L824.888889 433.398519A28.918519 28.918519 0 0 0 841.481481 407.703704 25.694815 25.694815 0 0 0 824.888889 383.146667zM549.262222 269.463704a28.444444 28.444444 0 0 0-35.745185 17.825185l-61.724444 188.397037a28.444444 28.444444 0 0 0 17.825185 35.745185 17.540741 17.540741 0 0 0 8.154074 1.611852A31.668148 31.668148 0 0 0 505.362963 493.037037l61.724444-188.302222a28.444444 28.444444 0 0 0-17.825185-35.271111zM359.253333 349.013333A30.151111 30.151111 0 0 0 322.37037 332.8l-122.216296 50.346667a30.435556 30.435556 0 0 0-17.825185 25.979259 28.444444 28.444444 0 0 0 16.213333 25.979259l120.130371 55.182222a30.056296 30.056296 0 0 0 11.377777 3.223704 28.918519 28.918519 0 0 0 25.97926-16.213333A28.444444 28.444444 0 0 0 341.333333 439.940741l-60.112592-27.591111L341.333333 387.982222c16.308148-8.154074 24.462222-24.367407 17.92-38.968889zM580.740741 817.208889H142.222222a28.444444 28.444444 0 0 0 0 56.888889h438.518519a28.444444 28.444444 0 1 0 0-56.888889z\\\" fill=\\\"#0097FF\\\" p-id=\\\"12506\\\"></path><path d=\\\"M910.222222 134.542222v512H113.777778v-512h796.444444m0-56.888889H113.777778a56.888889 56.888889 0 0 0-56.888889 56.888889v512a56.888889 56.888889 0 0 0 56.888889 56.888889h796.444444a56.888889 56.888889 0 0 0 56.888889-56.888889v-512a56.888889 56.888889 0 0 0-56.888889-56.888889zM881.777778 817.208889H748.468148a28.444444 28.444444 0 0 0 0 56.888889H881.777778a28.444444 28.444444 0 0 0 0-56.888889z\\\" fill=\\\"#0097FF\\\" p-id=\\\"12507\\\"></path><path d=\\\"M666.642963 946.346667a100.693333 100.693333 0 1 1 100.693333-100.693334 100.882963 100.882963 0 0 1-100.693333 100.693334z m0-144.592593a43.804444 43.804444 0 1 0 43.899259 43.899259 43.899259 43.899259 0 0 0-43.899259-43.899259z\\\" fill=\\\"#0097FF\\\" p-id=\\\"12508\\\"></path></svg> Javaåç«¯\",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744289942020\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"9899\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M862.08 699.392c-105.344 140.330667-330.282667 92.970667-474.538667 99.754667 0 0-25.557333 1.450667-51.242666 5.674666 0 0 9.728-4.138667 22.144-8.448 101.290667-35.029333 149.162667-42.069333 210.730666-73.685333 115.626667-59.221333 230.741333-188.288 254.165334-322.346667-44.032 128.938667-177.92 239.914667-299.818667 284.970667-83.413333 30.805333-234.325333 60.757333-234.368 60.757333a225.28 225.28 0 0 1-6.101333-3.242666c-102.613333-49.92-105.6-272.213333 80.810666-343.850667 81.749333-31.402667 159.872-14.165333 248.234667-35.2 94.208-22.4 203.349333-93.013333 247.68-185.344 49.706667 147.541333 109.44 378.282667 2.304 520.96z m1.792-566.613333a393.045333 393.045333 0 0 1-45.44 80.64 425.898667 425.898667 0 0 0-305.792-129.322667C276.992 84.096 85.333333 275.754667 85.333333 511.36a425.941333 425.941333 0 0 0 136.746667 312.917333l9.386667 8.277334a36.522667 36.522667 0 1 1 0.042666 0.042666l6.357334 5.632A424.96 424.96 0 0 0 512.64 938.666667c225.194667 0 410.154667-175.274667 425.984-396.458667 11.690667-108.330667-20.309333-245.888-74.752-409.429333\\\" p-id=\\\"9900\\\" fill=\\\"#097310\\\"></path></svg> JavaWeb SpringBoot å­¦ä¹ \",\"link\":\"/Javaåç«¯/JavaWebå­¦ä¹ /Web-Learning-Local.md\"},{\"text\":\"<svg t=\\\"1744289966142\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"11297\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M938.2 325.5c0 35.7-28.9 64.6-64.6 64.6H693.4c-35.7 0-64.6-28.9-64.6-64.6V225.3c0-35.7 28.9-64.6 64.6-64.6h180.1c35.7 0 64.6 28.9 64.6 64.6v100.2z\\\" fill=\\\"#5FE0A3\\\" p-id=\\\"11298\\\"></path><path d=\\\"M966.6 488.8H742.9c-106.1 0-166.9 52.4-200.3 112.5h-10.2c-185 0-182.9-141.6-182.9-187.6V313.6c0-56.9-28.9-64.6-64.6-64.6h-50.6c-35.7 0-54.8 23.4-64.6 64.6S89.7 652 89.7 652v89.4h876.9V488.8z\\\" fill=\\\"#FFE91F\\\" p-id=\\\"11299\\\"></path><path d=\\\"M197.4 741.4m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z\\\" fill=\\\"#5FE0A3\\\" p-id=\\\"11300\\\"></path><path d=\\\"M826.6 741.4m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z\\\" fill=\\\"#5FE0A3\\\" p-id=\\\"11301\\\"></path><path d=\\\"M966.6 467.8H742.8c-48.8 0-92.3 10.5-129.1 31.3-31.7 17.9-58.5 43.3-79.5 75.4-1.3 1.9-2.5 3.9-3.7 5.8-38-0.2-69.7-6.9-94-19.9-19.7-10.5-35.1-25.5-45.9-44.6-20.1-35.8-20.1-77.9-20.1-100.5V313.6c0-33.2-8.9-56.2-27.1-70.2-17.5-13.6-39.4-15.4-58.5-15.4h-50.6c-43.7 0-72.4 27.2-85.1 80.8-9 38-70.1 296.7-78.9 334-21.2 27.3-33.9 61.5-33.9 98.6 0 88.8 72.2 161 161 161 81.7 0 149.3-61.1 159.6-140h309.9c10.3 78.9 78 140 159.6 140 88.8 0 161-72.2 161-161V488.8c0.1-11.6-9.3-21-20.9-21zM190.1 318.5c10.1-42.6 27.2-48.5 44.2-48.5h50.6c16.8 0 26.9 2 32.8 6.6 7.2 5.5 10.8 18 10.8 37v101.7c0 24.6 0 75.8 25.5 121.2 14.7 26.2 35.8 46.7 62.7 61.1 25.7 13.7 56.9 21.8 92.9 24.1-14.1 34.4-21.3 69.5-23.6 98.8H357c-10.3-78.9-78-140-159.6-140-26.4 0-51.4 6.4-73.5 17.8 21.1-89 59.2-250.4 66.2-279.8z m7.3 541.9c-65.6 0-119-53.4-119-119s53.4-119 119-119 119 53.4 119 119-53.3 119-119 119z m629.2 0c-65.6 0-119-53.4-119-119s53.4-119 119-119 119 53.4 119 119-53.4 119-119 119z m0-280c-81.7 0-149.3 61.1-159.6 140H528.2c3.3-36.6 15.3-83.3 41.2-122.9 38-58.2 96.4-87.7 173.5-87.7h202.7V633c-29.5-32.3-71.9-52.6-119-52.6zM197.4 163.6h154c11.6 0 21-9.4 21-21s-9.4-21-21-21h-154c-11.6 0-21 9.4-21 21s9.4 21 21 21z\\\" fill=\\\"#333333\\\" p-id=\\\"11302\\\"></path><path d=\\\"M197.4 709.1c-17.8 0-32.3 14.5-32.3 32.3 0 17.8 14.5 32.3 32.3 32.3 17.8 0 32.3-14.5 32.3-32.3 0-17.9-14.4-32.3-32.3-32.3zM826.6 709.1c-17.8 0-32.3 14.5-32.3 32.3 0 17.8 14.5 32.3 32.3 32.3 17.8 0 32.3-14.5 32.3-32.3 0-17.9-14.5-32.3-32.3-32.3zM693.4 411.1h180.1c47.2 0 85.6-38.4 85.6-85.6V225.3c0-47.2-38.4-85.6-85.6-85.6H693.4c-47.2 0-85.6 38.4-85.6 85.6v100.2c0 47.2 38.4 85.6 85.6 85.6z m-43.6-185.8c0-24.1 19.6-43.6 43.6-43.6h180.1c24 0 43.6 19.6 43.6 43.6v100.2c0 24.1-19.6 43.6-43.6 43.6H693.4c-24 0-43.6-19.6-43.6-43.6V225.3z\\\" fill=\\\"#333333\\\" p-id=\\\"11303\\\"></path><path d=\\\"M703.4 242.2h155.1v42H703.4z\\\" fill=\\\"#333333\\\" p-id=\\\"11304\\\"></path></svg> è‹ç©¹å¤–å–\",\"link\":\"/Javaåç«¯/è‹ç©¹å¤–å–/Project-TakeOut-Local.md\"}]},{\"text\":\"<svg t=\\\"1744204309475\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"27182\\\" width=\\\"20\\\" height=\\\"20\\\"><path d=\\\"M514.56 816.9984a32 32 0 0 1-32-32v-240a32 32 0 1 1 64 0v240a32 32 0 0 1-32 32z\\\" fill=\\\"#619BDD\\\" p-id=\\\"27183\\\"></path><path d=\\\"M770.56 816.9984h-512a32 32 0 1 1 0-64h512a32 32 0 0 1 0 64z\\\" fill=\\\"#619BDD\\\" p-id=\\\"27184\\\"></path><path d=\\\"M258.56 896.9984H98.56a32 32 0 0 1-32-32v-160a32 32 0 0 1 32-32H258.56a32 32 0 0 1 32 32v160a32 32 0 0 1-32 32z m-128-64h96v-96H130.56v96z m800 64H770.56a32 32 0 0 1-32-32v-160a32 32 0 0 1 32-32h160a32 32 0 0 1 32 32v160a32 32 0 0 1-32 32z m-128-64h96v-96h-96v96z\\\" fill=\\\"#619BDD\\\" p-id=\\\"27185\\\"></path><path d=\\\"M722.56 320.9984c-17.69472 0-34.176 4.48-49.09056 11.776-10.84416-101.4528-99.1488-176.70144-201.0368-171.32032-101.888 5.376-181.77536 89.51296-181.87264 191.54432-53.0176 0-96 42.9824-96 96 0 53.02272 42.9824 96 96 96h432c61.85472 0 112-50.14016 112-112 0-61.8496-50.14528-112-112-112z\\\" fill=\\\"#E1EFFF\\\" p-id=\\\"27186\\\"></path><path d=\\\"M722.56 576.9984H290.56c-70.59456 0-128-57.40544-128-128a128.31744 128.31744 0 0 1 97.792-124.416c14.01344-110.14144 108.31872-195.584 222.208-195.584 100.01408-0.256 188.00128 66.01216 215.36256 162.21184 8.15616-1.47456 16.384-2.21184 24.63744-2.21184 79.39072 0 144 64.6144 144 144 0 79.39584-64.60928 144-144 144z m-240-384c-88.22272 0-160 71.7824-160 160a32 32 0 0 1-32 32c-35.29728 0-64 28.70784-64 64 0 35.29728 28.70272 64 64 64h432c44.12928 0 80-35.90144 80-80 0-55.77216-59.776-98.4576-115.04128-71.48544a32.06656 32.06656 0 0 1-45.88544-25.41056c-8.42752-81.4592-77.17376-143.3088-159.07328-143.104z\\\" fill=\\\"#619BDD\\\" p-id=\\\"27187\\\"></path><path d=\\\"M577.95072 374.79424a32 32 0 0 1-31.77472-28.672A63.744 63.744 0 0 0 482.56 288.9984a32 32 0 1 1 0-64c65.52064-0.1792 120.5248 49.29536 127.26272 114.46784a32 32 0 0 1-31.872 35.328z\\\" fill=\\\"#619BDD\\\" p-id=\\\"27188\\\"></path></svg> å¾®æœåŠ¡\",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744204352299\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1549 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"28256\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M1321.64 386.917c-14.463-96.983-44.401-206.398-84.932-327.547a480.729 480.729 0 0 1-55.69 99.203 522.465 522.465 0 0 0-823.12 95.777 346.132 346.132 0 0 1 213.566 89.753 360.975 360.975 0 0 0-201.768-59.497 369.664 369.664 0 0 0 0 739.392h852.487a326.152 326.152 0 0 0 99.456-637.08z m-796.48 523.1a44.4 44.4 0 1 1-6.342-62.859 44.4 44.4 0 0 1 6.343 62.858z m709.328-156.543c-129.015 171.829-404.424 114.172-581.074 122.164 0 0-31.27 1.776-62.794 6.977 0 0 11.924-5.074 27.147-10.339 124.004-42.878 182.676-51.504 258.093-90.26 141.574-72.562 282.576-230.564 311.183-394.718-53.915 157.938-217.879 293.803-367.127 348.86-102.248 37.676-287.08 74.465-287.08 74.529l-7.485-3.996c-125.716-61.146-129.205-333.32 99.013-421.042 100.09-38.502 195.805-17.317 303.952-43.132 115.377-27.402 248.959-114.172 303.254-227.013 60.955 180.646 134.089 463.223 2.918 637.97z\\\" fill=\\\"#77BC1F\\\" p-id=\\\"28257\\\"></path></svg> SpringCloudå­¦ä¹ \",\"link\":\"/å¾®æœåŠ¡/SpringCloud/å¾®æœåŠ¡SpringCloud-Local.md\"},{\"text\":\"<svg t=\\\"1744204382720\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"29407\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\\\" fill=\\\"#E84738\\\" p-id=\\\"29408\\\"></path><path d=\\\"M743.68 463.776h-149.92a24.576 24.576 0 0 1-21.12-24.64v-158.72a24.48 24.48 0 0 0-7.04-17.28A24.064 24.064 0 0 0 548.48 256H496a24.32 24.32 0 0 0-24.192 24.416v160.384a24.8 24.8 0 0 1-22.432 22.976h-39.264a24.64 24.64 0 0 1-21.248-22.976V280.416A24.32 24.32 0 0 0 364.672 256h-52.48A24.32 24.32 0 0 0 288 280.416v463.168c0 13.536 10.88 24.416 24.192 24.416h431.616a24.32 24.32 0 0 0 24.192-24.416v-255.392a24.384 24.384 0 0 0-24.32-24.416z m-69.056 175.136a24.32 24.32 0 0 1-24.192 24.416h-52.448c-6.4 0-12.576-2.56-17.12-7.136a24.512 24.512 0 0 1-7.072-17.28v-49.92a24.32 24.32 0 0 1 24.192-24.448h52.48a24.32 24.32 0 0 1 24.16 24.416v49.952z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"29409\\\"></path></svg> RabbitMQ\",\"link\":\"/å¾®æœåŠ¡/RabbitMQ/MQ-Local.md\"},{\"text\":\"<svg t=\\\"1744204410087\\\" class=\\\"icon\\\" viewBox=\\\"0 0 5120 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"30561\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M180.591 1024V361.998L542.035 915.51c10.24 15.222 20.757 29.89 30.997 44.558a251.295 251.295 0 0 0 33.764 37.916 119.559 119.559 0 0 0 39.023 23.524l7.473 1.937h76.661c44.004-13.56 66.422-53.137 66.422-119.558V45.942H619.25v676.116L249.227 161.626l-30.72-47.325a249.081 249.081 0 0 0-27.676-37.086 115.684 115.684 0 0 0-33.21-21.864 108.489 108.489 0 0 0-44.559-8.302A110.703 110.703 0 0 0 51.346 65.59a102.123 102.123 0 0 0-40.684 46.772 207.014 207.014 0 0 0-10.516 73.34V1024z m913.297 0l4.152-11.624L1348.78 292.81l251.295 724.272a57.842 57.842 0 0 1 2.214 6.365h224.45a328.51 328.51 0 0 0-11.347-36.531c-4.705-12.178-9.133-24.355-13.56-37.086L1532.27 249.081c-9.687-27.676-19.096-52.307-27.676-76.385a304.432 304.432 0 0 0-33.21-63.654 149.172 149.172 0 0 0-51.2-45.388 156.09 156.09 0 0 0-76.662-17.436 158.582 158.582 0 0 0-76.662 17.16 143.36 143.36 0 0 0-50.646 45.387 332.108 332.108 0 0 0-33.765 63.931c-9.41 24.078-19.926 48.71-28.506 76.385l-263.749 694.66c-4.428 12.73-9.133 25.184-13.838 37.362a297.79 297.79 0 0 0-12.177 39.3V1024z\\\" fill=\\\"#2E3034\\\" p-id=\\\"30562\\\"></path><path d=\\\"M2269.551 857.946a332.108 332.108 0 1 1 317.993-423.715l124.818-134.78a498.162 498.162 0 1 0 4.705 442.81l-130.353-119.835a332.108 332.108 0 0 1-317.163 235.52z\\\" fill=\\\"#2EBBFB\\\" p-id=\\\"30563\\\"></path><path d=\\\"M3334.234 27.676c-275.096 0-456.648 290.594-664.216 498.162C2836.072 691.892 3059.415 1024 3334.234 1024a498.162 498.162 0 1 0 0-996.324z m-29.613 818.37c-177.124 0-320.207-213.38-426.205-320.208 133.397-133.397 249.08-320.208 427.036-320.208a320.208 320.208 0 1 1 0 640.415z\\\" fill=\\\"#2EBBFB\\\" p-id=\\\"30564\\\"></path><path d=\\\"M4760.362 207.568V0h-544.934a285.89 285.89 0 0 0-285.336 285.613v65.315a285.89 285.89 0 0 0 285.336 285.613h323.528v179.891h-608.864V1024h544.934a285.613 285.613 0 0 0 285.336-285.613v-65.315a285.613 285.613 0 0 0-285.89-285.613h-322.975V207.568z\\\" fill=\\\"#2E3034\\\" p-id=\\\"30565\\\"></path><path d=\\\"M4898.74 913.297a110.703 110.703 0 1 0 221.406 0 110.703 110.703 0 1 0-221.406 0z\\\" fill=\\\"#1BE1F7\\\" p-id=\\\"30566\\\"></path></svg> Nacosæºç åˆ†æ\",\"link\":\"/å¾®æœåŠ¡/Nacosæºç åˆ†æ/Nacosæºç åˆ†æ-Local.md\"},{\"text\":\"<svg t=\\\"1744204437313\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"31663\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M177.307393 191.252918v207.190662l334.692607-191.252919V0L420.357977 51.797665v103.595331L272.933852 239.066148V135.470817L177.307393 191.252918z\\\" fill=\\\"#33E6D7\\\" p-id=\\\"31664\\\"></path><path d=\\\"M846.692607 191.252918v207.190662L512 207.190661V0l91.642023 51.797665v103.595331l147.424125 83.673152V135.470817l95.626459 55.782101z\\\" fill=\\\"#246ADF\\\" p-id=\\\"31665\\\"></path><path d=\\\"M512 255.003891v103.595331l-243.050584 135.470817v183.284047l243.050584-143.439689v334.692607l-243.050584-143.439689v51.797666l243.050584 139.455252v107.579767l-279.508171-159.736031A109.452451 109.452451 0 0 1 177.307393 769.195331V446.256809z\\\" fill=\\\"#33E6D7\\\" p-id=\\\"31666\\\"></path><path d=\\\"M512 406.412451v75.704281l243.050584 143.439688v155.392996l-243.050584 135.470817v107.579767l279.508171-159.736031A109.452451 109.452451 0 0 0 846.692607 769.195331V446.256809L512 255.003891v103.595331l243.050584 139.455253v47.813229z\\\" fill=\\\"#246ADF\\\" p-id=\\\"31667\\\"></path><path d=\\\"M512 533.914397l199.22179 115.548638v103.595331l-199.22179 115.548638v-334.692607z\\\" fill=\\\"#246ADF\\\" p-id=\\\"31668\\\"></path><path d=\\\"M512 406.412451l-199.22179 115.548638v79.688716l199.22179-119.533073v-75.704281z\\\" fill=\\\"#33E6D7\\\" p-id=\\\"31669\\\"></path></svg> Sentinelæºç åˆ†æ\",\"link\":\"/å¾®æœåŠ¡/Sentinelæºç åˆ†æ/Sentinelæºç åˆ†æ-Local.md\"}]},{\"text\":\"<svg t=\\\"1744204469834\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"32826\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M525.2 198.3c-8.6 5.6-15.2 13.8-18.9 23.4-3.8 12.4-3.2 25.6 1.5 37.7 3.9 12.7 11.7 23.8 22.2 31.8 5.4 3.8 11.6 6.2 18.2 7 6.6 0.8 13.2-0.3 19.1-3.3 7-3.9 12.6-10 15.9-17.3 3.2-7.4 5-15.3 5.2-23.3 0.7-10.2-0.6-20.4-3.8-30.1-3.5-10.6-10.3-19.7-19.5-25.9-4.7-3-9.9-5-15.4-5.8-5.5-0.8-11.1-0.2-16.3 1.8-2.9 1.2-5.7 2.7-8.3 4.5\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"32827\\\"></path><path d=\\\"M810.2 606.5c-5.1-28.3-13.1-56-23.8-82.6-7.3-19.8-17.2-38.6-29.5-55.8-12.4-16.5-28.1-30.4-40.2-47.1-6.4-8.7-11.8-18.4-18.5-26.9-2.7-5.6-5.3-11.2-7.9-16.8-8-17.5-15.3-35.4-24.8-52-1.5-2.6-3.1-5.2-4.6-7.7-1.2-16-2.9-32-3.8-48 0.7-32.1-2-64.3-8.1-95.9-4.2-15.1-10.6-29.6-19-42.8-9.8-15.6-22.4-29.2-37.2-40.1-24.1-17.1-52.9-26.3-82.4-26.4-21.7-0.5-43.2 4.4-62.5 14.4-20.3 11.1-36.7 28.2-47 48.9-9.6 20.9-14.7 43.5-15 66.5-0.8 22.6 1.3 45 2.2 67.6 0.9 23.4 0.4 46.9 2.3 70.3 0.6 7.5 1.5 15 1.5 22.6 0 3.8-0.2 7.6-0.3 11.3l-0.3 0.8c-10.2 17.3-21.5 34-33.8 49.9-8.6 10.9-17.2 21.7-25.9 32.4-11.3 12.7-20.9 26.8-28.5 42-5.1 13.2-9.2 26.8-12.4 40.6l-0.3 1.1c-4.8 15.9-10.8 31.3-18 46.2-0.7 1.4-1.4 2.9-2 4.2-4.3 8.9-8.8 17.8-13.5 26.5l-5.4 10.1c-3.4 6.1-6.4 12.4-9 18.8-1.5 3.9-2.7 7.9-3.4 12-1.3 8.7-0.7 17.5 1.6 25.9 0.5 2.1 1.2 4.2 1.9 6.3 2.2 6.2 4.8 12.3 7.9 18.1 1.4 2.7 2.9 5.3 4.3 8l1.3 1.9c1.4 2.5 2.9 5 4.4 7.4l0.2 0.3c1.7 2.8 3.6 5.5 5.4 8.2l0.3 0.4c1.9 2.6 3.8 5.3 5.8 7.9 7.4 28.9 21 55.8 39.7 79-2.9 5.1-5.5 10.1-8.4 15.1-10.2 14.8-18.6 30.7-25.1 47.4-2.7 8.6-3.4 17.7-1.9 26.6 1.4 9 6 17.1 13 23 4.7 3.6 10.1 6.1 15.8 7.3 5.7 1.2 11.6 1.8 17.5 1.5 22.2-1.7 44.2-6.1 65.4-12.9 12.8-3.4 25.6-6.4 38.6-9 13.5-3.1 27.2-5 41-5.6 3.4 0.1 6.8-0.1 10.1-0.3 9.4 1 18.8 1.4 28.3 1l3.5-0.2c2.4 0.3 4.9 0.4 7.4 0.6 16.6 0.9 33.1 2.6 49.5 5.1 14.4 2.2 28.8 5 43 8.5 21.9 6.6 44.4 11 67.3 12.9 6 0.3 12-0.2 18-1.4 5.9-1.2 11.5-3.8 16.3-7.4 7-5.8 11.6-13.9 13.1-22.9 1.5-8.9 0.8-18-1.9-26.6-6.6-16.7-15.1-32.6-25.5-47.3-3.6-6.1-7-12.4-10.6-18.5 15.5-17.3 29.2-36.3 40.7-56.5 7 0.4 13.9-0.4 20.6-2.6 17.5-5.9 32.7-17.3 43.3-32.5 3.2-4.5 5.7-9.5 7.2-14.8 6.9-10.7 11.6-22.7 13.8-35.3 3.2-20.8 2.7-42.1-1.5-62.7h-0.2z m0 0\\\" fill=\\\"#020204\\\" p-id=\\\"32828\\\"></path><path d=\\\"M425.6 323.2c-3.1 4-5.3 8.7-6.4 13.6-1.1 4.9-1.8 10-1.9 15 0.3 10.1-0.5 20.2-2.5 30.1-3.5 10.3-8.8 19.8-15.6 28.3-11.7 14.7-20.9 31.2-27.2 48.8-3.2 10.9-4.3 22.3-3.1 33.7-12.1 17.9-22.6 36.9-31.3 56.7-13.4 29.9-22 61.8-25.5 94.4-4.3 40.1 1.6 80.6 17 117.8 11.3 26.8 28.5 50.8 50.3 70.1 11.2 9.7 23.5 17.9 36.7 24.4 46.7 22.8 101.4 22.3 147.6-1.4 23.1-13.5 44.2-30.2 62.6-49.5 11.9-10.8 22.5-22.9 31.8-36.1 15.5-26.9 24.6-57.1 26.5-88.1 9.6-53.6 3.7-108.8-16.9-159.2-8.1-16.8-18.8-32.2-31.8-45.6a252.5 252.5 0 0 0-20.2-68c-7.2-15.5-15.9-30.3-22.6-46.2-2.7-6.5-5.1-13.1-8.1-19.4-2.9-6.4-6.9-12.3-11.8-17.3-5.3-4.9-11.6-8.6-18.5-10.7-6.9-2.2-14-3.4-21.2-3.6-14.4-0.7-28.9 1.1-43.1 0.6-11.5-0.5-22.8-2.5-34.3-1.8-5.7 0.3-11.4 1.4-16.7 3.5-5.4 2.1-10.1 5.5-13.8 10m4.6-125.1c-5.4 0.4-10.5 2.7-14.4 6.4-3.9 3.7-6.8 8.4-8.4 13.5-2.7 10.4-3.4 21.3-1.9 32 0.2 9.7 1.9 19.4 5.1 28.6 1.8 4.5 4.4 8.7 7.8 12.2 3.4 3.5 7.7 6.1 12.4 7.3 4.5 1.1 9.2 0.9 13.5-0.5 4.3-1.4 8.3-3.8 11.5-7 4.7-4.8 8.1-10.7 9.8-17.1 1.7-6.4 2.5-13.1 2.3-19.8 0-8.3-1.3-16.6-3.8-24.6s-6.8-15.3-12.6-21.4c-2.8-2.9-6-5.4-9.6-7.2-3.7-1.7-7.7-2.6-11.7-2.4m95 0c-8.6 5.6-15.2 13.8-18.9 23.4-3.8 12.4-3.2 25.6 1.5 37.7 3.9 12.7 11.7 23.8 22.2 31.8 5.4 3.8 11.6 6.2 18.2 7 6.6 0.8 13.2-0.3 19.1-3.3 7-3.9 12.6-10 15.9-17.3 3.2-7.4 5-15.3 5.2-23.3 0.7-10.2-0.6-20.4-3.8-30.1-3.5-10.6-10.3-19.7-19.5-25.9-4.7-3-9.9-5-15.4-5.8-5.5-0.8-11.1-0.2-16.3 1.8-2.9 1.2-5.7 2.7-8.3 4.5\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"32829\\\"></path><path d=\\\"M544.5 223.6c-3.2 0.2-6.2 1.2-8.9 2.9s-5 4-6.8 6.6c-3.4 5.3-5.3 11.5-5.4 17.9-0.3 4.7 0.4 9.5 1.9 14s4.3 8.5 7.9 11.5c3.8 3.1 8.4 4.9 13.3 5.2 4.9 0.2 9.7-1.1 13.7-3.9 3.2-2.3 5.8-5.2 7.6-8.7 1.8-3.4 2.9-7.2 3.4-11 1-6.8-0.2-13.8-3.2-19.9-3.1-6.2-8.4-10.9-14.8-13.4-2.8-1.1-5.7-1.5-8.7-1.4\\\" fill=\\\"#020204\\\" p-id=\\\"32830\\\"></path><path d=\\\"M430.2 198.3c-5.4 0.4-10.5 2.7-14.4 6.4-3.9 3.7-6.8 8.4-8.4 13.5-2.7 10.4-3.4 21.3-1.9 32 0.2 9.7 1.9 19.4 5.1 28.6 1.8 4.6 4.4 8.7 7.8 12.2 3.4 3.5 7.7 6.1 12.4 7.3 4.5 1.1 9.2 0.9 13.5-0.5 4.3-1.4 8.3-3.8 11.5-7 4.7-4.8 8.1-10.7 9.8-17.1 1.7-6.4 2.5-13.1 2.3-19.8 0-8.3-1.3-16.6-3.8-24.6s-6.8-15.3-12.6-21.4c-2.8-2.9-6-5.4-9.6-7.2-3.7-1.7-7.7-2.6-11.7-2.4\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"32831\\\"></path><path d=\\\"M417.3 242.8c-1.3 6.7-1 13.7 1.1 20.2 1.6 4.3 4 8.2 7.2 11.5 2 2.2 4.3 4.1 7 5.4 2.7 1.4 5.7 1.8 8.7 1.1 2.7-0.7 5-2.3 6.7-4.5 1.7-2.2 2.9-4.7 3.7-7.3 2.3-7.8 2.1-16.1-0.4-23.9-1.6-5.7-4.7-10.9-9.1-14.8-2.1-1.8-4.7-3.2-7.4-3.9-2.8-0.7-5.7-0.5-8.4 0.7-2.8 1.4-5.1 3.7-6.5 6.5-1.4 2.8-2.3 5.8-2.7 8.9\\\" fill=\\\"#020204\\\" p-id=\\\"32832\\\"></path><path d=\\\"M404.6 326.9c0.2 0.9 0.5 1.8 1 2.5 0.9 1.4 2 2.5 3.4 3.4 1.3 0.9 2.6 1.7 3.9 2.5 6.9 4.7 13 10.5 17.9 17.3 6 9.4 13.5 17.8 22 25 6.5 4.5 14.1 7.2 22 7.9 9.2 0.7 18.5-0.4 27.4-3.2 8.2-2.4 16.1-5.8 23.5-10.3 12.7-10.2 26.3-19.2 40.7-26.7 3.4-1.2 6.8-2.1 10-3.6 3.3-1.4 6.1-3.8 7.8-7 1.1-3.2 1.8-6.6 1.9-10 0.5-3.6 1.7-7.1 2.3-10.7 0.8-3.6 0.5-7.3-0.8-10.8-1.4-2.7-3.6-4.9-6.3-6.3-2.7-1.3-5.7-2.1-8.7-2.2-6.1 0.2-12.1 0.8-18 1.8-8 0.7-16-0.3-24 0-9.9 0.3-19.8 2.5-29.8 2.9-11.4 0.6-22.7-1.2-34.1-1.7-4.9-0.3-9.9-0.1-14.8 0.7-4.9 0.7-9.6 2.5-13.7 5.3-3.8 3-7.3 6.2-10.7 9.6-1.8 1.6-3.8 3-5.9 4.1-2.2 1.1-4.5 1.7-7 1.6-1.2-0.2-2.5-0.2-3.7 0-0.7 0.3-1.4 0.7-1.9 1.2l-1.5 1.8c-1 1.5-1.9 3.1-2.6 4.7\\\" fill=\\\"#D99A03\\\" p-id=\\\"32833\\\"></path><path d=\\\"M429.7 301.7c-4 2.4-7.9 5-11.8 7.7-2.1 1.3-3.8 3-5.1 5.1-0.7 1.6-1 3.3-0.9 5 0.1 1.7 0.1 3.4 0 5.1-0.1 1.1-0.5 2.3-0.5 3.5 0 0.6 0 1.2 0.2 1.7 0.2 0.6 0.4 1.1 0.8 1.5 0.5 0.5 1.2 0.9 2 1.1 0.7 0.2 1.5 0.3 2.3 0.5 3.5 1 6.7 2.9 9.3 5.4 2.7 2.4 5.1 5.2 8 7.5 8 6 17.7 9.1 27.6 9 9.9-0.2 19.7-1.6 29.2-4.1 7.5-1.6 14.9-3.6 22.1-6.1 11.2-4.2 21.5-10.3 30.4-18.2 3.9-3.8 8-7.2 12.4-10.3 4-2.5 8.7-4.2 12.7-6.6 0.4-0.2 0.7-0.5 1.1-0.7 0.3-0.3 0.6-0.6 0.8-1 0.3-0.7 0.3-1.5 0-2.2-0.2-0.7-0.5-1.3-0.9-1.8-0.5-0.6-1.1-1.2-1.7-1.7-4.6-3.4-10.1-5.3-15.8-5.5-5.8-0.4-11.3 0-16.9-1.1-5.2-1.1-10.3-2.6-15.3-4.4-5.3-1.7-10.7-3-16.3-3.9-13-2.1-26.2-1.8-39.1 1-12.1 2.7-23.8 7.3-34.6 13.5\\\" fill=\\\"#604405\\\" p-id=\\\"32834\\\"></path><path d=\\\"M428.4 288.1c-5.8 3.9-11 8.7-15.5 14.1-2.6 3-4.7 6.5-6.1 10.3-0.9 3-1.5 6.1-2 9.2-0.3 1.1-0.5 2.3-0.5 3.5 0 0.6 0.1 1.2 0.3 1.7 0.2 0.6 0.5 1.1 0.9 1.5 0.7 0.7 1.6 1.1 2.6 1.3 0.9 0.2 1.9 0.2 2.9 0.3 4.4 0.7 8.5 2.5 12.1 5.1 3.6 2.5 7 5.4 10.7 7.8 8.4 5 18 7.7 27.8 7.9 9.8 0.2 19.5-0.8 29-2.9 7.6-1.4 15.1-3.5 22.4-6.3 10.9-4.7 21.1-10.8 30.4-18.2 4.3-3.2 8.5-6.6 12.4-10.3 1.3-1.3 2.6-2.6 4-3.8 1.4-1.2 3-2.1 4.7-2.7 2.7-0.7 5.5-0.8 8.3-0.1 2 0.5 4.1 0.7 6.2 0.7 1.1 0 2.1-0.2 3.1-0.5 1-0.4 1.9-1 2.5-1.8 0.9-1.1 1.3-2.4 1.3-3.8s-0.4-2.7-1.1-3.9c-1.5-2.3-3.8-4.1-6.3-5.1-3.5-1.4-7.1-2.5-10.8-3.2-11.3-2.7-22.3-6.7-32.7-11.9-5.2-2.6-10.1-5.4-15.3-8.1-5.2-2.9-10.6-5.4-16.2-7.2-12.9-3.5-26.6-2.9-39.1 1.8-14 4.9-26.5 13.4-36.1 24.7\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"32835\\\"></path><path d=\\\"M493.5 272.2c0.7 2.3 4.3 1.9 6.4 2.9 2.1 1 3.3 2.9 5.3 3.1 2.1 0.2 5-0.7 5.3-2.6 0.4-2.6-3.4-4.2-5.8-5.1-3.2-1.5-6.8-1.6-10-0.2-0.7 0.3-1.4 1.2-1.2 1.9z m-34.4-1.2c-2.7-0.9-7.1 3.8-5.8 6.3 0.4 0.7 1.6 1.5 2.4 1.1 0.8-0.4 2.3-3.1 3.6-4 1-0.8 0.8-3.1-0.2-3.4z m0 0\\\" fill=\\\"#CD8907\\\" p-id=\\\"32836\\\"></path><path d=\\\"M887.7 829.8c-2 5.2-4.9 10-8.5 14.3-8.4 9-18.6 16.2-29.8 21.2-19 8.8-37.5 18.6-55.5 29.3-11.7 7.8-22.6 16.6-32.7 26.4-8.3 8.7-17.2 16.7-26.6 24.2-9.8 7.2-21.1 12.1-33.1 14-14.7 1.9-29.6-0.4-43.1-6.5-9.7-3.7-18.1-10.2-24-18.8-5-9.2-7.3-19.5-6.8-29.9 0.6-18.3 2.8-36.5 6.6-54.5 2.6-15 5.2-30 6.8-45.1 2.8-27.6 3.1-55.3 1-82.9-0.5-4.6-0.5-9.3 0-13.9 0.6-9.4 8.5-16.6 18-16.5 4.3-0.1 8.6 0.3 12.8 1.1 10 1.2 20 2.9 29.8 5.2 6.1 1.6 12.2 3.8 18.3 5.5 10.2 3 21 3.9 31.6 2.9 11.1-2.6 22.4-4.3 33.8-5.3 4.7 0.2 9.4 1 13.8 2.4 4.6 1.3 8.9 3.6 12.4 6.9 2.5 2.7 4.5 5.8 5.8 9.2 1.9 5.1 3.1 10.4 3.5 15.8 0.2 4.8 0.6 9.6 1.2 14.4 1.7 7.7 5.4 14.9 10.6 20.9 5.3 5.8 11 11.2 17.2 16 5.9 5.2 12.1 10 18.6 14.4 3.1 2.1 6.2 4 9.1 6.3 3 2.2 5.5 5 7.4 8.2 2.4 4.4 3.2 9.5 2 14.4\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"32837\\\"></path><path d=\\\"M887.7 829.8c-2 5.2-4.9 10-8.5 14.3-8.4 9-18.6 16.2-29.8 21.2-19 8.8-37.5 18.6-55.5 29.3-11.7 7.8-22.6 16.6-32.7 26.4-8.3 8.7-17.2 16.7-26.6 24.2-9.8 7.2-21.1 12.1-33.1 14-14.7 1.9-29.6-0.4-43.1-6.5-9.7-3.7-18.1-10.2-24-18.8-5-9.2-7.3-19.5-6.8-29.9 0.6-18.3 2.8-36.5 6.6-54.5 2.6-15 5.2-30 6.8-45.1 2.8-27.6 3.1-55.3 1-82.9-0.5-4.6-0.5-9.3 0-13.9 0.6-9.4 8.5-16.6 18-16.5 4.3-0.1 8.6 0.3 12.8 1.1 10 1.2 20 2.9 29.8 5.2 6.1 1.6 12.2 3.8 18.3 5.5 10.2 3 21 3.9 31.6 2.9 11.1-2.6 22.4-4.3 33.8-5.3 4.7 0.2 9.4 1 13.8 2.4 4.6 1.3 8.9 3.6 12.4 6.9 2.5 2.7 4.5 5.8 5.8 9.2 1.9 5.1 3.1 10.4 3.5 15.8 0.2 4.8 0.6 9.6 1.2 14.4 1.7 7.7 5.4 14.9 10.6 20.9 5.3 5.8 11 11.2 17.2 16 5.9 5.2 12.1 10 18.6 14.4 3.1 2.1 6.2 4 9.1 6.3 3 2.2 5.5 5 7.4 8.2 2.4 4.4 3.2 9.5 2 14.4M259.4 676.3c4.9-1.9 10.2-2.4 15.4-1.4 5.2 1 10.1 3.1 14.4 6.1 8.3 6.3 15.5 14.1 21.2 22.8 14.1 19.4 27.6 39.2 39.9 59.8 10 16.7 19.1 33.9 30.6 49.6 7.5 10.2 16 19.7 23.6 29.9 7.9 10 13.9 21.4 17.6 33.5 4.4 16.1 2.6 33.2-4.9 48.1-5.4 10.4-13.5 19.1-23.4 25.1-10 6-21.5 9-33.2 8.7-18.4-2.5-36.2-8.1-52.6-16.6-34.9-13.9-72.8-18.3-108.8-29.1-11.1-3.3-21.9-7.3-33.1-10.3-5-1.2-9.9-2.7-14.7-4.7-4.7-2-8.8-5.4-11.5-9.7-2-3.5-3-7.5-2.9-11.5 0.1-4 0.9-7.9 2.3-11.5 2.7-7.5 7.1-14.2 10-21.6 4.4-12.2 6.1-25.3 5-38.2-0.6-12.9-2.9-25.8-3.6-38.7-0.6-5.8-0.4-11.6 0.6-17.3 1.5-11.4 10.4-20.5 21.9-22.2 5.3-0.9 10.6-1.3 15.9-1 5.3 0.3 10.7 0.3 16 0 5.3-0.3 10.6-1.8 15.3-4.3 4.3-2.6 8.1-6.2 11-10.4 2.9-4.2 5.5-8.5 7.9-13 2.4-4.5 5.1-8.7 8.3-12.7 3-4.1 7.1-7.2 11.8-9.4\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"32838\\\"></path><path d=\\\"M259.4 676.4c4.9-1.9 10.2-2.4 15.4-1.4 5.2 1 10.1 3.1 14.4 6.1 8.3 6.3 15.5 14.1 21.2 22.8 14.1 19.4 27.6 39.2 39.9 59.8 10 16.7 19.1 33.9 30.6 49.6 7.5 10.2 16 19.7 23.6 29.9 7.9 10 13.9 21.4 17.6 33.5 4.4 16.1 2.6 33.2-4.9 48.1-5.4 10.4-13.5 19.1-23.4 25.1-10 6-21.5 9-33.2 8.7-18.4-2.5-36.2-8.1-52.6-16.6-34.9-13.9-72.8-18.3-108.8-29.1-11.1-3.3-21.9-7.3-33.1-10.3-5-1.2-9.9-2.7-14.7-4.7-4.7-2-8.8-5.4-11.5-9.7-2-3.5-3-7.5-2.9-11.5 0.1-4 0.9-7.9 2.3-11.5 2.7-7.5 7.1-14.2 10-21.6 4.4-12.2 6.1-25.3 5-38.2-0.6-12.9-2.9-25.7-3.6-38.7-0.6-5.8-0.4-11.6 0.6-17.3 1.5-11.4 10.4-20.5 21.9-22.2 5.3-0.9 10.6-1.3 15.9-1 5.3 0.3 10.7 0.3 16 0 5.3-0.3 10.6-1.8 15.3-4.3 4.3-2.6 8.1-6.2 11-10.4 2.9-4.2 5.5-8.5 7.9-13 2.4-4.5 5.1-8.7 8.3-12.7 3-4.1 7.1-7.3 11.8-9.4\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"32839\\\"></path><path d=\\\"M267.1 684.8c4.4-1.7 9.3-2 13.9-0.9s8.9 3.2 12.6 6.2c7.1 6.2 13.1 13.6 17.6 21.9 12 19.4 23.7 39 34.6 59 7.9 15.3 16.8 30.1 26.6 44.2 6.8 9.2 14.6 17.6 21.6 26.6 7.3 8.9 12.8 19 16.2 29.9 4 14.3 2.3 29.6-4.5 42.9-5 9.4-12.5 17.3-21.7 22.6-9.2 5.4-19.8 8-30.4 7.5-16.7-2.6-32.9-7.6-48.2-14.9-30.4-11.1-63.5-12.5-94.7-21.2-11.2-3-22.1-7.1-33.4-9.9-5-1.1-10-2.5-14.8-4.3-4.8-1.8-9-5.2-11.8-9.5-1.8-3.4-2.7-7.2-2.5-11 0.2-3.8 1-7.6 2.4-11.2 2.7-7.1 7-13.6 9.7-20.7 3.8-11 5.1-22.6 3.9-34.2-0.8-11.5-2.9-22.9-3.5-34.5-0.4-5.1-0.2-10.3 0.7-15.4 0.9-5.1 3.3-9.8 6.9-13.6 4.2-3.8 9.4-6.3 15-7 5.6-0.7 11.2-0.7 16.7 0 5.6 0.7 11.2 0.9 16.8 0.8 11 0 21-6.4 25.7-16.4 2.3-4.5 4.3-9.2 5.9-13.9 1.7-4.8 4-9.3 6.7-13.6 2.8-4.3 6.8-7.7 11.5-9.7\\\" fill=\\\"#F5BD0C\\\" p-id=\\\"32840\\\"></path></svg> Linuxå­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"Linuxå­¦ä¹ \",\"link\":\"/Linuxå­¦ä¹ /Linux-Learning-Local.md\"}]},{\"text\":\"<svg t=\\\"1744204507624\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"33900\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z\\\" p-id=\\\"33901\\\"></path></svg> Gitå­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"Gitå­¦ä¹ \",\"link\":\"/Gitå­¦ä¹ ç¬”è®°/Git-Learning-Local.md\"}]},{\"text\":\"<svg t=\\\"1744204536314\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1220 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"35052\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M903.830212 959.568539c27.357803-23.522597 54.971286-47.045194 82.329089-70.82347 9.460175-8.181773 19.687391-16.363546 28.891885-25.056679-7.414732-9.460175-19.943071-16.107865-30.425968-20.198752-21.221473-8.181773-42.442946-5.369288-61.874656 5.880649-25.56804 14.829463-36.562297 38.35206-35.539576 67.755306 0.25568 11.505618 3.579526 22.755556 9.715855 32.471411 1.789763 3.579526 4.346567 6.903371 6.903371 9.971535m31.70437 22.244195c13.551061 4.602247 28.891885 4.090886 42.698626 1.534082 7.159051-3.068165 25.056679-10.994257 31.70437-9.715855l1.022722 0.255681 1.022721 0.51136c4.090886 2.045443 7.926092 4.857928 9.971536 8.948814 4.857928 9.715855 2.556804 19.43171-6.903371 24.800999l-3.068165 1.789763c-35.028215 20.198752-72.357553 17.386267-107.385768-1.534082-16.619226-8.948814-29.403246-22.499875-38.86342-38.863421l-2.301124-3.835206c-22.499875-39.119101-19.43171-80.027965 5.880649-117.101623 8.693134-12.78402 20.198752-22.755556 33.749813-30.425968l5.113608-2.812484c32.982772-19.17603 68.522347-17.897628 102.52784-1.022722 18.153308 8.948814 32.982772 22.499875 43.209988 40.141823l1.789763 3.068165c7.414732 12.78402-2.301124 24.033958-12.016979 31.704369-11.505618 8.948814-23.011236 19.43171-34.005493 29.147566-25.056679 20.965793-49.601998 42.442946-74.147316 63.408739z m262.83945-177.442197h3.579526c10.994257 0 18.408989 7.414732 18.408989 18.408989 0 15.340824-14.573783 19.17603-27.357803 19.17603-16.619226 0-32.471411 9.971536-43.977029 21.221473-14.318102 14.062422-20.454432 32.21573-20.454432 51.903121v89.48814c0 10.227216-6.39201 18.408989-17.130586 18.408988h-2.812485c-10.738577 0-17.130587-8.181773-17.130587-18.408988v-94.601748c0-36.306617 17.641948-65.965543 47.300874-86.931336 17.897628-12.016979 38.09638-18.664669 59.573533-18.664669z m-460.99176 63.664419c14.318102-14.318102 28.891885-28.636205 43.465668-42.954307 4.090886-3.835206 19.43171-20.710112 25.56804-20.710112h6.64769l0.767042 0.25568c8.437453 1.789763 14.829463 7.159051 14.829463 16.107865v3.579526c0 6.13633-7.159051 13.295381-11.249938 17.641948-8.437453 8.948814-17.386267 17.641948-26.079401 26.590761L746.586767 913.801748c19.17603 19.17603 38.35206 38.60774 57.528089 58.039451 5.369288 5.369288 10.482896 10.738577 15.852185 16.107865 1.789763 2.045443 4.602247 4.346567 6.13633 6.90337 1.534082 2.556804 2.556804 5.369288 2.556804 8.437454v3.835206l-0.255681 0.767041c-2.045443 8.437453-7.414732 15.340824-16.874906 15.340824h-3.068165c-6.13633 0-13.0397-6.903371-17.130587-10.994257-8.693134-8.181773-16.874906-16.619226-25.568039-25.05668l-28.380525-27.869163v44.488389c0 10.227216-6.39201 18.408989-17.130587 18.408989h-2.812484c-10.738577 0-17.130587-8.181773-17.130587-18.408989v-251.078152c0-10.227216 6.39201-18.408989 17.130587-18.408989h2.812484c10.738577 0 17.130587 8.181773 17.130587 18.408989v115.31186z m-119.914107-25.056679c-5.624969-2.556804-16.107865-3.579526-21.988515-3.835206-30.937328-1.278402-53.181523 16.363546-66.476903 43.465668-4.602247 9.460175-6.64769 19.43171-6.647691 29.658926 0 31.70437 16.619226 53.948564 44.99975 67.499626 10.227216 4.857928 23.778277 5.880649 35.028215 5.880649 9.971536 0 24.033958-6.13633 32.727091-10.227216l1.534083-0.767041h6.903371l0.767041 0.25568c8.437453 1.789763 14.829463 7.159051 14.829463 16.107865v3.579526c0 22.499875-41.164544 27.613483-56.761049 28.891885-55.482647 3.835206-96.902871-26.590762-112.755056-79.516604-2.812484-9.204494-4.090886-18.408989-4.090886-27.869164v-7.414731c0-40.141823 19.943071-71.846192 54.204244-92.300624 16.107865-9.460175 33.749813-14.318102 52.158802-14.318103h7.414731c19.687391 0 37.840699 5.624969 54.204245 16.619226l1.278402 1.022722 0.767041 1.278402c1.789763 2.812484 3.323845 6.39201 3.323846 9.715855v3.579526c0 9.460175-7.159051 14.573783-15.596505 16.107865h-3.068165c-5.369288 0.511361-17.897628-5.113608-22.755555-7.414732z m-337.498128 70.31211c0 28.124844 13.806742 48.834956 37.585019 63.408739 11.249938 6.903371 23.522597 9.971536 36.562297 9.971536 27.869164 0 48.323596-14.062422 62.641698-37.585019 6.903371-11.249938 9.971536-23.522597 9.971536-36.562297 0-26.079401-12.52834-46.022472-34.005493-60.596255-11.761298-7.926092-25.056679-12.016979-39.119101-12.016979-30.937328 0-53.181523 15.596504-66.732585 43.465668-4.857928 9.460175-6.903371 19.43171-6.903371 29.914607z m69.80075-110.198252h5.113608c42.954307 0 75.425718 20.710112 96.13583 58.295131 8.181773 15.085144 12.78402 31.193009 12.78402 48.323595v7.414732c0 40.141823-19.687391 72.101873-54.459925 92.300624-16.107865 9.460175-33.749813 14.318102-52.158802 14.318103h-7.414731c-40.141823 0-72.101873-19.943071-92.300625-54.204245-9.460175-16.107865-14.318102-33.749813-14.318102-52.158802v-7.414731c0-40.141823 19.943071-71.846192 54.204245-92.300624 16.107865-9.971536 33.749813-14.573783 52.414482-14.573783z m-311.930088 110.198252c0 28.891885 14.062422 50.624719 39.374782 64.687141 10.227216 5.624969 21.477154 8.693134 33.238452 8.693134 28.380524 0 49.601998-13.295381 64.17578-37.585019 6.64769-11.249938 9.971536-23.522597 9.971535-36.562297 0-25.056679-12.016979-44.74407-32.21573-59.317853-12.272659-8.948814-26.079401-13.295381-41.164544-13.295381-30.937328 0-53.181523 15.596504-66.732584 43.465668-4.602247 9.460175-6.64769 19.43171-6.647691 29.914607z m146.504869-82.584769v-78.238202c0-10.227216 6.39201-18.408989 17.130587-18.408989H204.54432c10.738577 0 17.130587 8.181773 17.130586 18.408989v164.402497c0 40.141823-19.943071 72.101873-54.459925 92.300624-16.107865 9.460175-33.749813 14.318102-52.158801 14.318102h-7.670412c-40.141823 0-72.101873-19.943071-92.300624-54.204244-9.460175-16.107865-14.318102-33.749813-14.318103-52.158802v-7.414732c0-40.141823 19.943071-72.101873 54.204245-92.300624 16.107865-9.460175 33.749813-14.318102 52.158801-14.318102h7.414732c27.357803 0 50.369039 10.482896 69.800749 27.613483zM704.14382 218.351061h109.175531V329.827715h55.226966c25.56804 0 51.647441-4.602247 75.937079-12.78402 11.761298-4.090886 25.056679-9.715855 36.817977-16.619226-15.340824-20.198752-23.266916-45.511111-25.56804-70.56779-3.068165-34.005493 3.835206-78.493883 26.846442-105.084644l11.505618-13.295381 13.551061 10.994257c34.516854 27.613483 63.408739 66.221223 68.522347 110.453933 41.420225-12.272659 89.999501-9.204494 126.561798 11.761298l15.085144 8.693134-7.926093 15.340824c-30.937328 60.340574-95.624469 79.005243-158.777528 75.681398-94.601748 235.481648-300.168789 346.958302-549.712859 346.958302-128.862921 0-247.242946-48.067915-314.486891-162.612734l-1.022722-1.789763-9.715855-19.943071C153.40824 456.645194 145.737828 401.418227 150.851436 346.446941l1.534082-16.619226h93.323346V218.351061h109.175531V109.175531h218.351061V0h130.908364v218.351061z\\\" fill=\\\"#394D54\\\" p-id=\\\"35053\\\"></path><path d=\\\"M1057.749813 259.515605c7.414732-56.761049-35.283895-101.505119-61.618977-122.726591-30.425968 35.283895-35.028215 127.328839 12.52834 166.192259-26.590762 23.778277-82.840449 44.99975-140.112859 44.999751H168.749064c-5.624969 60.084894 4.857928 115.31186 28.891885 162.612734l7.926092 14.573783c5.113608 8.437453 10.482896 16.874906 16.619226 24.800998 28.636205 1.789763 55.226966 2.556804 79.516604 2.045444 47.556554-1.022722 86.675655-6.64769 116.078902-16.874907 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738577-3.835206 1.278402-7.926092 2.556804-12.27266 3.835206-23.266916 6.64769-48.067915 10.994257-80.283645 13.0397 1.789763 0-2.045443 0.25568-2.045443 0.255681-1.022722 0-2.556804 0.25568-3.579526 0.25568-12.52834 0.767041-26.335081 0.767041-40.141823 0.767041-15.340824 0-30.170287-0.25568-47.045193-1.022721l-0.511361 0.25568c58.295131 65.454182 149.317353 104.828964 263.606492 104.828964 241.873658 0 446.929338-107.130087 537.69588-347.725343 64.431461 6.64769 126.306117-9.715855 154.430961-64.687142-44.48839-26.079401-102.27216-17.897628-135.510611-1.278402z\\\" fill=\\\"#00AADA\\\" p-id=\\\"35054\\\"></path><path d=\\\"M1057.749813 259.515605c7.414732-56.761049-35.283895-101.505119-61.618977-122.726591-30.425968 35.283895-35.028215 127.328839 12.52834 166.192259-26.590762 23.778277-82.840449 44.99975-140.112859 44.999751H210.169288c-2.812484 91.789263 31.193009 161.590012 91.533583 203.777278 47.556554-1.022722 86.675655-6.64769 116.078902-16.874906 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738577-3.835206 1.278402-7.926092 2.556804-12.27266 3.835206-23.266916 6.64769-50.369039 11.761298-82.329088 13.551061l-0.767041-0.767042c82.329089 42.187266 201.731835 42.187266 338.520848-10.482896 153.40824-58.806492 296.077903-171.305868 395.793259-299.657428-1.789763 1.022722-3.068165 1.789763-4.602247 2.301123z\\\" fill=\\\"#24B8EB\\\" p-id=\\\"35055\\\"></path><path d=\\\"M170.283146 421.105618c4.346567 32.21573 13.806742 62.130337 27.613483 89.74382l7.926093 14.573783c5.113608 8.437453 10.482896 16.874906 16.619226 24.800999 28.891885 1.789763 55.226966 2.556804 79.516604 2.045443 47.556554-1.022722 86.675655-6.64769 116.078901-16.874906 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738576-3.835206 1.278402-7.926092 2.556804-12.272659 3.835206-23.266916 6.64769-50.113358 11.249938-82.329089 13.295381-1.022722 0-3.068165 0-4.090886 0.25568-12.52834 0.767041-26.079401 1.022722-40.141823 1.022722-15.340824 0-30.937328-0.25568-47.556554-1.022722 58.295131 65.454182 150.084395 104.828964 264.373533 104.828964 207.101124 0 387.100125-78.493883 491.673408-252.100874H170.283146z\\\" fill=\\\"#008BB8\\\" p-id=\\\"35056\\\"></path><path d=\\\"M216.561298 421.105618c12.272659 56.505368 42.187266 100.738077 85.397254 130.908365 47.556554-1.022722 86.675655-6.64769 116.078901-16.874907 4.346567-1.534082 9.204494 0.767041 10.738577 5.113608 1.534082 4.346567-0.767041 9.204494-5.113608 10.738577-3.835206 1.278402-7.926092 2.556804-12.272659 3.835206-23.266916 6.64769-50.624719 11.249938-82.84045 13.295381 82.329089 42.187266 201.220474 41.675905 338.009488-10.994257 82.840449-31.70437 162.357054-79.005243 233.947566-136.021973H216.561298z\\\" fill=\\\"#039BC6\\\" p-id=\\\"35057\\\"></path><path d=\\\"M343.123096 244.430462h7.414732v78.749563h-7.414732V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.062422 0h7.414731v78.749563h-7.414731V244.430462z m-7.926093-7.926092h94.601748v94.601747h-94.601748v-94.601747zM452.298627 135.254931h7.414731v78.749563h-7.414731V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.062422 0h7.414732v78.749563H380.963795V135.254931z m-7.926092-7.926092h94.601748v94.601748h-94.601748v-94.601748z\\\" fill=\\\"#00ACD3\\\" p-id=\\\"35058\\\"></path><path d=\\\"M452.298627 244.430462h7.414731v78.749563h-7.414731V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.062422 0h7.414732v78.749563H380.963795V244.430462z m-7.926092-7.926092h94.601748v94.601747h-94.601748v-94.601747z\\\" fill=\\\"#20C2EF\\\" p-id=\\\"35059\\\"></path><path d=\\\"M561.474157 244.430462h7.414732v78.749563h-7.414732V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.573783 0h7.670412v78.749563h-7.670412V244.430462z m-13.806741 0h7.414731v78.749563h-7.414731V244.430462z m-7.926093-7.926092h94.601748v94.601747h-94.601748v-94.601747z\\\" fill=\\\"#00ACD3\\\" p-id=\\\"35060\\\"></path><path d=\\\"M561.474157 135.254931h7.414732v78.749563h-7.414732V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.573783 0h7.670412v78.749563h-7.670412V135.254931z m-13.806741 0h7.414731v78.749563h-7.414731V135.254931z m-7.926093-7.926092h94.601748v94.601748h-94.601748v-94.601748zM670.649688 244.430462h7.414731v78.749563h-7.414731V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318103 0h7.670412v78.749563h-7.670412V244.430462z m-14.573783 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-13.806742 0h7.414732v78.749563h-7.414732V244.430462z m-7.926092-7.926092h94.601748v94.601747h-94.601748v-94.601747z\\\" fill=\\\"#20C2EF\\\" p-id=\\\"35061\\\"></path><path d=\\\"M670.649688 135.254931h7.414731v78.749563h-7.414731V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-14.318103 0h7.670412v78.749563h-7.670412V135.254931z m-14.573783 0h7.670412v78.749563h-7.670412V135.254931z m-14.318102 0h7.670412v78.749563h-7.670412V135.254931z m-13.806742 0h7.414732v78.749563h-7.414732V135.254931z m-7.926092-7.926092h94.601748v94.601748h-94.601748v-94.601748z\\\" fill=\\\"#00ACD3\\\" p-id=\\\"35062\\\"></path><path d=\\\"M670.649688 26.079401h7.414731V104.828964h-7.414731V26.079401z m-14.318102 0h7.670412V104.828964h-7.670412V26.079401z m-14.318103 0h7.670412V104.828964h-7.670412V26.079401z m-14.573783 0h7.670412V104.828964h-7.670412V26.079401z m-14.318102 0h7.670412V104.828964h-7.670412V26.079401z m-13.806742 0h7.414732V104.828964h-7.414732V26.079401z m-7.926092-7.926093h94.601748v94.601748h-94.601748v-94.601748z\\\" fill=\\\"#20C2EF\\\" p-id=\\\"35063\\\"></path><path d=\\\"M779.825218 244.430462h7.414732v78.749563H779.825218V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.573783 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.318102 0h7.670412v78.749563h-7.670412V244.430462z m-14.062422 0h7.414731v78.749563H708.234707V244.430462z m-7.670412-7.926092h94.601747v94.601747h-94.601747v-94.601747z\\\" fill=\\\"#00ACD3\\\" p-id=\\\"35064\\\"></path><path d=\\\"M461.758801 484.514357c14.318102 0 26.079401 11.761298 26.079401 26.079401s-11.761298 26.079401-26.079401 26.079401-26.079401-11.761298-26.0794-26.079401 11.505618-26.079401 26.0794-26.079401\\\" fill=\\\"#D4EDF1\\\" p-id=\\\"35065\\\"></path><path d=\\\"M461.758801 491.929089c2.301124 0 4.602247 0.511361 6.647691 1.278402-2.301124 1.278402-3.835206 3.835206-3.835206 6.64769 0 4.090886 3.323845 7.670412 7.670412 7.670412 2.812484 0 5.369288-1.534082 6.64769-4.090886 1.022722 2.301124 1.534082 4.602247 1.534083 7.159051 0 10.227216-8.437453 18.664669-18.66467 18.664669s-18.664669-8.437453-18.664669-18.664669 8.181773-18.664669 18.664669-18.664669M0 430.310112h1214.226217c-26.335081-6.64769-83.607491-15.852185-74.147316-50.369038-48.067915 55.738327-163.891136 39.119101-193.294382 11.505618-32.471411 47.300874-222.186267 29.403246-235.481648-7.414732-40.908864 47.812235-167.470662 47.812235-208.379525 0-13.295381 36.817978-203.010237 54.715605-235.481648 7.414732-29.147566 27.357803-145.226467 43.977029-193.294382-11.505618 9.460175 34.772534-47.812235 43.721348-74.147316 50.369038\\\" fill=\\\"#394D54\\\" p-id=\\\"35066\\\"></path><path d=\\\"M531.04819 672.695131c-64.687141-30.681648-100.226717-72.357553-119.914108-117.868664-24.033958 6.903371-52.925843 11.249938-86.419975 13.0397-12.52834 0.767041-25.82372 1.022722-39.886142 1.022722-16.107865 0-32.982772-0.511361-50.880399-1.534083 59.317853 59.317853 132.186767 104.828964 267.186017 105.596005 10.227216 0.25568 19.943071 0 29.914607-0.25568z\\\" fill=\\\"#BFDBE0\\\" p-id=\\\"35067\\\"></path><path d=\\\"M435.16804 596.758052c-8.948814-12.016979-17.641948-27.357803-24.033958-41.931585-24.033958 6.903371-52.925843 11.249938-86.419975 13.0397 23.011236 12.52834 55.994007 24.033958 110.453933 28.891885z\\\" fill=\\\"#D4EDF1\\\" p-id=\\\"35068\\\"></path></svg> Dockerå­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"Dockerå­¦ä¹ \",\"link\":\"/Dockerå­¦ä¹ /Docker-Learning-Local.md\"}]},{\"text\":\"<svg t=\\\"1744204683094\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"36148\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M934.4 358.4l-248-144a20.8 20.8 0 0 0-19.2 0L512 304l92.8 54.4a12.8 12.8 0 0 1 6.4 6.4 22.4 22.4 0 0 1 3.2 9.6v161.6a16 16 0 0 1-9.6 16l-32 19.2a20.8 20.8 0 0 1-19.2 0L512 547.2v-59.2L470.4 464l-9.6-3.2-9.6 3.2-32 19.2a17.6 17.6 0 0 0-9.6 16v161.6a17.6 17.6 0 0 0 9.6 16l9.6 6.4 83.2 48 155.2 89.6a20.8 20.8 0 0 0 19.2 0l248-144a17.6 17.6 0 0 0 9.6-16V374.4a17.6 17.6 0 0 0-9.6-16z\\\" fill=\\\"#5191FF\\\" p-id=\\\"36149\\\"></path><path d=\\\"M428.8 683.2l-9.6-6.4a17.6 17.6 0 0 1-9.6-16V499.2a17.6 17.6 0 0 1 9.6-16l32-19.2 9.6-3.2 9.6 3.2 41.6 24v59.2l41.6 24a20.8 20.8 0 0 0 19.2 0l32-19.2a17.6 17.6 0 0 0 9.6-16V374.4a22.4 22.4 0 0 0-3.2-9.6 12.8 12.8 0 0 0-6.4-6.4L512 304l-155.2-89.6a20.8 20.8 0 0 0-19.2 0l-248 144a17.6 17.6 0 0 0-9.6 16v286.4a17.6 17.6 0 0 0 9.6 16l248 144a20.8 20.8 0 0 0 19.2 0l155.2-89.6z\\\" fill=\\\"#3D4265\\\" p-id=\\\"36150\\\"></path></svg> ä¸­é—´ä»¶\",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744204703860\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1314 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"37232\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M447.705441 287.277795H69.932103v0.607353h679.627596c74.704374 0 142.120516-34.011747 187.064611-87.458779-93.532305-122.077879-241.118995-200.426369-406.318911-200.426369-93.532305 0-181.598437 25.508811-257.517516 69.2382 75.311726 56.483795 135.439637 131.795521 174.917558 218.039595z\\\" fill=\\\"#EFBF1B\\\" p-id=\\\"37233\\\"></path><path d=\\\"M937.839015 821.748112c-44.944095-52.839679-111.145532-86.244074-185.849906-86.244074H69.324751v0.607352h386.883626c-36.441158 89.280837-95.354363 166.414621-168.844031 226.542532-88.673484-47.373505-161.5558-120.863174-209.536658-210.144011 86.244074 161.5558 256.302811 271.486627 452.477711 271.486627 166.414621 0.607353 314.001311-78.955842 407.533616-202.248426z\\\" fill=\\\"#40BEB0\\\" p-id=\\\"37234\\\"></path><path d=\\\"M467.140725 655.940843h224.113121c79.563195 0 143.942574-64.379379 144.549927-143.942574 0-78.955842-64.379379-143.942574-143.942574-143.942574H465.92602c10.932347 43.122037 17.613226 91.102895 17.613226 143.942574s-6.073526 100.820537-16.398521 143.942574z\\\" fill=\\\"#0AA5DE\\\" p-id=\\\"37235\\\"></path><path d=\\\"M483.539246 511.998269c0-53.447032-6.680879-100.820537-17.613226-143.942574H38.349766a512.180475 512.180475 0 0 0 0 287.885148h428.790959c10.324995-43.122037 16.398521-91.102895 16.398521-143.942574z\\\" fill=\\\"#231F20\\\" p-id=\\\"37236\\\"></path><path d=\\\"M272.787883 69.2382c-87.458779 51.017621-158.519037 126.9367-203.463132 218.039595H447.705441c-39.477921-86.244074-99.605832-161.5558-174.917558-218.039595z\\\" fill=\\\"#D7A229\\\" p-id=\\\"37237\\\"></path><path d=\\\"M287.971698 962.653922c73.489669-59.520558 132.402874-137.261695 168.844032-226.542532H69.932103c2.429411 5.466174 5.466174 10.932347 8.502937 16.398521 47.373505 89.280837 120.255821 162.770505 209.536658 210.144011z\\\" fill=\\\"#009B8F\\\" p-id=\\\"37238\\\"></path></svg> ElasticSearch\",\"link\":\"/ä¸­é—´ä»¶/ElasticSearch/Elasticsearch-Local.md\"},{\"text\":\"<svg t=\\\"1744204382720\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"29407\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z\\\" fill=\\\"#E84738\\\" p-id=\\\"29408\\\"></path><path d=\\\"M743.68 463.776h-149.92a24.576 24.576 0 0 1-21.12-24.64v-158.72a24.48 24.48 0 0 0-7.04-17.28A24.064 24.064 0 0 0 548.48 256H496a24.32 24.32 0 0 0-24.192 24.416v160.384a24.8 24.8 0 0 1-22.432 22.976h-39.264a24.64 24.64 0 0 1-21.248-22.976V280.416A24.32 24.32 0 0 0 364.672 256h-52.48A24.32 24.32 0 0 0 288 280.416v463.168c0 13.536 10.88 24.416 24.192 24.416h431.616a24.32 24.32 0 0 0 24.192-24.416v-255.392a24.384 24.384 0 0 0-24.32-24.416z m-69.056 175.136a24.32 24.32 0 0 1-24.192 24.416h-52.448c-6.4 0-12.576-2.56-17.12-7.136a24.512 24.512 0 0 1-7.072-17.28v-49.92a24.32 24.32 0 0 1 24.192-24.448h52.48a24.32 24.32 0 0 1 24.16 24.416v49.952z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"29409\\\"></path></svg> RabbitMQ\",\"link\":\"/å¾®æœåŠ¡/RabbitMQ/MQ-Local.md\"}]},{\"text\":\"æ•°æ®åº“å­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744204748028\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"38731\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M69.316923 0c6.931692 1.102769 14.020923 1.575385 20.716308 3.465846 11.185231 3.308308 22.449231 6.616615 33.004307 11.500308 19.298462 9.058462 39.148308 17.486769 56.241231 30.72 8.113231 6.222769 15.832615 12.918154 23.945846 19.140923 1.811692 1.339077 4.411077 2.363077 6.695385 2.520615 32.531692 1.969231 64.984615 4.332308 96.492308 13.942154 20.322462 6.144 38.281846 16.384 56.24123 27.175385A767.212308 767.212308 0 0 1 504.123077 215.355077c21.425231 20.795077 40.408615 44.189538 59.234461 67.505231 21.188923 26.308923 41.984 53.169231 56.871385 83.731692 10.712615 22.055385 18.904615 45.292308 29.144615 67.584 21.267692 45.686154 43.008 90.978462 64.59077 136.349538 5.986462 12.603077 12.524308 24.812308 18.589538 37.257847 3.465846 7.168 8.822154 12.524308 16.226462 14.808615 59.392 18.432 110.355692 51.278769 157.853538 90.427077 12.130462 10.003692 24.812308 19.456 37.179077 29.144615 9.137231 7.089231 17.171692 15.281231 23.945846 24.891077 5.041231 7.168 10.870154 13.863385 16.541539 20.637539 2.914462 3.544615 2.520615 5.907692-2.599385 7.640615-18.747077 6.380308-37.494154 12.839385-57.344 15.753846-22.764308 3.308308-45.292308 8.113231-67.977846 12.209231-6.537846 1.181538-13.154462 2.126769-21.110154 3.387077 2.048 3.465846 3.465846 7.010462 5.671385 9.767385 11.106462 13.627077 24.576 24.812308 40.172307 32.846769 32.768 16.856615 60.416 40.172308 85.779693 66.402461 9.294769 9.609846 17.801846 20.007385 26.781538 29.932308 3.938462 4.174769 8.113231 8.034462 12.209231 11.894154 7.876923 7.325538 14.651077 15.202462 14.729846 27.490461-1.260308-0.315077-2.678154-0.393846-3.780923-0.94523-11.972923-5.986462-23.709538-12.288-35.761231-18.038154-48.206769-22.843077-96.571077-45.134769-144.620307-68.214154-30.798769-14.966154-60.731077-31.744-91.766154-46.316308-49.860923-23.394462-100.430769-45.371077-150.449231-68.529231-40.96-18.904615-80.344615-40.644923-115.475692-69.238153-37.257846-30.247385-67.899077-66.402462-95.625847-105.314462-33.240615-46.631385-61.44-96.492308-89.718153-146.195692-22.528-39.463385-43.795692-79.950769-71.68-116.027077-21.425231-27.963077-45.528615-53.956923-68.529231-80.738462-3.780923-4.411077-7.876923-8.664615-12.681846-13.942154 0.393846 2.284308 0.472615 3.229538 0.787692 4.17477 9.924923 33.870769 26.781538 63.803077 51.436308 89.00923 12.445538 12.681846 16.541538 26.545231 10.318769 43.323077-4.174769 11.421538-7.483077 23.236923-12.051692 34.500923-6.931692 17.171692-9.452308 35.446154-13.39077 53.32677-5.513846 25.206154-2.520615 50.176-0.236307 75.382154 1.890462 20.716308 3.859692 41.353846 11.579077 60.809846 5.907692 14.808615 13.233231 29.144615 20.322461 43.480615 3.308308 6.616615 9.058462 11.027692 15.753846 14.178462 5.750154 2.756923 7.798154 2.048 8.979693-4.411077 1.339077-7.168 2.126769-14.493538 3.150769-21.819077 2.363077-17.486769 3.780923-35.288615 7.561846-52.539077 4.489846-20.48 12.760615-39.699692 27.332923-55.611077 5.513846-5.986462 10.24-12.681846 15.753846-19.613539 0.945231 1.575385 1.969231 2.914462 2.363077 4.332308 15.911385 50.963692 40.96 97.673846 67.899077 143.36 20.716308 35.288615 41.826462 70.577231 70.340923 100.509539 8.900923 9.294769 19.062154 17.329231 28.672 25.915077 0.945231 0.787692 2.363077 1.102769 3.623385 1.654153l-1.811693 2.441847c-3.072-1.339077-6.537846-2.126769-8.979692-4.17477a759.177846 759.177846 0 0 1-28.593231-24.49723c-20.952615-18.983385-41.747692-38.203077-62.621538-57.265231a231.108923 231.108923 0 0 1-42.141539-52.775385c-6.774154-11.342769-11.500308-23.788308-17.171692-35.682461a268.051692 268.051692 0 0 0-7.561846-14.729847c-0.787692-1.417846-2.441846-2.363077-3.702154-3.544615-0.866462 1.575385-2.363077 3.229538-2.599384 5.041231-0.945231 6.380308-1.339077 12.918154-2.284308 19.377231-2.284308 16.068923-4.411077 32.137846-7.246769 48.04923a55.217231 55.217231 0 0 1-12.681847 25.363693c-8.507077 10.24-19.613538 11.500308-31.901538 10.24-16.541538-1.811692-27.963077-10.870154-38.203077-23.236923-27.017846-32.768-39.857231-71.286154-45.449846-112.403693a366.276923 366.276923 0 0 1 0.157538-106.102154c2.205538-13.784615 6.616615-27.175385 10.24-40.723692 3.072-11.500308 6.301538-22.843077 9.767385-34.185846a65.614769 65.614769 0 0 1 5.828923-12.681846c2.284308-3.938462 2.363077-7.561846-1.417846-10.24-12.996923-9.452308-20.322462-23.158154-28.672-36.391385-22.291692-35.446154-34.658462-75.067077-48.128-114.215384a396.839385 396.839385 0 0 1-7.246769-23.945847 106.732308 106.732308 0 0 0-12.288-27.805538 746.180923 746.180923 0 0 0-51.515077-71.128615 112.009846 112.009846 0 0 1-22.843077-44.740923L0 64.354462V49.230769C0.708923 46.237538 1.260308 43.086769 2.126769 40.172308 7.719385 20.716308 18.904615 6.459077 39.384615 1.575385 42.929231 0.787692 46.631385 0.472615 50.254769 0H69.316923z m127.842462 176.206769c2.441846 3.702154 4.726154 6.774154 6.695384 10.003693 10.712615 17.092923 21.346462 34.264615 32.137846 51.357538 0.787692 1.417846 2.599385 3.387077 3.702154 3.308308 14.966154-1.890462 27.726769-17.329231 24.024616-30.72-3.938462-14.336-12.996923-25.363692-23.000616-35.761231-9.294769-9.688615-20.007385-10.633846-31.665231-5.513846-4.174769 1.811692-7.876923 4.804923-11.894153 7.325538z\\\" fill=\\\"#449EFE\\\" p-id=\\\"38732\\\"></path></svg> Mysqlå­¦ä¹ \",\"link\":\"/404.md\"},{\"text\":\"<svg t=\\\"1744204683094\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"36148\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M934.4 358.4l-248-144a20.8 20.8 0 0 0-19.2 0L512 304l92.8 54.4a12.8 12.8 0 0 1 6.4 6.4 22.4 22.4 0 0 1 3.2 9.6v161.6a16 16 0 0 1-9.6 16l-32 19.2a20.8 20.8 0 0 1-19.2 0L512 547.2v-59.2L470.4 464l-9.6-3.2-9.6 3.2-32 19.2a17.6 17.6 0 0 0-9.6 16v161.6a17.6 17.6 0 0 0 9.6 16l9.6 6.4 83.2 48 155.2 89.6a20.8 20.8 0 0 0 19.2 0l248-144a17.6 17.6 0 0 0 9.6-16V374.4a17.6 17.6 0 0 0-9.6-16z\\\" fill=\\\"#5191FF\\\" p-id=\\\"36149\\\"></path><path d=\\\"M428.8 683.2l-9.6-6.4a17.6 17.6 0 0 1-9.6-16V499.2a17.6 17.6 0 0 1 9.6-16l32-19.2 9.6-3.2 9.6 3.2 41.6 24v59.2l41.6 24a20.8 20.8 0 0 0 19.2 0l32-19.2a17.6 17.6 0 0 0 9.6-16V374.4a22.4 22.4 0 0 0-3.2-9.6 12.8 12.8 0 0 0-6.4-6.4L512 304l-155.2-89.6a20.8 20.8 0 0 0-19.2 0l-248 144a17.6 17.6 0 0 0-9.6 16v286.4a17.6 17.6 0 0 0 9.6 16l248 144a20.8 20.8 0 0 0 19.2 0l155.2-89.6z\\\" fill=\\\"#3D4265\\\" p-id=\\\"36150\\\"></path></svg> ä¸­é—´ä»¶å­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744204771009\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1067 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"39769\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M401.486019 118.403657c40.238324 35.810743 72.0896 48.942324 95.719619 39.399619 35.449905-14.331124 46.070248 64.468114 35.449905 75.210362-6.582857 6.621867-3.988724 26.66301 7.74339 60.074667l0.199924 0.516876 9.103848-7.10461c136.201752-104.106667 249.173333-93.2864 339.065905 32.455924 16.047543 30.417676 28.345295 60.396495 36.883504 89.897448l86.503619 28.901181-74.244876 30.934552 0.03901 0.199924 50.258895 16.764343-47.903695 20.002133c0.877714 118.715733-63.229562 229.532038-192.4096 332.522057-194.56 155.160381-425.847467 119.354514-693.784381-107.422476 67.388952-19.163429 145.700571-63.029638 235.003124-131.569371-43.154286-45.509486-81.315352-115.048838-114.488077-208.618057 66.545371 6.787657 123.630933 13.775238 171.25181 20.879847a859.565105 859.565105 0 0 1-47.182019-110.416457c76.322133 7.826286 140.229486 15.80861 191.648914 24.029867-10.420419-18.158933-27.384686-61.752076-35.693714-81.310476-7.977448-18.80259-55.803124-15.447771-82.2272-12.614705l-2.555124 0.277943 5.749029-1.794438c31.934171-10.981181 59.718705-28.984076 75.605333-26.268039l3.432838 0.999619c16.564419 7.182629 30.734629 20.2752 42.554514 39.39962-9.45981-28.662248-14.175086-45.387581-14.175085-50.136991 0-7.187505-81.54941-7.187505-99.279239-14.336-10.732495-4.349562-16.564419-17.559162-17.559161-39.638552l-0.160915-6.904686 35.449905-14.331124zM160.816762 48.57661c5.480838 33.34339 31.57821 58.32899 78.345752 74.995809 9.147733 3.257295 18.344229 4.87619 27.535848 5.300419l8.547962-0.048762-6.777905 1.857829c-34.87939 9.518324-90.745905 24.61501-105.237943 19.319466l-2.413714-1.438476c-7.61661-7.709257-17.603048-30.793143-29.905676-69.193143l-3.11101-9.986438 32.967924-20.806704h0.048762z\\\" fill=\\\"#000000\\\" p-id=\\\"39770\\\"></path><path d=\\\"M652.643962 400.091429l33.796876-9.942553 10.937295-34.786743 10.454553 34.274743 34.279619 10.454553-32.80701 8.947809-11.927162 35.781486-11.932038-35.781486z\\\" fill=\\\"#FFFFFF\\\" p-id=\\\"39771\\\"></path></svg> MybatisPluså­¦ä¹ \",\"link\":\"/æ•°æ®åº“å­¦ä¹ /ä¸­é—´ä»¶/MybatisPlus/MybatisPlus-Learning-Local.md\"},{\"text\":\"å¾…ç»­...\",\"link\":\"/404.md\"}]}]},{\"text\":\"<svg t=\\\"1744204802226\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"40850\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M667.648 238.592c0 17.408-14.336 30.72-30.72 30.72-17.408 0-30.72-14.336-30.72-30.72 0-17.408 14.336-30.72 30.72-30.72s30.72 13.312 30.72 30.72m91.136 0c0 17.408-14.336 30.72-30.72 30.72-17.408 0-30.72-14.336-30.72-30.72 0-17.408 14.336-30.72 30.72-30.72s30.72 13.312 30.72 30.72m112.64 0c0 17.408-14.336 30.72-30.72 30.72-17.408 0-30.72-14.336-30.72-30.72 0-17.408 14.336-30.72 30.72-30.72s30.72 13.312 30.72 30.72\\\" fill=\\\"#1A1A3F\\\" p-id=\\\"40851\\\"></path><path d=\\\"M949.248 909.312H75.776c-13.312 0-24.576-11.264-24.576-24.576V136.192c0-13.312 11.264-24.576 24.576-24.576h873.472c13.312 0 24.576 11.264 24.576 24.576v749.568c0 13.312-11.264 23.552-24.576 23.552M100.352 861.184h824.32V160.768H100.352v700.416z\\\" fill=\\\"#1A1A3F\\\" p-id=\\\"40852\\\"></path><path d=\\\"M839.68 362.496H79.872c-13.312 0-24.576-11.264-24.576-24.576 0-13.312 11.264-24.576 24.576-24.576H839.68c13.312 0 24.576 11.264 24.576 24.576 0 14.336-11.264 24.576-24.576 24.576\\\" fill=\\\"#1A1A3F\\\" p-id=\\\"40853\\\"></path><path d=\\\"M437.248 714.752c-6.144 0-12.288-2.048-17.408-7.168-9.216-9.216-9.216-24.576 0-34.816L570.368 522.24c9.216-9.216 24.576-9.216 34.816 0 9.216 9.216 9.216 24.576 0 34.816L454.656 707.584c-5.12 4.096-11.264 7.168-17.408 7.168\\\" fill=\\\"#28C23E\\\" p-id=\\\"40854\\\"></path><path d=\\\"M587.776 684.032c-13.312 0-24.576-11.264-24.576-24.576V563.2h-96.256c-13.312 0-24.576-11.264-24.576-24.576 0-13.312 11.264-24.576 24.576-24.576h120.832c13.312 0 24.576 11.264 24.576 24.576v120.832c0 14.336-11.264 24.576-24.576 24.576\\\" fill=\\\"#28C23E\\\" p-id=\\\"40855\\\"></path></svg> å‰ç«¯å­¦ä¹ \",\"collapsed\":true,\"items\":[{\"text\":\"<svg t=\\\"1744204815179\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"41875\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M615.6 123.6h165.5L512 589.7 242.9 123.6H63.5L512 900.4l448.5-776.9z\\\" fill=\\\"#41B883\\\" p-id=\\\"41876\\\"></path><path d=\\\"M781.1 123.6H615.6L512 303 408.4 123.6H242.9L512 589.7z\\\" fill=\\\"#34495E\\\" p-id=\\\"41877\\\"></path></svg> Vueå­¦ä¹ \",\"link\":\"/å‰ç«¯å­¦ä¹ /Vue/Vue-è¿›é˜¶å­¦ä¹ -Local.md\"},{\"text\":\"<svg t=\\\"1744204860637\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"43883\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M332.799002 686.081014m-332.799002 0a332.799002 332.799002 0 1 0 665.598003 0 332.799002 332.799002 0 1 0-665.598003 0Z\\\" fill=\\\"#FFDCEE\\\" p-id=\\\"43884\\\"></path><path d=\\\"M883.19735 1024h-639.99808A141.055577 141.055577 0 0 1 102.399693 883.200422v-742.397772A141.055577 141.055577 0 0 1 243.19927 0.003072h516.350451a89.087733 89.087733 0 0 1 63.231811 25.599923l189.695431 189.695431A38.399885 38.399885 0 0 1 1023.996928 243.202342v639.99808a141.055577 141.055577 0 0 1-140.799578 140.799578zM243.19927 76.802842A63.999808 63.999808 0 0 0 179.199462 140.80265v742.397772A63.999808 63.999808 0 0 0 243.19927 947.20023h639.99808a63.999808 63.999808 0 0 0 63.999808-63.999808V259.074295l-179.199462-179.199463a12.799962 12.799962 0 0 0-8.447975-3.07199z\\\" fill=\\\"#434260\\\" p-id=\\\"43885\\\"></path><path d=\\\"M198.655404 399.105875h35.583893v92.159723h96.76771v-92.159723h35.583893v226.047322h-35.583893v-102.399693H234.239297v102.399693H198.655404zM451.582645 428.801786H383.998848v-29.695911h168.447495v29.695911H486.398541v196.095411h-34.815896zM577.534267 399.105875h40.959878L659.710021 512.001536c5.119985 15.103955 9.727971 30.463909 15.103955 45.823863h1.535995c5.119985-15.359954 9.471972-30.719908 14.847955-45.823863l40.959878-114.175657h40.959877v226.047321h-33.279901V512.001536c0-20.223939 2.815992-49.407852 4.607987-69.88779l-18.175946 51.199846-39.423882 107.775677h-22.015933l-39.679881-107.775677-17.919947-51.199846c1.535995 20.479939 4.351987 49.663851 4.351987 69.88779v111.871664h-34.047898zM796.66961 399.105875h35.583893v195.839412h95.487714v30.20791h-131.071607z\\\" fill=\\\"#434260\\\" p-id=\\\"43886\\\"></path></svg><svg t=\\\"1744204891658\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1028 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"45078\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M110.592 108.544h808.96v808.96H110.592z\\\" fill=\\\"#FFEA00\\\" p-id=\\\"45079\\\"></path><path d=\\\"M944.128 0H83.968C38.912 0 2.048 36.864 2.048 81.92v143.36h61.44V102.4c0-22.528 18.432-40.96 40.96-40.96h819.2c22.528 0 40.96 18.432 40.96 40.96v122.88h61.44V81.92c0-45.056-36.864-81.92-81.92-81.92z m20.48 921.6c0 22.528-18.432 40.96-40.96 40.96H104.448c-22.528 0-40.96-18.432-40.96-40.96v-122.88H2.048v143.36c0 45.056 36.864 81.92 81.92 81.92h860.16c45.056 0 81.92-36.864 81.92-81.92v-143.36h-61.44v122.88z\\\" fill=\\\"\\\" p-id=\\\"45080\\\"></path><path d=\\\"M63.488 286.72h901.12v450.56H63.488z\\\" fill=\\\"#FFEA00\\\" p-id=\\\"45081\\\"></path><path d=\\\"M38.912 366.592c0 36.864 4.096 61.44 4.096 94.208 0 18.432-10.24 36.864-43.008 38.912v30.72c34.816 0 43.008 20.48 43.008 38.912 0 32.768-4.096 57.344-4.096 94.208 0 53.248 18.432 69.632 61.44 69.632H124.928v-28.672h-10.24c-26.624 0-32.768-10.24-32.768-43.008 0-28.672 2.048-55.296 2.048-88.064 0-34.816-10.24-51.2-32.768-55.296v-2.048c24.576-8.192 32.768-22.528 32.768-57.344 0-32.768-2.048-59.392-2.048-88.064 0-30.72 6.144-43.008 32.768-43.008H124.928v-28.672H100.352c-40.96-2.048-61.44 14.336-61.44 67.584z m534.528 129.024l-45.056-18.432c-26.624-10.24-53.248-22.528-53.248-49.152 0-26.624 22.528-43.008 55.296-43.008 28.672 0 53.248 10.24 73.728 30.72l26.624-32.768c-24.576-26.624-61.44-40.96-100.352-40.96-63.488 0-108.544 38.912-108.544 92.16 0 49.152 34.816 73.728 67.584 86.016l45.056 20.48c30.72 14.336 53.248 22.528 53.248 53.248 0 28.672-22.528 47.104-63.488 47.104-32.768 0-63.488-14.336-88.064-38.912l-26.624 30.72-22.528-26.624c-20.48 22.528-43.008 34.816-73.728 34.816-59.392 0-96.256-49.152-96.256-126.976 0-77.824 38.912-124.928 96.256-124.928 26.624 0 47.104 12.288 65.536 30.72l28.672-32.768c-20.48-22.528-53.248-40.96-94.208-40.96-81.92-8.192-147.456 57.344-147.456 165.888s63.488 169.984 147.456 169.984c40.96 0 73.728-16.384 98.304-43.008 30.72 26.624 69.632 43.008 112.64 43.008 71.68 0 116.736-43.008 116.736-96.256 0-49.152-28.672-71.68-67.584-90.112z m229.376 0l-45.056-18.432c-26.624-10.24-53.248-22.528-53.248-49.152 0-26.624 22.528-43.008 55.296-43.008 28.672 0 53.248 10.24 73.728 30.72l26.624-32.768c-24.576-26.624-61.44-40.96-100.352-40.96-63.488 0-108.544 38.912-108.544 92.16 0 49.152 34.816 73.728 67.584 86.016l45.056 20.48c30.72 14.336 53.248 22.528 53.248 53.248 0 28.672-22.528 47.104-63.488 47.104-32.768 0-63.488-14.336-88.064-38.912L634.88 634.88c30.72 30.72 71.68 49.152 118.784 49.152 71.68 0 116.736-43.008 116.736-96.256 0-51.2-28.672-73.728-67.584-92.16z m182.272-34.816c0-32.768 4.096-57.344 4.096-94.208 0-53.248-18.432-69.632-61.44-69.632H903.168v28.672h12.288c26.624 0 32.768 12.288 32.768 43.008 0 28.672-2.048 55.296-2.048 88.064 0 34.816 8.192 51.2 32.768 55.296v2.048c-26.624 8.192-34.816 24.576-34.816 59.392 0 32.768 2.048 59.392 2.048 88.064 0 30.72-6.144 43.008-32.768 43.008H903.168v28.672h24.576c40.96 0 61.44-16.384 61.44-69.632 0-36.864-4.096-61.44-4.096-94.208 0-18.432 10.24-38.912 43.008-38.912v-30.72c-34.816 0-43.008-20.48-43.008-38.912z\\\" fill=\\\"\\\" p-id=\\\"45082\\\"></path></svg> HTML+CSS+ç§»åŠ¨ç«¯\",\"link\":\"/å‰ç«¯å­¦ä¹ /Html+Css+ç§»åŠ¨Web/HTML+CSS+ç§»åŠ¨ç«¯web-Learning-Local.md\"}]}],\"socialLinks\":[{\"icon\":{\"svg\":\"<svg t=\\\"1744268429530\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"7140\\\" width=\\\"32\\\" height=\\\"32\\\"><path d=\\\"M511.957333 21.333333C241.024 21.333333 21.333333 240.981333 21.333333 512c0 216.832 140.544 400.725333 335.573334 465.664 24.490667 4.394667 32.256-10.069333 32.256-23.082667 0-11.690667 0.256-44.245333 0-85.205333-136.448 29.610667-164.736-64.64-164.736-64.64-22.314667-56.704-54.4-71.765333-54.4-71.765333-44.586667-30.464 3.285333-29.824 3.285333-29.824 49.194667 3.413333 75.178667 50.517333 75.178667 50.517333 43.776 75.008 114.816 53.333333 142.762666 40.789333 4.522667-31.658667 17.152-53.376 31.189334-65.536-108.970667-12.458667-223.488-54.485333-223.488-242.602666 0-53.546667 19.114667-97.322667 50.517333-131.669334-5.034667-12.330667-21.930667-62.293333 4.778667-129.834666 0 0 41.258667-13.184 134.912 50.346666a469.802667 469.802667 0 0 1 122.88-16.554666c41.642667 0.213333 83.626667 5.632 122.88 16.554666 93.653333-63.488 134.784-50.346667 134.784-50.346666 26.752 67.541333 9.898667 117.504 4.864 129.834666 31.402667 34.346667 50.474667 78.122667 50.474666 131.669334 0 188.586667-114.730667 230.016-224.042666 242.090666 17.578667 15.232 33.578667 44.672 33.578666 90.453334v135.850666c0 13.141333 7.936 27.605333 32.853334 22.869334C862.250667 912.597333 1002.666667 728.746667 1002.666667 512 1002.666667 240.981333 783.018667 21.333333 511.957333 21.333333z\\\" p-id=\\\"7141\\\" fill=\\\"#2c2c2c\\\"></path></svg>\"},\"link\":\"https://github.com/XiaoPeng03182\"},{\"icon\":{\"svg\":\"<svg t=\\\"1744268281277\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"3390\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M337.387283 341.82659c-17.757225 0-35.514451 11.83815-35.514451 29.595375s17.757225 29.595376 35.514451 29.595376 29.595376-11.83815 29.595376-29.595376c0-18.49711-11.83815-29.595376-29.595376-29.595375zM577.849711 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763zM501.641618 401.017341c17.757225 0 29.595376-12.578035 29.595376-29.595376 0-17.757225-11.83815-29.595376-29.595376-29.595375s-35.514451 11.83815-35.51445 29.595375 17.757225 29.595376 35.51445 29.595376zM706.589595 513.479769c-11.83815 0-22.936416 12.578035-22.936416 23.6763 0 12.578035 11.83815 23.676301 22.936416 23.676301 17.757225 0 29.595376-11.83815 29.595376-23.676301s-11.83815-23.676301-29.595376-23.6763z\\\" fill=\\\"#28C445\\\" p-id=\\\"3391\\\"></path><path d=\\\"M510.520231 2.959538C228.624277 2.959538 0 231.583815 0 513.479769s228.624277 510.520231 510.520231 510.520231 510.520231-228.624277 510.520231-510.520231-228.624277-510.520231-510.520231-510.520231zM413.595376 644.439306c-29.595376 0-53.271676-5.919075-81.387284-12.578034l-81.387283 41.433526 22.936416-71.768786c-58.450867-41.433526-93.965318-95.445087-93.965317-159.815029 0-113.202312 105.803468-201.988439 233.803468-201.98844 114.682081 0 216.046243 71.028902 236.023121 166.473989-7.398844-0.739884-14.797688-1.479769-22.196532-1.479769-110.982659 1.479769-198.289017 85.086705-198.289017 188.67052 0 17.017341 2.959538 33.294798 7.398844 49.572255-7.398844 0.739884-15.537572 1.479769-22.936416 1.479768z m346.265896 82.867052l17.757225 59.190752-63.630058-35.514451c-22.936416 5.919075-46.612717 11.83815-70.289017 11.83815-111.722543 0-199.768786-76.947977-199.768786-172.393063-0.739884-94.705202 87.306358-171.653179 198.289017-171.65318 105.803468 0 199.028902 77.687861 199.028902 172.393064 0 53.271676-34.774566 100.624277-81.387283 136.138728z\\\" fill=\\\"#28C445\\\" p-id=\\\"3392\\\"></path></svg>\"},\"link\":\"/wechat-info/index.html\"},{\"icon\":{\"svg\":\"<svg t=\\\"1744268149438\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"2302\\\" width=\\\"16\\\" height=\\\"16\\\"><path d=\\\"M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z\\\" fill=\\\"#C71D23\\\" p-id=\\\"2303\\\"></path></svg>\"},\"link\":\"https://gitee.com/xiaopeng03/projects\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright Â© 2025 <a href=\\\"https://beian.miit.gov.cn/\\\" target=\\\"_blank\\\">æ¸ICPå¤‡2025054279å·</a>\"},\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\"}}}}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>