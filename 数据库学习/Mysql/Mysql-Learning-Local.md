# MySql-Learning

![image-20250412144000663](Mysql-Learning-Local.assets/image-20250412144000663.png)



# ä¸€ã€åŸºç¡€ç¯‡

# 1ã€Mysqlæ¦‚è¿°

åœ¨è¿™ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ•°æ®åº“ç›¸å…³æ¦‚å¿µåŠMySQLæ•°æ®åº“çš„ä»‹ç»ã€ä¸‹è½½ã€å®‰è£…ã€å¯åŠ¨åŠè¿æ¥ã€‚

## 1.1 **æ•°æ®åº“ç›¸å…³æ¦‚å¿µ**

åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å…ˆæ¥è®²è§£ä¸‰ä¸ªæ¦‚å¿µï¼šæ•°æ®åº“ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€SQLã€‚

| **åç§°**       | **å…¨ç§°**                                                     | **ç®€ç§°**                          |
| :------------- | :----------------------------------------------------------- | :-------------------------------- |
| æ•°æ®åº“         | å­˜å‚¨æ•°æ®çš„ä»“åº“ï¼Œæ•°æ®æ˜¯æœ‰ç»„ç»‡çš„è¿›è¡Œå­˜å‚¨                       | DataBaseï¼ˆDBï¼‰                    |
| æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ | æ“çºµå’Œç®¡ç†æ•°æ®åº“çš„å¤§å‹è½¯ä»¶                                   | DataBase Management System (DBMS) |
| SQL            | æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®šä¹‰äº†ä¸€å¥—æ“ä½œå…³ç³»å‹æ•°æ®åº“ç»Ÿä¸€**æ ‡å‡†** | Structured Query Language (SQL)   |

![image-20250412160500512](Mysql-Learning-Local.assets/image-20250412160500512.png)

è€Œç›®å‰ä¸»æµçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„å¸‚åœºå æœ‰ç‡æ’åå¦‚ä¸‹ï¼š

![image-20250412160622957](Mysql-Learning-Local.assets/image-20250412160622957.png)

- **Oracle**ï¼šå¤§å‹çš„æ”¶è´¹æ•°æ®åº“ï¼ŒOracleå…¬å¸äº§å“ï¼Œä»·æ ¼æ˜‚è´µã€‚
- **MySQL**ï¼šå¼€æºå…è´¹çš„ä¸­å°å‹æ•°æ®åº“ï¼Œåæ¥Sunå…¬å¸æ”¶è´­äº†MySQLï¼Œè€ŒOracleåˆæ”¶è´­äº†Sunå…¬å¸ã€‚ç›®å‰Oracleæ¨å‡ºäº†æ”¶è´¹ç‰ˆæœ¬çš„MySQLï¼Œä¹Ÿæä¾›äº†å…è´¹çš„ç¤¾åŒºç‰ˆæœ¬ã€‚
-  **SQL Server**ï¼šMicrosoft å…¬å¸æ¨å‡ºçš„æ”¶è´¹çš„ä¸­å‹æ•°æ®åº“ï¼ŒC#ã€.netç­‰è¯­è¨€å¸¸ç”¨ã€‚

-  **PostgreSQL**ï¼šå¼€æºå…è´¹çš„ä¸­å°å‹æ•°æ®åº“ã€‚ ![ref1](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAySURBVBhXYwCB3NrureY+8b9u3H2sBxcw9oz9D8NgQZAKDEGQFpiAXXD6B7AgJmBgAABrvx5BwHOhSwAAAABJRU5ErkJggg==) DB2ï¼šIBMå…¬å¸çš„å¤§å‹æ”¶è´¹æ•°æ®åº“äº§å“ã€‚

-  SQLLiteï¼šåµŒå…¥å¼çš„å¾®å‹æ•°æ®åº“ã€‚Androidå†…ç½®çš„æ•°æ®åº“é‡‡ç”¨çš„å°±æ˜¯è¯¥æ•°æ®åº“ã€‚

-  MariaDBï¼šå¼€æºå…è´¹çš„ä¸­å°å‹æ•°æ®åº“ã€‚æ˜¯MySQLæ•°æ®åº“çš„å¦å¤–ä¸€ä¸ªåˆ†æ”¯ã€å¦å¤–ä¸€ä¸ªè¡ç”Ÿäº§å“ï¼Œä¸ MySQLæ•°æ®åº“æœ‰å¾ˆå¥½çš„å…¼å®¹æ€§ã€‚


è€Œä¸è®ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸Šé¢çš„å“ªä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œæœ€ç»ˆåœ¨æ“ä½œæ—¶ï¼Œéƒ½æ˜¯ä½¿ç”¨SQLè¯­è¨€æ¥è¿›è¡Œç»Ÿä¸€æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬å‰é¢è®²åˆ°SQLè¯­è¨€ï¼Œæ˜¯æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ **ç»Ÿä¸€æ ‡å‡†** ã€‚æ‰€ä»¥å³ä½¿æˆ‘ä»¬ç°åœ¨å­¦ä¹ çš„æ˜¯MySQLï¼Œå‡å¦‚æˆ‘ä»¬ä»¥ååˆ°äº†å…¬å¸ï¼Œä½¿ç”¨çš„æ˜¯åˆ«çš„å…³ç³»å‹æ•°æ®åº“ï¼Œå¦‚ï¼šOracleã€DB2ã€SQLServerï¼Œä¹Ÿå®Œå…¨ä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºæ“ä½œçš„æ–¹å¼éƒ½æ˜¯ä¸€è‡´çš„ã€‚

![image-20250412160637812](Mysql-Learning-Local.assets/image-20250412160637812.png)





## **1.2 MySQLæ•°æ®åº“**

### **ï¼ˆ1ï¼‰ç‰ˆæœ¬**

![image-20250412160845195](Mysql-Learning-Local.assets/image-20250412160845195.png)

å®˜æ–¹ï¼š [**https://www.mysql.com/**](https://www.mysql.com/)

MySQLå®˜æ–¹æä¾›äº†ä¸¤ç§ä¸åŒçš„ç‰ˆæœ¬ï¼š

- ç¤¾åŒºç‰ˆæœ¬ï¼ˆMySQL Community Server)å…è´¹ï¼Œ MySQLä¸æä¾›ä»»ä½•æŠ€æœ¯æ”¯æŒ

- å•†ä¸šç‰ˆæœ¬ï¼ˆMySQL Enterprise Edition)æ”¶è´¹ï¼Œå¯ä»¥ä½¿ç”¨30å¤©ï¼Œå®˜æ–¹æä¾›æŠ€æœ¯æ”¯æŒ


æœ¬è¯¾ç¨‹é‡‡ç”¨çš„æ˜¯MySQLæœ€æ–°çš„ç¤¾åŒºç‰ˆ-MySQL Community Server 8.0.26

### ï¼ˆ2ï¼‰**ä¸‹è½½**

![image-20250412161603273](Mysql-Learning-Local.assets/image-20250412161603273.png)

é€‰æ‹©ç¤¾åŒºç‰ˆæœ¬ï¼šhttps://dev.mysql.com/downloads/

![image-20250412161451219](Mysql-Learning-Local.assets/image-20250412161451219.png)

![image-20250412161246917](Mysql-Learning-Local.assets/image-20250412161246917.png)



ä¸‹è½½åœ°å€ï¼š [**https://downloads.mysql.com/archives/installer/**](https://downloads.mysql.com/archives/installer/)

![image-20250412161521964](Mysql-Learning-Local.assets/image-20250412161521964.png)



ä¹Ÿå¯ä»¥ä½¿ç”¨è¯¾ç¨‹èµ„æ–™ä¸­æä¾›çš„MySQLçš„å®‰è£…åŒ…ï¼š

![image-20250412161625270](Mysql-Learning-Local.assets/image-20250412161625270.png)



### ï¼ˆ3ï¼‰å®‰è£…

**1). åŒå‡»å®˜æ–¹ä¸‹æ¥çš„å®‰è£…åŒ…æ–‡ä»¶**

![image-20210916184347938](Mysql-Learning-Local.assets/image-20210916184347938.png) 



**2). æ ¹æ®å®‰è£…æç¤ºè¿›è¡Œå®‰è£…**

![image-20210916184532212](Mysql-Learning-Local.assets/image-20210916184532212.png) 

![image-20210916184603712](Mysql-Learning-Local.assets/image-20210916184603712.png) 

![image-20210916184634094](Mysql-Learning-Local.assets/image-20210916184634094.png) 



å®‰è£…MySQLçš„ç›¸å…³ç»„ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦è€—æ—¶å‡ åˆ†é’Ÿï¼Œè€å¿ƒç­‰å¾…ã€‚

![image-20210916184700031](Mysql-Learning-Local.assets/image-20210916184700031.png) 

![image-20210916184709776](Mysql-Learning-Local.assets/image-20210916184709776.png) 

![image-20210916184743524](Mysql-Learning-Local.assets/image-20210916184743524.png) 

![image-20210916184759021](Mysql-Learning-Local.assets/image-20210916184759021.png) 



==è¾“å…¥MySQLä¸­rootç”¨æˆ·çš„å¯†ç ,ä¸€å®šè®°å¾—è®°ä½è¯¥å¯†ç ==

![image-20210916184814656](Mysql-Learning-Local.assets/image-20210916184814656.png) 

![image-20210916184832159](Mysql-Learning-Local.assets/image-20210916184832159.png) 

![image-20210916184851013](Mysql-Learning-Local.assets/image-20210916184851013.png) 





### ï¼ˆ4ï¼‰==é…ç½®ç¯å¢ƒå˜é‡==

å®‰è£…å¥½MySQLä¹‹åï¼Œè¿˜éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·æ‰**å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹è¿æ¥MySQL**ã€‚

1). åœ¨æ­¤ç”µè„‘ä¸Šï¼Œå³é”®é€‰æ‹©å±æ€§

![image-20210918161550977](Mysql-Learning-Local.assets/image-20210918161550977.png) 



2). ç‚¹å‡»å·¦ä¾§çš„ "é«˜çº§ç³»ç»Ÿè®¾ç½®"ï¼Œé€‰æ‹©ç¯å¢ƒå˜é‡

![image-20210918161646433](Mysql-Learning-Local.assets/image-20210918161646433.png) 



3). æ‰¾åˆ° Path ç³»ç»Ÿå˜é‡, ç‚¹å‡» "ç¼–è¾‘"

![image-20210918161803544](Mysql-Learning-Local.assets/image-20210918161803544.png) 



4). é€‰æ‹© "æ–°å»º" , å°†MySQL Serverçš„å®‰è£…ç›®å½•ä¸‹çš„binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡

![image-20210918161954696](Mysql-Learning-Local.assets/image-20210918161954696.png) 





### ï¼ˆ5ï¼‰MySQLå¸è½½æ–‡æ¡£-Windowsç‰ˆ

##### 1. åœæ­¢MySQLæœåŠ¡

win+R æ‰“å¼€è¿è¡Œï¼Œè¾“å…¥ services.msc ç‚¹å‡» "ç¡®å®š" è°ƒå‡ºç³»ç»ŸæœåŠ¡ã€‚

![image-20220209203115052](Mysql-Learning-Local.assets/image-20220209203115052.png) 

![image-20220209203253220](Mysql-Learning-Local.assets/image-20220209203253220.png) 





##### 2. å¸è½½MySQLç›¸å…³ç»„ä»¶

æ‰“å¼€æ§åˆ¶é¢æ¿ ---> å¸è½½ç¨‹åº ---> å¸è½½MySQLç›¸å…³æ‰€æœ‰ç»„ä»¶

![image-20220209203345746](Mysql-Learning-Local.assets/image-20220209203345746.png) 

![image-20220209203431405](Mysql-Learning-Local.assets/image-20220209203431405.png) 



##### 3. åˆ é™¤MySQLå®‰è£…ç›®å½•

![image-20220209205157019](Mysql-Learning-Local.assets/image-20220209205157019.png) 





##### 4. åˆ é™¤MySQLæ•°æ®ç›®å½•

æ•°æ®å­˜æ”¾ç›®å½•æ˜¯åœ¨ C:\ProgramData\MySQLï¼Œç›´æ¥å°†è¯¥æ–‡ä»¶å¤¹åˆ é™¤ã€‚

![image-20220209205401563](Mysql-Learning-Local.assets/image-20220209205401563.png) 





##### 5. å†æ¬¡æ‰“å¼€æœåŠ¡ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰MySQLå¸è½½æ®‹ç•™

å¦‚æœå·²å°†MySQLå¸è½½ï¼Œä½†æ˜¯é€šè¿‡ä»»åŠ¡ç®¡ç†å™¨--->æœåŠ¡ï¼ŒæŸ¥çœ‹åˆ°MySQLæœåŠ¡ä»ç„¶æ®‹ç•™åœ¨ç³»ç»ŸæœåŠ¡é‡Œã€‚

è§£å†³åŠæ³•ï¼š

â€‹	ä»¥ç®¡ç†å‘˜æ–¹å¼è¿è¡Œcmdå‘½ä»¤è¡Œï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

â€‹	sc delete æœåŠ¡åç§°ï¼ˆå¦‚MySQL80ï¼‰

è¿™æ ·å¯ä»¥å®ç°åˆ é™¤æœåŠ¡ã€‚



### ï¼ˆ6ï¼‰MysqlæœåŠ¡çš„==å¯åœ==

MySQLå®‰è£…å®Œæˆä¹‹åï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨MySQLæœåŠ¡ï¼Œæˆ‘ä»¬æ— éœ€æ‰‹åŠ¨å¯åŠ¨äº†ã€‚

å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„é€šè¿‡æŒ‡ä»¤å¯åŠ¨åœæ­¢ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdï¼Œè¿›å…¥å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š

1. net start mysql80
2. net stop mysql80

![image-20250412161955799](Mysql-Learning-Local.assets/image-20250412161955799.png)

```bash
net start mysql80

net stop mysql80
```

![image-20250412162155828](Mysql-Learning-Local.assets/image-20250412162155828.png)

> æ³¨æ„ ï¼š ä¸Šè¿°çš„ mysql80 æ˜¯æˆ‘ä»¬åœ¨å®‰è£…MySQLæ—¶ï¼Œé»˜è®¤æŒ‡å®šçš„mysqlçš„ç³»ç»ŸæœåŠ¡åï¼Œä¸æ˜¯å›º
>
> å®šçš„ï¼Œå¦‚æœæœªæ”¹åŠ¨ï¼Œé»˜è®¤å°±æ˜¯mysql80ã€‚
>
> ![image-20250412162539973](Mysql-Learning-Local.assets/image-20250412162539973.png)



### ï¼ˆ7ï¼‰==å®¢æˆ·ç«¯è¿æ¥==

#### â‘  æ–¹å¼ä¸€ï¼šä½¿ç”¨MySQLæä¾›çš„==å®¢æˆ·ç«¯å‘½ä»¤è¡Œå·¥å…·==

![image-20250412162840628](Mysql-Learning-Local.assets/image-20250412162840628.png)



#### â‘¡ æ–¹å¼äºŒï¼šä½¿ç”¨==ç³»ç»Ÿè‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·==æ‰§è¡ŒæŒ‡ä»¤

![image-20250412164104594](Mysql-Learning-Local.assets/image-20250412164104594.png)

```bash
mysql [-h 127.0.0.1] [-P 3306] -u root -p
å‚æ•°ï¼š
-h : MySQLæœåŠ¡æ‰€åœ¨çš„ä¸»æœºIP
-P : MySQLæœåŠ¡ç«¯å£å·ï¼Œ é»˜è®¤3306
-u : MySQLæ•°æ®åº“ç”¨æˆ·å
-p ï¼š MySQLæ•°æ®åº“ç”¨æˆ·åå¯¹åº”çš„å¯†ç 
```

[]å†…ä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœéœ€è¦**è¿æ¥è¿œç¨‹çš„MySQL**ï¼Œéœ€è¦åŠ ä¸Šè¿™ä¸¤ä¸ªå‚æ•°æ¥æŒ‡å®š**è¿œç¨‹ä¸»æœºIPã€ç«¯å£**ï¼Œå¦‚æœ

è¿æ¥æœ¬åœ°çš„MySQLï¼Œåˆ™æ— éœ€æŒ‡å®šè¿™ä¸¤ä¸ªå‚æ•°

![image-20250412162719092](Mysql-Learning-Local.assets/image-20250412162719092.png)

> ==æ³¨æ„==ï¼š ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œè¿æ¥æ—¶ï¼Œéœ€è¦å®‰è£…å®Œæ¯•å==é…ç½®PATHç¯å¢ƒå˜é‡==ã€‚





### ï¼ˆ8ï¼‰==æ•°æ®æ¨¡å‹==

#### â‘ å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰

æ¦‚å¿µï¼š**å»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ ç›¸äº’è¿æ¥çš„äºŒç»´è¡¨ç»„æˆçš„æ•°æ®åº“ã€‚**

è€Œæ‰€è°“äºŒç»´è¡¨ï¼ŒæŒ‡çš„æ˜¯ç”±è¡Œå’Œåˆ—ç»„æˆçš„è¡¨ï¼Œå¦‚ä¸‹å›¾ï¼ˆå°±ç±»ä¼¼äºExcelè¡¨æ ¼æ•°æ®ï¼Œæœ‰è¡¨å¤´ã€æœ‰åˆ—ã€æœ‰è¡Œï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸€åˆ—å…³è”å¦å¤–ä¸€ä¸ªè¡¨æ ¼ä¸­çš„æŸä¸€åˆ—æ•°æ®ï¼‰ã€‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„MySQLã€Oracleã€DB2ã€SQLServerè¿™äº›éƒ½æ˜¯å±äºå…³ç³»å‹æ•°æ®åº“ï¼Œé‡Œé¢éƒ½æ˜¯åŸºäºäºŒç»´è¡¨å­˜å‚¨æ•°æ®çš„ã€‚ç®€å•è¯´ï¼ŒåŸºäºäºŒç»´è¡¨å­˜å‚¨æ•°æ®çš„æ•°æ®åº“å°±æˆä¸ºå…³ç³»å‹æ•°æ®åº“ï¼Œä¸æ˜¯åŸºäºäºŒç»´è¡¨å­˜å‚¨æ•°æ®çš„æ•°æ®åº“ï¼Œå°±æ˜¯éå…³ç³»å‹æ•°æ®åº“ã€‚

![image-20250412163019353](Mysql-Learning-Local.assets/image-20250412163019353.png)

==ç‰¹ç‚¹==ï¼š

1. **ä½¿ç”¨è¡¨å­˜å‚¨æ•°æ®ï¼Œæ ¼å¼ç»Ÿä¸€ï¼Œä¾¿äºç»´æŠ¤**ã€‚

2. **ä½¿ç”¨SQLè¯­è¨€æ“ä½œï¼Œæ ‡å‡†ç»Ÿä¸€ï¼Œä½¿ç”¨æ–¹ä¾¿**ã€‚

   

#### â‘¡ æ•°æ®æ¨¡å‹

MySQLæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯åŸºäº**äºŒç»´è¡¨è¿›è¡Œæ•°æ®å­˜å‚¨**çš„ï¼Œå…·ä½“çš„ç»“æ„å›¾ä¸‹:

![image-20250412163050614](Mysql-Learning-Local.assets/image-20250412163050614.png)

-    æˆ‘ä»¬å¯ä»¥é€šè¿‡**MySQLå®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“ç®¡ç†ç³»ç»ŸDBMS**ï¼Œç„¶å**é€šè¿‡DBMSæ“ä½œæ•°æ®åº“**ã€‚
-    å¯ä»¥ä½¿ç”¨SQLè¯­å¥ï¼Œé€šè¿‡æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ“ä½œæ•°æ®åº“ï¼Œä»¥åŠæ“ä½œæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„åŠæ•°æ®ã€‚
-    ä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªæ•°æ®åº“ä¸­ä¹Ÿå¯ä»¥åŒ…å«å¤šå¼ è¡¨ï¼Œè€Œä¸€å¼ è¡¨ä¸­åˆå¯ä»¥åŒ…å«å¤šè¡Œè®°å½•ã€‚



### ï¼ˆ9ï¼‰å°ç»“

![image-20250412164857602](Mysql-Learning-Local.assets/image-20250412164857602.png)

# 2ã€ğŸŒŸ ==SQL==

![image-20250412164929549](Mysql-Learning-Local.assets/image-20250412164929549.png)

> å…¨ç§° ==Structured Query Language==ï¼Œ**ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€**ã€‚æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®šä¹‰äº†ä¸€å¥—æ“ä½œå…³ç³»å‹æ•°æ®åº“ç»Ÿä¸€**æ ‡å‡†** ã€‚

## 2.1 **SQLé€šç”¨è¯­æ³•**

åœ¨å­¦ä¹ å…·ä½“çš„SQLè¯­å¥ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹SQLè¯­è¨€çš„åŒäºè¯­æ³•ã€‚

1. SQLè¯­å¥å¯ä»¥**å•è¡Œæˆ–å¤šè¡Œä¹¦å†™ï¼Œä»¥==åˆ†å·ç»“å°¾==**ã€‚
2. SQLè¯­å¥å¯ä»¥ä½¿ç”¨**ç©ºæ ¼/ç¼©è¿›**æ¥å¢å¼ºè¯­å¥çš„å¯è¯»æ€§ã€‚
3. MySQLæ•°æ®åº“çš„SQLè¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œ**å…³é”®å­—å»ºè®®ä½¿ç”¨å¤§å†™**ã€‚
4. **æ³¨é‡Š**ï¼š
   1. å•è¡Œæ³¨é‡Šï¼š-- æ³¨é‡Šå†…å®¹ æˆ–  # æ³¨é‡Šå†…å®¹  
   2. å¤šè¡Œæ³¨é‡Šï¼š/* æ³¨é‡Šå†…å®¹ */



## 2.2 SQL==åˆ†ç±»==

![image-20250412165349554](Mysql-Learning-Local.assets/image-20250412165349554.png)

SQLè¯­å¥ï¼Œæ ¹æ®å…¶åŠŸèƒ½ï¼Œä¸»è¦åˆ†ä¸ºå››ç±»ï¼šDDLã€DMLã€DQLã€DCLã€‚

| **åˆ†ç±»** | **å…¨ç§°**                       | **è¯´æ˜**                                               |
| :------- | :----------------------------- | :----------------------------------------------------- |
| **DDL**  | **Data Definition Language**   | æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡(æ•°æ®åº“ï¼Œè¡¨ï¼Œå­—æ®µ)     |
| **DML**  | **Data Manipulation Language** | æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹         |
| **DQL**  | **Data Query Language**        | æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•                 |
| **DCL**  | **Data Control Language**      | æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™ |



## 2.3 ğŸŒŸDDL-æ•°æ®å®šä¹‰

Data Definition Languageï¼Œ**æ•°æ®å®šä¹‰è¯­è¨€**ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡(æ•°æ®åº“ï¼Œè¡¨ï¼Œå­—æ®µ) ã€‚

### ï¼ˆ1ï¼‰æ•°æ®åº“æ“ä½œ

![image-20250412165757574](Mysql-Learning-Local.assets/image-20250412165757574.png)

#### â‘ **æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“**

```sql
show databases;
```



#### â‘¡==æŸ¥è¯¢å½“å‰==æ•°æ®åº“

```sql
select database();
```



#### â‘¢åˆ›å»ºæ•°æ®åº“

```sql
create database [ if not exists ] æ•°æ®åº“å [ default charset å­—ç¬¦é›† ] [ collate æ’åº
è§„åˆ™ ] ;
```

###### æ¡ˆä¾‹ï¼š

**ç¬¬ä¸€æ­¥ï¼š**åˆ›å»ºä¸€ä¸ªitcastæ•°æ®åº“, ä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„å­—ç¬¦é›†ã€‚

```sql
create database itcast;
```

![image-20250412170117792](Mysql-Learning-Local.assets/image-20250412170117792.png)


åœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­ï¼Œ**ä¸èƒ½åˆ›å»ºä¸¤ä¸ªåç§°ç›¸åŒçš„æ•°æ®åº“ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™**ã€‚

![image-20250412170138354](Mysql-Learning-Local.assets/image-20250412170138354.png)

å¯ä»¥é€šè¿‡**if not exists** å‚æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ•°æ®åº“ä¸å­˜åœ¨, åˆ™åˆ›å»ºè¯¥æ•°æ®åº“ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ä¸åˆ›å»ºã€‚

```sql
create database if not extists itcast;
```

![image-20250412170235188](Mysql-Learning-Local.assets/image-20250412170235188.png)



**ç¬¬äºŒæ­¥ï¼š**åˆ›å»ºä¸€ä¸ªitheimaæ•°æ®åº“ï¼Œå¹¶ä¸”æŒ‡å®šå­—ç¬¦é›†

```sql
create database itheima default charset utf8mb4;
```

![image-20250412170303210](Mysql-Learning-Local.assets/image-20250412170303210.png)



#### â‘£åˆ é™¤æ•°æ®åº“

```sql
drop database [ if exists ] æ•°æ®åº“å ;
```

å¦‚æœåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®åº“ï¼Œå°†ä¼šæŠ¥é”™ã€‚æ­¤æ—¶ï¼Œå¯ä»¥åŠ ä¸Šå‚æ•° if exists ï¼Œå¦‚æœæ•°æ®åº“å­˜åœ¨ï¼Œå†æ‰§è¡Œåˆ é™¤ï¼Œå¦åˆ™ä¸æ‰§è¡Œåˆ é™¤ã€‚

![image-20250412170342138](Mysql-Learning-Local.assets/image-20250412170342138.png)



#### â‘¥åˆ‡æ¢æ•°æ®åº“

```sql
use æ•°æ®åº“å ;
```

æˆ‘ä»¬è¦æ“ä½œæŸä¸€ä¸ªæ•°æ®åº“ä¸‹çš„è¡¨æ—¶ï¼Œå°±éœ€è¦é€šè¿‡è¯¥æŒ‡ä»¤ï¼Œåˆ‡æ¢åˆ°å¯¹åº”çš„æ•°æ®åº“ä¸‹ï¼Œå¦åˆ™æ˜¯ä¸èƒ½æ“ä½œçš„ã€‚æ¯”å¦‚ï¼Œåˆ‡æ¢åˆ°itcastæ•°æ®ï¼Œæ‰§è¡Œå¦‚ä¸‹SQLï¼š

```sql
use itcast;
```



### ï¼ˆ2ï¼‰ğŸŒŸ ==è¡¨æ“ä½œ==

#### â‘ è¡¨æ“ä½œ-==æŸ¥è¯¢åˆ›å»º==

##### 1ï¼‰**æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨**-show

```sql
show tables;
```

æ¯”å¦‚,æˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°sysè¿™ä¸ªç³»ç»Ÿæ•°æ®åº“,å¹¶æŸ¥çœ‹ç³»ç»Ÿæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ç»“æ„ã€‚

```sql
use sys;

show tables;
```

![image-20250412172133340](Mysql-Learning-Local.assets/image-20250412172133340.png)

##### 2ï¼‰==æŸ¥çœ‹æŒ‡å®šè¡¨ç»“æ„==-desc

```sql
desc è¡¨å ;
```

é€šè¿‡è¿™æ¡æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°æŒ‡å®š**è¡¨çš„å­—æ®µï¼Œå­—æ®µçš„ç±»å‹ã€æ˜¯å¦å¯ä»¥ä¸ºNULLï¼Œæ˜¯å¦å­˜åœ¨é»˜è®¤å€¼**ç­‰ä¿¡æ¯ã€‚

![image-20250412172138510](Mysql-Learning-Local.assets/image-20250412172138510.png)

##### 3ï¼‰æŸ¥è¯¢æŒ‡å®šè¡¨çš„==å»ºè¡¨è¯­å¥==-show create table

```sql
show create table è¡¨å ;
```

é€šè¿‡è¿™æ¡æŒ‡ä»¤ï¼Œä¸»è¦æ˜¯ç”¨æ¥**æŸ¥çœ‹å»ºè¡¨è¯­å¥**çš„ï¼Œè€Œæœ‰éƒ¨åˆ†å‚æ•°æˆ‘ä»¬åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¹¶æœªæŒ‡å®šä¹Ÿä¼šæŸ¥è¯¢åˆ°ï¼Œå› ä¸ºè¿™éƒ¨åˆ†æ˜¯**æ•°æ®åº“çš„é»˜è®¤å€¼**ï¼Œå¦‚ï¼š==å­˜å‚¨å¼•æ“ã€å­—ç¬¦é›†==ç­‰ã€‚

![image-20250412172725663](Mysql-Learning-Local.assets/image-20250412172725663.png)

##### 4ï¼‰==åˆ›å»ºè¡¨ç»“æ„==-create table

```sql
CREATE TABLE è¡¨å(
    å­—æ®µ1 å­—æ®µ1ç±»å‹ [ COMMENT å­—æ®µ1æ³¨é‡Š ],
    å­—æ®µ2 å­—æ®µ2ç±»å‹ [COMMENT å­—æ®µ2æ³¨é‡Š ],
    å­—æ®µ3 å­—æ®µ3ç±»å‹ [COMMENT å­—æ®µ3æ³¨é‡Š ],
    ......
    å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š ]
) [ COMMENT è¡¨æ³¨é‡Š ] ;
```

![image-20250412171803304](Mysql-Learning-Local.assets/image-20250412171803304.png)

æ¯”å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€å¼ è¡¨ tb_user ï¼Œå¯¹åº”çš„ç»“æ„å¦‚ä¸‹ï¼Œé‚£ä¹ˆå»ºè¡¨è¯­å¥ä¸ºï¼š

![image-20250412171954943](Mysql-Learning-Local.assets/image-20250412171954943.png)

```sql
create table tb_user(
    id int comment 'ç¼–å·',
    name varchar(50) comment 'å§“å',
    age int comment 'å¹´é¾„',
    gender varchar(1) comment 'æ€§åˆ«'
) comment 'ç”¨æˆ·è¡¨';
```

![image-20250412172528974](Mysql-Learning-Local.assets/image-20250412172528974.png)



#### â‘¡ğŸŒŸè¡¨æ“ä½œ-==æ•°æ®ç±»å‹==

åœ¨ä¸Šè¿°çš„å»ºè¡¨è¯­å¥ä¸­ï¼Œæˆ‘ä»¬åœ¨æŒ‡å®šå­—æ®µçš„æ•°æ®ç±»å‹æ—¶ï¼Œç”¨åˆ°äº†int ï¼Œvarcharï¼Œé‚£ä¹ˆåœ¨MySQLä¸­é™¤äº†ä»¥ä¸Šçš„æ•°æ®ç±»å‹ï¼Œè¿˜æœ‰å“ªäº›å¸¸è§çš„æ•°æ®ç±»å‹å‘¢ï¼Ÿ æ¥ä¸‹æ¥,æˆ‘ä»¬å°±æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹MySQLçš„æ•°æ®ç±»å‹ã€‚MySQLä¸­çš„æ•°æ®ç±»å‹æœ‰å¾ˆå¤šï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š**æ•°å€¼ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€æ—¥æœŸæ—¶é—´ç±»å‹**ã€‚

##### 1ï¼‰æ•°å€¼ç±»å‹

![image-20250412172348715](Mysql-Learning-Local.assets/image-20250412172348715.png)



| ç±»å‹         | å¤§å°    | æœ‰ç¬¦å·(SIGNED)èŒƒå›´                                    | æ— ç¬¦å·(UNSIGNED)èŒƒå›´                                      | æè¿°               |
| ------------ | ------- | ----------------------------------------------------- | --------------------------------------------------------- | ------------------ |
| TINYINT      | 1 byte  | (-128ï¼Œ127)                                           | (0ï¼Œ255)                                                  | å°æ•´æ•°å€¼           |
| SMALLINT     | 2 bytes | (-32768ï¼Œ32767)                                       | (0ï¼Œ65535)                                                | å¤§æ•´æ•°å€¼           |
| MEDIUMINT    | 3 bytes | (-8388608ï¼Œ8388607)                                   | (0ï¼Œ16777215)                                             | å¤§æ•´æ•°å€¼           |
| INTæˆ–INTEGER | 4 bytes | (-2147483648ï¼Œ2147483647)                             | (0ï¼Œ4294967295)                                           | å¤§æ•´æ•°å€¼           |
| BIGINT       | 8 bytes | (-2^63ï¼Œ2^63-1)                                       | (0ï¼Œ2^64-1)                                               | æå¤§æ•´æ•°å€¼         |
| FLOAT        | 4 bytes | (-3.402823466 E+38ï¼Œ3.402823466351 E+38)              | 0 å’Œ (1.175494351 E-38ï¼Œ3.402823466 E+38)                 | å•ç²¾åº¦æµ®ç‚¹æ•°å€¼     |
| DOUBLE       | 8 bytes | (-1.7976931348623157 E+308ï¼Œ1.7976931348623157 E+308) | 0 å’Œ (2.2250738585072014 E-308ï¼Œ1.7976931348623157 E+308) | åŒç²¾åº¦æµ®ç‚¹æ•°å€¼     |
| DECIMAL      |         | ä¾èµ–äºM(ç²¾åº¦)å’ŒD(æ ‡åº¦)çš„å€¼                            | ä¾èµ–äºM(ç²¾åº¦)å’ŒD(æ ‡åº¦)çš„å€¼                                | å°æ•°å€¼(ç²¾ç¡®å®šç‚¹æ•°) |

> å¦‚:
>
> 1). å¹´é¾„å­—æ®µ -- **ä¸ä¼šå‡ºç°è´Ÿæ•°, è€Œä¸”äººçš„å¹´é¾„ä¸ä¼šå¤ªå¤§**
>
> â€‹	age tinyint ==unsigned==   å¹´é¾„ä¸ä¼šå‡ºç°è´Ÿæ•°ï¼Œåˆ™ç”¨æ— ç¬¦å·tinyint
>
> 2). åˆ†æ•° -- æ€»åˆ†100åˆ†, **æœ€å¤šå‡ºç°ä¸€ä½å°æ•°**
>
> â€‹	score double(4,1)



##### 2ï¼‰å­—ç¬¦ä¸²ç±»å‹

![image-20250412173804976](Mysql-Learning-Local.assets/image-20250412173804976.png)

| ç±»å‹       | å¤§å°                  | æè¿°                            |
| ---------- | --------------------- | ------------------------------- |
| CHAR       | 0-255 bytes           | **å®šé•¿å­—ç¬¦ä¸²**                  |
| VARCHAR    | 0-65535 bytes         | **å˜é•¿å­—ç¬¦ä¸²**                  |
| TINYBLOB   | 0-255 bytes           | ä¸è¶…è¿‡255ä¸ªå­—ç¬¦çš„**äºŒè¿›åˆ¶æ•°æ®** |
| TINYTEXT   | 0-255 bytes           | çŸ­æ–‡æœ¬å­—ç¬¦ä¸²                    |
| BLOB       | 0-65 535 bytes        | äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®          |
| TEXT       | 0-65 535 bytes        | **é•¿æ–‡æœ¬æ•°æ®**                  |
| MEDIUMBLOB | 0-16 777 215 bytes    | äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®    |
| MEDIUMTEXT | 0-16 777 215 bytes    | ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®                |
| LONGBLOB   | 0-4 294 967 295 bytes | äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®        |
| LONGTEXT   | 0-4 294 967 295 bytes | æå¤§æ–‡æœ¬æ•°æ®                    |

char ä¸ varchar éƒ½å¯ä»¥æè¿°å­—ç¬¦ä¸²ï¼Œ**charæ˜¯å®šé•¿å­—ç¬¦ä¸²**ï¼ŒæŒ‡å®šé•¿åº¦å¤šé•¿ï¼Œå°±å ç”¨å¤šå°‘ä¸ªå­—ç¬¦ï¼Œå’Œå­—æ®µå€¼çš„é•¿åº¦æ— å…³ ã€‚è€Œ**varcharæ˜¯å˜é•¿å­—ç¬¦ä¸²**ï¼ŒæŒ‡å®šçš„é•¿åº¦ä¸ºæœ€å¤§å ç”¨é•¿åº¦ ã€‚ç›¸å¯¹æ¥è¯´ï¼Œ**==charçš„æ€§èƒ½ä¼šæ›´é«˜äº›ã€‚==**ï¼ŒåŸå› æ˜¯**varcharä¼šæ ¹æ®å†…å®¹çš„å¤§å°è®¡ç®—éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œæ¶ˆè€—æ€§èƒ½**ã€‚

> â€‹	å¦‚ï¼š
>
> -  ç”¨æˆ·å username ------> ==é•¿åº¦ä¸å®š, æœ€é•¿ä¸ä¼šè¶…è¿‡50==
>   - username varchar(50)
> - æ€§åˆ« gender ---------> **å­˜å‚¨å€¼, ä¸æ˜¯ç”·,å°±æ˜¯å¥³**
>   - gender char(1)
> - æ‰‹æœºå· phone --------> **å›ºå®šé•¿åº¦ä¸º11**
>   - phone char(11)



##### 3ï¼‰æ—¥æœŸç±»å‹

![image-20250412174118563](Mysql-Learning-Local.assets/image-20250412174118563.png)

| ç±»å‹      | å¤§å° | èŒƒå›´                                       | æ ¼å¼                | æè¿°                     |
| --------- | ---- | ------------------------------------------ | ------------------- | ------------------------ |
| DATE      | 3    | 1000-01-01 è‡³ 9999-12-31                   | YYYY-MM-DD          | æ—¥æœŸå€¼                   |
| TIME      | 3    | -838:59:59 è‡³ 838:59:59                    | HH:MM:SS            | æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´         |
| YEAR      | 1    | 1901 è‡³ 2155                               | YYYY                | å¹´ä»½å€¼                   |
| DATETIME  | 8    | 1000-01-01 00:00:00 è‡³ 9999-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼         |
| TIMESTAMP | 4    | 1970-01-01 00:00:01 è‡³ 2038-01-19 03:14:07 | YYYY-MM-DD HH:MM:SS | æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³ |

> - ç”Ÿæ—¥å­—æ®µ birthday -**DATE**
>   - birthday date
> - åˆ›å»ºæ—¶é—´ **createtime**
>   - createtime datetime

#### â‘¢è¡¨æ“ä½œ-æ¡ˆä¾‹

![image-20250412174708771](Mysql-Learning-Local.assets/image-20250412174708771.png)

å¯¹åº”çš„å»ºè¡¨è¯­å¥å¦‚ä¸‹:

![image-20250412175024881](Mysql-Learning-Local.assets/image-20250412175024881.png)

```sql
create table emp(
    id int comment 'ç¼–å·',
    workno varchar(10) comment 'å·¥å·',
    name varchar(10) comment 'å§“å',
    gender char(1) comment 'æ€§åˆ«',
    age tinyint unsigned comment 'å¹´é¾„',
    idcard char(18) comment 'èº«ä»½è¯å·',
    entrydate date comment 'å…¥èŒæ—¶é—´'
) comment 'å‘˜å·¥è¡¨';
```

SQLè¯­å¥ç¼–å†™å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥åœ¨MySQLçš„å‘½ä»¤è¡Œä¸­æ‰§è¡ŒSQLï¼Œç„¶åä¹Ÿå¯ä»¥é€šè¿‡ **desc æŒ‡ä»¤æŸ¥è¯¢è¡¨ç»“æ„ä¿¡æ¯ï¼š**

![image-20250412174858556](Mysql-Learning-Local.assets/image-20250412174858556.png)

è¡¨ç»“æ„åˆ›å»ºå¥½äº†ï¼Œé‡Œé¢çš„nameå­—æ®µæ˜¯varcharç±»å‹ï¼Œæœ€å¤§é•¿åº¦ä¸º10ï¼Œä¹Ÿå°±æ„å‘³ç€å¦‚æœè¶…è¿‡10å°†ä¼šæŠ¥é”™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿®æ”¹è¿™ä¸ªå­—æ®µçš„ç±»å‹ æˆ– ä¿®æ”¹å­—æ®µçš„é•¿åº¦è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿæ¥ä¸‹æ¥å†æ¥è®²è§£**DDLè¯­å¥**ä¸­ï¼Œå¦‚ä½•æ“ä½œè¡¨å­—æ®µã€‚



#### â‘£è¡¨æ“ä½œ-==ä¿®æ”¹==-alter table

##### 1ï¼‰æ·»åŠ å­—æ®µ-add

![image-20250412180141970](Mysql-Learning-Local.assets/image-20250412180141970.png)

```sql
ALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹ (é•¿åº¦) [ COMMENT æ³¨é‡Š ] [ çº¦æŸ ];
```

æ¡ˆä¾‹:

ä¸ºempè¡¨å¢åŠ ä¸€ä¸ªæ–°çš„å­—æ®µâ€æ˜µç§°â€ä¸ºnicknameï¼Œç±»å‹ä¸ºvarchar(20)

```sql
ALTER TABLE emp ADD nickname varchar(20) COMMENT 'æ˜µç§°';
```



##### 2ï¼‰ä¿®æ”¹æ•°æ®ç±»å‹-modify

![image-20250412180327532](Mysql-Learning-Local.assets/image-20250412180327532.png)

```sql
ALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°æ•°æ®ç±»å‹ (é•¿åº¦);
```



##### 3ï¼‰ä¿®æ”¹å­—æ®µåå’Œå­—æ®µç±»å‹-change

```sql
ALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹ (é•¿åº¦) [ COMMENT æ³¨é‡Š ] [ çº¦æŸ ];
```

æ¡ˆä¾‹:

å°†empè¡¨çš„nicknameå­—æ®µä¿®æ”¹ä¸ºusernameï¼Œç±»å‹ä¸ºvarchar(30)

```sql
ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT 'æ˜µç§°';
```



##### 4ï¼‰åˆ é™¤å­—æ®µ-drop

![image-20250412180404849](Mysql-Learning-Local.assets/image-20250412180404849.png)

```sql
ALTER TABLE è¡¨å DROP å­—æ®µå;
```

æ¡ˆä¾‹:

å°†empè¡¨çš„å­—æ®µusernameåˆ é™¤

```sql
ALTER TABLE emp DROP username;
```



##### 5ï¼‰ä¿®æ”¹è¡¨å-rename  to

![image-20250412180437733](Mysql-Learning-Local.assets/image-20250412180437733.png)

```sql
ALTER TABLE è¡¨å RENAME TO æ–°è¡¨å;
```

æ¡ˆä¾‹:

å°†empè¡¨çš„è¡¨åä¿®æ”¹ä¸º employee

```sql
ALTER TABLE emp RENAME TO employee;
```



#### â‘¤è¡¨æ“ä½œåˆ é™¤-drop table

![image-20250412181043667](Mysql-Learning-Local.assets/image-20250412181043667.png)

##### 1ï¼‰åˆ é™¤è¡¨-drop

```sql
DROP TABLE [ IF EXISTS ] è¡¨å;
```

å¯é€‰é¡¹ IF EXISTS ä»£è¡¨ï¼Œåªæœ‰è¡¨åå­˜åœ¨æ—¶æ‰ä¼šåˆ é™¤è¯¥è¡¨ï¼Œè¡¨åä¸å­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œåˆ é™¤æ“ä½œ(å¦‚æœä¸

åŠ è¯¥å‚æ•°é¡¹ï¼Œåˆ é™¤ä¸€å¼ ä¸å­˜åœ¨çš„è¡¨ï¼Œæ‰§è¡Œå°†ä¼šæŠ¥é”™)ã€‚

æ¡ˆä¾‹:

å¦‚æœtb_userè¡¨å­˜åœ¨ï¼Œåˆ™åˆ é™¤tb_userè¡¨

```sql
DROP TABLE IF EXISTS tb_user;
```



##### 2ï¼‰åˆ é™¤æŒ‡å®šè¡¨, å¹¶é‡æ–°åˆ›å»ºè¡¨-druncate

**æ ¼å¼åŒ–è¡¨**

```sql
TRUNCATE TABLE è¡¨å;
```

> æ³¨æ„: åœ¨åˆ é™¤è¡¨çš„æ—¶å€™ï¼Œ==è¡¨ä¸­çš„å…¨éƒ¨æ•°æ®ä¹Ÿéƒ½ä¼šè¢«åˆ é™¤==ã€‚





### ï¼ˆ3ï¼‰å°ç»“

![image-20250412190200058](Mysql-Learning-Local.assets/image-20250412190200058.png)



## 2.4 å›¾å½¢åŒ–ç•Œé¢å·¥å…·

ä¸Šè¿°ï¼Œæˆ‘ä»¬å·²ç»è®²è§£äº†é€šè¿‡DDLè¯­å¥ï¼Œå¦‚ä½•æ“ä½œæ•°æ®åº“ã€æ“ä½œè¡¨ã€æ“ä½œè¡¨ä¸­çš„å­—æ®µï¼Œè€Œé€šè¿‡DDLè¯­å¥æ‰§

è¡Œåœ¨å‘½ä»¤è¿›è¡Œæ“ä½œï¼Œä¸»è¦å­˜åœ¨ä»¥ä¸‹ä¸¤ç‚¹é—®é¢˜ï¼š

â€‹	1).ä¼šå½±å“å¼€å‘æ•ˆç‡ ;

â€‹	2). ä½¿ç”¨èµ·æ¥ï¼Œå¹¶ä¸ç›´è§‚ï¼Œå¹¶ä¸æ–¹ä¾¿ ï¼›

æ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œä¼šå€ŸåŠ©äºMySQLçš„å›¾å½¢åŒ–ç•Œé¢ï¼Œæ¥ç®€åŒ–å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚è€Œç›®å‰

mysqlä¸»æµçš„å›¾å½¢åŒ–ç•Œé¢å·¥å…·ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š

![image-20250412190353228](Mysql-Learning-Local.assets/image-20250412190353228.png)

è€Œæœ¬æ¬¡è¯¾ç¨‹ä¸­ï¼Œé€‰æ‹©æœ€åä¸€ç§DataGripï¼Œè¿™ç§å›¾å½¢åŒ–ç•Œé¢å·¥å…·ï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œç•Œé¢æç¤ºæ›´åŠ å‹å¥½ï¼Œ

æ˜¯æˆ‘ä»¬ä½¿ç”¨MySQLçš„ä¸äºŒä¹‹é€‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹**DataGrip**è¯¥å¦‚ä½•å®‰è£…ã€ä½¿ç”¨ã€‚



### ï¼ˆ1ï¼‰å®‰è£…

#### â‘ æ‰¾åˆ°èµ„æ–™ä¸­å‡†å¤‡å¥½çš„å®‰è£…åŒ…ï¼ŒåŒå‡»å¼€å§‹å®‰è£…

![image-20250412191057103](Mysql-Learning-Local.assets/image-20250412191057103.png)

#### â‘¡ç‚¹å‡»nextï¼Œä¸€æ­¥ä¸€æ­¥çš„å®Œæˆå®‰è£…

![image-20250412191102737](Mysql-Learning-Local.assets/image-20250412191102737.png)

é€‰æ‹©DataGripçš„å®‰è£…ç›®å½•ï¼Œç„¶åé€‰æ‹©ä¸‹ä¸€æ­¥

![image-20250412191115366](Mysql-Learning-Local.assets/image-20250412191115366.png)

![image-20250412191125499](Mysql-Learning-Local.assets/image-20250412191125499.png)

ä¸‹ä¸€æ­¥ï¼Œæ‰§è¡Œå®‰è£…

![image-20250412191132385](Mysql-Learning-Local.assets/image-20250412191132385.png)

![image-20250412191142390](Mysql-Learning-Local.assets/image-20250412191142390.png)

### ï¼ˆ2ï¼‰ä½¿ç”¨

#### â‘ æ·»åŠ æ•°æ®æº

å‚è€ƒå›¾ç¤º, ä¸€æ­¥æ­¥æ“ä½œå³å¯

![image-20250412191149805](Mysql-Learning-Local.assets/image-20250412191149805.png)

é…ç½®ä»¥åŠé©±åŠ¨jaråŒ…ä¸‹è½½å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥ç‚¹å‡» "Test Connection" å°±å¯ä»¥æµ‹è¯•ï¼Œæ˜¯å¦å¯ä»¥è¿æ¥MySQLï¼Œå¦‚æœå‡ºç° "Successed"ï¼Œå°±è¡¨åè¿æ¥æˆåŠŸäº† ã€‚

![image-20250412191202311](Mysql-Learning-Local.assets/image-20250412191202311.png)



#### â‘¡å±•ç¤ºæ‰€æœ‰æ•°æ®åº“

è¿æ¥ä¸Šäº†MySQLæœåŠ¡ä¹‹åï¼Œå¹¶æœªå±•ç¤ºå‡ºæ‰€æœ‰çš„æ•°æ®åº“ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ï¼Œå±•ç¤ºæ‰€æœ‰çš„æ•°æ®åº“ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

![image-20250412191215187](Mysql-Learning-Local.assets/image-20250412191215187.png)



#### â‘¢åˆ›å»ºæ•°æ®åº“

![image-20250412191222201](Mysql-Learning-Local.assets/image-20250412191222201.png)



> æ³¨æ„:
>
> ä»¥ä¸‹==ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥åˆ›å»ºæ•°æ®åº“==ï¼š
>
> â€‹	 A. create **database** db01;
>
>  	B. create **schema** db01;



#### â‘£åˆ›å»ºè¡¨

åœ¨æŒ‡å®šçš„æ•°æ®åº“ä¸Šé¢å³é”®ï¼Œé€‰æ‹©new --> Table

![image-20250412191252606](Mysql-Learning-Local.assets/image-20250412191252606.png)

![image-20250412191259671](Mysql-Learning-Local.assets/image-20250412191259671.png)

#### â‘¤ä¿®æ”¹è¡¨ç»“æ„

åœ¨éœ€è¦ä¿®æ”¹çš„è¡¨ä¸Šï¼Œå³é”®é€‰æ‹© "Modify Table..."

![image-20250412191309681](Mysql-Learning-Local.assets/image-20250412191309681.png)

![image-20250412191318159](Mysql-Learning-Local.assets/image-20250412191318159.png)

å¦‚æœæƒ³å¢åŠ å­—æ®µï¼Œç›´æ¥ç‚¹å‡»+å·ï¼Œå½•å…¥å­—æ®µä¿¡æ¯ï¼Œç„¶åç‚¹å‡»Executeå³å¯ã€‚

å¦‚æœæƒ³åˆ é™¤å­—æ®µï¼Œç›´æ¥ç‚¹å‡»-å·ï¼Œå°±å¯ä»¥åˆ é™¤å­—æ®µï¼Œç„¶åç‚¹å‡»Executeå³å¯ã€‚

å¦‚æœæƒ³ä¿®æ”¹å­—æ®µï¼ŒåŒå‡»å¯¹åº”çš„å­—æ®µï¼Œä¿®æ”¹å­—æ®µä¿¡æ¯ï¼Œç„¶åç‚¹å‡»Executeå³å¯ã€‚

å¦‚æœè¦ä¿®æ”¹è¡¨åï¼Œæˆ–è¡¨çš„æ³¨é‡Šï¼Œç›´æ¥åœ¨è¾“å…¥æ¡†ä¿®æ”¹ï¼Œç„¶åç‚¹å‡»Executeå³å¯ã€‚



#### â‘¥åœ¨DataGripä¸­æ‰§è¡ŒSQLè¯­å¥

åœ¨æŒ‡å®šçš„æ•°æ®åº“ä¸Šï¼Œå³é”®ï¼Œé€‰æ‹© New --> Query Console

![image-20250412191330254](Mysql-Learning-Local.assets/image-20250412191330254.png)

ç„¶åå°±å¯ä»¥åœ¨æ‰“å¼€çš„Query Consoleæ§åˆ¶å°ï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸­ç¼–å†™SQLï¼Œæ‰§è¡ŒSQLã€‚

![image-20250412191336167](Mysql-Learning-Local.assets/image-20250412191336167.png)



## 2.5 ğŸŒŸDML-æ•°æ®æ“ä½œ

DMLè‹±æ–‡å…¨ç§°æ˜¯**Data Manipulation Language(==æ•°æ®æ“ä½œè¯­è¨€==)**ï¼Œç”¨æ¥å¯¹æ•°æ®åº“ä¸­è¡¨çš„æ•°æ®è®°å½•è¿›

è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œã€‚

- æ·»åŠ æ•°æ®ï¼ˆINSERTï¼‰
- ä¿®æ”¹æ•°æ®ï¼ˆUPDATEï¼‰
- åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰

### ï¼ˆ1ï¼‰æ·»åŠ æ•°æ®-insert

![image-20250412210251794](Mysql-Learning-Local.assets/image-20250412210251794.png)

#### â‘ ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®

```sql
INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...);
```

**æ¡ˆä¾‹:**  ç»™employeeè¡¨æ‰€æœ‰çš„å­—æ®µæ·»åŠ æ•°æ® ï¼›

```sql
insert into employee(id,workno,name,gender,age,idcard,entrydate)

values(1,'1','Itcast','ç”·',10,'123456789012345678','2000-01-01');
```

æ’å…¥æ•°æ®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼ï¼ŒæŸ¥è¯¢æ•°æ®åº“çš„æ•°æ®ï¼š

**A. æ–¹å¼ä¸€**

åœ¨å·¦ä¾§çš„è¡¨åä¸ŠåŒå‡»ï¼Œå°±å¯ä»¥æŸ¥çœ‹è¿™å¼ è¡¨çš„æ•°æ®ã€‚

![image-20250412205602957](Mysql-Learning-Local.assets/image-20250412205602957.png)

**B. æ–¹å¼äºŒ**

å¯ä»¥ç›´æ¥ä¸€æ¡æŸ¥è¯¢æ•°æ®çš„SQLè¯­å¥, è¯­å¥å¦‚ä¸‹:

```sql
select * from employee;
```

æ¡ˆä¾‹: ç»™employeeè¡¨æ‰€æœ‰çš„å­—æ®µæ·»åŠ æ•°æ®

æ‰§è¡Œå¦‚ä¸‹SQLï¼Œæ·»åŠ çš„å¹´é¾„å­—æ®µå€¼ä¸º-1ã€‚

```sql
insert into employee(id,workno,name,gender,age,idcard,entrydate)
values(1,'1','Itcast','ç”·',-1,'123456789012345678','2000-01-01');
```

æ‰§è¡Œä¸Šè¿°çš„SQLè¯­å¥æ—¶ï¼ŒæŠ¥é”™äº†ï¼Œå…·ä½“çš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š

![image-20250412205610876](Mysql-Learning-Local.assets/image-20250412205610876.png)

å› ä¸º employee è¡¨çš„**ageå­—æ®µç±»å‹ä¸º tinyint**ï¼Œè€Œä¸”è¿˜æ˜¯**æ— ç¬¦å·çš„ unsigned** ï¼Œæ‰€ä»¥**å–å€¼åªèƒ½åœ¨**

**0-255 ä¹‹é—´**ã€‚

![image-20250412205632479](Mysql-Learning-Local.assets/image-20250412205632479.png)



#### â‘¡ç»™==å…¨éƒ¨å­—æ®µ==æ·»åŠ æ•°æ®

```sql
INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...); 
```

æ¡ˆä¾‹ï¼šæ’å…¥æ•°æ®åˆ°employeeè¡¨ï¼Œå…·ä½“çš„SQLå¦‚ä¸‹ï¼š

```sql
insert into employee values(2,'2','å¼ æ— å¿Œ','ç”·',18,'123456789012345670','2005-01-
01');
```



#### â‘¢==æ‰¹é‡æ·»åŠ ==æ•°æ®

```sql
INSERT INTO è¡¨å (å­—æ®µå1, å­—æ®µå2, ...) VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼

1, å€¼2, ...) ;
```

```sql
INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...) ; 
```

æ¡ˆä¾‹ï¼šæ‰¹é‡æ’å…¥æ•°æ®åˆ°employeeè¡¨ï¼Œå…·ä½“çš„SQLå¦‚ä¸‹ï¼š

```sql
insert into employee values(3,'3','éŸ¦ä¸€ç¬‘','ç”·',38,'123456789012345670','2005-01-01'),(4,'4','èµµæ•','å¥³',18,'123456789012345670','2005-01-01');
```



> ==æ³¨æ„äº‹é¡¹==:
>
> - æ’å…¥æ•°æ®æ—¶ï¼ŒæŒ‡å®šçš„**å­—æ®µé¡ºåºéœ€è¦ä¸å€¼çš„é¡ºåºæ˜¯ä¸€ä¸€å¯¹åº”çš„**ã€‚
> - å­—ç¬¦ä¸²å’Œæ—¥æœŸå‹æ•°æ®åº”è¯¥åŒ…å«**åœ¨å¼•å·**ä¸­ã€‚
> - æ’å…¥çš„æ•°æ®å¤§å°ï¼Œåº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†…ã€‚



### ï¼ˆ2ï¼‰ä¿®æ”¹æ•°æ®-update

![image-20250412212450098](Mysql-Learning-Local.assets/image-20250412212450098.png)

ä¿®æ”¹æ•°æ®çš„å…·ä½“è¯­æ³•ä¸º:

```sql
UPDATE è¡¨å SET å­—æ®µå1 = å€¼1 , å­—æ®µå2 = å€¼2 , .... [ WHERE æ¡ä»¶ ] ;
```

æ¡ˆä¾‹:

A. ä¿®æ”¹idä¸º1çš„æ•°æ®ï¼Œå°†nameä¿®æ”¹ä¸ºitheima

```sql
update employee set name = 'itheima' where id = 1; 
```

B. ä¿®æ”¹idä¸º1çš„æ•°æ®, å°†nameä¿®æ”¹ä¸ºå°æ˜­, genderä¿®æ”¹ä¸º å¥³

```sql
update employee set name = 'å°æ˜­' , gender = 'å¥³' where id = 1; 
```

C. å°†æ‰€æœ‰çš„å‘˜å·¥å…¥èŒæ—¥æœŸä¿®æ”¹ä¸º 2008-01-01

```sql
update employee set entrydate = '2008-01-01';
```

> **æ³¨æ„äº‹é¡¹:**
>
> ä¿®æ”¹è¯­å¥çš„æ¡ä»¶å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¦‚æœ**æ²¡æœ‰æ¡ä»¶ï¼Œåˆ™ä¼šä¿®æ”¹æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°æ®**ã€‚





### ï¼ˆ3ï¼‰åˆ é™¤æ•°æ®-delete

åˆ é™¤æ•°æ®çš„å…·ä½“è¯­æ³•ä¸ºï¼š

```sql
DELETE FROM è¡¨å [ WHERE æ¡ä»¶ ] ;
```

æ¡ˆä¾‹:

A. åˆ é™¤genderä¸ºå¥³çš„å‘˜å·¥

```sql
delete from employee where gender = 'å¥³';
```

B. åˆ é™¤æ‰€æœ‰å‘˜å·¥

```sql
delete from employee;
```



> æ³¨æ„äº‹é¡¹:
>
> - DELETE è¯­å¥çš„æ¡ä»¶å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œåˆ™ä¼šåˆ é™¤æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°
>
>   æ®ã€‚
>
> - DELETE è¯­å¥ä¸èƒ½åˆ é™¤æŸä¸€ä¸ªå­—æ®µçš„å€¼(å¯ä»¥ä½¿ç”¨UPDATEï¼Œå°†è¯¥å­—æ®µå€¼ç½®ä¸ºNULLå³
>
>   å¯)ã€‚
>
> - å½“è¿›è¡Œåˆ é™¤å…¨éƒ¨æ•°æ®æ“ä½œæ—¶ï¼Œdatagripä¼šæç¤ºæˆ‘ä»¬ï¼Œè¯¢é—®æ˜¯å¦ç¡®è®¤åˆ é™¤ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»
>
>   Executeå³å¯ã€‚
>
> 



### ï¼ˆ4ï¼‰å°ç»“

![image-20250412212831041](Mysql-Learning-Local.assets/image-20250412212831041.png)



## 2.6 ğŸŒŸDQL-æ•°æ®æŸ¥è¯¢

DQLè‹±æ–‡å…¨ç§°æ˜¯**Data Query Language(æ•°æ®æŸ¥è¯¢è¯­è¨€)**ï¼Œæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°

å½•ã€‚

æŸ¥è¯¢å…³é”®å­—: SELECT

åœ¨ä¸€ä¸ªæ­£å¸¸çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œ**æŸ¥è¯¢æ“ä½œçš„é¢‘æ¬¡æ˜¯è¦è¿œé«˜äºå¢åˆ æ”¹çš„**ï¼Œå½“æˆ‘ä»¬å»è®¿é—®ä¼ä¸šå®˜ç½‘ã€ç”µå•†ç½‘ç«™ï¼Œåœ¨è¿™äº›ç½‘ç«™ä¸­æˆ‘ä»¬æ‰€çœ‹åˆ°çš„æ•°æ®ï¼Œå®é™…éƒ½æ˜¯éœ€è¦ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶å±•ç¤ºçš„ã€‚è€Œä¸”åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½è¿˜ä¼šæ¶‰åŠåˆ°æ¡ä»¶ã€æ’åºã€åˆ†é¡µç­‰æ“ä½œã€‚

![image-20250412213429594](Mysql-Learning-Local.assets/image-20250412213429594.png)

é‚£ä¹ˆï¼Œæœ¬å°èŠ‚æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„å°±æ˜¯å¦‚ä½•è¿›è¡Œæ•°æ®çš„æŸ¥è¯¢æ“ä½œã€‚ æˆ‘ä»¬å…ˆæ¥å®Œæˆå¦‚ä¸‹æ•°æ®å‡†å¤‡å·¥ä½œ:

```sql
drop table if exists employee;
create table emp(
    id int comment 'ç¼–å·',
    workno varchar(10) comment 'å·¥å·',
    name varchar(10) comment 'å§“å',
    gender char(1) comment 'æ€§åˆ«',
    age tinyint unsigned comment 'å¹´é¾„',
    idcard char(18) comment 'èº«ä»½è¯å·',
    workaddress varchar(50) comment 'å·¥ä½œåœ°å€',
    entrydate date comment 'å…¥èŒæ—¶é—´'
)comment 'å‘˜å·¥è¡¨';
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (1, '00001', 'æŸ³å²©666', 'å¥³', 20, '123456789012345678', 'åŒ—äº¬', '2000-01-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (2, '00002', 'å¼ æ— å¿Œ', 'ç”·', 18, '123456789012345670', 'åŒ—äº¬', '2005-09-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (3, '00003', 'éŸ¦ä¸€ç¬‘', 'ç”·', 38, '123456789712345670', 'ä¸Šæµ·', '2005-08-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (4, '00004', 'èµµæ•', 'å¥³', 18, '123456757123845670', 'åŒ—äº¬', '2009-12-01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (5, '00005', 'å°æ˜­', 'å¥³', 16, '123456769012345678', 'ä¸Šæµ·', '2007-07-01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (6, '00006', 'æ¨é€', 'ç”·', 28, '12345678931234567X', 'åŒ—äº¬', '2006-01-01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (7, '00007', 'èŒƒç‘¶', 'ç”·', 40, '123456789212345670', 'åŒ—äº¬', '2005-05-01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (8, '00008', 'é»›ç»®ä¸', 'å¥³', 38, '123456157123645670', 'å¤©æ´¥', '2015-05-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (9, '00009', 'èŒƒå‡‰å‡‰', 'å¥³', 45, '123156789012345678', 'åŒ—äº¬', '2010-04-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (10, '00010', 'é™ˆå‹è°…', 'ç”·', 53, '123456789012345670', 'ä¸Šæµ·', '2011-01-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (11, '00011', 'å¼ å£«è¯š', 'ç”·', 55, '123567897123465670', 'æ±Ÿè‹', '2015-05-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (12, '00012', 'å¸¸é‡æ˜¥', 'ç”·', 32, '123446757152345670', 'åŒ—äº¬', '2004-02-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (13, '00013', 'å¼ ä¸‰ä¸°', 'ç”·', 88, '123656789012345678', 'æ±Ÿè‹', '2020-11-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (14, '00014', 'ç­ç»', 'å¥³', 65, '123456719012345670', 'è¥¿å®‰', '2019-05-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (15, '00015', 'èƒ¡é’ç‰›', 'ç”·', 70, '12345674971234567X', 'è¥¿å®‰', '2018-04-
        01');
INSERT INTO emp (id, workno, name, gender, age, idcard, workaddress, entrydate)
VALUES (16, '00016', 'å‘¨èŠ·è‹¥', 'å¥³', 18, null, 'åŒ—äº¬', '2012-06-01');
```

å‡†å¤‡å®Œæ¯•åï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°empè¡¨ä¸­å‡†å¤‡çš„16æ¡æ•°æ®ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥å®ŒæˆDQLè¯­æ³•çš„å­¦ä¹ ã€‚



### ï¼ˆ1ï¼‰==åŸºæœ¬è¯­æ³•==

DQL æŸ¥è¯¢è¯­å¥ï¼Œè¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š

![image-20250412214157217](Mysql-Learning-Local.assets/image-20250412214157217.png)

```sql
SELECT
å­—æ®µåˆ—è¡¨
FROM
è¡¨ååˆ—è¡¨
WHERE
æ¡ä»¶åˆ—è¡¨
GROUP BY
åˆ†ç»„å­—æ®µåˆ—è¡¨
HAVING
åˆ†ç»„åæ¡ä»¶åˆ—è¡¨
ORDER BY
æ’åºå­—æ®µåˆ—è¡¨
LIMIT
åˆ†é¡µå‚æ•°
```

æˆ‘ä»¬åœ¨è®²è§£è¿™éƒ¨åˆ†å†…å®¹çš„æ—¶å€™ï¼Œä¼šå°†ä¸Šé¢çš„å®Œæ•´è¯­æ³•è¿›è¡Œæ‹†åˆ†ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

- åŸºæœ¬æŸ¥è¯¢ï¼ˆä¸å¸¦ä»»ä½•æ¡ä»¶ï¼‰
- æ¡ä»¶æŸ¥è¯¢ï¼ˆWHEREï¼‰
- **èšåˆå‡½æ•°**ï¼ˆcountã€maxã€minã€avgã€sumï¼‰
- åˆ†ç»„æŸ¥è¯¢ï¼ˆ**group by**ï¼‰
- æ’åºæŸ¥è¯¢ï¼ˆorder byï¼‰
- åˆ†é¡µæŸ¥è¯¢ï¼ˆlimitï¼‰



### ï¼ˆ2ï¼‰åŸºç¡€æŸ¥è¯¢

![image-20250412214245020](Mysql-Learning-Local.assets/image-20250412214245020.png)

åœ¨åŸºæœ¬æŸ¥è¯¢çš„DQLè¯­å¥ä¸­ï¼Œä¸å¸¦ä»»ä½•çš„æŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢çš„è¯­æ³•å¦‚ä¸‹ï¼š

#### â‘ æŸ¥è¯¢å¤šä¸ªå­—æ®µ

```sql
SELECT å­—æ®µ1, å­—æ®µ2, å­—æ®µ3 ... FROM è¡¨å ; 

SELECT * FROM è¡¨å ; 
```

> æ³¨æ„ :  * å·ä»£è¡¨æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼Œåœ¨å®é™…å¼€å‘ä¸­å°½é‡å°‘ç”¨ï¼ˆä¸ç›´è§‚ã€å½±å“æ•ˆç‡ï¼‰

#### â‘¡å­—æ®µè®¾ç½®åˆ«å

```sql
SELECT å­—æ®µ1 [ AS åˆ«å1 ] , å­—æ®µ2 [ AS åˆ«å2 ] ... FROM è¡¨å; 

SELECT å­—æ®µ1 [ åˆ«å1 ] , å­—æ®µ2 [ åˆ«å2 ] ... FROM è¡¨å; 
```



#### â‘¢å»é™¤é‡å¤è®°å½•

```sql
SELECT DISTINCT å­—æ®µåˆ—è¡¨ FROM è¡¨å; 
```



#### â‘£æ¡ˆä¾‹

A. æŸ¥è¯¢æŒ‡å®šå­—æ®µ name, workno, ageå¹¶è¿”å›

```sql
select name,workno,age from emp; 
```

B. æŸ¥è¯¢è¿”å›æ‰€æœ‰å­—æ®µ

```sql
select id ,workno,name,gender,age,idcard,workaddress,entrydate from emp; 

select *from emp; 
```

C. æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å·¥ä½œåœ°å€,èµ·åˆ«å

```sql
select workaddress as 'å·¥ä½œåœ°å€' from emp; 
-- aså¯ä»¥çœç•¥
select workaddress 'å·¥ä½œåœ°å€' from emp;
```

D. æŸ¥è¯¢å…¬å¸å‘˜å·¥çš„ä¸Šç­åœ°å€æœ‰å“ªäº›(ä¸è¦é‡å¤)

```sql
select distinct workaddress 'å·¥ä½œåœ°å€' from emp;
```



### ï¼ˆ3ï¼‰==æ¡ä»¶æŸ¥è¯¢==-where

![image-20250412215547181](Mysql-Learning-Local.assets/image-20250412215547181.png)

#### â‘ è¯­æ³•

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å WHERE æ¡ä»¶åˆ—è¡¨ ;
```

#### â‘¡æ¡ä»¶

å¸¸ç”¨çš„æ¯”è¾ƒè¿ç®—ç¬¦å¦‚ä¸‹:

![image-20250412215017001](Mysql-Learning-Local.assets/image-20250412215017001.png)

| **æ¯”è¾ƒè¿ç®—ç¬¦**      | **åŠŸèƒ½**                                 |
| :------------------ | :--------------------------------------- |
| >                   | å¤§äº                                     |
| >=                  | å¤§äºç­‰äº                                 |
| <                   | å°äº                                     |
| <=                  | å°äºç­‰äº                                 |
| =                   | ç­‰äº                                     |
| <> æˆ– !=            | ä¸ç­‰äº                                   |
| BETWEEN ... AND ... | åœ¨æŸä¸ªèŒƒå›´ä¹‹å†…(å«æœ€å°ã€æœ€å¤§å€¼)           |
| IN(...)             | åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€             |
| LIKE å ä½ç¬¦         | æ¨¡ç³ŠåŒ¹é…(_åŒ¹é…å•ä¸ªå­—ç¬¦, %åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦) |
| IS NULL             | æ˜¯NULL                                   |

å¸¸ç”¨çš„é€»è¾‘è¿ç®—ç¬¦å¦‚ä¸‹:

![image-20250412215039264](Mysql-Learning-Local.assets/image-20250412215039264.png)

| **é€»è¾‘è¿ç®—ç¬¦** | **åŠŸèƒ½**                   |
| :------------- | :------------------------- |
| AND æˆ– &&      | å¹¶ä¸”(å¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹)     |
| OR æˆ–          | æˆ–è€…(å¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹) |
| NOT æˆ– !       | é ,ä¸æ˜¯                   |

#### â‘¢æ¡ˆä¾‹

A. æŸ¥è¯¢å¹´é¾„ç­‰äº 88 çš„å‘˜å·¥

```sql
select * from emp where age = 88;
```

B. æŸ¥è¯¢å¹´é¾„å°äº 20 çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where age < 20;
```

C. æŸ¥è¯¢å¹´é¾„å°äºç­‰äº 20 çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where age <= 20; 
```

D. æŸ¥è¯¢æ²¡æœ‰èº«ä»½è¯å·çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where idcard is null; 
```

E. æŸ¥è¯¢æœ‰èº«ä»½è¯å·çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where idcard is not null; 
```

F. æŸ¥è¯¢å¹´é¾„ä¸ç­‰äº 88 çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where age != 88;

select * from emp where age <> 88;
```

G. æŸ¥è¯¢å¹´é¾„åœ¨15å²(åŒ…å«) åˆ° 20å²(åŒ…å«)ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where age >= 15 && age <= 20;

select * from emp where age >= 15 and age <= 20;

select * from emp where age between 15 and 20;
```

H. æŸ¥è¯¢æ€§åˆ«ä¸º å¥³ ä¸”å¹´é¾„å°äº 25å²çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where gender = 'å¥³' and age < 25; 
```

I. æŸ¥è¯¢å¹´é¾„ç­‰äº18 æˆ– 20 æˆ– 40 çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where age = 18 or age = 20 or age =40;

select * from emp where age in(18,20,40);
```

J. æŸ¥è¯¢å§“åä¸ºä¸¤ä¸ªå­—çš„å‘˜å·¥ä¿¡æ¯ _ %

```sql
select * from emp where name like '__'; 
```

K. æŸ¥è¯¢èº«ä»½è¯å·æœ€åä¸€ä½æ˜¯Xçš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where idcard like '%X';

select * from emp where idcard like '_________________X';
```



### ï¼ˆ4ï¼‰èšåˆæŸ¥è¯¢-count() ...

![image-20250412220717985](Mysql-Learning-Local.assets/image-20250412220717985.png)

#### â‘ ä»‹ç»

==å°†**ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“**ï¼Œè¿›è¡Œ**çºµå‘è®¡ç®—**==ã€‚

#### â‘¡å¸¸è§çš„èšåˆå‡½æ•°

![image-20250412220045037](Mysql-Learning-Local.assets/image-20250412220045037.png)

| **å‡½æ•°** | **åŠŸèƒ½** |
| :------- | :------- |
| count    | ç»Ÿè®¡æ•°é‡ |
| max      | æœ€å¤§å€¼   |
| min      | æœ€å°å€¼   |
| avg      | å¹³å‡å€¼   |
| sum      | æ±‚å’Œ     |

#### â‘¢è¯­æ³•

```sql
SELECT èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨) FROM è¡¨å ;
```

> æ³¨æ„ : **NULLå€¼**æ˜¯==ä¸å‚ä¸æ‰€æœ‰èšåˆå‡½æ•°è¿ç®—==çš„ã€‚



#### â‘£æ¡ˆä¾‹

A. ç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥æ•°é‡

```sql
select count(*) from emp; -- ç»Ÿè®¡çš„æ˜¯æ€»è®°å½•æ•°

select count(idcard) from emp; -- ç»Ÿè®¡çš„æ˜¯idcardå­—æ®µä¸ä¸ºnullçš„è®°å½•æ•°
```

å¯¹äºcountèšåˆå‡½æ•°ï¼Œ**ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ€»è®°å½•æ•°**ï¼Œè¿˜å¯ä»¥é€šè¿‡ count(æ•°å­—/å­—ç¬¦ä¸²)çš„å½¢å¼è¿›è¡Œç»Ÿè®¡

æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼š

```sql
select count(1) from emp; 
```



> å¯¹äºcount(*) ã€count(å­—æ®µ)ã€ count(1) çš„**å…·ä½“åŸç†**ï¼Œæˆ‘ä»¬åœ¨è¿›é˜¶ç¯‡ä¸­**SQLä¼˜åŒ–éƒ¨åˆ†**ä¼šè¯¦
>
> ç»†è®²è§£ï¼Œæ­¤å¤„å¤§å®¶åªéœ€è¦çŸ¥é“å¦‚ä½•ä½¿ç”¨å³å¯ã€‚

B. ç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„å¹³å‡å¹´é¾„

```sql
select avg(age) from emp; 
```

C. ç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„æœ€å¤§å¹´é¾„

```sql
select max(age) from emp; 
```

D. ç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„æœ€å°å¹´é¾„

```sql
select min(age) from emp; 
```

E. ç»Ÿè®¡è¥¿å®‰åœ°åŒºå‘˜å·¥çš„å¹´é¾„ä¹‹å’Œ

```sql
select sum(age) from emp where workaddress = 'è¥¿å®‰'; 
```



### ï¼ˆ5ï¼‰åˆ†ç»„æŸ¥è¯¢-group by

![image-20250412223722231](Mysql-Learning-Local.assets/image-20250412223722231.png)

#### â‘ è¯­æ³•

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å [ WHERE æ¡ä»¶ ] GROUP BY åˆ†ç»„å­—æ®µå [ HAVING åˆ†ç»„åè¿‡æ»¤æ¡ä»¶ ];
```

#### â‘¡ğŸŒŸ ==whereä¸havingåŒºåˆ«==

- æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯**åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤**ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ï¼Œ**ä¸å‚ä¸åˆ†ç»„**ï¼›è€Œ**havingæ˜¯åˆ†ç»„ä¹‹åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚**
- åˆ¤æ–­æ¡ä»¶ä¸åŒï¼š**whereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­**ï¼Œè€Œhavingå¯ä»¥ã€‚

> ==æ³¨æ„äº‹é¡¹==:
>
> - **åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸º==èšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µ==**ï¼ŒæŸ¥è¯¢**==å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰==**ã€‚
> - **æ‰§è¡Œé¡ºåº: where > èšåˆå‡½æ•° > having** ã€‚
> - æ”¯æŒ**å¤šå­—æ®µåˆ†ç»„,** å…·ä½“è¯­æ³•ä¸º : group by columnA,columnB



#### â‘¢æ¡ˆä¾‹

A. æ ¹æ®æ€§åˆ«åˆ†ç»„ , ç»Ÿè®¡ç”·æ€§å‘˜å·¥ å’Œ å¥³æ€§å‘˜å·¥çš„æ•°é‡

```sql
select gender, count(*) from emp group by gender ; 
```

B. æ ¹æ®æ€§åˆ«åˆ†ç»„ , ç»Ÿè®¡ç”·æ€§å‘˜å·¥ å’Œ å¥³æ€§å‘˜å·¥çš„**å¹³å‡å¹´é¾„**

```sql
select gender, avg(age) from emp group by gender ;
```

C. æŸ¥è¯¢å¹´é¾„å°äº45çš„å‘˜å·¥ , å¹¶æ ¹æ®å·¥ä½œåœ°å€åˆ†ç»„ , è·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº3çš„å·¥ä½œåœ°å€

```sql
select workaddress, count(*) as address_count from emp where age < 45 group by workaddress having address_count >= 3;
```

D. ç»Ÿè®¡å„ä¸ªå·¥ä½œåœ°å€ä¸Šç­çš„ç”·æ€§åŠå¥³æ€§å‘˜å·¥çš„æ•°é‡

```sql
select workaddress, gender, count(*) as 'æ•°é‡' from emp group by gender,workaddress
```



### ï¼ˆ6ï¼‰æ’åºæŸ¥è¯¢-order by

![image-20250412223958433](Mysql-Learning-Local.assets/image-20250412223958433.png)

æ’åºåœ¨æ—¥å¸¸å¼€å‘ä¸­æ˜¯éå¸¸å¸¸è§çš„ä¸€ä¸ªæ“ä½œï¼Œæœ‰å‡åºæ’åºï¼Œä¹Ÿæœ‰é™åºæ’åºã€‚

#### â‘ è¯­æ³•

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å ORDER BY å­—æ®µ1 æ’åºæ–¹å¼1 , å­—æ®µ2 æ’åºæ–¹å¼2 ; 
```



#### â‘¡æ’åºæ–¹å¼

- ASC : å‡åº(é»˜è®¤å€¼)
- DESC: é™åº

> ==æ³¨æ„äº‹é¡¹==ï¼š
>
> å¦‚æœæ˜¯å‡åº, å¯ä»¥ä¸æŒ‡å®šæ’åºæ–¹å¼ASCï¼Œ**é»˜è®¤å‡åº** ;
>
> å¦‚æœæ˜¯**å¤šå­—æ®µæ’åº**ï¼Œ**å½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº** ;



#### â‘¢æ¡ˆä¾‹

A. æ ¹æ®å¹´é¾„å¯¹å…¬å¸çš„å‘˜å·¥è¿›è¡Œå‡åºæ’åº

```sql
select * from emp order by age asc;

select * from emp order by age;
```

B. æ ¹æ®å…¥èŒæ—¶é—´, å¯¹å‘˜å·¥è¿›è¡Œé™åºæ’åº

```sql
select * from emp order by entrydate desc; 
```

C. æ ¹æ®å¹´é¾„å¯¹å…¬å¸çš„å‘˜å·¥è¿›è¡Œå‡åºæ’åº , å¹´é¾„ç›¸åŒ , å†æŒ‰ç…§å…¥èŒæ—¶é—´è¿›è¡Œé™åºæ’åº

```sql
select * from emp order by age asc , entrydate desc;
```



### ï¼ˆ7ï¼‰åˆ†é¡µæŸ¥è¯¢-limit

![image-20250412224125738](Mysql-Learning-Local.assets/image-20250412224125738.png)

åˆ†é¡µæ“ä½œåœ¨ä¸šåŠ¡ç³»ç»Ÿå¼€å‘æ—¶ï¼Œä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨ç½‘ç«™ä¸­çœ‹åˆ°çš„å„ç§å„æ ·çš„**åˆ†é¡µ**æ¡ï¼Œåå°

éƒ½éœ€è¦å€ŸåŠ©äºæ•°æ®åº“çš„åˆ†é¡µæ“ä½œã€‚

#### â‘ è¯­æ³•

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨å LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢è®°å½•æ•° ; 
```

> æ³¨æ„äº‹é¡¹:
>
> - èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ï¼Œ**èµ·å§‹ç´¢å¼•  = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰*  æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°**ã€‚
> - åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„**æ–¹è¨€**ï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„å®ç°ï¼Œ**MySQLä¸­æ˜¯LIMIT**ã€‚
> - å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œ**èµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥**ï¼Œç›´æ¥ç®€å†™ä¸º limit 10ã€‚

#### â‘¡æ¡ˆä¾‹

A. æŸ¥è¯¢ç¬¬1é¡µå‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º10æ¡è®°å½•

```sql
select * from emp limit 0,10;
select * from emp limit 10;
```

B. æŸ¥è¯¢ç¬¬2é¡µå‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º10æ¡è®°å½• -------->  **(é¡µç -1)*é¡µå±•ç¤ºè®°å½•æ•°**

```sql
select * from emp limit 10,10; 
```



### ï¼ˆ8ï¼‰æ¡ˆä¾‹

![image-20250412224227434](Mysql-Learning-Local.assets/image-20250412224227434.png)

#### â‘ æŸ¥è¯¢å¹´é¾„ä¸º20,21,22,23å²çš„å‘˜å·¥ä¿¡æ¯ã€‚

```sql
select * from emp where gender = 'å¥³' and age in(20,21,22,23); 
```

#### â‘¡æŸ¥è¯¢æ€§åˆ«ä¸º ç”· ï¼Œå¹¶ä¸”å¹´é¾„åœ¨ 20-40 å²(å«)ä»¥å†…çš„å§“åä¸ºä¸‰ä¸ªå­—çš„å‘˜å·¥ã€‚

```sql
select * from emp where gender = 'ç”·' and (age between 20 and 40) and name like
'___';
```

#### â‘¢ç»Ÿè®¡å‘˜å·¥è¡¨ä¸­, å¹´é¾„å°äº60å²çš„ , ç”·æ€§å‘˜å·¥å’Œå¥³æ€§å‘˜å·¥çš„äººæ•°ã€‚

```sql
select gender, count(*) from emp where age < 60 group by gender; 
```

#### â‘£æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å°äºç­‰äº35å²å‘˜å·¥çš„å§“åå’Œå¹´é¾„ï¼Œå¹¶å¯¹æŸ¥è¯¢ç»“æœæŒ‰å¹´é¾„å‡åºæ’åºï¼Œå¦‚æœå¹´é¾„ç›¸åŒæŒ‰å…¥èŒæ—¶é—´é™åºæ’åºã€‚

```sql
select name , age from emp where age <= 35 order by age asc , entrydate desc; 
```

#### â‘¤æŸ¥è¯¢æ€§åˆ«ä¸ºç”·ï¼Œä¸”å¹´é¾„åœ¨20-40 å²(å«)ä»¥å†…çš„å‰5ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå¯¹æŸ¥è¯¢çš„ç»“æœæŒ‰å¹´é¾„å‡åºæ’åºï¼Œå¹´é¾„ç›¸åŒæŒ‰å…¥èŒæ—¶é—´å‡åºæ’åºã€‚

```sql
select * from emp where gender = 'ç”·' and (age between 20 and 40) order by age asc ,
entrydate asc limit 5 ;
```



### ï¼ˆ9ï¼‰ğŸŒŸ ==æ‰§è¡Œé¡ºåº==

åœ¨è®²è§£DQLè¯­å¥çš„å…·ä½“è¯­æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»è®²è§£äº†DQLè¯­å¥çš„å®Œæ•´è¯­æ³•ï¼ŒåŠ**ç¼–å†™é¡ºåº**ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ¥è¯´æ˜çš„æ˜¯DQLè¯­å¥åœ¨æ‰§è¡Œæ—¶çš„**æ‰§è¡Œé¡ºåº**ï¼Œä¹Ÿå°±æ˜¯å…ˆæ‰§è¡Œé‚£ä¸€éƒ¨åˆ†ï¼Œåæ‰§è¡Œé‚£ä¸€éƒ¨åˆ†ã€‚

![image-20250412223251443](Mysql-Learning-Local.assets/image-20250412223251443.png)

éªŒè¯ï¼š

æŸ¥è¯¢å¹´é¾„å¤§äº15çš„å‘˜å·¥å§“åã€å¹´é¾„ï¼Œå¹¶æ ¹æ®å¹´é¾„è¿›è¡Œå‡åºæ’åºã€‚

```sql
select name , age from emp where age > 15 order by age asc;
```

åœ¨æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬ç»™empè¡¨èµ·ä¸€ä¸ªåˆ«å eï¼Œç„¶ååœ¨select åŠ whereä¸­ä½¿ç”¨è¯¥åˆ«åã€‚

```sql
select e.name , e.age from emp e where e.age > 15 order by age asc; 
```

æ‰§è¡Œä¸Šè¿°SQLè¯­å¥åï¼Œæˆ‘ä»¬çœ‹åˆ°ä¾ç„¶å¯ä»¥æ­£å¸¸çš„æŸ¥è¯¢åˆ°ç»“æœï¼Œæ­¤æ—¶å°±è¯´æ˜ï¼š **from å…ˆæ‰§è¡Œ, ç„¶å**

**where å’Œ select æ‰§è¡Œã€‚**é‚£ where å’Œ select åˆ°åº•å“ªä¸ªå…ˆæ‰§è¡Œå‘¢?

æ­¤æ—¶ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç»™selectåé¢çš„å­—æ®µèµ·åˆ«åï¼Œç„¶ååœ¨ where ä¸­ä½¿ç”¨è¿™ä¸ªåˆ«åï¼Œç„¶åçœ‹çœ‹æ˜¯å¦å¯

ä»¥æ‰§è¡ŒæˆåŠŸã€‚

```sql
select e.name ename , e.age eage from emp e where eage > 15 order by age asc; 
```

æ‰§è¡Œä¸Šè¿°SQLæŠ¥é”™äº†:

![image-20250412223259127](Mysql-Learning-Local.assets/image-20250412223259127.png)

ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®º: **from å…ˆæ‰§è¡Œï¼Œç„¶åæ‰§è¡Œ where ï¼Œ å†æ‰§è¡Œselect** ã€‚



æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ‰§è¡Œå¦‚ä¸‹SQLè¯­å¥ï¼ŒæŸ¥çœ‹æ‰§è¡Œæ•ˆæœï¼š

```sql
select e.name ename , e.age eage from emp e where e.age > 15 order by eage asc;
```

ç»“æœæ‰§è¡ŒæˆåŠŸã€‚ é‚£ä¹ˆä¹Ÿå°±éªŒè¯äº†: **order by æ˜¯åœ¨select è¯­å¥ä¹‹åæ‰§è¡Œçš„**ã€‚



ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°DQLè¯­å¥çš„æ‰§è¡Œé¡ºåºä¸ºï¼š **from ... where ... group by ...**

**having ... select ... order by ... limit ...**



### ï¼ˆ10ï¼‰æ€»ç»“

![image-20250412225219416](Mysql-Learning-Local.assets/image-20250412225219416.png)





## 2.7 ğŸŒŸDCL-æ•°æ®æ§åˆ¶

DCLè‹±æ–‡å…¨ç§°æ˜¯**Data Control Language**(æ•°æ®æ§åˆ¶è¯­è¨€)ï¼Œç”¨æ¥ç®¡ç†**æ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™ã€‚**

![image-20250412225320581](Mysql-Learning-Local.assets/image-20250412225320581.png)

### ï¼ˆ1ï¼‰ç®¡ç†ç”¨æˆ·-userè¡¨

![image-20250412231042396](Mysql-Learning-Local.assets/image-20250412231042396.png)

#### â‘ æŸ¥è¯¢ç”¨æˆ·

```sql
select * from mysql.user;
```

æŸ¥è¯¢çš„ç»“æœå¦‚ä¸‹:

![image-20250412225952730](Mysql-Learning-Local.assets/image-20250412225952730.png)

å…¶ä¸­ Hostä»£è¡¨**å½“å‰ç”¨æˆ·è®¿é—®çš„ä¸»æœº,** å¦‚æœ**==ä¸ºlocalhost, ä»…ä»£è¡¨åªèƒ½å¤Ÿåœ¨å½“å‰æœ¬æœºè®¿é—®==**ï¼Œæ˜¯ä¸å¯ä»¥è¿œç¨‹è®¿é—®çš„ã€‚ Userä»£è¡¨çš„æ˜¯**è®¿é—®è¯¥æ•°æ®åº“çš„ç”¨æˆ·å**ã€‚åœ¨MySQLä¸­éœ€è¦é€šè¿‡**Hostå’ŒUseræ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç”¨æˆ·**ã€‚

#### â‘¡åˆ›å»ºç”¨æˆ·

```sql
CREATE USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED BY 'å¯†ç '; 
```

#### â‘¢ ä¿®æ”¹ç”¨æˆ·å¯†ç 

```sql
ALTER USER 'ç”¨æˆ·å'@'ä¸»æœºå' IDENTIFIED WITH mysql_native_password BY 'æ–°å¯†ç ' ; 
```

#### â‘£åˆ é™¤ç”¨æˆ·

```sql
DROP USER 'ç”¨æˆ·å'@'ä¸»æœºå' ; 
```

æ³¨æ„äº‹é¡¹:

- åœ¨MySQLä¸­éœ€è¦é€šè¿‡ç”¨æˆ·å@ä¸»æœºåçš„æ–¹å¼ï¼Œæ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç”¨æˆ·ã€‚

- ä¸»æœºåå¯ä»¥ä½¿ç”¨ % é€šé…ã€‚
- è¿™ç±»SQLå¼€å‘äººå‘˜æ“ä½œçš„æ¯”è¾ƒå°‘ï¼Œä¸»è¦æ˜¯DBAï¼ˆ Database Administrator æ•°æ®åº“ç®¡ç†å‘˜ï¼‰ä½¿ç”¨ã€‚



#### â‘¤æ¡ˆä¾‹

A. åˆ›å»ºç”¨æˆ·itcast, åªèƒ½å¤Ÿåœ¨**å½“å‰ä¸»æœº**localhostè®¿é—®, å¯†ç 123456;

```sql
create user 'itcast'@'localhost' identified by '123456'; 
```

B. åˆ›å»ºç”¨æˆ·heima, å¯ä»¥åœ¨**ä»»æ„ä¸»æœº**è®¿é—®è¯¥æ•°æ®åº“, å¯†ç 123456;

```sql
create user 'heima'@'%' identified by '123456'; 
```

C. ä¿®æ”¹ç”¨æˆ·heimaçš„è®¿é—®å¯†ç ä¸º1234;

```sql
alter user 'heima'@'%' identified with mysql_native_password by '1234'; 
```

D. åˆ é™¤ itcast@localhost ç”¨æˆ·

```sql
drop user 'itcast'@'localhost';
```



### ï¼ˆ2ï¼‰æƒé™æ§åˆ¶

MySQLä¸­å®šä¹‰äº†å¾ˆå¤šç§æƒé™ï¼Œä½†æ˜¯å¸¸ç”¨çš„å°±ä»¥ä¸‹å‡ ç§ï¼š

![image-20250412231209734](Mysql-Learning-Local.assets/image-20250412231209734.png)

ä¸Šè¿°åªæ˜¯ç®€å•ç½—åˆ—äº†å¸¸è§çš„å‡ ç§æƒé™æè¿°ï¼Œå…¶ä»–æƒé™æè¿°åŠå«ä¹‰ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒ[**å®˜æ–¹æ–‡æ¡£**](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html)ã€‚



![image-20250412231719322](Mysql-Learning-Local.assets/image-20250412231719322.png)

![image-20250412225931680](Mysql-Learning-Local.assets/image-20250412225931680.png)



| **æƒé™**            | **è¯´æ˜**           |
| :------------------ | :----------------- |
| ALL, ALL PRIVILEGES | æ‰€æœ‰æƒé™           |
| SELECT              | æŸ¥è¯¢æ•°æ®           |
| INSERT              | æ’å…¥æ•°æ®           |
| UPDATE              | ä¿®æ”¹æ•°æ®           |
| DELETE              | åˆ é™¤æ•°æ®           |
| ALTER               | ä¿®æ”¹è¡¨             |
| DROP                | åˆ é™¤æ•°æ®åº“/è¡¨/è§†å›¾ |
| CREATE              | åˆ›å»ºæ•°æ®åº“/è¡¨      |



#### â‘  æŸ¥è¯¢æƒé™-show grants 

```sql
SHOW GRANTS FOR 'ç”¨æˆ·å'@'ä¸»æœºå' ; 
```

#### â‘¡ æˆäºˆæƒé™-grant

```sql
GRANT æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å TO 'ç”¨æˆ·å'@'ä¸»æœºå'; 
```

#### â‘¢æ’¤é”€æƒé™-revoke

```sql
REVOKE æƒé™åˆ—è¡¨ ON æ•°æ®åº“å.è¡¨å FROM 'ç”¨æˆ·å'@'ä¸»æœºå'; 
```

> æ³¨æ„äº‹é¡¹ï¼š
>
> - å¤šä¸ªæƒé™ä¹‹é—´ï¼Œä½¿ç”¨é€—å·åˆ†éš”
> - æˆæƒæ—¶ï¼Œ æ•°æ®åº“åå’Œè¡¨åå¯ä»¥ä½¿ç”¨ * è¿›è¡Œé€šé…ï¼Œä»£è¡¨æ‰€æœ‰ã€‚



#### â‘£æ¡ˆä¾‹

A. æŸ¥è¯¢ 'heima'@'%' ç”¨æˆ·çš„æƒé™

```sql
show grants for 'heima'@'%'; 
```

![image-20250412231454380](Mysql-Learning-Local.assets/image-20250412231454380.png)

B. æˆäºˆ 'heima'@'%' ç”¨æˆ·**itcastæ•°æ®åº“æ‰€æœ‰è¡¨çš„æ‰€æœ‰æ“ä½œ**æƒé™

```sql
grant all on itcast.* to 'heima'@'%'; 
```

![image-20250412231532469](Mysql-Learning-Local.assets/image-20250412231532469.png)

C. æˆäºˆ 'heima'@'%' ç”¨æˆ·==æ‰€æœ‰æ•°æ®åº“æ‰€æœ‰è¡¨çš„æ‰€æœ‰æ“ä½œ==æƒé™

```sql
grant all on *.* to 'heima'@'%'; 
```

D. æ’¤é”€ 'heima'@'%' ç”¨æˆ·çš„itcastæ•°æ®åº“çš„æ‰€æœ‰æƒé™

```sql
revoke all on itcast.* from 'heima'@'%';
```

![image-20250412231619224](Mysql-Learning-Local.assets/image-20250412231619224.png)



### ï¼ˆ3ï¼‰å°ç»“

![image-20250413153608736](Mysql-Learning-Local.assets/image-20250413153608736.png)



# 3ã€å‡½æ•°

å‡½æ•° **æ˜¯æŒ‡ä¸€æ®µå¯ä»¥ç›´æ¥è¢«å¦ä¸€æ®µç¨‹åºè°ƒç”¨çš„ç¨‹åºæˆ–ä»£ç **ã€‚ ä¹Ÿå°±æ„å‘³ç€ï¼Œè¿™ä¸€æ®µç¨‹åºæˆ–ä»£ç åœ¨MySQLä¸­å·²ç»ç»™æˆ‘ä»¬æä¾›äº†ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨åˆé€‚çš„ä¸šåŠ¡åœºæ™¯è°ƒç”¨å¯¹åº”çš„å‡½æ•°å®Œæˆå¯¹åº”çš„ä¸šåŠ¡éœ€æ±‚å³å¯ã€‚ é‚£ä¹ˆï¼Œå‡½æ•°åˆ°åº•åœ¨å“ªå„¿ä½¿ç”¨å‘¢ï¼Ÿ

æˆ‘ä»¬å…ˆæ¥çœ‹ä¸¤ä¸ªåœºæ™¯ï¼š

![image-20250413153934435](Mysql-Learning-Local.assets/image-20250413153934435.png)



- åœ¨ä¼ä¸šçš„OAæˆ–å…¶ä»–çš„äººåŠ›ç³»ç»Ÿä¸­ï¼Œç»å¸¸ä¼šæä¾›çš„æœ‰è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œæ¯ä¸€ä¸ªå‘˜å·¥ç™»å½•ä¸Šæ¥ä¹‹åéƒ½èƒ½å¤Ÿçœ‹åˆ°å½“å‰å‘˜å·¥å…¥èŒçš„å¤©æ•°ã€‚ è€Œåœ¨æ•°æ®åº“ä¸­ï¼Œå­˜å‚¨çš„éƒ½æ˜¯å…¥èŒæ—¥æœŸï¼Œå¦‚ 2000-11-12ï¼Œé‚£å¦‚æœå¿«é€Ÿè®¡ç®—å‡ºå¤©æ•°å‘¢ï¼Ÿ
- åœ¨åšæŠ¥è¡¨è¿™ç±»çš„ä¸šåŠ¡éœ€æ±‚ä¸­,æˆ‘ä»¬è¦å±•ç¤ºå‡ºå­¦å‘˜çš„åˆ†æ•°ç­‰çº§åˆ†å¸ƒã€‚è€Œåœ¨æ•°æ®åº“ä¸­ï¼Œå­˜å‚¨çš„æ˜¯å­¦ç”Ÿçš„åˆ†æ•°å€¼ï¼Œå¦‚98/75ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤å®šåˆ†æ•°çš„ç­‰çº§å‘¢ï¼Ÿ



å…¶å®ï¼Œä¸Šè¿°çš„è¿™ä¸€ç±»çš„éœ€æ±‚å‘¢ï¼Œæˆ‘ä»¬é€šè¿‡MySQLä¸­çš„å‡½æ•°éƒ½å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç° ã€‚

MySQLä¸­çš„å‡½æ•°ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å››ç±»ï¼š **å­—ç¬¦ä¸²å‡½æ•°ã€æ•°å€¼å‡½æ•°ã€æ—¥æœŸå‡½æ•°ã€æµç¨‹å‡½æ•°ã€‚**



## 3.1 å­—ç¬¦ä¸²å‡½æ•°

### ï¼ˆ1ï¼‰å¸¸ç”¨å­—ç¬¦ä¸²å‡½æ•°

MySQLä¸­å†…ç½®äº†å¾ˆå¤šå­—ç¬¦ä¸²å‡½æ•°ï¼Œå¸¸ç”¨çš„å‡ ä¸ªå¦‚ä¸‹ï¼š

![image-20250413161340185](Mysql-Learning-Local.assets/image-20250413161340185.png)

![image-20250413154723587](Mysql-Learning-Local.assets/image-20250413154723587.png)

| **å‡½æ•°**                 | **åŠŸèƒ½**                                                  |
| :----------------------- | :-------------------------------------------------------- |
| CONCAT(S1,S2,...Sn)      | å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå°†S1ï¼ŒS2ï¼Œ... Snæ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²              |
| LOWER(str)               | å°†å­—ç¬¦ä¸²strå…¨éƒ¨è½¬ä¸ºå°å†™                                   |
| UPPER(str)               | å°†å­—ç¬¦ä¸²strå…¨éƒ¨è½¬ä¸ºå¤§å†™                                   |
| LPAD(str,n,pad)          | å·¦å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦ |
| RPAD(str,n,pad)          | å³å¡«å……ï¼Œç”¨å­—ç¬¦ä¸²padå¯¹strçš„å³è¾¹è¿›è¡Œå¡«å……ï¼Œè¾¾åˆ°nä¸ªå­—ç¬¦ä¸²é•¿åº¦ |
| TRIM(str)                | å»æ‰å­—ç¬¦ä¸²==å¤´éƒ¨==å’Œ==å°¾éƒ¨==çš„ç©ºæ ¼                        |
| SUBSTRING(str,start,len) | è¿”å›ä»å­—ç¬¦ä¸²strä»startä½ç½®èµ·çš„lenä¸ªé•¿åº¦çš„å­—ç¬¦ä¸²           |



### ï¼ˆ2ï¼‰æ¼”ç¤ºå¦‚ä¸‹

#### A. ==concat== : å­—ç¬¦ä¸²æ‹¼æ¥

```sql
select concat('Hello' , ' MySQL'); 
```

#### B. ==lower== : å…¨éƒ¨è½¬å°å†™

```sql
select lower('Hello'); 
```

#### C. ==upper== : å…¨éƒ¨è½¬å¤§å†™

```sql
select upper('Hello'); 
```

#### D. ==lpad== : å·¦å¡«å……

```sql
select lpad('01', 5, '-'); 
```

#### E. ==rpad== : å³å¡«å……

```sql
select rpad('01', 5, '-'); 
```

#### F. ==trim== : å»é™¤ç©ºæ ¼

```sql
select trim(' Hello MySQL '); 
```

#### G. ==substring== : æˆªå–å­å­—ç¬¦ä¸²

```sql
select substring('Hello MySQL',1,5);
```



### ï¼ˆ3ï¼‰æ¡ˆä¾‹

ç”±äºä¸šåŠ¡éœ€æ±‚å˜æ›´ï¼Œä¼ä¸šå‘˜å·¥çš„å·¥å·ï¼Œç»Ÿä¸€ä¸º5ä½æ•°ï¼Œç›®å‰ä¸è¶³5ä½æ•°çš„å…¨éƒ¨åœ¨å‰é¢è¡¥0ã€‚æ¯”å¦‚ï¼š 1å·å‘˜å·¥çš„å·¥å·åº”è¯¥ä¸º00001ã€‚

![image-20250413161559888](Mysql-Learning-Local.assets/image-20250413161559888.png)

```sql
update emp set workno = lpad(workno, 5, '0');
```

å¤„ç†å®Œæ¯•å, å…·ä½“çš„æ•°æ®ä¸º:

![image-20250413161610571](Mysql-Learning-Local.assets/image-20250413161610571.png)



## 3.2 æ•°å€¼å‡½æ•°

### ï¼ˆ1ï¼‰å¸¸è§æ•°å€¼å‡½æ•°

å¸¸è§çš„æ•°å€¼å‡½æ•°å¦‚ä¸‹ï¼š

![image-20250413162032863](Mysql-Learning-Local.assets/image-20250413162032863.png)

![image-20250413155146707](Mysql-Learning-Local.assets/image-20250413155146707.png)

| **å‡½æ•°**   | **åŠŸèƒ½**                           |
| :--------- | :--------------------------------- |
| CEIL(x)    | å‘ä¸Šå–æ•´                           |
| FLOOR(x)   | å‘ä¸‹å–æ•´                           |
| MOD(x,y)   | è¿”å›x/yçš„æ¨¡                        |
| RAND()     | è¿”å›0~1å†…çš„éšæœºæ•°                  |
| ROUND(x,y) | æ±‚å‚æ•°xçš„å››èˆäº”å…¥çš„å€¼ï¼Œä¿ç•™yä½å°æ•° |

### ï¼ˆ2ï¼‰æ¼”ç¤ºå¦‚ä¸‹

#### A. ==ceil==ï¼šå‘ä¸Šå–æ•´

```sql
select ceil(1.1); 
```

#### B. ==floor==ï¼šå‘ä¸‹å–æ•´

```sql
select floor(1.9); 
```

#### C. ==mod==ï¼šå–æ¨¡

```sql
select mod(7,4); 
```

#### D. ==rand==ï¼šè·å–éšæœºæ•°-0åˆ°1ä¹‹é—´

```sql
select rand(); 
```

#### E. ==round==ï¼šå››èˆäº”å…¥

```sql
select round(2.344,2);  #2.34
select round(2.345,2);  #2.35
```



### ï¼ˆ3ï¼‰æ¡ˆä¾‹

é€šè¿‡æ•°æ®åº“çš„å‡½æ•°ï¼Œ**ç”Ÿæˆä¸€ä¸ªå…­ä½æ•°çš„éšæœºéªŒè¯ç **ã€‚

æ€è·¯ï¼š è·å–éšæœºæ•°å¯ä»¥é€šè¿‡**rand()å‡½æ•°**ï¼Œä½†æ˜¯è·å–å‡ºæ¥çš„éšæœºæ•°æ˜¯åœ¨0-1ä¹‹é—´çš„ï¼Œæ‰€ä»¥å¯ä»¥**åœ¨å…¶åŸºç¡€ä¸Šä¹˜ä»¥1000000**ï¼Œç„¶å**èˆå¼ƒå°æ•°éƒ¨åˆ†**ï¼Œå¦‚æœé•¿åº¦ä¸è¶³6ä½ï¼Œè¡¥0ï¼ˆå·¦ä¾§è¡¥0ï¼Œæ‰€ä»¥ä½¿ç”¨lpadï¼Œå³ä¾§åˆ™ä½¿ç”¨rpadï¼‰

```sql
select lpad(round(rand()*1000000 , 0), 6, '0');
```



## 3.3 æ—¥æœŸå‡½æ•°

### ï¼ˆ1ï¼‰å¸¸è§æ—¥æœŸå‡½æ•°

![image-20250413162454158](Mysql-Learning-Local.assets/image-20250413162454158.png)

å¸¸è§çš„æ—¥æœŸå‡½æ•°å¦‚ä¸‹ï¼š

![image-20250413155949307](Mysql-Learning-Local.assets/image-20250413155949307.png)

| **å‡½æ•°**                           | **åŠŸèƒ½**                                          |
| :--------------------------------- | :------------------------------------------------ |
| CURDATE()                          | è¿”å›å½“å‰æ—¥æœŸ                                      |
| CURTIME()                          | è¿”å›å½“å‰æ—¶é—´                                      |
| NOW()                              | è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´                                |
| YEAR(date)                         | è·å–æŒ‡å®šdateçš„å¹´ä»½                                |
| MONTH(date)                        | è·å–æŒ‡å®šdateçš„æœˆä»½                                |
| DAY(date)                          | è·å–æŒ‡å®šdateçš„æ—¥æœŸ                                |
| DATE_ADD(date, INTERVAL expr type) | è¿”å›ä¸€ä¸ªæ—¥æœŸ/æ—¶é—´å€¼åŠ ä¸Šä¸€ä¸ªæ—¶é—´é—´éš”expråçš„æ—¶é—´å€¼ |
| DATEDIFF(date1,date2)              | è¿”å›èµ·å§‹æ—¶é—´date1 å’Œ ç»“æŸæ—¶é—´date2ä¹‹é—´çš„å¤©æ•°      |

### ï¼ˆ2ï¼‰æ¼”ç¤ºå¦‚ä¸‹

#### A. ==curdate==ï¼šå½“å‰æ—¥æœŸ

```sql
select curdate(); 
```

#### B. ==curtime==ï¼šå½“å‰æ—¶é—´

```sql
select curtime(); 
```

#### C. ==now==ï¼šå½“å‰æ—¥æœŸå’Œæ—¶é—´

```sql
select now(); 
```

#### D. ==YEAR , MONTH , DAY==ï¼š**å½“å‰å¹´ã€æœˆã€æ—¥**

```sql
select YEAR(now());
select MONTH(now());
select DAY(now());
```

#### E. ==date_add==ï¼šå¢åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”-INTERVAL

```sql
select date_add(now(), INTERVAL 70 YEAR );
```

#### F. ==datediff==ï¼šè·å–ä¸¤ä¸ªæ—¥æœŸç›¸å·®çš„å¤©æ•°

```sql
select datediff('2021-10-01', '2021-12-01');  # -61
select datediff('2021-12-01', '2021-10-01');  # 61
```

### ï¼ˆ3ï¼‰æ¡ˆä¾‹

æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å…¥èŒå¤©æ•°ï¼Œå¹¶æ ¹æ®å…¥èŒå¤©æ•°å€’åºæ’åºã€‚

æ€è·¯ï¼š å…¥èŒå¤©æ•°ï¼Œå°±æ˜¯é€šè¿‡å½“å‰æ—¥æœŸ - å…¥èŒæ—¥æœŸï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨**datediffå‡½æ•°**æ¥å®Œæˆã€‚

```sql
select name, datediff(curdate(), entrydate) as 'entrydays' from emp order by entrydays desc;
```



## 3.4 æµç¨‹å‡½æ•°

æµç¨‹å‡½æ•°ä¹Ÿæ˜¯å¾ˆå¸¸ç”¨çš„ä¸€ç±»å‡½æ•°ï¼Œå¯ä»¥åœ¨SQLè¯­å¥ä¸­å®ç°æ¡ä»¶ç­›é€‰ï¼Œä»è€Œæé«˜è¯­å¥çš„æ•ˆç‡ã€‚

### ï¼ˆ1ï¼‰å¸¸è§æµç¨‹å‡½æ•°

![image-20250413160625835](Mysql-Learning-Local.assets/image-20250413160625835.png)

| **å‡½æ•°**                                                     | **åŠŸèƒ½**                                                     |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| IF(value , t , f)                                            | å¦‚æœvalueä¸ºtrueï¼Œåˆ™è¿”å›tï¼Œå¦åˆ™è¿”å›f                          |
| IFNULL(value1 , value2)                                      | å¦‚æœvalue1ä¸ä¸ºç©ºï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2                 |
| CASE WHEN [ val1 ] THEN [res1] ...ELSE [ default ] END       | **å¦‚æœval1==ä¸ºtrue==**ï¼Œè¿”å›res1ï¼Œ... å¦åˆ™è¿”å›defaulté»˜è®¤å€¼  |
| CASE [ expr ] WHEN [ val1 ] THEN[res1] ... ELSE [ default ] END | **å¦‚æœexprçš„==å€¼ç­‰äº==val1**ï¼Œè¿”å›res1ï¼Œ... å¦åˆ™è¿”å›defaulté»˜è®¤å€¼ |

### ï¼ˆ2ï¼‰æ¼”ç¤ºå¦‚ä¸‹

#### A. ==if==

```sql
select if(false, 'Ok', 'Error'); 
```

#### B. ==ifnull==

```sql
select ifnull('Ok','Default'); # OK

select ifnull('','Default'); # è¾“å‡º ''

select ifnull(null,'Default');  # è¾“å‡ºDefault
```



#### C. ==case when then else end==

éœ€æ±‚: æŸ¥è¯¢empè¡¨çš„å‘˜å·¥å§“åå’Œå·¥ä½œåœ°å€ (åŒ—äº¬/ä¸Šæµ· ----> ä¸€çº¿åŸå¸‚ , å…¶ä»– ----> äºŒçº¿åŸå¸‚)

```sql
select 
name,
(case workaddress when 'åŒ—äº¬' then 'ä¸€çº¿åŸå¸‚' when 'ä¸Šæµ·' then 'ä¸€çº¿åŸå¸‚' else
 'äºŒçº¿åŸå¸‚' end ) as 'å·¥ä½œåœ°å€'
from emp;
```



### ï¼ˆ3ï¼‰æ¡ˆä¾‹

![image-20250413163559587](Mysql-Learning-Local.assets/image-20250413163559587.png)

```sql
create table score(
    id int comment 'ID',
    name varchar(20) comment 'å§“å',
    math int comment 'æ•°å­¦',
    english int comment 'è‹±è¯­',
    chinese int comment 'è¯­æ–‡'
) comment 'å­¦å‘˜æˆç»©è¡¨';
insert into score(id, name, math, english, chinese) VALUES (1, 'Tom', 67, 88, 95), (2, 'Rose' , 23, 66, 90),(3, 'Jack', 56, 98, 76);
```

å…·ä½“çš„SQLè¯­å¥å¦‚ä¸‹:

```sql
select
id,
name,
(case when math >= 85 then 'ä¼˜ç§€' when math >=60 then 'åŠæ ¼' else 'ä¸åŠæ ¼' end )
'æ•°å­¦',
(case when english >= 85 then 'ä¼˜ç§€' when english >=60 then 'åŠæ ¼' else 'ä¸åŠæ ¼'
 end ) 'è‹±è¯­',
(case when chinese >= 85 then 'ä¼˜ç§€' when chinese >=60 then 'åŠæ ¼' else 'ä¸åŠæ ¼'
 end ) 'è¯­æ–‡'
from score;
```



## 3.5 å°ç»“

![image-20250413163950502](Mysql-Learning-Local.assets/image-20250413163950502.png)



> MySQLçš„å¸¸è§å‡½æ•°æˆ‘ä»¬å­¦ä¹ å®Œäº†ï¼Œé‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥åˆ†æä¸€ä¸‹ï¼Œåœ¨å‰é¢è®²åˆ°çš„ä¸¤ä¸ªå‡½æ•°çš„æ¡ˆä¾‹åœºæ™¯ï¼Œ
>
> æ€è€ƒä¸€ä¸‹éœ€è¦ç”¨åˆ°ä»€ä¹ˆæ ·çš„å‡½æ•°æ¥å®ç°?
>
> ![image-20250413164019815](Mysql-Learning-Local.assets/image-20250413164019815.png)
>
> - æ•°æ®åº“ä¸­ï¼Œå­˜å‚¨çš„æ˜¯å…¥èŒæ—¥æœŸï¼Œå¦‚ 2000-01-01ï¼Œå¦‚ä½•å¿«é€Ÿè®¡ç®—å‡ºå…¥èŒå¤©æ•°å‘¢ï¼Ÿ -------->
>   - ç­”æ¡ˆ: datediff
> - æ•°æ®åº“ä¸­ï¼Œå­˜å‚¨çš„æ˜¯å­¦ç”Ÿçš„åˆ†æ•°å€¼ï¼Œå¦‚98ã€75ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤å®šåˆ†æ•°çš„ç­‰çº§å‘¢ï¼Ÿ ---------->
>   - ç­”æ¡ˆ: case ... when ...



# 4ã€çº¦æŸ

> ==æ³¨æ„==ï¼šçº¦æŸæ˜¯**ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„**ï¼Œå¯ä»¥åœ¨**åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸ**ã€‚

## 4.1 æ¦‚è¿°

![image-20250413170414599](Mysql-Learning-Local.assets/image-20250413170414599.png)

### ï¼ˆ1ï¼‰æ¦‚å¿µ

çº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®ã€‚

### ï¼ˆ2ï¼‰ç›®çš„

ä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„æ­£ç¡®ã€æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§ã€‚

### ï¼ˆ3ï¼‰åˆ†ç±»

![image-20250413164315127](Mysql-Learning-Local.assets/image-20250413164315127.png)

> ==æ³¨æ„==ï¼šçº¦æŸæ˜¯**ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„**ï¼Œå¯ä»¥åœ¨**åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸ**ã€‚



## 4.2 çº¦æŸæ¼”ç¤º-æ¡ˆä¾‹

ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†æ•°æ®åº“ä¸­å¸¸è§çš„çº¦æŸï¼Œä»¥åŠçº¦æŸæ¶‰åŠåˆ°çš„å…³é”®å­—ï¼Œé‚£è¿™äº›çº¦æŸæˆ‘ä»¬åˆ°åº•å¦‚ä½•åœ¨åˆ›å»ºè¡¨ã€ä¿®æ”¹è¡¨çš„æ—¶å€™æ¥æŒ‡å®šå‘¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥æ¼”ç¤ºä¸€ä¸‹ã€‚

æ¡ˆä¾‹éœ€æ±‚ï¼š æ ¹æ®éœ€æ±‚ï¼Œå®Œæˆè¡¨ç»“æ„çš„åˆ›å»ºã€‚éœ€æ±‚å¦‚ä¸‹ï¼š

![image-20250413170815405](Mysql-Learning-Local.assets/image-20250413170815405.png)

| **å­—æ®µå**         | **å­—æ®µå«ä¹‰** | **å­—æ®µç±»å‹** | **çº¦æŸæ¡ä»¶**              | **çº¦æŸå…³é”®å­—**              |
| :----------------- | :----------- | :----------- | :------------------------ | :-------------------------- |
| id                 | IDå”¯ä¸€æ ‡è¯†   | int          | ä¸»é”®ï¼Œå¹¶ä¸”è‡ªåŠ¨å¢é•¿        | PRIMARY KEY, AUTO_INCREMENT |
| name               | å§“å         | varchar(10)  | ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å”¯ä¸€          | NOT NULL , UNIQUE           |
| age                | å¹´é¾„         | int          | å¤§äº0ï¼Œå¹¶ä¸”å°äºç­‰äº120    | CHECK                       |
| status             | çŠ¶æ€         | char(1)      | å¦‚æœæ²¡æœ‰æŒ‡å®šè¯¥å€¼ï¼Œé»˜è®¤ä¸º1 | DEFAULT                     |
| gender             | æ€§åˆ«         | char(1)      | æ—                         |                             |
| å¯¹åº”çš„å»ºè¡¨è¯­å¥ä¸ºï¼š |              |              |                           |                             |

å¯¹åº”çš„å»ºè¡¨è¯­å¥ä¸ºï¼š

```sql
CREATE TABLE tb_user(
    id int AUTO_INCREMENT PRIMARY KEY COMMENT 'IDå”¯ä¸€æ ‡è¯†',
    name varchar(10) NOT NULL UNIQUE COMMENT 'å§“å' ,
    age int check (age > 0 && age <= 120) COMMENT 'å¹´é¾„' ,
    status char(1) default '1' COMMENT 'çŠ¶æ€',
    gender char(1) COMMENT 'æ€§åˆ«'
);
```

åœ¨ä¸ºå­—æ®µæ·»åŠ çº¦æŸæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨**å­—æ®µä¹‹ååŠ ä¸Šçº¦æŸçš„å…³é”®å­—**å³å¯ï¼Œéœ€è¦å…³æ³¨å…¶è¯­æ³•ã€‚æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„SQLæŠŠè¡¨ç»“æ„åˆ›å»ºå®Œæˆï¼Œç„¶åæ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥é€šè¿‡ä¸€ç»„æ•°æ®è¿›è¡Œæµ‹è¯•ï¼Œä»è€ŒéªŒè¯ä¸€ä¸‹ï¼Œçº¦æŸæ˜¯å¦å¯ä»¥ç”Ÿæ•ˆã€‚

```sql
insert into tb_user(name,age,status,gender) values ('Tom1',19,'1','ç”·'),
('Tom2',25,'0','ç”·');

# éªŒè¯ name çš„ not null
insert into tb_user(name,age,status,gender) values ('Tom3',19,'1','ç”·');
insert into tb_user(name,age,status,gender) values (null,19,'1','ç”·');

# éªŒè¯ name çš„ Unique
insert into tb_user(name,age,status,gender) values ('Tom3',19,'1','ç”·');

# éªŒè¯ age
insert into tb_user(name,age,status,gender) values ('Tom4',80,'1','ç”·');
insert into tb_user(name,age,status,gender) values ('Tom5',-1,'1','ç”·');
insert into tb_user(name,age,status,gender) values ('Tom5',121,'1','ç”·');

# éªŒè¯statusçš„ Default
insert into tb_user(name,age,gender) values ('Tom5',120,'ç”·');
```

ä¸Šé¢ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ç¼–å†™SQLè¯­å¥çš„å½¢å¼æ¥å®Œæˆçº¦æŸçš„æŒ‡å®šï¼Œé‚£åŠ å…¥æˆ‘ä»¬æ˜¯**é€šè¿‡å›¾å½¢åŒ–ç•Œé¢**æ¥åˆ›å»ºè¡¨ç»“æ„æ—¶ï¼Œåˆè¯¥å¦‚ä½•æ¥æŒ‡å®šçº¦æŸå‘¢ï¼Ÿ åªéœ€è¦åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œæ ¹æ®æˆ‘ä»¬çš„éœ€è¦é€‰æ‹©å¯¹åº”çš„çº¦æŸå³å¯ã€‚

![image-20250413164714811](Mysql-Learning-Local.assets/image-20250413164714811.png)





## 4.3 ==å¤–é”®çº¦æŸ==

### ï¼ˆ1ï¼‰ä»‹ç»

![image-20250413171424550](Mysql-Learning-Local.assets/image-20250413171424550.png)

å¤–é”®ï¼šç”¨æ¥è®©ä¸¤å¼ è¡¨çš„**æ•°æ®ä¹‹é—´å»ºç«‹è¿æ¥**ï¼Œä»è€Œ**ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§**ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

![image-20250413164856886](Mysql-Learning-Local.assets/image-20250413164856886.png)

å·¦ä¾§çš„empè¡¨æ˜¯å‘˜å·¥è¡¨ï¼Œé‡Œé¢å­˜å‚¨å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…å«å‘˜å·¥çš„IDã€å§“åã€å¹´é¾„ã€èŒä½ã€è–ªèµ„ã€å…¥èŒæ—¥æœŸã€ä¸Šçº§ä¸»ç®¡IDã€éƒ¨é—¨IDï¼Œåœ¨å‘˜å·¥çš„ä¿¡æ¯ä¸­å­˜å‚¨çš„æ˜¯éƒ¨é—¨çš„ID dept_idï¼Œè€Œè¿™ä¸ªéƒ¨é—¨çš„IDæ˜¯å…³è”çš„éƒ¨é—¨è¡¨deptçš„ä¸»é”®idï¼Œé‚£empè¡¨çš„dept_idå°±æ˜¯å¤–é”®,å…³è”çš„æ˜¯å¦ä¸€å¼ è¡¨çš„ä¸»é”®ã€‚

> æ³¨æ„ï¼šç›®å‰ä¸Šè¿°ä¸¤å¼ è¡¨ï¼Œåªæ˜¯åœ¨**é€»è¾‘ä¸Šå­˜åœ¨è¿™æ ·ä¸€å±‚å…³ç³»**ï¼›**åœ¨æ•°æ®åº“å±‚é¢ï¼Œå¹¶æœªå»ºç«‹å¤–é”®å…³è”**ï¼Œæ‰€ä»¥	æ˜¯æ— æ³•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§çš„ã€‚



æ²¡æœ‰æ•°æ®åº“å¤–é”®å…³è”çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿä¿è¯ä¸€è‡´æ€§å’Œå®Œæ•´æ€§å‘¢ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚

**å‡†å¤‡æ•°æ®**

```sql
create table dept(
    id int auto_increment comment 'ID' primary key,
    name varchar(50) not null comment 'éƒ¨é—¨åç§°'
)comment 'éƒ¨é—¨è¡¨';

INSERT INTO dept (id, name) VALUES (1, 'ç ”å‘éƒ¨'), (2, 'å¸‚åœºéƒ¨'),(3, 'è´¢åŠ¡éƒ¨'), (4,'é”€å”®éƒ¨'), (5, 'æ€»ç»åŠ');

drop table if exists emp
create table emp(
    id int auto_increment comment 'ID' primary key,
    name varchar(50) not null comment 'å§“å',
    age int comment 'å¹´é¾„',
    job varchar(20) comment 'èŒä½',
    salary int comment 'è–ªèµ„',
    entrydate date comment 'å…¥èŒæ—¶é—´',
    managerid int comment 'ç›´å±é¢†å¯¼ID',
    dept_id int comment 'éƒ¨é—¨ID'
)comment 'å‘˜å·¥è¡¨';

INSERT INTO emp (id, name, age, job,salary, entrydate, managerid, dept_id) VALUES
(1, 'é‡‘åº¸', 66, 'æ€»è£',20000, '2000-01-01', null,5),
(2, 'å¼ æ— å¿Œ', 20,'é¡¹ç›®ç»ç†',12500, '2005-12-05', 1,1),
(3, 'æ¨é€', 33, 'å¼€å‘', 8400,'2000-11-03', 2,1),
(4, 'éŸ¦ä¸€ç¬‘', 48, 'å¼€å‘',11000, '2002-02-05', 2,1),
(5, 'å¸¸é‡æ˜¥', 43, 'å¼€å‘',10500, '2004-09-07', 3,1),
(6, 'å°æ˜­', 19, 'ç¨‹åºå‘˜é¼“åŠ±å¸ˆ',6600, '2004-10-12', 2,1);
```

![image-20250413164906268](Mysql-Learning-Local.assets/image-20250413164906268.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªæµ‹è¯•ï¼Œåˆ é™¤idä¸º1çš„éƒ¨é—¨ä¿¡æ¯ã€‚

![image-20250413164913369](Mysql-Learning-Local.assets/image-20250413164913369.png)

ç»“æœï¼Œæˆ‘ä»¬çœ‹åˆ°åˆ é™¤æˆåŠŸï¼Œè€Œåˆ é™¤æˆåŠŸä¹‹åï¼Œéƒ¨é—¨è¡¨ä¸å­˜åœ¨idä¸º1çš„éƒ¨é—¨ï¼Œè€Œåœ¨empè¡¨ä¸­è¿˜æœ‰å¾ˆå¤šçš„å‘˜å·¥ï¼Œå…³è”çš„ä¸ºidä¸º1çš„éƒ¨é—¨ï¼Œæ­¤æ—¶å°±å‡ºç°äº†æ•°æ®çš„ä¸å®Œæ•´æ€§ã€‚ è€Œè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜å°±å¾—é€šè¿‡æ•°æ®åº“çš„å¤–é”®çº¦æŸã€‚



### ï¼ˆ2ï¼‰è¯­æ³•

![image-20250413171938322](Mysql-Learning-Local.assets/image-20250413171938322.png)

#### â‘ æ·»åŠ å¤–é”®

```sql
CREATE TABLE è¡¨å(
    å­—æ®µå æ•°æ®ç±»å‹,
    ...
    [CONSTRAINT] [å¤–é”®åç§°] FOREIGN KEY (å¤–é”®å­—æ®µå) REFERENCES ä¸»è¡¨ (ä¸»è¡¨åˆ—å)
);

ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µå)
REFERENCES ä¸»è¡¨ (ä¸»è¡¨åˆ—å) ;
```

##### 1ï¼‰æ¡ˆä¾‹

ä¸ºempè¡¨çš„dept_idå­—æ®µæ·»åŠ å¤–é”®çº¦æŸ,å…³è”deptè¡¨çš„ä¸»é”®idã€‚

```sql
alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id);
```

![image-20250413170144205](Mysql-Learning-Local.assets/image-20250413170144205.png)

æ·»åŠ äº†å¤–é”®çº¦æŸä¹‹åï¼Œæˆ‘ä»¬å†åˆ°deptè¡¨(çˆ¶è¡¨)åˆ é™¤idä¸º1çš„è®°å½•ï¼Œç„¶åçœ‹ä¸€ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡ã€‚ æ­¤æ—¶å°†ä¼šæŠ¥é”™ï¼Œä¸èƒ½åˆ é™¤æˆ–æ›´æ–°çˆ¶è¡¨è®°å½•ï¼Œå› ä¸ºå­˜åœ¨å¤–é”®çº¦æŸã€‚

![image-20250413171910459](Mysql-Learning-Local.assets/image-20250413171910459.png)



#### â‘¡ åˆ é™¤å¤–é”®

```sql
ALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®åç§°;
```

##### 1ï¼‰æ¡ˆä¾‹

åˆ é™¤empè¡¨çš„å¤–é”®fk_emp_dept_idã€‚

```sql
alter table emp drop foreign key fk_emp_dept_id; 
```



### ï¼ˆ3ï¼‰åˆ é™¤/æ›´æ–°è¡Œä¸º

æ·»åŠ äº†å¤–é”®ä¹‹åï¼Œå†åˆ é™¤çˆ¶è¡¨æ•°æ®æ—¶äº§ç”Ÿçš„çº¦æŸè¡Œä¸ºï¼Œæˆ‘ä»¬å°±ç§°ä¸ºåˆ é™¤/æ›´æ–°è¡Œä¸ºã€‚å…·ä½“çš„åˆ é™¤/æ›´æ–°è¡Œä¸ºæœ‰ä»¥ä¸‹å‡ ç§:

![image-20250413172446330](Mysql-Learning-Local.assets/image-20250413172446330.png)

| **è¡Œä¸º**    | **è¯´æ˜**                                                     |
| :---------- | :----------------------------------------------------------- |
| NO ACTION   | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆ**æ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°**ã€‚ (ä¸ RESTRICT ä¸€è‡´) é»˜è®¤è¡Œä¸º |
| RESTRICT    | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œå¦‚æœæœ‰åˆ™ä¸å…è®¸åˆ é™¤/æ›´æ–°ã€‚ (ä¸ NO ACTION ä¸€è‡´) é»˜è®¤è¡Œä¸º |
| CASCADE     | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤/æ›´æ–°å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œ**å¦‚æœæœ‰ï¼Œåˆ™ä¹Ÿåˆ é™¤/æ›´æ–°å¤–é”®åœ¨å­è¡¨ä¸­çš„è®°å½•ã€‚**==çº§è”åˆ é™¤== |
| SET NULL    | å½“åœ¨çˆ¶è¡¨ä¸­åˆ é™¤å¯¹åº”è®°å½•æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å¯¹åº”å¤–é”®ï¼Œ**å¦‚æœæœ‰åˆ™è®¾ç½®å­è¡¨ä¸­è¯¥å¤–é”®å€¼ä¸ºnull**ï¼ˆè¿™å°±**è¦æ±‚è¯¥å¤–é”®å…è®¸å–null**ï¼‰ã€‚ |
| SET DEFAULT | çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ (**Innodbä¸æ”¯æŒ**) |

#### â‘ ==å…·ä½“è¯­æ³•==

```sql
ALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®åç§° FOREIGN KEY (å¤–é”®å­—æ®µ) REFERENCES
ä¸»è¡¨å (ä¸»è¡¨å­—æ®µå) ON UPDATE CASCADE ON DELETE CASCADE;
```

#### â‘¡æ¼”ç¤ºå¦‚ä¸‹

ç”±äº**NO ACTION æ˜¯é»˜è®¤è¡Œä¸º**ï¼Œæˆ‘ä»¬å‰é¢è¯­æ³•æ¼”ç¤ºçš„æ—¶å€™ï¼Œå·²ç»æµ‹è¯•è¿‡äº†ï¼Œå°±ä¸å†æ¼”ç¤ºäº†ï¼Œè¿™é‡Œæˆ‘ä»¬å†æ¼”ç¤ºå…¶ä»–çš„ä¸¤ç§è¡Œä¸ºï¼š**CASCADEã€SET NULL**ã€‚

##### 1ï¼‰==CASCADE==-çº§è”æ¨¡å¼

```sql
alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references
dept(id) on update cascade on delete cascade ;
```

A. ä¿®æ”¹çˆ¶è¡¨idä¸º1çš„è®°å½•ï¼Œå°†idä¿®æ”¹ä¸º6

![image-20250413170210360](Mysql-Learning-Local.assets/image-20250413170210360.png)

æˆ‘ä»¬å‘ç°ï¼ŒåŸæ¥åœ¨å­è¡¨ä¸­dept_idå€¼ä¸º1çš„è®°å½•ï¼Œç°åœ¨ä¹Ÿå˜ä¸º6äº†ï¼Œè¿™å°±æ˜¯**cascadeçº§è”**çš„æ•ˆæœã€‚

> åœ¨ä¸€èˆ¬çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œ==ä¸ä¼šä¿®æ”¹ä¸€å¼ è¡¨çš„ä¸»é”®å€¼==ã€‚



B. åˆ é™¤çˆ¶è¡¨idä¸º6çš„è®°å½•

![image-20250413170221536](Mysql-Learning-Local.assets/image-20250413170221536.png)

æˆ‘ä»¬å‘ç°ï¼Œ**çˆ¶è¡¨çš„æ•°æ®åˆ é™¤æˆåŠŸ**äº†ï¼Œä½†æ˜¯**å­è¡¨**ä¸­å…³è”çš„è®°å½•**ä¹Ÿè¢«çº§è”åˆ é™¤**äº†ã€‚



##### 2ï¼‰==SET NULL==-è®¾ä¸ºnull

åœ¨è¿›è¡Œæµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆéœ€è¦åˆ é™¤ä¸Šé¢å»ºç«‹çš„å¤–é”® fk_emp_dept_idã€‚ç„¶åå†é€šè¿‡æ•°æ®è„šæœ¬ï¼Œå°†empã€deptè¡¨çš„**æ•°æ®æ¢å¤**äº†ã€‚

```sql
alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references
dept(id) on update cascade on delete cascade ;
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ é™¤idä¸º1çš„æ•°æ®ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆæ ·çš„ç°è±¡ã€‚

![image-20250413170236345](Mysql-Learning-Local.assets/image-20250413170236345.png)

æˆ‘ä»¬å‘ç°çˆ¶è¡¨çš„è®°å½•æ˜¯å¯ä»¥æ­£å¸¸çš„åˆ é™¤çš„ï¼Œçˆ¶è¡¨çš„æ•°æ®åˆ é™¤ä¹‹åï¼Œå†æ‰“å¼€å­è¡¨ empï¼Œæˆ‘ä»¬å‘ç°å­è¡¨empçš„dept_idå­—æ®µï¼ŒåŸæ¥dept_idä¸º1çš„æ•°æ®ï¼Œç°åœ¨éƒ½è¢«ç½®ä¸ºNULLäº†ã€‚

![image-20250413170250541](Mysql-Learning-Local.assets/image-20250413170250541.png)

è¿™å°±æ˜¯SET NULLè¿™ç§åˆ é™¤/æ›´æ–°è¡Œä¸ºçš„æ•ˆæœã€‚



## 4.4 å°ç»“

![image-20250413172626513](Mysql-Learning-Local.assets/image-20250413172626513.png)



# 5ã€ğŸŒŸ å¤šè¡¨æŸ¥è¯¢

æˆ‘ä»¬ä¹‹å‰åœ¨è®²è§£SQLè¯­å¥çš„æ—¶å€™ï¼Œè®²è§£äº†DQLè¯­å¥ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æŸ¥è¯¢è¯­å¥ï¼Œä½†æ˜¯ä¹‹å‰è®²è§£çš„æŸ¥è¯¢éƒ½æ˜¯å•è¡¨æŸ¥è¯¢ï¼Œè€Œæœ¬ç« èŠ‚æˆ‘ä»¬è¦å­¦ä¹ çš„åˆ™æ˜¯å¤šè¡¨æŸ¥è¯¢æ“ä½œï¼Œä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚



## 5.1 ğŸŒŸå¤šè¡¨å…³ç³»

é¡¹ç›®å¼€å‘ä¸­ï¼Œåœ¨è¿›è¡Œæ•°æ®åº“è¡¨ç»“æ„è®¾è®¡æ—¶ï¼Œä¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠä¸šåŠ¡æ¨¡å—ä¹‹é—´çš„å…³ç³»ï¼Œåˆ†æå¹¶è®¾è®¡è¡¨ç»“æ„ï¼Œç”±äºä¸šåŠ¡ä¹‹é—´ç›¸äº’å…³è”ï¼Œæ‰€ä»¥å„ä¸ªè¡¨ç»“æ„ä¹‹é—´ä¹Ÿå­˜åœ¨ç€å„ç§è”ç³»ï¼ŒåŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ç§ï¼š

- **ä¸€å¯¹å¤š(å¤šå¯¹ä¸€)**
- å¤šå¯¹å¤š
- ä¸€å¯¹ä¸€

### ï¼ˆ1ï¼‰ä¸€å¯¹å¤š(å¤šå¯¹ä¸€)

- æ¡ˆä¾‹: éƒ¨é—¨ ä¸ å‘˜å·¥çš„å…³ç³»
- å…³ç³»: ä¸€ä¸ªéƒ¨é—¨å¯¹åº”å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å¯¹åº”ä¸€ä¸ªéƒ¨é—¨
- å®ç°: åœ¨**å¤šçš„ä¸€æ–¹å»ºç«‹å¤–é”®**ï¼ŒæŒ‡å‘ä¸€çš„ä¸€æ–¹çš„ä¸»é”®

![image-20250413173632554](Mysql-Learning-Local.assets/image-20250413173632554.png)



### ï¼ˆ2ï¼‰å¤šå¯¹å¤š-==å»ºç«‹ä¸­é—´è¡¨==

- æ¡ˆä¾‹: å­¦ç”Ÿ ä¸ è¯¾ç¨‹çš„å…³ç³»

- å…³ç³»: **ä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰ä¿®å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰æ‹©**

- å®ç°: **å»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨**ï¼Œ**==ä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”®==**

  ![image-20250413173638483](Mysql-Learning-Local.assets/image-20250413173638483.png)

å¯¹åº”çš„SQLè„šæœ¬:

```sql
create table student(
    id int auto_increment primary key comment 'ä¸»é”®ID',
    name varchar(10) comment 'å§“å',
    no varchar(10) comment 'å­¦å·'
) comment 'å­¦ç”Ÿè¡¨';

insert into student values 
(null, 'é»›ç»®ä¸', '2000100101'),
(null, 'è°¢é€Š','2000100102'),
(null, 'æ®·å¤©æ­£', '2000100103'),
(null, 'éŸ¦ä¸€ç¬‘', '2000100104');

create table course(
    id int auto_increment primary key comment 'ä¸»é”®ID',
    name varchar(10) comment 'è¯¾ç¨‹åç§°'
) comment 'è¯¾ç¨‹è¡¨';

insert into course values 
(null, 'Java'),(null, 'PHP'), 
(null , 'MySQL'),(null, 'Hadoop');

create table student_course(
    id int auto_increment comment 'ä¸»é”®' primary key,
    studentid int not null comment 'å­¦ç”ŸID',
    courseid int not null comment 'è¯¾ç¨‹ID',
    constraint fk_courseid foreign key (courseid) references course (id),
    constraint fk_studentid foreign key (studentid) references student (id)
)comment 'å­¦ç”Ÿè¯¾ç¨‹ä¸­é—´è¡¨';

insert into student_course values 
(null,1,1),(null,1,2),
(null,1,3),(null,2,2),
(null,2,3),(null,3,4);
```



### ï¼ˆ3ï¼‰ä¸€å¯¹ä¸€-==å•è¡¨æ‹†åˆ†==

- æ¡ˆä¾‹: ç”¨æˆ· ä¸ ç”¨æˆ·è¯¦æƒ…çš„å…³ç³»
- å…³ç³»: ä¸€å¯¹ä¸€å…³ç³»ï¼Œ**å¤šç”¨äº==å•è¡¨æ‹†åˆ†==ï¼Œå°†ä¸€å¼ è¡¨çš„åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå…¶ä»–è¯¦æƒ…å­—æ®µæ”¾åœ¨å¦ä¸€å¼ è¡¨ä¸­ï¼Œä»¥æå‡æ“ä½œæ•ˆç‡**
- å®ç°: **åœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®**ï¼Œå¹¶ä¸”**==è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„(UNIQUE)==**

![image-20250413173657507](Mysql-Learning-Local.assets/image-20250413173657507.png)

å¯¹åº”çš„SQLè„šæœ¬:

```sql
create table tb_user(
    id int auto_increment primary key comment 'ä¸»é”®ID',
    name varchar(10) comment 'å§“å',
    age int comment 'å¹´é¾„',
    gender char(1) comment '1: ç”· , 2: å¥³',
    phone char(11) comment 'æ‰‹æœºå·'
) comment 'ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨';

create table tb_user_edu(
    id int auto_increment primary key comment 'ä¸»é”®ID',
    degree varchar(20) comment 'å­¦å†',
    major varchar(50) comment 'ä¸“ä¸š',
    primaryschool varchar(50) comment 'å°å­¦',
    middleschool varchar(50) comment 'ä¸­å­¦',
    university varchar(50) comment 'å¤§å­¦',
    userid int unique comment 'ç”¨æˆ·ID',
    constraint fk_userid foreign key (userid) references tb_user(id)
) comment 'ç”¨æˆ·æ•™è‚²ä¿¡æ¯è¡¨';

insert into tb_user(id, name, age, gender, phone) values
(null,'é»„æ¸¤',45,'1','18800001111'),
(null,'å†°å†°',35,'2','18800002222'),
(null,'ç äº‘',55,'1','18800008888'),
(null,'æå½¦å®',50,'1','18800009999');

insert into tb_user_edu(id, degree, major, primaryschool, middleschool,university, userid) values
(null,'æœ¬ç§‘','èˆè¹ˆ','é™å®‰åŒºç¬¬ä¸€å°å­¦','é™å®‰åŒºç¬¬ä¸€ä¸­å­¦','åŒ—äº¬èˆè¹ˆå­¦é™¢',1),
(null,'ç¡•å£«','è¡¨æ¼”','æœé˜³åŒºç¬¬ä¸€å°å­¦','æœé˜³åŒºç¬¬ä¸€ä¸­å­¦','åŒ—äº¬ç”µå½±å­¦é™¢',2),
(null,'æœ¬ç§‘','è‹±è¯­','æ­å·å¸‚ç¬¬ä¸€å°å­¦','æ­å·å¸‚ç¬¬ä¸€ä¸­å­¦','æ­å·å¸ˆèŒƒå¤§å­¦',3),
(null,'æœ¬ç§‘','åº”ç”¨æ•°å­¦','é˜³æ³‰ç¬¬ä¸€å°å­¦','é˜³æ³‰åŒºç¬¬ä¸€ä¸­å­¦','æ¸…åå¤§å­¦',4);
```



## 5.2 å¤šè¡¨æŸ¥è¯¢æ¦‚è¿°

### ï¼ˆ1ï¼‰æ•°æ®å‡†å¤‡

1). åˆ é™¤ä¹‹å‰ emp, deptè¡¨çš„æµ‹è¯•æ•°æ®

2). æ‰§è¡Œå¦‚ä¸‹è„šæœ¬ï¼Œåˆ›å»ºempè¡¨ä¸deptè¡¨å¹¶æ’å…¥æµ‹è¯•æ•°æ®

```sql
-- åˆ›å»ºdeptè¡¨ï¼Œå¹¶æ’å…¥æ•°æ®
create table dept(
    id int auto_increment comment 'ID' primary key,
    name varchar(50) not null comment 'éƒ¨é—¨åç§°'
)comment 'éƒ¨é—¨è¡¨';
INSERT INTO dept (id, name) VALUES 
(1, 'ç ”å‘éƒ¨'), (2, 'å¸‚åœºéƒ¨'),(3, 'è´¢åŠ¡éƒ¨'),
(4,'é”€å”®éƒ¨'), (5, 'æ€»ç»åŠ'), (6, 'äººäº‹éƒ¨');

-- åˆ›å»ºempè¡¨ï¼Œå¹¶æ’å…¥æ•°æ®
create table emp(
    id int auto_increment comment 'ID' primary key,
    name varchar(50) not null comment 'å§“å',
    age int comment 'å¹´é¾„',
    job varchar(20) comment 'èŒä½',
    salary int comment 'è–ªèµ„',
    entrydate date comment 'å…¥èŒæ—¶é—´',
    managerid int comment 'ç›´å±é¢†å¯¼ID',
    dept_id int comment 'éƒ¨é—¨ID'
)comment 'å‘˜å·¥è¡¨';

-- æ·»åŠ å¤–é”®
alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references
dept(id);

INSERT INTO emp (id, name, age, job,salary, entrydate, managerid, dept_id)
VALUES
(1, 'é‡‘åº¸', 66, 'æ€»è£',20000, '2000-01-01', null,5),
(2, 'å¼ æ— å¿Œ', 20, 'é¡¹ç›®ç»ç†',12500, '2005-12-05', 1,1),
(3, 'æ¨é€', 33, 'å¼€å‘', 8400,'2000-11-03', 2,1),
(4, 'éŸ¦ä¸€ç¬‘', 48, 'å¼€å‘',11000, '2002-02-05', 2,1),
(5, 'å¸¸é‡æ˜¥', 43, 'å¼€å‘',10500, '2004-09-07', 3,1),
(6, 'å°æ˜­', 19, 'ç¨‹åºå‘˜é¼“åŠ±å¸ˆ',6600, '2004-10-12', 2,1),
(7, 'ç­ç»', 60, 'è´¢åŠ¡æ€»ç›‘',8500, '2002-09-12', 1,3),
(8, 'å‘¨èŠ·è‹¥', 19, 'ä¼šè®¡',48000, '2006-06-02', 7,3),
(9, 'ä¸æ•å›', 23, 'å‡ºçº³',5250, '2009-05-13', 7,3),
(10, 'èµµæ•', 20, 'å¸‚åœºéƒ¨æ€»ç›‘',12500, '2004-10-12', 1,2),
(11, 'é¹¿æ–å®¢', 56, 'èŒå‘˜',3750, '2006-10-03', 10,2),
(12, 'é¹¤ç¬”ç¿', 19, 'èŒå‘˜',3750, '2007-05-09', 10,2),
(13, 'æ–¹ä¸œç™½', 19, 'èŒå‘˜',5500, '2009-02-12', 10,2),
(14, 'å¼ ä¸‰ä¸°', 88, 'é”€å”®æ€»ç›‘',14000, '2004-10-12', 1,4),
(15, 'ä¿è²èˆŸ', 38, 'é”€å”®',4600, '2004-10-12', 14,4),
(16, 'å®‹è¿œæ¡¥', 40, 'é”€å”®',4600, '2004-10-12', 14,4),
(17, 'é™ˆå‹è°…', 42, null,2000, '2011-10-12', 1,null);
```

deptè¡¨å…±6æ¡è®°å½•ï¼Œempè¡¨å…±17æ¡è®°å½•ã€‚



### ï¼ˆ2ï¼‰æ¦‚è¿°

![image-20250413203539493](Mysql-Learning-Local.assets/image-20250413203539493.png)

å¤šè¡¨æŸ¥è¯¢å°±æ˜¯æŒ‡ä»å¤šå¼ è¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚

åŸæ¥**æŸ¥è¯¢å•è¡¨æ•°æ®**ï¼Œæ‰§è¡Œçš„SQLå½¢å¼ä¸ºï¼šselect * from emp;

é‚£ä¹ˆæˆ‘ä»¬è¦æ‰§è¡Œå¤šè¡¨æŸ¥è¯¢ï¼Œå°±åªéœ€è¦**ä½¿ç”¨é€—å·åˆ†éš”å¤šå¼ è¡¨**å³å¯ï¼Œå¦‚ï¼š select * from emp , dept; å…·ä½“çš„æ‰§è¡Œç»“æœå¦‚ä¸‹:

![image-20250413174215467](Mysql-Learning-Local.assets/image-20250413174215467.png)

æ­¤æ—¶,æˆ‘ä»¬çœ‹åˆ°æŸ¥è¯¢ç»“æœä¸­åŒ…å«äº†å¤§é‡çš„ç»“æœé›†ï¼Œæ€»å…±102æ¡è®°å½•ï¼Œè€Œè¿™å…¶å®å°±æ˜¯å‘˜å·¥è¡¨empæ‰€æœ‰çš„è®°å½•(17) ä¸ éƒ¨é—¨è¡¨deptæ‰€æœ‰è®°å½•(6) çš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸ºç¬›å¡å°”ç§¯ã€‚æ¥ä¸‹æ¥ï¼Œå°±æ¥ç®€å•

ä»‹ç»ä¸‹ç¬›å¡å°”ç§¯ã€‚

**==ç¬›å¡å°”ç§¯==:** ç¬›å¡å°”ä¹˜ç§¯æ˜¯æŒ‡åœ¨æ•°å­¦ä¸­ï¼Œ**ä¸¤ä¸ªé›†åˆAé›†åˆ å’Œ Bé›†åˆçš„æ‰€æœ‰ç»„åˆæƒ…å†µ**ã€‚

![image-20250413174221208](Mysql-Learning-Local.assets/image-20250413174221208.png)

è€Œåœ¨å¤šè¡¨æŸ¥è¯¢ä¸­ï¼Œæˆ‘ä»¬æ˜¯**éœ€è¦==æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯==**çš„ï¼Œ**åªä¿ç•™ä¸¤å¼ è¡¨å…³è”éƒ¨åˆ†çš„æ•°æ®**ã€‚

![image-20250413174227176](Mysql-Learning-Local.assets/image-20250413174227176.png)

![image-20250413174232832](Mysql-Learning-Local.assets/image-20250413174232832.png)

åœ¨SQLè¯­å¥ä¸­ï¼Œå¦‚ä½•æ¥å»é™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥ç»™å¤šè¡¨æŸ¥è¯¢åŠ ä¸Šè¿æ¥æŸ¥è¯¢çš„æ¡ä»¶å³å¯ã€‚

select * from emp , dept **where** emp.dept_id = dept.id;

![image-20250413174252000](Mysql-Learning-Local.assets/image-20250413174252000.png)

è€Œç”±äºidä¸º17çš„å‘˜å·¥ï¼Œæ²¡æœ‰dept_idå­—æ®µå€¼ï¼Œæ‰€ä»¥åœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®è¿æ¥æŸ¥è¯¢çš„æ¡ä»¶å¹¶æ²¡æœ‰æŸ¥è¯¢

åˆ°ã€‚



### ï¼ˆ3ï¼‰åˆ†ç±»

![image-20250413203659368](Mysql-Learning-Local.assets/image-20250413203659368.png)

- è¿æ¥æŸ¥è¯¢
  - å†…è¿æ¥ï¼šç›¸å½“äºæŸ¥è¯¢Aã€B**äº¤é›†éƒ¨åˆ†æ•°æ®**
  - å¤–è¿æ¥ï¼š
    - å·¦å¤–è¿æ¥ï¼šæŸ¥è¯¢**å·¦è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®**
    - å³å¤–è¿æ¥ï¼šæŸ¥è¯¢**å³è¡¨æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®**
  - è‡ªè¿æ¥ï¼šå½“å‰è¡¨ä¸è‡ªèº«çš„è¿æ¥æŸ¥è¯¢ï¼Œè‡ªè¿æ¥å¿…é¡»ä½¿ç”¨è¡¨åˆ«å
- å­æŸ¥è¯¢

![image-20250413174259506](Mysql-Learning-Local.assets/image-20250413174259506.png)





## 5.3 ğŸŒŸå†…è¿æ¥

![image-20250413204152514](Mysql-Learning-Local.assets/image-20250413204152514.png)

![image-20250413174343726](Mysql-Learning-Local.assets/image-20250413174343726.png)

**å†…è¿æ¥æŸ¥è¯¢çš„æ˜¯==ä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†==çš„æ•°æ®ã€‚(ä¹Ÿå°±æ˜¯ç»¿è‰²éƒ¨åˆ†çš„æ•°æ®)**

å†…è¿æ¥çš„è¯­æ³•åˆ†ä¸ºä¸¤ç§: **éšå¼å†…è¿æ¥ã€æ˜¾å¼å†…è¿æ¥**ã€‚å…ˆæ¥å­¦ä¹ ä¸€ä¸‹å…·ä½“çš„è¯­æ³•ç»“æ„ã€‚



### ï¼ˆ1ï¼‰éšå¼å†…è¿æ¥

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 , è¡¨2 WHERE æ¡ä»¶ ... ;
```

### ï¼ˆ2ï¼‰æ˜¾å¼å†…è¿æ¥-inner join ... on ...

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 [ INNER ] JOIN è¡¨2 ON è¿æ¥æ¡ä»¶ ... ;
```



### ï¼ˆ3ï¼‰æ¡ˆä¾‹

#### A. æŸ¥è¯¢æ¯ä¸€ä¸ªå‘˜å·¥çš„å§“å , åŠå…³è”çš„éƒ¨é—¨çš„åç§° (**éšå¼å†…è¿æ¥å®ç°**)

- è¡¨ç»“æ„: emp , dept
- è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select emp.name , dept.name from emp , dept where emp.dept_id = dept.id ;

-- ä¸ºæ¯ä¸€å¼ è¡¨èµ·åˆ«å,ç®€åŒ–SQLç¼–å†™
select e.name,d.name from emp e , dept d where e.dept_id = d.id;
```

#### B. æŸ¥è¯¢æ¯ä¸€ä¸ªå‘˜å·¥çš„å§“å , åŠå…³è”çš„éƒ¨é—¨çš„åç§° (**æ˜¾å¼å†…è¿æ¥å®ç°**) --- INNER JOIN ...ON ...

- è¡¨ç»“æ„: emp , dept
- è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select e.name, d.name from emp e inner join dept d on e.dept_id = d.id;

-- ä¸ºæ¯ä¸€å¼ è¡¨èµ·åˆ«å,ç®€åŒ–SQLç¼–å†™
select e.name, d.name from emp e join dept d on e.dept_id = d.id;
```



> **==è¡¨çš„åˆ«å==**:
>
> â‘ . tablea as åˆ«å1 , tableb as åˆ«å2 ;
>
> â‘¡. tablea åˆ«å1 , tableb åˆ«å2 ;
>
> **æ³¨æ„äº‹é¡¹:**
>
> â€‹	**ä¸€æ—¦ä¸ºè¡¨èµ·äº†åˆ«åï¼Œå°±ä¸èƒ½å†ä½¿ç”¨è¡¨åæ¥æŒ‡å®šå¯¹åº”çš„å­—æ®µäº†**ï¼Œæ­¤æ—¶åªèƒ½å¤Ÿä½¿ç”¨åˆ«åæ¥æŒ‡å®šå­—
>
> æ®µã€‚





## 5.4 ğŸŒŸå¤–è¿æ¥

![image-20250413204255225](Mysql-Learning-Local.assets/image-20250413204255225.png)

![image-20250413193707265](Mysql-Learning-Local.assets/image-20250413193707265.png)

å¤–è¿æ¥åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š**å·¦å¤–è¿æ¥ å’Œ å³å¤–è¿æ¥**ã€‚å…·ä½“çš„è¯­æ³•ç»“æ„ä¸ºï¼š

### ï¼ˆ1ï¼‰å·¦å¤–è¿æ¥-left [outer] join

å·¦å¤–è¿æ¥ç›¸å½“äº**æŸ¥è¯¢è¡¨1(å·¦è¡¨)çš„æ‰€æœ‰æ•°æ®**ï¼Œå½“ç„¶ä¹Ÿ**åŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†**çš„æ•°æ®ã€‚

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 LEFT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ... ; 
```



### ï¼ˆ2ï¼‰å³å¤–è¿æ¥-right [outer] join

å³å¤–è¿æ¥ç›¸å½“äº**æŸ¥è¯¢è¡¨2(å³è¡¨)çš„æ‰€æœ‰æ•°æ®**ï¼Œå½“ç„¶ä¹Ÿ**åŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†**çš„æ•°æ®ã€‚

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨1 RIGHT [ OUTER ] JOIN è¡¨2 ON æ¡ä»¶ ... ; 
```



### ï¼ˆ3ï¼‰æ¡ˆä¾‹

#### A. æŸ¥è¯¢empè¡¨çš„æ‰€æœ‰æ•°æ®, å’Œå¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯

ç”±äºéœ€æ±‚ä¸­æåˆ°ï¼Œè¦**æŸ¥è¯¢empçš„æ‰€æœ‰æ•°æ®**ï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½å†…è¿æ¥æŸ¥è¯¢çš„ï¼Œéœ€è¦è€ƒè™‘**ä½¿ç”¨å¤–è¿æ¥æŸ¥è¯¢**ã€‚

- è¡¨ç»“æ„: emp, dept
- è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select e.*, d.name from emp e left outer join dept d on e.dept_id = d.id;

select e.*, d.name from emp e left join dept d on e.dept_id = d.id;
```

#### B. æŸ¥è¯¢deptè¡¨çš„æ‰€æœ‰æ•°æ®, å’Œå¯¹åº”çš„å‘˜å·¥ä¿¡æ¯(å³å¤–è¿æ¥)

ç”±äºéœ€æ±‚ä¸­æåˆ°ï¼Œè¦æŸ¥è¯¢**deptè¡¨çš„æ‰€æœ‰æ•°æ®**ï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½å†…è¿æ¥æŸ¥è¯¢çš„ï¼Œéœ€è¦è€ƒè™‘ä½¿ç”¨å¤–è¿æ¥æŸ¥è¯¢ã€‚

- è¡¨ç»“æ„: emp, dept
- è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select d.*, e.* from emp e right outer join dept d on e.dept_id = d.id;

select d.*, e.* from dept d left outer join emp e on e.dept_id = d.id;
```



> ==**æ³¨æ„äº‹é¡¹ï¼š**==
>
> å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥æ˜¯å¯ä»¥**==ç›¸äº’æ›¿æ¢==**çš„ï¼Œåªéœ€è¦**è°ƒæ•´**åœ¨è¿æ¥æŸ¥è¯¢æ—¶SQLä¸­ï¼Œè¡¨ç»“æ„çš„å…ˆåé¡º
>
> åºå°±å¯ä»¥äº†ã€‚è€Œæˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä½¿ç”¨æ—¶ï¼Œ**æ›´åå‘äºå·¦å¤–è¿æ¥**ã€‚





## 5.5 è‡ªè¿æ¥

### ï¼ˆ1ï¼‰è‡ªè¿æ¥æŸ¥è¯¢

è‡ªè¿æ¥æŸ¥è¯¢ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è‡ªå·±è¿æ¥è‡ªå·±ï¼Œä¹Ÿå°±æ˜¯æŠŠ**ä¸€å¼ è¡¨è¿æ¥æŸ¥è¯¢å¤šæ¬¡**ã€‚æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹è‡ªè¿æ¥çš„æŸ¥è¯¢è¯­æ³•ï¼š

è€Œå¯¹äºè‡ªè¿æ¥æŸ¥è¯¢ï¼Œ**==å¯ä»¥æ˜¯å†…è¿æ¥æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–è¿æ¥æŸ¥è¯¢==**ã€‚

#### â‘ æ¡ˆä¾‹

**A. æŸ¥è¯¢å‘˜å·¥ åŠå…¶ æ‰€å±é¢†å¯¼çš„åå­—**

è¡¨ç»“æ„: emp

```sql
select a.name , b.name from emp a , emp b where a.managerid = b.id;
```



**B. æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ emp åŠå…¶é¢†å¯¼çš„åå­— emp , å¦‚æœ==å‘˜å·¥æ²¡æœ‰é¢†å¯¼(Boss), ä¹Ÿéœ€è¦æŸ¥è¯¢å‡ºæ¥==**

è¡¨ç»“æ„: emp a , emp b

```sql
select a.name 'å‘˜å·¥', b.name 'é¢†å¯¼' from emp a left join emp b on a.managerid =
b.id;
```



> **æ³¨æ„äº‹é¡¹:**
>
> åœ¨è‡ªè¿æ¥æŸ¥è¯¢ä¸­ï¼Œ**==å¿…é¡»è¦ä¸ºè¡¨èµ·åˆ«å==**ï¼Œè¦ä¸ç„¶æˆ‘ä»¬ä¸æ¸…æ¥šæ‰€æŒ‡å®šçš„æ¡ä»¶ã€è¿”å›çš„å­—æ®µï¼Œåˆ°åº•
>
> æ˜¯å“ªä¸€å¼ è¡¨çš„å­—æ®µã€‚



### ï¼ˆ2ï¼‰è”åˆæŸ¥è¯¢-union/union all

![image-20250413205030176](Mysql-Learning-Local.assets/image-20250413205030176.png)

#### â‘ æ¦‚å¿µ

å¯¹äºunionæŸ¥è¯¢ï¼Œå°±æ˜¯æŠŠ**å¤šæ¬¡æŸ¥è¯¢çš„ç»“æœåˆå¹¶èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æŸ¥è¯¢ç»“æœé›†**ã€‚

```sql
SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨A ...

UNION [ ALL ]

SELECT å­—æ®µåˆ—è¡¨ FROM è¡¨B ....;
```

- å¯¹äºè”åˆæŸ¥è¯¢çš„å¤šå¼ è¡¨çš„**==åˆ—æ•°å¿…é¡»ä¿æŒä¸€è‡´==**ï¼Œ**==å­—æ®µç±»å‹ä¹Ÿéœ€è¦ä¿æŒä¸€è‡´==ã€‚**
- **==union all== ä¼šå°†å…¨éƒ¨çš„æ•°æ®ç›´æ¥åˆå¹¶åœ¨ä¸€èµ·**ï¼Œ**union ä¼š==å¯¹åˆå¹¶ä¹‹åçš„æ•°æ®å»é‡==**ã€‚

#### â‘¡æ¡ˆä¾‹

A. å°†è–ªèµ„ä½äº 5000 çš„å‘˜å·¥ , å’Œ å¹´é¾„å¤§äº 50 å²çš„å‘˜å·¥å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥.

å½“å‰å¯¹äºè¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å¤šæ¡ä»¶æŸ¥è¯¢ï¼Œä½¿ç”¨**é€»è¾‘è¿ç®—ç¬¦ or è¿æ¥**å³å¯ã€‚ é‚£è¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡**union/union allæ¥è”åˆæŸ¥è¯¢**.

```sql
select * from emp where salary < 5000
union all
select * from emp where age > 50;
```

![image-20250413195741993](Mysql-Learning-Local.assets/image-20250413195741993.png)

union allæŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼Œ**ä»…ä»…è¿›è¡Œç®€å•çš„åˆå¹¶ï¼Œå¹¶æœªå»é‡**ã€‚



```sql
select * from emp where salary < 5000
union
select * from emp where age > 50;
```

![image-20250413195749836](Mysql-Learning-Local.assets/image-20250413195749836.png)

union è”åˆæŸ¥è¯¢ï¼Œ**ä¼šå¯¹æŸ¥è¯¢å‡ºæ¥çš„ç»“æœè¿›è¡Œå»é‡å¤„ç†**ã€‚



> **æ³¨æ„ï¼š**
>
> å¦‚æœå¤šæ¡æŸ¥è¯¢è¯­å¥æŸ¥è¯¢å‡ºæ¥çš„ç»“æœï¼Œ**å­—æ®µæ•°é‡ä¸ä¸€è‡´**ï¼Œåœ¨è¿›è¡Œunion/union allè”åˆæŸ¥è¯¢æ—¶ï¼Œå°†ä¼šæŠ¥
>
> é”™ã€‚å¦‚ï¼š
>
> ![image-20250413195820215](Mysql-Learning-Local.assets/image-20250413195820215.png)





## 5.6 ğŸŒŸå­æŸ¥è¯¢-åµŒå¥—Selectè¯­å¥

### ï¼ˆ1ï¼‰æ¦‚è¿°

![image-20250413205152781](Mysql-Learning-Local.assets/image-20250413205152781.png)

#### â‘ æ¦‚å¿µ

SQLè¯­å¥ä¸­**==åµŒå¥—SELECTè¯­å¥==ï¼Œç§°ä¸ºåµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢**ã€‚

```sql
SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2 ); 
```

**å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯INSERT / UPDATE / DELETE / SELECT çš„ä»»ä½•ä¸€ä¸ª**ã€‚

#### â‘¡åˆ†ç±»

æ ¹æ®**å­æŸ¥è¯¢ç»“æœä¸åŒ**ï¼Œåˆ†ä¸ºï¼š

- A. æ ‡é‡å­æŸ¥è¯¢ï¼ˆ**å­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼**ï¼‰
- B. åˆ—å­æŸ¥è¯¢(å­æŸ¥è¯¢**ç»“æœä¸ºä¸€åˆ—**)
- C. è¡Œå­æŸ¥è¯¢(å­æŸ¥è¯¢**ç»“æœä¸ºä¸€è¡Œ**)
- D. è¡¨å­æŸ¥è¯¢(å­æŸ¥è¯¢ç»“æœä¸º**å¤šè¡Œå¤šåˆ—**)



æ ¹æ®å­æŸ¥è¯¢ä½ç½®ï¼Œåˆ†ä¸ºï¼š

- A. WHEREä¹‹å
- B. FROMä¹‹å
- C. SELECTä¹‹å



### ï¼ˆ2ï¼‰æ ‡é‡å­æŸ¥è¯¢

#### â‘ æ¦‚å¿µ

å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯**å•ä¸ªå€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰**ï¼Œæœ€ç®€å•çš„å½¢å¼ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸º**æ ‡é‡å­æŸ¥è¯¢**ã€‚

å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š= 	 <>	  > 	>= 	<	 <= 

#### â‘¡æ¡ˆä¾‹

##### **A. æŸ¥è¯¢ "é”€å”®éƒ¨" çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯**

å®Œæˆè¿™ä¸ªéœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†éœ€æ±‚åˆ†è§£ä¸ºä¸¤æ­¥ï¼š

â‘ . æŸ¥è¯¢ "é”€å”®éƒ¨" éƒ¨é—¨ID

```sql
select id from dept where name = 'é”€å”®éƒ¨'; 
```

â‘¡. æ ¹æ® "é”€å”®éƒ¨" éƒ¨é—¨ID, æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where dept_id = (select id from dept where name = 'é”€å”®éƒ¨'); 
```



##### **B. æŸ¥è¯¢åœ¨ "æ–¹ä¸œç™½" å…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯**

å®Œæˆè¿™ä¸ªéœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†éœ€æ±‚åˆ†è§£ä¸ºä¸¤æ­¥ï¼š

â‘ . æŸ¥è¯¢ æ–¹ä¸œç™½ çš„å…¥èŒæ—¥æœŸ

```sql
select entrydate from emp where name = 'æ–¹ä¸œç™½'; 
```

â‘¡. æŸ¥è¯¢æŒ‡å®šå…¥èŒæ—¥æœŸä¹‹åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where entrydate > (select entrydate from emp where name = 'æ–¹ä¸œç™½');
```



### ï¼ˆ3ï¼‰åˆ—å­æŸ¥è¯¢

![image-20250413205828834](Mysql-Learning-Local.assets/image-20250413205828834.png)

#### â‘ æ¦‚å¿µ

å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯**ä¸€åˆ—ï¼ˆå¯ä»¥æ˜¯å¤šè¡Œï¼‰**ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸º**åˆ—å­æŸ¥è¯¢**ã€‚

å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š**IN** ã€NOT IN ã€ **ANY** ã€**SOME** ã€ **ALL**

![image-20250413200544852](Mysql-Learning-Local.assets/image-20250413200544852.png)



#### â‘¡æ¡ˆä¾‹

##### A. æŸ¥è¯¢ "é”€å”®éƒ¨" å’Œ "å¸‚åœºéƒ¨" çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯

åˆ†è§£ä¸ºä»¥ä¸‹ä¸¤æ­¥:

â‘ . æŸ¥è¯¢ "é”€å”®éƒ¨" å’Œ "å¸‚åœºéƒ¨" çš„éƒ¨é—¨ID

```sql
select id from dept where name = 'é”€å”®éƒ¨' or name = 'å¸‚åœºéƒ¨';
```

â‘¡. æ ¹æ®éƒ¨é—¨ID, æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where dept_id in (select id from dept where name = 'é”€å”®éƒ¨' or
name = 'å¸‚åœºéƒ¨');
```



##### B. æŸ¥è¯¢æ¯” è´¢åŠ¡éƒ¨ ==æ‰€æœ‰äººå·¥èµ„éƒ½é«˜==çš„å‘˜å·¥ä¿¡æ¯

åˆ†è§£ä¸ºä»¥ä¸‹ä¸¤æ­¥:

â‘ . æŸ¥è¯¢æ‰€æœ‰ è´¢åŠ¡éƒ¨ äººå‘˜å·¥èµ„

```sql
select id from dept where name = 'è´¢åŠ¡éƒ¨';
select salary from emp where dept_id = (select id from dept where name = 'è´¢åŠ¡éƒ¨');
```

â‘¡. æ¯” è´¢åŠ¡éƒ¨ **æ‰€æœ‰äººå·¥èµ„éƒ½é«˜**çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where salary > all ( select salary from emp where dept_id =
(select id from dept where name = 'è´¢åŠ¡éƒ¨') );
```



##### C. æŸ¥è¯¢æ¯”ç ”å‘éƒ¨å…¶ä¸­==ä»»æ„ä¸€äººå·¥èµ„é«˜==çš„å‘˜å·¥ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯==æœ‰æ¯”ç ”å‘éƒ¨ä¸­çš„é«˜å°±è¡Œ==ï¼Œåªéœ€è¦æ»¡è¶³å…¶ä¸­ä»»æ„ä¸€ä¸ªï¼‰

åˆ†è§£ä¸ºä»¥ä¸‹ä¸¤æ­¥:

â‘ . æŸ¥è¯¢ç ”å‘éƒ¨æ‰€æœ‰äººå·¥èµ„

```sql
select salary from emp where dept_id = (select id from dept where name = 'ç ”å‘éƒ¨'); 
```

â‘¡. æ¯”ç ”å‘éƒ¨å…¶ä¸­ä»»æ„ä¸€äººå·¥èµ„é«˜çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where salary > any ( select salary from emp where dept_id =
(select id from dept where name = 'ç ”å‘éƒ¨') );
```



### ï¼ˆ4ï¼‰è¡Œå­æŸ¥è¯¢

#### â‘ æ¦‚å¿µ

å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯**ä¸€è¡Œï¼ˆå¯ä»¥æ˜¯å¤šåˆ—ï¼‰**ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸º**è¡Œå­æŸ¥è¯¢**ã€‚

å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š= ã€<> ã€IN ã€NOT IN



#### â‘¡æ¡ˆä¾‹

##### A. æŸ¥è¯¢ä¸ "å¼ æ— å¿Œ" çš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯ ;

è¿™ä¸ªéœ€æ±‚åŒæ ·å¯ä»¥æ‹†è§£ä¸ºä¸¤æ­¥è¿›è¡Œ:

â‘ . æŸ¥è¯¢ "å¼ æ— å¿Œ" çš„è–ªèµ„åŠç›´å±é¢†å¯¼

```sql
select salary, managerid from emp where name = 'å¼ æ— å¿Œ';
```

â‘¡. æŸ¥è¯¢ä¸ "å¼ æ— å¿Œ" çš„è–ªèµ„åŠç›´å±é¢†å¯¼ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯ ;

```sql
select * from emp where (salary,managerid) = (select salary, managerid from emp
where name = 'å¼ æ— å¿Œ');
```



### ï¼ˆ5ï¼‰è¡¨å­æŸ¥è¯¢

#### â‘ æ¦‚å¿µ

å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯**å¤šè¡Œå¤šåˆ—**ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸º**è¡¨å­æŸ¥è¯¢**ã€‚

å¸¸ç”¨çš„æ“ä½œç¬¦ï¼šIN



#### â‘¡æ¡ˆä¾‹

##### A. æŸ¥è¯¢ä¸ "é¹¿æ–å®¢" , "å®‹è¿œæ¡¥" çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯

åˆ†è§£ä¸ºä¸¤æ­¥æ‰§è¡Œ:

â‘ . æŸ¥è¯¢ "é¹¿æ–å®¢" , "å®‹è¿œæ¡¥" çš„èŒä½å’Œè–ªèµ„

```sql
select job, salary from emp where name = 'é¹¿æ–å®¢' or name = 'å®‹è¿œæ¡¥'; 
```

â‘¡. æŸ¥è¯¢ä¸ "é¹¿æ–å®¢" , "å®‹è¿œæ¡¥" çš„èŒä½å’Œè–ªèµ„ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where (job,salary) in ( select job, salary from emp where name =
'é¹¿æ–å®¢' or name = 'å®‹è¿œæ¡¥' );
```



##### B. æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯ "2006-01-01" ä¹‹åçš„å‘˜å·¥ä¿¡æ¯ , åŠå…¶éƒ¨é—¨ä¿¡æ¯

åˆ†è§£ä¸ºä¸¤æ­¥æ‰§è¡Œ:

â‘ . å…¥èŒæ—¥æœŸæ˜¯ "2006-01-01" ä¹‹åçš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where entrydate > '2006-01-01'; 
```

â‘¡. æŸ¥è¯¢è¿™éƒ¨åˆ†å‘˜å·¥, å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯;

```sql
select e.*, d.* from (select * from emp where entrydate > '2006-01-01') e left
join dept d on e.dept_id = d.id ;
```



## 5.7 å¤šè¡¨æŸ¥è¯¢æ¡ˆä¾‹

![image-20250413210333565](Mysql-Learning-Local.assets/image-20250413210333565.png)

**æ•°æ®ç¯å¢ƒå‡†å¤‡:**

```sql
create table salgrade(
    grade int,
    losal int,
    hisal int
) comment 'è–ªèµ„ç­‰çº§è¡¨';
insert into salgrade values (1,0,3000);
insert into salgrade values (2,3001,5000);
insert into salgrade values (3,5001,8000);
insert into salgrade values (4,8001,10000);
insert into salgrade values (5,10001,15000);
insert into salgrade values (6,15001,20000);
insert into salgrade values (7,20001,25000);
insert into salgrade values (8,25001,30000);
```

åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è¿ç”¨ä¸Šé¢æ‰€è®²è§£çš„å¤šè¡¨æŸ¥è¯¢çš„è¯­æ³•ï¼Œå®Œæˆä»¥ä¸‹çš„12ä¸ªéœ€æ±‚å³å¯ï¼Œè€Œè¿™é‡Œä¸»è¦æ¶‰åŠåˆ°çš„è¡¨å°±ä¸‰å¼ ï¼šempå‘˜å·¥è¡¨ã€deptéƒ¨é—¨è¡¨ã€salgradeè–ªèµ„ç­‰çº§è¡¨ ã€‚



### ï¼ˆ1ï¼‰æŸ¥è¯¢å‘˜å·¥çš„å§“åã€å¹´é¾„ã€èŒä½ã€éƒ¨é—¨ä¿¡æ¯ ï¼ˆéšå¼å†…è¿æ¥ï¼‰

è¡¨: emp , dept

è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select e.name , e.age , e.job , d.name from emp e , dept d where e.dept_id = d.id; 
```



### ï¼ˆ2ï¼‰æŸ¥è¯¢å¹´é¾„å°äº30å²çš„å‘˜å·¥çš„å§“åã€å¹´é¾„ã€èŒä½ã€éƒ¨é—¨ä¿¡æ¯ï¼ˆæ˜¾å¼å†…è¿æ¥ï¼‰

è¡¨: emp , dept

è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select e.name , e.age , e.job , d.name from emp e inner join dept d on e.dept_id =
d.id where e.age < 30;
```



### ï¼ˆ3ï¼‰æŸ¥è¯¢æ‹¥æœ‰å‘˜å·¥çš„éƒ¨é—¨IDã€éƒ¨é—¨åç§°

è¡¨: emp , dept

è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select distinct d.id , d.name from emp e , dept d where e.dept_id = d.id; 
```



### ï¼ˆ4ï¼‰ æŸ¥è¯¢æ‰€æœ‰å¹´é¾„å¤§äº40å²çš„å‘˜å·¥, åŠå…¶å½’å±çš„éƒ¨é—¨åç§°; å¦‚æœå‘˜å·¥æ²¡æœ‰åˆ†é…éƒ¨é—¨, ä¹Ÿéœ€è¦å±•ç¤ºå‡ºæ¥(å¤–è¿æ¥)

è¡¨: emp , dept

è¿æ¥æ¡ä»¶: emp.dept_id = dept.id

```sql
select e.*, d.name from emp e left join dept d on e.dept_id = d.id where e.age >
40 ;
```



### ï¼ˆ5ï¼‰ æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„ç­‰çº§

è¡¨: emp , salgrade

è¿æ¥æ¡ä»¶ : emp.salary >= salgrade.losal and emp.salary <= salgrade.hisal

```sql
-- æ–¹å¼ä¸€
select e.* , s.grade , s.losal, s.hisal from emp e , salgrade s where e.salary >=
s.losal and e.salary <= s.hisal;

-- æ–¹å¼äºŒ
select e.* , s.grade , s.losal, s.hisal from emp e , salgrade s where e.salary
between s.losal and s.hisal;
```



### ï¼ˆ6ï¼‰ æŸ¥è¯¢ "ç ”å‘éƒ¨" æ‰€æœ‰å‘˜å·¥çš„ä¿¡æ¯åŠ å·¥èµ„ç­‰çº§

è¡¨: emp , salgrade , dept

è¿æ¥æ¡ä»¶ : emp.salary between salgrade.losal and salgrade.hisal ,

emp.dept_id = dept.id

æŸ¥è¯¢æ¡ä»¶ : dept.name = 'ç ”å‘éƒ¨'

```sql
select e.* , s.grade from emp e , dept d , salgrade s where e.dept_id = d.id and (
e.salary between s.losal and s.hisal ) and d.name = 'ç ”å‘éƒ¨';
```



### ï¼ˆ7ï¼‰æŸ¥è¯¢ "ç ”å‘éƒ¨" å‘˜å·¥çš„å¹³å‡å·¥èµ„

è¡¨: emp , dept

è¿æ¥æ¡ä»¶ : emp.dept_id = dept.id

```sql
select avg(e.salary) from emp e, dept d where e.dept_id = d.id and d.name = 'ç ”å‘
éƒ¨';
```



### ï¼ˆ8ï¼‰æŸ¥è¯¢å·¥èµ„æ¯” "ç­ç»" é«˜çš„å‘˜å·¥ä¿¡æ¯

â‘ . æŸ¥è¯¢ "ç­ç»" çš„è–ªèµ„

```sql
select salary from emp where name = 'ç­ç»'; 
```

â‘¡. æŸ¥è¯¢æ¯”å¥¹å·¥èµ„é«˜çš„å‘˜å·¥æ•°æ®

```sql
select * from emp where salary > ( select salary from emp where name = 'ç­ç»' ); 
```



### ï¼ˆ9ï¼‰æŸ¥è¯¢æ¯”å¹³å‡è–ªèµ„é«˜çš„å‘˜å·¥ä¿¡æ¯

â‘ . æŸ¥è¯¢å‘˜å·¥çš„å¹³å‡è–ªèµ„

```sql
select avg(salary) from emp; 
```

â‘¡. æŸ¥è¯¢æ¯”å¹³å‡è–ªèµ„é«˜çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp where salary > ( select avg(salary) from emp ); 
```



### ï¼ˆ10ï¼‰==æŸ¥è¯¢ä½äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯==

â‘ . æŸ¥è¯¢æŒ‡å®šéƒ¨é—¨å¹³å‡è–ªèµ„

```sql
select avg(e1.salary) from emp e1 where e1.dept_id = 1;
select avg(e1.salary) from emp e1 where e1.dept_id = 2;
```

â‘¡. æŸ¥è¯¢ä½äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯

```sql
select * from emp e2 where e2.salary < ( select avg(e1.salary) from emp e1 where
e1.dept_id = e2.dept_id );
```



### ï¼ˆ11ï¼‰ æŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯, å¹¶ç»Ÿè®¡éƒ¨é—¨çš„å‘˜å·¥äººæ•°

```sql
select d.id, d.name , ( select count(*) from emp e where e.dept_id = d.id ) 'äººæ•°'
from dept d;
```



### ï¼ˆ12ï¼‰ æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„é€‰è¯¾æƒ…å†µ, å±•ç¤ºå‡ºå­¦ç”Ÿåç§°, å­¦å·, è¯¾ç¨‹åç§°

è¡¨: student , course , student_course

è¿æ¥æ¡ä»¶: student.id = student_course.studentid , course.id =

student_course.courseid

```sql
select s.name , s.no , c.name from student s , student_course sc , course c where
s.id = sc.studentid and sc.courseid = c.id ;
```



> å¤‡æ³¨: ä»¥ä¸Šéœ€æ±‚çš„å®ç°æ–¹å¼å¯èƒ½ä¼šå¾ˆå¤š, SQLå†™æ³•ä¹Ÿæœ‰å¾ˆå¤šï¼Œåªè¦èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼ŒæŸ¥è¯¢å‡ºç¬¦åˆæ¡ä»¶çš„è®°å½•å³å¯ã€‚



## 5.8 å°ç»“

![image-20250413211807941](Mysql-Learning-Local.assets/image-20250413211807941.png)



# 6ã€ğŸŒŸ  ==äº‹åŠ¡==

## **6.1** äº‹åŠ¡ç®€ä»‹

![image-20250413212026301](Mysql-Learning-Local.assets/image-20250413212026301.png)



äº‹åŠ¡ **æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆ**ï¼Œå®ƒ**æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½**ï¼Œäº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œ**==è¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥==**ã€‚

å°±æ¯”å¦‚: å¼ ä¸‰ç»™æå››è½¬è´¦1000å—é’±ï¼Œå¼ ä¸‰é“¶è¡Œè´¦æˆ·çš„é’±å‡å°‘1000ï¼Œè€Œæå››é“¶è¡Œè´¦æˆ·çš„é’±è¦å¢åŠ 1000ã€‚ è¿™ä¸€ç»„æ“ä½œå°±å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡çš„èŒƒå›´å†…ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚

![image-20250413212419744](Mysql-Learning-Local.assets/image-20250413212419744.png)

- **æ­£å¸¸æƒ…å†µ:** è½¬è´¦è¿™ä¸ªæ“ä½œ, éœ€è¦åˆ†ä¸ºä»¥ä¸‹è¿™ä¹ˆä¸‰æ­¥æ¥å®Œæˆ , ä¸‰æ­¥å®Œæˆä¹‹å, å¼ ä¸‰å‡å°‘1000, è€Œæå››

  å¢åŠ 1000, è½¬è´¦æˆåŠŸ :

- **å¼‚å¸¸æƒ…å†µ:** è½¬è´¦è¿™ä¸ªæ“ä½œ, ä¹Ÿæ˜¯åˆ†ä¸ºä»¥ä¸‹è¿™ä¹ˆä¸‰æ­¥æ¥å®Œæˆ , åœ¨æ‰§è¡Œç¬¬ä¸‰æ­¥æ˜¯æŠ¥é”™äº†, è¿™æ ·å°±å¯¼è‡´å¼ 

  ä¸‰å‡å°‘1000å—é’±, è€Œæå››çš„é‡‘é¢æ²¡å˜, è¿™æ ·å°±é€ æˆäº†æ•°æ®çš„ä¸ä¸€è‡´, å°±å‡ºç°é—®é¢˜äº†ã€‚

![image-20250413212456954](Mysql-Learning-Local.assets/image-20250413212456954.png)



ä¸ºäº†è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œå°±éœ€è¦é€šè¿‡æ•°æ®çš„äº‹åŠ¡æ¥å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸šåŠ¡é€»è¾‘æ‰§è¡Œä¹‹å‰å¼€å¯äº‹åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åæäº¤äº‹åŠ¡ã€‚**å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­æŠ¥é”™ï¼Œåˆ™å›æ»šäº‹åŠ¡ï¼ŒæŠŠæ•°æ®æ¢å¤åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚**

![image-20250413212507090](Mysql-Learning-Local.assets/image-20250413212507090.png)

> **æ³¨æ„ï¼š**  ==é»˜è®¤MySQLçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„==ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ‰§è¡Œå®Œä¸€æ¡DMLè¯­å¥æ—¶ï¼ŒMySQLä¼šç«‹å³éš
>
> å¼çš„æäº¤äº‹åŠ¡ã€‚



## 6.2 äº‹åŠ¡æ“ä½œ

**æ•°æ®å‡†å¤‡ï¼š**

```sql
drop table if exists account;
create table account(
    id int primary key AUTO_INCREMENT comment 'ID',
    name varchar(10) comment 'å§“å',
    money double(10,2) comment 'ä½™é¢'
) comment 'è´¦æˆ·è¡¨';
insert into account(name, money) VALUES ('å¼ ä¸‰',2000), ('æå››',2000);
```



### ï¼ˆ1ï¼‰æœªæ§åˆ¶äº‹åŠ¡

#### â‘ æµ‹è¯•æ­£å¸¸æƒ…å†µ

```sql
-- 1. æŸ¥è¯¢å¼ ä¸‰ä½™é¢
select * from account where name = 'å¼ ä¸‰';
-- 2. å¼ ä¸‰çš„ä½™é¢å‡å°‘1000
update account set money = money - 1000 where name = 'å¼ ä¸‰';
-- 3. æå››çš„ä½™é¢å¢åŠ 1000
update account set money = money + 1000 where name = 'æå››';
```

æµ‹è¯•å®Œæ¯•ä¹‹åæ£€æŸ¥æ•°æ®çš„çŠ¶æ€, å¯ä»¥çœ‹åˆ°æ•°æ®æ“ä½œå‰åæ˜¯ä¸€è‡´çš„ã€‚

![image-20250413213109632](Mysql-Learning-Local.assets/image-20250413213109632.png)

#### â‘¡æµ‹è¯•å¼‚å¸¸æƒ…å†µ

```sql
-- 1. æŸ¥è¯¢å¼ ä¸‰ä½™é¢
select * from account where name = 'å¼ ä¸‰';
-- 2. å¼ ä¸‰çš„ä½™é¢å‡å°‘1000
update account set money = money - 1000 where name = 'å¼ ä¸‰';
å‡ºé”™äº†....
-- 3. æå››çš„ä½™é¢å¢åŠ 1000
update account set money = money + 1000 where name = 'æå››';
```

æˆ‘ä»¬æŠŠæ•°æ®éƒ½æ¢å¤åˆ°2000ï¼Œ ç„¶åå†æ¬¡ä¸€æ¬¡æ€§æ‰§è¡Œä¸Šè¿°çš„SQLè¯­å¥(å‡ºé”™äº†.... è¿™å¥è¯ä¸ç¬¦åˆSQLè¯­æ³•,æ‰§è¡Œå°±ä¼šæŠ¥é”™)ï¼Œæ£€æŸ¥æœ€ç»ˆçš„æ•°æ®æƒ…å†µ, å‘ç°æ•°æ®åœ¨**æ“ä½œå‰åä¸ä¸€è‡´**äº†ã€‚

![image-20250413213118191](Mysql-Learning-Local.assets/image-20250413213118191.png)

### ï¼ˆ2ï¼‰æ§åˆ¶äº‹åŠ¡ä¸€

#### â‘ æŸ¥çœ‹/è®¾ç½®äº‹åŠ¡æäº¤æ–¹å¼

```sql
SELECT @@autocommit ; # ä¸º1è‡ªåŠ¨æäº¤ ; ä¸º0æ‰‹åŠ¨æäº¤

SET @@autocommit = 0  # è®¾ç½®ä¸ºæ‰‹åŠ¨æäº¤ï¼Œä¹‹åçš„ä»»ä½•æ“ä½œéƒ½éœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡Commit
```

#### â‘¡æäº¤äº‹åŠ¡

```sql
COMMIT;
```

#### â‘¢å›æ»šäº‹åŠ¡

```sql
ROLLBACK;
```

> **==æ³¨æ„==ï¼š**ä¸Šè¿°çš„è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ˜¯**ä¿®æ”¹äº†äº‹åŠ¡çš„è‡ªåŠ¨æäº¤è¡Œä¸º**, **æŠŠé»˜è®¤çš„è‡ªåŠ¨æäº¤ä¿®æ”¹ä¸ºäº†==æ‰‹åŠ¨æäº¤==**, æ­¤æ—¶æˆ‘ä»¬æ‰§è¡Œçš„DMLè¯­å¥éƒ½ä¸ä¼šæäº¤, éœ€è¦**æ‰‹åŠ¨çš„æ‰§è¡Œcommitè¿›è¡Œæäº¤**ã€‚



### ï¼ˆ3ï¼‰==æ§åˆ¶äº‹åŠ¡äºŒ==

![image-20250413214949654](Mysql-Learning-Local.assets/image-20250413214949654.png)

#### â‘ å¼€å¯äº‹åŠ¡

```sql
START TRANSACTION æˆ– BEGIN ;
```

#### â‘¡æäº¤äº‹åŠ¡

```sql
COMMIT;
```

#### â‘¢å›æ»šäº‹åŠ¡

```sql
ROLLBACK;
```

#### â‘£è½¬è´¦æ¡ˆä¾‹

```sql
-- å¼€å¯äº‹åŠ¡
start transaction
-- 1. æŸ¥è¯¢å¼ ä¸‰ä½™é¢
select * from account where name = 'å¼ ä¸‰';
-- 2. å¼ ä¸‰çš„ä½™é¢å‡å°‘1000
update account set money = money - 1000 where name = 'å¼ ä¸‰';
-- 3. æå››çš„ä½™é¢å¢åŠ 1000
update account set money = money + 1000 where name = 'æå››';
-- å¦‚æœæ­£å¸¸æ‰§è¡Œå®Œæ¯•, åˆ™æäº¤äº‹åŠ¡
commit;
-- å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­æŠ¥é”™, åˆ™å›æ»šäº‹åŠ¡
-- rollback;
```



## 6.3 ğŸŒŸ ==äº‹åŠ¡å››å¤§ç‰¹æ€§==-ACID

![image-20250413215458731](Mysql-Learning-Local.assets/image-20250413215458731.png)

- åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯**ä¸å¯åˆ†å‰²çš„æœ€å°æ“ä½œå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥**ã€‚
- ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿**æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€**ã€‚
- éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„**éš”ç¦»æœºåˆ¶**ï¼Œä¿è¯**äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œã€‚**
- æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼š**äº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»š**ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„**æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„**ã€‚

ä¸Šè¿°å°±æ˜¯äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼Œç®€ç§°ACIDã€‚

![image-20250413213602494](Mysql-Learning-Local.assets/image-20250413213602494.png)





## 6.4 ğŸŒŸ ==å¹¶å‘äº‹åŠ¡é—®é¢˜==

![image-20250413215607439](Mysql-Learning-Local.assets/image-20250413215607439.png)

1. **è„è¯»(Dirty Read)**ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®
2. **ä¸å¯é‡å¤è¯»(Non-repeatable Read)**ï¼šä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œä½†ç”±äºå…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹ï¼Œå¯¼è‡´å‰åè¯»å–çš„ç»“æœä¸ä¸€è‡´
3. **å¹»è¯»(Phantom Read)**ï¼šä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢åŒä¸€èŒƒå›´çš„æ•°æ®ï¼Œä½†ç”±äºå…¶ä»–äº‹åŠ¡çš„æ’å…¥æ“ä½œï¼Œå¯¼è‡´å‰åæŸ¥è¯¢ç»“æœçš„è¡Œæ•°ä¸ä¸€è‡´



### ï¼ˆ1ï¼‰*è„è¯»*

**èµƒè¯»ï¼šä¸€ä¸ªäº‹åŠ¡==è¯»åˆ°==å¦å¤–ä¸€ä¸ªäº‹åŠ¡==è¿˜æ²¡æœ‰æäº¤çš„æ•°æ®==ã€‚**

![image-20250413213615342](Mysql-Learning-Local.assets/image-20250413213615342.png)

æ¯”å¦‚B**è¯»å–åˆ°äº†Aæœªæäº¤çš„æ•°æ®**ã€‚



#### â‘ æ¯”å–»-ä¾¿äºç†è§£

**è„è¯» - è¯»åˆ°"è„"æ•°æ®**

**æ¯”å–»**ï¼šå°±åƒä½ å·çœ‹äº†åŒå­¦è¿˜æ²¡äº¤å·çš„ç­”æ¡ˆï¼Œä½†åæ¥è€å¸ˆå‘ç°ä»–åšé”™äº†ï¼ŒæŠŠç­”æ¡ˆæ”¹äº†ã€‚ä½ çœ‹åˆ°çš„æ˜¯"è„"çš„ã€æœªç¡®è®¤çš„ç­”æ¡ˆã€‚

**ä¾‹å­**ï¼š

- äº‹åŠ¡Aä¿®æ”¹äº†æŸæ¡è®°å½•ä½†æœªæäº¤
- äº‹åŠ¡Bè¯»å–äº†è¿™æ¡è¢«ä¿®æ”¹ä½†æœªæäº¤çš„è®°å½•
- äº‹åŠ¡Aå›æ»šäº†ä¿®æ”¹
- äº‹åŠ¡Bè¯»åˆ°çš„å°±æ˜¯æ— æ•ˆçš„"è„"æ•°æ®



### ï¼ˆ2ï¼‰*ä¸å¯é‡å¤è¯»*

**ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡==å…ˆåè¯»å–åŒä¸€æ¡è®°å½•==ï¼Œä½†==ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸åŒ==ï¼Œç§°ä¹‹ä¸ºä¸å¯é‡å¤è¯»ã€‚**

![image-20250413213712438](Mysql-Learning-Local.assets/image-20250413213712438.png)

äº‹åŠ¡Aä¸¤æ¬¡è¯»å–åŒä¸€æ¡è®°å½•ï¼Œä½†æ˜¯**è¯»å–åˆ°çš„æ•°æ®å´æ˜¯ä¸ä¸€æ ·**çš„ã€‚



#### â‘ æ¯”å–»

**ä¸å¯é‡å¤è¯» - åŒä¸€æ¬¡è€ƒè¯•ä¸­ç­”æ¡ˆå˜äº†**

**æ¯”å–»**ï¼šå°±åƒä½ è€ƒè¯•æ—¶æ£€æŸ¥åŒä¸€é“é¢˜ï¼Œç¬¬ä¸€æ¬¡é€‰Aï¼Œç¬¬äºŒæ¬¡çœ‹å˜æˆäº†Bï¼Œå› ä¸ºè€å¸ˆåœ¨ä½ æ£€æŸ¥æ—¶æ”¹äº†æ­£ç¡®ç­”æ¡ˆã€‚

**ä¾‹å­**ï¼š

- äº‹åŠ¡Aç¬¬ä¸€æ¬¡è¯»å–æ•°æ®ï¼Œå€¼ä¸º100
- äº‹åŠ¡Bä¿®æ”¹äº†è¯¥æ•°æ®ä¸º200å¹¶æäº¤
- äº‹åŠ¡Aå†æ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œå‘ç°å˜æˆäº†200
- åŒä¸€äº‹åŠ¡å†…ä¸¤æ¬¡è¯»å–ç»“æœä¸åŒ



### ï¼ˆ3ï¼‰*å¹»è¯»*

**å¹»è¯»ï¼šä¸€ä¸ªäº‹åŠ¡==æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æ•°æ®==æ—¶ï¼Œ==æ²¡æœ‰å¯¹åº”çš„æ•°æ®è¡Œ==ï¼Œä½†æ˜¯==åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œåˆå‘ç°è¿™è¡Œæ•°æ®å·²ç»å­˜åœ¨==ï¼Œ*å¥½åƒå‡ºç°äº† "å¹»å½±"*ã€‚**

![image-20250413213733729](Mysql-Learning-Local.assets/image-20250413213733729.png)



#### â‘ æ¯”å–»

 **å¹»è¯» - å‡­ç©ºå¤šå‡ºæ¥çš„è¡Œ**

**æ¯”å–»**ï¼šå°±åƒä½ æ•°æ•™å®¤é‡Œçš„äººæ•°ï¼Œç¬¬ä¸€æ¬¡æ•°æ˜¯10äººï¼Œä½å¤´è®°å½•åå†æŠ¬å¤´æ•°å˜æˆäº†11äººï¼Œå› ä¸ºæœ‰ä¸ªäººåœ¨ä½ ä½å¤´æ—¶æºœè¿›æ¥äº†ã€‚

**ä¾‹å­**ï¼š

- äº‹åŠ¡AæŸ¥è¯¢å¹´é¾„>30çš„å‘˜å·¥ï¼Œå¾—åˆ°5æ¡è®°å½•
- äº‹åŠ¡Bæ’å…¥äº†ä¸€ä¸ªå¹´é¾„35çš„æ–°å‘˜å·¥å¹¶æäº¤
- äº‹åŠ¡Aå†æ¬¡æŸ¥è¯¢å¹´é¾„>30çš„å‘˜å·¥ï¼Œå¾—åˆ°6æ¡è®°å½•
- å°±åƒå‡ºç°äº†"å¹»å½±è¡Œ"



### ï¼ˆ4ï¼‰æ€»ç»“

#### â‘ å¦‚ä½•è®°å¿†

- **è„è¯»**ï¼šè¯»åˆ°åˆ«äºº"æ²¡æ´—æ‰‹"(æœªæäº¤)çš„æ•°æ®
- **ä¸å¯é‡å¤è¯»**ï¼šåŒä¸€äº‹åŠ¡å†…"é‡å¤è¯»"ç»“æœä¸åŒ
- **å¹»è¯»**ï¼šåƒå¹»è§‰ä¸€æ ·å¤šå‡ºæˆ–å°‘äº†å‡ è¡Œæ•°æ®

#### â‘¡æ•°æ®åº“éš”ç¦»çº§åˆ«è§£å†³è¿™äº›é—®é¢˜

1. **è¯»æœªæäº¤(Read Uncommitted)**ï¼šä»€ä¹ˆéƒ½ä¸èƒ½é˜²æ­¢
2. **è¯»å·²æäº¤(Read Committed)**ï¼šé˜²æ­¢è„è¯»
3. **å¯é‡å¤è¯»(Repeatable Read)**ï¼šé˜²æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»
4. **ä¸²è¡ŒåŒ–(Serializable)**ï¼šé˜²æ­¢æ‰€æœ‰é—®é¢˜(ä½†æ€§èƒ½æœ€å·®)

MySQLçš„InnoDBåœ¨"å¯é‡å¤è¯»"çº§åˆ«ä¸‹é€šè¿‡MVCCæœºåˆ¶ä¹Ÿèƒ½é˜²æ­¢å¹»è¯»ã€‚



## 6.5 ğŸŒŸ ==äº‹åŠ¡éš”ç¦»çº§åˆ«==

**æ³¨æ„**ï¼š==**äº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œæ•°æ®è¶Šå®‰å…¨ï¼Œä½†æ˜¯æ€§èƒ½è¶Šä½**==ã€‚

### ï¼ˆ1ï¼‰äº‹åŠ¡éš”ç¦»çº§åˆ«

**ä¸ºäº†è§£å†³å¹¶å‘äº‹åŠ¡æ‰€å¼•å‘çš„é—®é¢˜ï¼Œåœ¨æ•°æ®åº“ä¸­å¼•å…¥äº†äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š**

1. **è¯»æœªæäº¤(Read Uncommitted)**ï¼šä»€ä¹ˆéƒ½ä¸èƒ½é˜²æ­¢
2. **è¯»å·²æäº¤(Read Committed)**ï¼šé˜²æ­¢è„è¯»
3. **å¯é‡å¤è¯»(Repeatable Read)**ï¼š**é˜²æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»**ï¼Œ==Mysqlçš„é»˜è®¤éš”ç¦»çº§åˆ«==
   1. MySQLçš„**InnoDBåœ¨"å¯é‡å¤è¯»"çº§åˆ«**ä¸‹é€šè¿‡**==MVCCæœºåˆ¶==**ä¹Ÿèƒ½**==é˜²æ­¢å¹»è¯»==**ã€‚
4. **ä¸²è¡ŒåŒ–(Serializable)**ï¼šé˜²æ­¢æ‰€æœ‰é—®é¢˜(ä½†æ€§èƒ½æœ€å·®)

![image-20250413213825473](Mysql-Learning-Local.assets/image-20250413213825473.png)



![image-20250413220153001](Mysql-Learning-Local.assets/image-20250413220153001.png)

### ï¼ˆ2ï¼‰æŸ¥çœ‹äº‹åŠ¡éš”ç¦»çº§åˆ«

```sql
SELECT @@TRANSACTION_ISOLATION;
```



### ï¼ˆ3ï¼‰è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«

```sql
SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL { READ UNCOMMITTED |
READ COMMITTED | REPEATABLE READ | SERIALIZABLE }
```



> **æ³¨æ„**ï¼š==**äº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œæ•°æ®è¶Šå®‰å…¨ï¼Œä½†æ˜¯æ€§èƒ½è¶Šä½**==ã€‚



## 6.6 å°ç»“

![image-20250413221043040](Mysql-Learning-Local.assets/image-20250413221043040.png)



# ----------------------------



# äºŒã€é«˜çº§ç¯‡

# 1ã€ğŸŒŸå­˜å‚¨å¼•æ“

## 1.1 MySQLä½“ç³»ç»“æ„

![image-20250413230423557](Mysql-Learning-Local.assets/image-20250413230423557.png)

![image-20250413224407264](Mysql-Learning-Local.assets/image-20250413224407264.png)

### ï¼ˆ1ï¼‰è¿æ¥å±‚

æœ€ä¸Šå±‚æ˜¯ä¸€äº›å®¢æˆ·ç«¯å’Œé“¾æ¥æœåŠ¡ï¼ŒåŒ…å«**æœ¬åœ°sock é€šä¿¡**å’Œå¤§å¤šæ•°åŸºäº**å®¢æˆ·ç«¯/æœåŠ¡ç«¯å·¥å…·å®ç°çš„ç±»**ä¼¼äºTCP/IPçš„é€šä¿¡ã€‚ä¸»è¦å®Œæˆä¸€äº›ç±»ä¼¼äº**è¿æ¥å¤„ç†ã€æˆæƒè®¤è¯ã€åŠç›¸å…³çš„å®‰å…¨æ–¹æ¡ˆ**ã€‚åœ¨è¯¥å±‚ä¸Šå¼•å…¥äº†**çº¿ç¨‹æ± **çš„æ¦‚å¿µï¼Œä¸ºé€šè¿‡è®¤è¯å®‰å…¨æ¥å…¥çš„å®¢æˆ·ç«¯æä¾›çº¿ç¨‹ã€‚åŒæ ·åœ¨è¯¥å±‚ä¸Šå¯ä»¥å®ç°åŸºäºSSLçš„å®‰å…¨é“¾æ¥ã€‚æœåŠ¡å™¨ä¹Ÿä¼šä¸ºå®‰å…¨æ¥å…¥çš„æ¯ä¸ªå®¢æˆ·ç«¯éªŒè¯å®ƒæ‰€å…·æœ‰çš„æ“ä½œæƒé™ã€‚



### ï¼ˆ2ï¼‰==æœåŠ¡å±‚==

ç¬¬äºŒå±‚æ¶æ„ä¸»è¦å®Œæˆå¤§å¤šæ•°çš„æ ¸å¿ƒæœåŠ¡åŠŸèƒ½ï¼Œå¦‚**SQLæ¥å£ï¼Œå¹¶å®Œæˆç¼“å­˜çš„æŸ¥è¯¢ï¼ŒSQLçš„åˆ†æå’Œä¼˜åŒ–ï¼Œéƒ¨åˆ†å†…ç½®å‡½æ•°çš„æ‰§è¡Œ**ã€‚æ‰€æœ‰è·¨å­˜å‚¨å¼•æ“çš„åŠŸèƒ½ä¹Ÿåœ¨è¿™ä¸€å±‚å®ç°ï¼Œå¦‚ è¿‡ç¨‹ã€å‡½æ•°ç­‰ã€‚åœ¨è¯¥å±‚ï¼ŒæœåŠ¡å™¨ä¼šè§£ææŸ¥è¯¢å¹¶**åˆ›å»ºç›¸åº”çš„å†…éƒ¨è§£ææ ‘**ï¼Œå¹¶å¯¹å…¶å®Œæˆç›¸åº”çš„ä¼˜åŒ–å¦‚ç¡®å®šè¡¨çš„æŸ¥è¯¢çš„é¡ºåºï¼Œæ˜¯å¦**åˆ©ç”¨ç´¢å¼•**ç­‰ï¼Œæœ€åç”Ÿæˆç›¸åº”çš„æ‰§è¡Œæ“ä½œã€‚å¦‚æœæ˜¯selectè¯­å¥ï¼ŒæœåŠ¡å™¨è¿˜ä¼šæŸ¥è¯¢å†…éƒ¨çš„ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ç©ºé—´è¶³å¤Ÿå¤§ï¼Œè¿™æ ·åœ¨è§£å†³å¤§é‡è¯»æ“ä½œçš„ç¯å¢ƒä¸­èƒ½å¤Ÿå¾ˆå¥½çš„æå‡ç³»ç»Ÿçš„æ€§èƒ½ã€‚



### ï¼ˆ3ï¼‰å¼•æ“å±‚

å­˜å‚¨å¼•æ“å±‚ï¼Œ å­˜å‚¨å¼•æ“çœŸæ­£çš„**è´Ÿè´£äº†MySQLä¸­æ•°æ®çš„å­˜å‚¨å’Œæå–**ï¼Œ**æœåŠ¡å™¨é€šè¿‡APIå’Œå­˜å‚¨å¼•æ“è¿›è¡Œé€šä¿¡**ã€‚ä¸åŒçš„å­˜å‚¨å¼•æ“å…·æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œæ¥é€‰å–åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚**==æ•°æ®åº“ä¸­çš„ç´¢å¼•æ˜¯åœ¨å­˜å‚¨å¼•æ“å±‚å®ç°çš„==**ã€‚



### ï¼ˆ4ï¼‰å­˜å‚¨å±‚

æ•°æ®å­˜å‚¨å±‚ï¼Œ ä¸»è¦æ˜¯å°†**æ•°æ®(å¦‚: redologã€undologã€æ•°æ®ã€ç´¢å¼•ã€äºŒè¿›åˆ¶æ—¥å¿—ã€é”™è¯¯æ—¥å¿—ã€æŸ¥è¯¢æ—¥å¿—ã€æ…¢æŸ¥è¯¢æ—¥å¿—ç­‰)å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Š**ï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’ã€‚



å’Œå…¶ä»–æ•°æ®åº“ç›¸æ¯”ï¼ŒMySQLæœ‰ç‚¹ä¸ä¼—ä¸åŒï¼Œå®ƒçš„æ¶æ„å¯ä»¥åœ¨å¤šç§ä¸åŒåœºæ™¯ä¸­åº”ç”¨å¹¶å‘æŒ¥è‰¯å¥½ä½œç”¨ã€‚ä¸»è¦  ä½“ç°åœ¨å­˜å‚¨å¼•æ“ä¸Šï¼Œ**æ’ä»¶å¼çš„å­˜å‚¨å¼•æ“æ¶æ„**ï¼Œ**å°†æŸ¥è¯¢å¤„ç†å’Œå…¶ä»–çš„ç³»ç»Ÿä»»åŠ¡ä»¥åŠæ•°æ®çš„å­˜å‚¨æå–åˆ†ç¦»**ã€‚ è¿™ç§æ¶æ„å¯ä»¥æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚å’Œå®é™…éœ€è¦**é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“**ã€‚



## 1.2 ==å­˜å‚¨å¼•æ“==ä»‹ç»

![image-20250413230608224](Mysql-Learning-Local.assets/image-20250413230608224.png)

### ï¼ˆ1ï¼‰æ¦‚å¿µ

![image-20250413224344442](Mysql-Learning-Local.assets/image-20250413224344442.png)

å¤§å®¶å¯èƒ½æ²¡æœ‰å¬è¯´è¿‡å­˜å‚¨å¼•æ“ï¼Œä½†æ˜¯ä¸€å®šå¬è¿‡å¼•æ“è¿™ä¸ªè¯ï¼Œå¼•æ“å°±æ˜¯å‘åŠ¨æœºï¼Œæ˜¯ä¸€ä¸ªæœºå™¨çš„æ ¸å¿ƒç»„ä»¶ã€‚æ¯”å¦‚ï¼Œå¯¹äºèˆ°è½½æœºã€ç›´å‡æœºã€ç«ç®­æ¥è¯´ï¼Œä»–ä»¬éƒ½æœ‰å„è‡ªçš„å¼•æ“ï¼Œæ˜¯ä»–ä»¬æœ€ä¸ºæ ¸å¿ƒçš„ç»„ä»¶ã€‚è€Œæˆ‘ä»¬åœ¨é€‰æ‹©å¼•æ“çš„æ—¶å€™ï¼Œéœ€è¦åœ¨åˆé€‚çš„åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ï¼Œå°±åƒåœ¨ç›´å‡æœºä¸Šï¼Œæˆ‘ä»¬ä¸èƒ½é€‰æ‹©èˆ°è½½æœºçš„å¼•æ“ä¸€æ ·ã€‚

è€Œå¯¹äºå­˜å‚¨å¼•æ“ï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œä»–æ˜¯**mysqlæ•°æ®åº“çš„æ ¸å¿ƒ**ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨åˆé€‚çš„åœºæ™¯é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚æ¥ä¸‹æ¥å°±æ¥ä»‹ç»ä¸€ä¸‹å­˜å‚¨å¼•æ“ã€‚**å­˜å‚¨å¼•æ“å°±æ˜¯å­˜å‚¨æ•°æ®ã€å»ºç«‹ç´¢å¼•ã€æ›´æ–°/æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹å¼** ã€‚**==å­˜å‚¨å¼•æ“æ˜¯åŸºäºè¡¨çš„ï¼Œè€Œä¸æ˜¯åŸºäºåº“çš„==**ï¼Œæ‰€ä»¥**==å­˜å‚¨å¼•æ“ä¹Ÿå¯è¢«ç§°ä¸ºè¡¨ç±»å‹==**ã€‚æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œæ¥æŒ‡å®šé€‰æ‹©çš„å­˜å‚¨å¼•æ“ï¼Œå¦‚æœ

**æ²¡æœ‰æŒ‡å®šå°†è‡ªåŠ¨é€‰æ‹©é»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚**



### ï¼ˆ2ï¼‰å»ºè¡¨æ—¶æŒ‡å®šå­˜å‚¨å¼•æ“

```sql
CREATE TABLE è¡¨å(
å­—æ®µ1 å­—æ®µ1ç±»å‹ [ COMMENT å­—æ®µ1æ³¨é‡Š ] ,
......
å­—æ®µn å­—æ®µnç±»å‹ [COMMENT å­—æ®µnæ³¨é‡Š ]
) ENGINE = INNODB [ COMMENT è¡¨æ³¨é‡Š ] ;
```

### ï¼ˆ3ï¼‰æŸ¥è¯¢å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“

```sql
show engines;
```

![image-20250413225129981](Mysql-Learning-Local.assets/image-20250413225129981.png)

### ï¼ˆ4ï¼‰ç¤ºä¾‹æ¼”ç¤º

#### A. æŸ¥è¯¢å»ºè¡¨è¯­å¥ --- é»˜è®¤å­˜å‚¨å¼•æ“: InnoDB

```sql
show create table account; 
```

![image-20250413225027030](Mysql-Learning-Local.assets/image-20250413225027030.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºè¡¨æ—¶ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šå­˜å‚¨ç–«æƒ…ï¼Œæ•°æ®åº“ä¹Ÿä¼š**è‡ªåŠ¨é€‰æ‹©é»˜è®¤çš„å­˜å‚¨å¼•æ“**ã€‚



#### B. æŸ¥è¯¢å½“å‰æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“

```sql
show engines ; 
```

![image-20250413225129981](Mysql-Learning-Local.assets/image-20250413225129981.png)

#### C. åˆ›å»ºè¡¨ my_myisam , å¹¶æŒ‡å®šMyISAMå­˜å‚¨å¼•æ“

```sql
create table my_myisam(
    id int,
    name varchar(10)
) engine = MyISAM ;
```

#### D. åˆ›å»ºè¡¨ my_memory , æŒ‡å®šMemoryå­˜å‚¨å¼•æ“

```sql
create table my_memory(
    id int,
    name varchar(10)
) engine = Memory ;
```



## 1.3 ğŸŒŸ ==å­˜å‚¨å¼•æ“ç‰¹ç‚¹==

ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä»€ä¹ˆæ˜¯å­˜å‚¨å¼•æ“ï¼Œä»¥åŠå¦‚ä½•åœ¨å»ºè¡¨æ—¶å¦‚ä½•æŒ‡å®šå­˜å‚¨å¼•æ“ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹æ¥ä¸Šé¢é‡ç‚¹æåˆ°çš„**ä¸‰ç§å­˜å‚¨å¼•æ“ InnoDBã€MyISAMã€Memoryçš„ç‰¹ç‚¹**ã€‚

### ï¼ˆ1ï¼‰ğŸŒŸ ==InnoDB==

![image-20250413231002320](Mysql-Learning-Local.assets/image-20250413231002320.png)

#### â‘ ä»‹ç»

**InnoDBæ˜¯ä¸€ç§å…¼é¡¾é«˜å¯é æ€§å’Œé«˜æ€§èƒ½çš„é€šç”¨å­˜å‚¨å¼•æ“**ï¼Œåœ¨ MySQL 5.5 ä¹‹åï¼ŒInnoDBæ˜¯é»˜è®¤çš„MySQL å­˜å‚¨å¼•æ“ã€‚



#### â‘¡ç‰¹ç‚¹

- DML(å¢åˆ æ”¹)æ“ä½œéµå¾ªACIDæ¨¡å‹ï¼Œæ”¯æŒäº‹åŠ¡ï¼›
- **è¡Œçº§é”ï¼Œæé«˜å¹¶å‘è®¿é—®æ€§èƒ½**ï¼›
- æ”¯æŒå¤–é”®FOREIGN KEYçº¦æŸï¼Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ï¼›



#### â‘¢æ–‡ä»¶

xxx.ibdï¼šxxxä»£è¡¨çš„æ˜¯è¡¨åï¼ŒinnoDBå¼•æ“çš„æ¯å¼ è¡¨éƒ½ä¼šå¯¹åº”è¿™æ ·ä¸€ä¸ª**==è¡¨ç©ºé—´æ–‡ä»¶==**ï¼Œå­˜å‚¨è¯¥è¡¨çš„è¡¨ç»“æ„ï¼ˆ**frm-æ—©æœŸçš„ ã€sdi-æ–°ç‰ˆçš„**ï¼‰ã€**æ•°æ®å’Œç´¢å¼•**ã€‚

å‚æ•°ï¼šinnodb_file_per_table

```sql
show variables like 'innodb_file_per_table';
```

![image-20250413230158517](Mysql-Learning-Local.assets/image-20250413230158517.png)

å¦‚æœ**è¯¥å‚æ•°å¼€å¯**ï¼Œä»£è¡¨å¯¹äºInnoDBå¼•æ“çš„è¡¨ï¼Œ**æ¯ä¸€å¼ è¡¨éƒ½å¯¹åº”ä¸€ä¸ªibdæ–‡ä»¶**ã€‚ æˆ‘ä»¬ç›´æ¥æ‰“å¼€MySQLçš„æ•°æ®å­˜æ”¾ç›®å½•ï¼š C:\ProgramData\MySQL\MySQL Server 8.0\Data ï¼Œ è¿™ä¸ªç›®å½•ä¸‹æœ‰å¾ˆå¤šæ–‡ä»¶å¤¹ï¼Œ**ä¸åŒçš„æ–‡ä»¶å¤¹ä»£è¡¨ä¸åŒçš„æ•°æ®åº“**ï¼Œæˆ‘ä»¬ç›´æ¥æ‰“å¼€itcastæ–‡ä»¶å¤¹ã€‚

![image-20250413230347011](Mysql-Learning-Local.assets/image-20250413230347011.png)

å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰å¾ˆå¤šçš„ibdæ–‡ä»¶ï¼Œæ¯ä¸€ä¸ªibdæ–‡ä»¶å°±å¯¹åº”ä¸€å¼ è¡¨ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬æœ‰ä¸€å¼ è¡¨ accountï¼Œå°±æœ‰è¿™æ ·çš„ä¸€ä¸ªaccount.ibdæ–‡ä»¶ï¼Œè€Œåœ¨è¿™ä¸ªibdæ–‡ä»¶ä¸­ä¸ä»…å­˜æ”¾è¡¨ç»“æ„ã€æ•°æ®ï¼Œè¿˜ä¼šå­˜æ”¾è¯¥è¡¨å¯¹åº”çš„ç´¢å¼•ä¿¡æ¯ã€‚ è€Œè¯¥æ–‡ä»¶æ˜¯åŸºäºäºŒè¿›åˆ¶å­˜å‚¨çš„ï¼Œä¸èƒ½ç›´æ¥åŸºäºè®°äº‹æœ¬æ‰“å¼€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨**mysqlæä¾›çš„ä¸€ä¸ªæŒ‡ä»¤ ibd2sdi** ï¼Œé€šè¿‡è¯¥æŒ‡ä»¤å°±å¯ä»¥ä»ibdæ–‡ä»¶ä¸­æå–sdiä¿¡æ¯ï¼Œè€Œsdiæ•°æ®å­—å…¸ä¿¡æ¯ä¸­å°±åŒ…å«è¯¥è¡¨çš„è¡¨ç»“æ„ã€‚

```bash
idb2sdi account.ibd #è¿”å›ä¸€ä¸ªJSONæ•°æ®
```

![image-20250413230330296](Mysql-Learning-Local.assets/image-20250413230330296.png)



#### â‘£é€»è¾‘å­˜å‚¨ç»“æ„

![image-20250413231202493](Mysql-Learning-Local.assets/image-20250413231202493.png)



- è¡¨ç©ºé—´ : InnoDBå­˜å‚¨å¼•æ“é€»è¾‘ç»“æ„çš„æœ€é«˜å±‚ï¼Œ**ibdæ–‡ä»¶å…¶å®å°±æ˜¯è¡¨ç©ºé—´æ–‡ä»¶**ï¼Œåœ¨è¡¨ç©ºé—´ä¸­å¯ä»¥åŒ…å«**å¤šä¸ªSegmentæ®µ**ã€‚
- æ®µ : è¡¨ç©ºé—´æ˜¯ç”±å„ä¸ªæ®µç»„æˆçš„ï¼Œ å¸¸è§çš„æ®µæœ‰**æ•°æ®æ®µã€ç´¢å¼•æ®µã€å›æ»šæ®µ**ç­‰ã€‚InnoDBä¸­å¯¹äºæ®µçš„ç®¡ç†ï¼Œéƒ½æ˜¯å¼•æ“è‡ªèº«å®Œæˆï¼Œä¸éœ€è¦äººä¸ºå¯¹å…¶æ§åˆ¶ï¼Œä¸€ä¸ªæ®µä¸­åŒ…å«å¤šä¸ªåŒºã€‚
- åŒº : åŒºæ˜¯è¡¨ç©ºé—´çš„å•å…ƒç»“æ„ï¼Œ**æ¯ä¸ªåŒºçš„å¤§å°ä¸º1M**ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ InnoDB**å­˜å‚¨å¼•æ“é¡µå¤§å°ä¸º16K**ï¼Œ **==å³ä¸€ä¸ªåŒºä¸­ä¸€å…±æœ‰64ä¸ªè¿ç»­çš„é¡µ==**ã€‚
- é¡µ : **==é¡µæ˜¯ç»„æˆåŒºçš„æœ€å°å•å…ƒ==**ï¼Œ**é¡µä¹Ÿæ˜¯**InnoDB **å­˜å‚¨å¼•æ“ç£ç›˜ç®¡ç†çš„æœ€å°å•å…ƒ**ï¼Œæ¯ä¸ªé¡µçš„å¤§å°é»˜è®¤ä¸º 16KBã€‚ä¸ºäº†ä¿è¯é¡µçš„è¿ç»­æ€§ï¼ŒInnoDB å­˜å‚¨å¼•æ“**æ¯æ¬¡ä»ç£ç›˜ç”³è¯· 4-5 ä¸ªåŒº**ã€‚
- è¡Œ : **InnoDB å­˜å‚¨å¼•æ“æ˜¯é¢å‘è¡Œçš„**ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®æ˜¯æŒ‰è¡Œè¿›è¡Œå­˜æ”¾çš„ï¼Œåœ¨æ¯ä¸€è¡Œä¸­é™¤äº†å®šä¹‰è¡¨æ—¶æ‰€æŒ‡å®šçš„å­—æ®µä»¥å¤–ï¼Œè¿˜åŒ…å«**ä¸¤ä¸ªéšè—å­—æ®µ**ï¼ˆåé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰
  - Trx id : æœ€åä¸€æ¬¡æ“ä½œçš„äº‹åŠ¡Id 
  - Roll pointer ï¼šæŒ‡é’ˆ



### ï¼ˆ2ï¼‰MyISAM

![image-20250413231612947](Mysql-Learning-Local.assets/image-20250413231612947.png)

#### â‘ ä»‹ç»

MyISAMæ˜¯MySQLæ—©æœŸçš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚

#### â‘¡ç‰¹ç‚¹

- ä¸æ”¯æŒäº‹åŠ¡ï¼Œä¸æ”¯æŒå¤–é”®
- **æ”¯æŒè¡¨é”ï¼Œä¸æ”¯æŒè¡Œé”**
- è®¿é—®é€Ÿåº¦å¿«

#### â‘¢æ–‡ä»¶

- xxx.sdiï¼š**å­˜å‚¨è¡¨ç»“æ„**ä¿¡æ¯
- xxx.MYD: å­˜å‚¨**æ•°æ®**
- xxx.MYI: å­˜å‚¨**ç´¢å¼•**

 ![image-20250413230502451](Mysql-Learning-Local.assets/image-20250413230502451.png)



### ï¼ˆ3ï¼‰Memory

![image-20250413231655565](Mysql-Learning-Local.assets/image-20250413231655565.png)

#### â‘ ä»‹ç»

Memoryå¼•æ“çš„è¡¨æ•°æ®æ—¶å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œç”±äºå—åˆ°ç¡¬ä»¶é—®é¢˜ã€æˆ–æ–­ç”µé—®é¢˜çš„å½±å“ï¼Œåªèƒ½å°†è¿™äº›è¡¨ä½œä¸ºä¸´æ—¶è¡¨æˆ–ç¼“å­˜ä½¿ç”¨ã€‚

#### â‘¡ç‰¹ç‚¹

- å†…å­˜å­˜æ”¾
-  hashç´¢å¼•ï¼ˆé»˜è®¤ï¼‰

#### â‘¢æ–‡ä»¶

xxx.sdiï¼š**å­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯**



### ï¼ˆ4ï¼‰==åŒºåˆ«åŠç‰¹ç‚¹==

![image-20250413231743167](Mysql-Learning-Local.assets/image-20250413231743167.png)

![image-20250413225914459](Mysql-Learning-Local.assets/image-20250413225914459.png)



> **é¢è¯•é¢˜:**
>
> InnoDBå¼•æ“ä¸MyISAMå¼•æ“çš„åŒºåˆ« ?
>
> - â‘ InnoDBå¼•æ“, **æ”¯æŒäº‹åŠ¡, è€ŒMyISAMä¸æ”¯æŒ**ã€‚
> - â‘¡InnoDBå¼•æ“, **æ”¯æŒè¡Œé”å’Œè¡¨é”, è€ŒMyISAMä»…æ”¯æŒè¡¨é”, ä¸æ”¯æŒè¡Œé”**ã€‚
> - â‘¢InnoDBå¼•æ“, **æ”¯æŒå¤–é”®, è€ŒMyISAMæ˜¯ä¸æ”¯æŒçš„**ã€‚
>
> ä¸»è¦æ˜¯ä¸Šè¿°ä¸‰ç‚¹åŒºåˆ«ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»ç´¢å¼•ç»“æ„ã€å­˜å‚¨é™åˆ¶ç­‰æ–¹é¢ï¼Œæ›´åŠ æ·±å…¥çš„å›ç­”ï¼Œå…·ä½“å‚
>
> è€ƒå¦‚ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š
>
> **https://dev.mysql.com/doc/refman/8.0/en/innodb-introduction.html**
>
> **https://dev.mysql.com/doc/refman/8.0/en/myisam-storage-engine.html**



## 1.4 å­˜å‚¨å¼•æ“é€‰æ‹©

![image-20250413231918750](Mysql-Learning-Local.assets/image-20250413231918750.png)

åœ¨é€‰æ‹©å­˜å‚¨å¼•æ“æ—¶ï¼Œåº”è¯¥æ ¹æ®åº”ç”¨ç³»ç»Ÿçš„ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“ã€‚å¯¹äºå¤æ‚çš„åº”ç”¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©å¤šç§å­˜å‚¨å¼•æ“è¿›è¡Œç»„åˆã€‚

- InnoDB: æ˜¯Mysqlçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œ**æ”¯æŒäº‹åŠ¡ã€å¤–é”®**ã€‚å¦‚æœ**åº”ç”¨å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚**ï¼Œ**åœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®æ“ä½œé™¤äº†æ’å…¥å’ŒæŸ¥è¯¢ä¹‹å¤–ï¼Œè¿˜åŒ…å«å¾ˆå¤šçš„æ›´æ–°ã€åˆ é™¤æ“ä½œ**ï¼Œé‚£ä¹ˆInnoDBå­˜å‚¨å¼•æ“æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ã€‚
- MyISAM ï¼š å¦‚æœåº”ç”¨æ˜¯**ä»¥è¯»æ“ä½œå’Œæ’å…¥æ“ä½œä¸ºä¸»**ï¼Œåªæœ‰å¾ˆå°‘çš„æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œé‚£ä¹ˆé€‰æ‹©è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚**ï¼ˆè¯¥åœºæ™¯å¯ç”¨NoSQLæ•°æ®åº“ï¼Œ==MongoDB==ï¼‰**
- MEMORYï¼š**å°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­**ï¼Œ**è®¿é—®é€Ÿåº¦å¿«ï¼Œé€šå¸¸ç”¨äºä¸´æ—¶è¡¨åŠç¼“å­˜**ã€‚MEMORYçš„ç¼ºé™·å°±æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸”**æ— æ³•ä¿éšœæ•°æ®çš„å®‰å…¨æ€§**ã€‚**ï¼ˆè¯¥åœºæ™¯å¯ç”¨==Redis==æ›¿ä»£ï¼‰**



## 1.5 å°ç»“

![image-20250413232209058](Mysql-Learning-Local.assets/image-20250413232209058.png)















































































































